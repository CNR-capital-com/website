/*! grapesjs - 0.21.13 */
!function(t,e){'object'==typeof exports&&'object'==typeof module?module.exports=e():'function'==typeof define&&define.amd?define([],e):'object'==typeof exports?exports["grapesjs"]=e():t["grapesjs"]=e()}('undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:this,(()=>(()=>{var t={921:(t,e,n)=>{"use strict";var o,i;1&&(o=[n(94),n(838),n(600)],void 0===(i=function(t,e,n){return function(t,e,n){var o=function(e,n){return t.js_beautify(e,n)};return o.js=t.js_beautify,o.css=e.css_beautify,o.html=n.html_beautify,o.js_beautify=t.js_beautify,o.css_beautify=e.css_beautify,o.html_beautify=n.html_beautify,o}(t,e,n)}.apply(e,o))||(t.exports=i))},838:(t,e)=>{var n;!function(){var o;!function(){"use strict";var t=[,,function(t){function e(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function n(t,e){this.__cache=[''],this.__indent_size=t.indent_size,this.__indent_string=t.indent_char,t.indent_with_tabs||(this.__indent_string=new Array(t.indent_size+1).join(t.indent_char)),e=e||'',t.indent_level>0&&(e=new Array(t.indent_level+1).join(this.__indent_string)),this.__base_string=e,this.__base_string_length=e.length}function o(t,o){this.__indent_cache=new n(t,o),this.raw=!1,this._end_with_newline=t.end_with_newline,this.indent_size=t.indent_size,this.wrap_line_length=t.wrap_line_length,this.indent_empty_lines=t.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new e(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}e.prototype.clone_empty=function(){var t=new e(this.__parent);return t.set_indent(this.__indent_count,this.__alignment_count),t},e.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]},e.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1},e.prototype.set_indent=function(t,e){this.is_empty()&&(this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},e.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},e.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},e.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var t=this.__parent.current_line;return t.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),t.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),t.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===t.__items[0]&&(t.__items.splice(0,1),t.__character_count-=1),!0}return!1},e.prototype.is_empty=function(){return 0===this.__items.length},e.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},e.prototype.push=function(t){this.__items.push(t);var e=t.lastIndexOf('\n');-1!==e?this.__character_count=t.length-e:this.__character_count+=t.length},e.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t},e.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},e.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},e.prototype.trim=function(){for(;' '===this.last();)this.__items.pop(),this.__character_count-=1},e.prototype.toString=function(){var t='';return this.is_empty()?this.__parent.indent_empty_lines&&(t=this.__parent.get_indent_string(this.__indent_count)):(t=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),t+=this.__items.join('')),t},n.prototype.get_indent_size=function(t,e){var n=this.__base_string_length;return e=e||0,t<0&&(n=0),n+=t*this.__indent_size,n+=e},n.prototype.get_indent_string=function(t,e){var n=this.__base_string;return e=e||0,t<0&&(t=0,n=''),e+=t*this.__indent_size,this.__ensure_cache(e),n+=this.__cache[e]},n.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__add_column()},n.prototype.__add_column=function(){var t=this.__cache.length,e=0,n='';this.__indent_size&&t>=this.__indent_size&&(t-=(e=Math.floor(t/this.__indent_size))*this.__indent_size,n=new Array(e+1).join(this.__indent_string)),t&&(n+=new Array(t+1).join(' ')),this.__cache.push(n)},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(t,e){return this.__indent_cache.get_indent_string(t,e)},o.prototype.get_indent_size=function(t,e){return this.__indent_cache.get_indent_size(t,e)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(t){return!(this.is_empty()||!t&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},o.prototype.get_code=function(t){this.trim(!0);var e=this.current_line.pop();e&&('\n'===e[e.length-1]&&(e=e.replace(/\n+$/g,'')),this.current_line.push(e)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join('\n');return'\n'!==t&&(n=n.replace(/[\n]/g,t)),n},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.next_line.set_indent(t,e),this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(t.whitespace_before),this.current_line.push(t.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(t){this.__add_space_before_token(),this.current_line.push(t),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(' '))},o.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t]._remove_indent(),t++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(t){for(t=void 0!==t&&t,this.current_line.trim();t&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(t,n){for(var o=this.__lines.length-2;o>=0;){var i=this.__lines[o];if(i.is_empty())break;if(0!==i.item(0).indexOf(t)&&i.item(-1)!==n){this.__lines.splice(o+1,0,new e(this)),this.previous_line=this.__lines[this.__lines.length-2];break}o--}},t.exports.Output=o},,,,function(t){function e(t,e){this.raw_options=n(t,e),this.disabled=this._get_boolean('disabled'),this.eol=this._get_characters('eol','auto'),this.end_with_newline=this._get_boolean('end_with_newline'),this.indent_size=this._get_number('indent_size',4),this.indent_char=this._get_characters('indent_char',' '),this.indent_level=this._get_number('indent_level'),this.preserve_newlines=this._get_boolean('preserve_newlines',!0),this.max_preserve_newlines=this._get_number('max_preserve_newlines',32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean('indent_with_tabs','\t'===this.indent_char),this.indent_with_tabs&&(this.indent_char='\t',1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number('wrap_line_length',this._get_number('max_char')),this.indent_empty_lines=this._get_boolean('indent_empty_lines'),this.templating=this._get_selection_list('templating',['auto','none','django','erb','handlebars','php','smarty'],['auto'])}function n(t,e){var n,i={};for(n in t=o(t))n!==e&&(i[n]=t[n]);if(e&&t[e])for(n in t[e])i[n]=t[e][n];return i}function o(t){var e,n={};for(e in t){n[e.replace(/-/g,"_")]=t[e]}return n}e.prototype._get_array=function(t,e){var n=this.raw_options[t],o=e||[];return'object'==typeof n?null!==n&&'function'==typeof n.concat&&(o=n.concat()):'string'==typeof n&&(o=n.split(/[^a-zA-Z0-9_\/\-]+/)),o},e.prototype._get_boolean=function(t,e){var n=this.raw_options[t];return void 0===n?!!e:!!n},e.prototype._get_characters=function(t,e){var n=this.raw_options[t],o=e||'';return'string'==typeof n&&(o=n.replace(/\\r/,'\r').replace(/\\n/,'\n').replace(/\\t/,'\t')),o},e.prototype._get_number=function(t,e){var n=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var o=parseInt(n,10);return isNaN(o)&&(o=e),o},e.prototype._get_selection=function(t,e,n){var o=this._get_selection_list(t,e,n);if(1!==o.length)throw new Error("Invalid Option Value: The option '"+t+"' can only be one of the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return o[0]},e.prototype._get_selection_list=function(t,e,n){if(!e||0===e.length)throw new Error("Selection list cannot be empty.");if(n=n||[e[0]],!this._is_valid_selection(n,e))throw new Error("Invalid Default Value!");var o=this._get_array(t,n);if(!this._is_valid_selection(o,e))throw new Error("Invalid Option Value: The option '"+t+"' can contain only the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return o},e.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some((function(t){return-1===e.indexOf(t)}))},t.exports.Options=e,t.exports.normalizeOpts=o,t.exports.mergeOpts=n},,function(t){var e=RegExp.prototype.hasOwnProperty('sticky');function n(t){this.__input=t||'',this.__input_length=this.__input.length,this.__position=0}n.prototype.restart=function(){this.__position=0},n.prototype.back=function(){this.__position>0&&(this.__position-=1)},n.prototype.hasNext=function(){return this.__position<this.__input_length},n.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t},n.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e},n.prototype.__match=function(t,n){t.lastIndex=n;var o=t.exec(this.__input);return!o||e&&t.sticky||o.index!==n&&(o=null),o},n.prototype.test=function(t,e){return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&!!this.__match(t,e)},n.prototype.testChar=function(t,e){var n=this.peek(e);return t.lastIndex=0,null!==n&&t.test(n)},n.prototype.match=function(t){var e=this.__match(t,this.__position);return e?this.__position+=e[0].length:e=null,e},n.prototype.read=function(t,e,n){var o,i='';return t&&(o=this.match(t))&&(i+=o[0]),!e||!o&&t||(i+=this.readUntil(e,n)),i},n.prototype.readUntil=function(t,e){var n,o=this.__position;t.lastIndex=this.__position;var i=t.exec(this.__input);return i?(o=i.index,e&&(o+=i[0].length)):o=this.__input_length,n=this.__input.substring(this.__position,o),this.__position=o,n},n.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)},n.prototype.get_regexp=function(t,n){var o=null,i='g';return n&&e&&(i='y'),"string"==typeof t&&''!==t?o=new RegExp(t,i):t&&(o=new RegExp(t.source,i)),o},n.prototype.get_literal_regexp=function(t){return RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&'))},n.prototype.peekUntilAfter=function(t){var e=this.__position,n=this.readUntilAfter(t);return this.__position=e,n},n.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t},t.exports.InputScanner=n},,,,,function(t){function e(t,e){t='string'==typeof t?t:t.source,e='string'==typeof e?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,'g'),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(t+/\sbeautify\signore:end\s/.source+e,'g')}e.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(t);n;)e[n[1]]=n[2],n=this.__directive_pattern.exec(t);return e},e.prototype.readIgnored=function(t){return t.readUntilAfter(this.__directives_end_ignore_pattern)},t.exports.Directives=e},,function(t,e,n){var o=n(16).Beautifier,i=n(17).Options;t.exports=function(t,e){return new o(t,e).beautify()},t.exports.defaultOptions=function(){return new i}},function(t,e,n){var o=n(17).Options,i=n(2).Output,r=n(8).InputScanner,s=new(0,n(13).Directives)(/\/\*/,/\*\//),a=/\r\n|[\r\n]/,l=/\r\n|[\r\n]/g,c=/\s/,u=/(?:\s|\n)+/g,h=/\/\*(?:[\s\S]*?)((?:\*\/)|$)/g,p=/\/\/(?:[^\n\r\u2028\u2029]*)/g;function d(t,e){this._source_text=t||'',this._options=new o(e),this._ch=null,this._input=null,this.NESTED_AT_RULE={page:!0,"font-face":!0,keyframes:!0,media:!0,supports:!0,document:!0},this.CONDITIONAL_GROUP_RULE={media:!0,supports:!0,document:!0},this.NON_SEMICOLON_NEWLINE_PROPERTY=["grid-template-areas","grid-template"]}d.prototype.eatString=function(t){var e='';for(this._ch=this._input.next();this._ch;){if(e+=this._ch,"\\"===this._ch)e+=this._input.next();else if(-1!==t.indexOf(this._ch)||"\n"===this._ch)break;this._ch=this._input.next()}return e},d.prototype.eatWhitespace=function(t){for(var e=c.test(this._input.peek()),n=0;c.test(this._input.peek());)this._ch=this._input.next(),t&&'\n'===this._ch&&(0===n||n<this._options.max_preserve_newlines)&&(n++,this._output.add_new_line(!0));return e},d.prototype.foundNestedPseudoClass=function(){for(var t=0,e=1,n=this._input.peek(e);n;){if("{"===n)return!0;if('('===n)t+=1;else if(')'===n){if(0===t)return!1;t-=1}else if(";"===n||"}"===n)return!1;e++,n=this._input.peek(e)}return!1},d.prototype.print_string=function(t){this._output.set_indent(this._indentLevel),this._output.non_breaking_space=!0,this._output.add_token(t)},d.prototype.preserveSingleSpace=function(t){t&&(this._output.space_before_token=!0)},d.prototype.indent=function(){this._indentLevel++},d.prototype.outdent=function(){this._indentLevel>0&&this._indentLevel--},d.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;'auto'===e&&(e='\n',t&&a.test(t||'')&&(e=t.match(a)[0]));var n=(t=t.replace(l,'\n')).match(/^[\t ]*/)[0];this._output=new i(this._options,n),this._input=new r(t),this._indentLevel=0,this._nestedLevel=0,this._ch=null;for(var o,d,f=0,g=!1,m=!1,v=!1,y=!1,_=!1,O=this._ch,b=!1;1&&(o=''!==this._input.read(u),d=O,this._ch=this._input.next(),'\\'===this._ch&&this._input.hasNext()&&(this._ch+=this._input.next()),O=this._ch,this._ch);)if('/'===this._ch&&'*'===this._input.peek()){this._output.add_new_line(),this._input.back();var w=this._input.read(h),x=s.get_directives(w);x&&'start'===x.ignore&&(w+=s.readIgnored(this._input)),this.print_string(w),this.eatWhitespace(!0),this._output.add_new_line()}else if('/'===this._ch&&'/'===this._input.peek())this._output.space_before_token=!0,this._input.back(),this.print_string(this._input.read(p)),this.eatWhitespace(!0);else if('$'===this._ch){this.preserveSingleSpace(o),this.print_string(this._ch);var S=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);S.match(/[ :]$/)&&(S=this.eatString(": ").replace(/\s+$/,''),this.print_string(S),this._output.space_before_token=!0),0===f&&-1!==S.indexOf(':')&&(m=!0,this.indent())}else if('@'===this._ch)if(this.preserveSingleSpace(o),'{'===this._input.peek())this.print_string(this._ch+this.eatString('}'));else{this.print_string(this._ch);var k=this._input.peekUntilAfter(/[: ,;{}()[\]\/='"]/g);k.match(/[ :]$/)&&(k=this.eatString(": ").replace(/\s+$/,''),this.print_string(k),this._output.space_before_token=!0),0===f&&-1!==k.indexOf(':')?(m=!0,this.indent()):k in this.NESTED_AT_RULE?(this._nestedLevel+=1,k in this.CONDITIONAL_GROUP_RULE&&(v=!0)):0!==f||m||(y=!0)}else if('#'===this._ch&&'{'===this._input.peek())this.preserveSingleSpace(o),this.print_string(this._ch+this.eatString('}'));else if('{'===this._ch)m&&(m=!1,this.outdent()),y=!1,v?(v=!1,g=this._indentLevel>=this._nestedLevel):g=this._indentLevel>=this._nestedLevel-1,this._options.newline_between_rules&&g&&this._output.previous_line&&'{'!==this._output.previous_line.item(-1)&&this._output.ensure_empty_line_above('/',','),this._output.space_before_token=!0,'expand'===this._options.brace_style?(this._output.add_new_line(),this.print_string(this._ch),this.indent(),this._output.set_indent(this._indentLevel)):('('===d?this._output.space_before_token=!1:','!==d&&this.indent(),this.print_string(this._ch)),this.eatWhitespace(!0),this._output.add_new_line();else if('}'===this._ch)this.outdent(),this._output.add_new_line(),'{'===d&&this._output.trim(!0),m&&(this.outdent(),m=!1),this.print_string(this._ch),g=!1,this._nestedLevel&&this._nestedLevel--,this.eatWhitespace(!0),this._output.add_new_line(),this._options.newline_between_rules&&!this._output.just_added_blankline()&&'}'!==this._input.peek()&&this._output.add_new_line(!0),')'===this._input.peek()&&(this._output.trim(!0),"expand"===this._options.brace_style&&this._output.add_new_line(!0));else if(":"===this._ch){for(var P=0;P<this.NON_SEMICOLON_NEWLINE_PROPERTY.length;P++)if(this._input.lookBack(this.NON_SEMICOLON_NEWLINE_PROPERTY[P])){b=!0;break}!g&&!v||this._input.lookBack("&")||this.foundNestedPseudoClass()||this._input.lookBack("(")||y||0!==f?(this._input.lookBack(" ")&&(this._output.space_before_token=!0),":"===this._input.peek()?(this._ch=this._input.next(),this.print_string("::")):this.print_string(':')):(this.print_string(':'),m||(m=!0,this._output.space_before_token=!0,this.eatWhitespace(!0),this.indent()))}else if('"'===this._ch||'\''===this._ch){var C='"'===d||'\''===d;this.preserveSingleSpace(C||o),this.print_string(this._ch+this.eatString(this._ch)),this.eatWhitespace(!0)}else if(';'===this._ch)b=!1,0===f?(m&&(this.outdent(),m=!1),y=!1,this.print_string(this._ch),this.eatWhitespace(!0),'/'!==this._input.peek()&&this._output.add_new_line()):(this.print_string(this._ch),this.eatWhitespace(!0),this._output.space_before_token=!0);else if('('===this._ch)if(this._input.lookBack("url"))this.print_string(this._ch),this.eatWhitespace(),f++,this.indent(),this._ch=this._input.next(),')'===this._ch||'"'===this._ch||'\''===this._ch?this._input.back():this._ch&&(this.print_string(this._ch+this.eatString(')')),f&&(f--,this.outdent()));else{var T=!1;this._input.lookBack("with")&&(T=!0),this.preserveSingleSpace(o||T),this.print_string(this._ch),m&&"$"===d&&this._options.selector_separator_newline?(this._output.add_new_line(),_=!0):(this.eatWhitespace(),f++,this.indent())}else if(')'===this._ch)f&&(f--,this.outdent()),_&&";"===this._input.peek()&&this._options.selector_separator_newline&&(_=!1,this.outdent(),this._output.add_new_line()),this.print_string(this._ch);else if(','===this._ch)this.print_string(this._ch),this.eatWhitespace(!0),!this._options.selector_separator_newline||m&&!_||0!==f||y?this._output.space_before_token=!0:this._output.add_new_line();else if('>'!==this._ch&&'+'!==this._ch&&'~'!==this._ch||m||0!==f)if(']'===this._ch)this.print_string(this._ch);else if('['===this._ch)this.preserveSingleSpace(o),this.print_string(this._ch);else if('='===this._ch)this.eatWhitespace(),this.print_string('='),c.test(this._ch)&&(this._ch='');else if('!'!==this._ch||this._input.lookBack("\\")){var E='"'===d||'\''===d;this.preserveSingleSpace(E||o),this.print_string(this._ch),!this._output.just_added_newline()&&'\n'===this._input.peek()&&b&&this._output.add_new_line()}else this._output.space_before_token=!0,this.print_string(this._ch);else this._options.space_around_combinator?(this._output.space_before_token=!0,this.print_string(this._ch),this._output.space_before_token=!0):(this.print_string(this._ch),this.eatWhitespace(),this._ch&&c.test(this._ch)&&(this._ch=''));return this._output.get_code(e)},t.exports.Beautifier=d},function(t,e,n){var o=n(6).Options;function i(t){o.call(this,t,'css'),this.selector_separator_newline=this._get_boolean('selector_separator_newline',!0),this.newline_between_rules=this._get_boolean('newline_between_rules',!0);var e=this._get_boolean('space_around_selector_separator');this.space_around_combinator=this._get_boolean('space_around_combinator')||e;var n=this._get_selection_list('brace_style',['collapse','expand','end-expand','none','preserve-inline']);this.brace_style='collapse';for(var i=0;i<n.length;i++)'expand'!==n[i]?this.brace_style='collapse':this.brace_style=n[i]}i.prototype=new o,t.exports.Options=i}],e={};var n=function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}(15);o=n}();var i=o;1&&(void 0===(n=function(){return{css_beautify:i}}.apply(e,[]))||(t.exports=n))}()},600:(t,e,n)=>{var o,i;!function(){var r;!function(){"use strict";var t=[,,function(t){function e(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function n(t,e){this.__cache=[''],this.__indent_size=t.indent_size,this.__indent_string=t.indent_char,t.indent_with_tabs||(this.__indent_string=new Array(t.indent_size+1).join(t.indent_char)),e=e||'',t.indent_level>0&&(e=new Array(t.indent_level+1).join(this.__indent_string)),this.__base_string=e,this.__base_string_length=e.length}function o(t,o){this.__indent_cache=new n(t,o),this.raw=!1,this._end_with_newline=t.end_with_newline,this.indent_size=t.indent_size,this.wrap_line_length=t.wrap_line_length,this.indent_empty_lines=t.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new e(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}e.prototype.clone_empty=function(){var t=new e(this.__parent);return t.set_indent(this.__indent_count,this.__alignment_count),t},e.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]},e.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1},e.prototype.set_indent=function(t,e){this.is_empty()&&(this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},e.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},e.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},e.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var t=this.__parent.current_line;return t.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),t.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),t.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===t.__items[0]&&(t.__items.splice(0,1),t.__character_count-=1),!0}return!1},e.prototype.is_empty=function(){return 0===this.__items.length},e.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},e.prototype.push=function(t){this.__items.push(t);var e=t.lastIndexOf('\n');-1!==e?this.__character_count=t.length-e:this.__character_count+=t.length},e.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t},e.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},e.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},e.prototype.trim=function(){for(;' '===this.last();)this.__items.pop(),this.__character_count-=1},e.prototype.toString=function(){var t='';return this.is_empty()?this.__parent.indent_empty_lines&&(t=this.__parent.get_indent_string(this.__indent_count)):(t=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),t+=this.__items.join('')),t},n.prototype.get_indent_size=function(t,e){var n=this.__base_string_length;return e=e||0,t<0&&(n=0),n+=t*this.__indent_size,n+=e},n.prototype.get_indent_string=function(t,e){var n=this.__base_string;return e=e||0,t<0&&(t=0,n=''),e+=t*this.__indent_size,this.__ensure_cache(e),n+=this.__cache[e]},n.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__add_column()},n.prototype.__add_column=function(){var t=this.__cache.length,e=0,n='';this.__indent_size&&t>=this.__indent_size&&(t-=(e=Math.floor(t/this.__indent_size))*this.__indent_size,n=new Array(e+1).join(this.__indent_string)),t&&(n+=new Array(t+1).join(' ')),this.__cache.push(n)},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(t,e){return this.__indent_cache.get_indent_string(t,e)},o.prototype.get_indent_size=function(t,e){return this.__indent_cache.get_indent_size(t,e)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(t){return!(this.is_empty()||!t&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},o.prototype.get_code=function(t){this.trim(!0);var e=this.current_line.pop();e&&('\n'===e[e.length-1]&&(e=e.replace(/\n+$/g,'')),this.current_line.push(e)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join('\n');return'\n'!==t&&(n=n.replace(/[\n]/g,t)),n},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.next_line.set_indent(t,e),this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(t.whitespace_before),this.current_line.push(t.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(t){this.__add_space_before_token(),this.current_line.push(t),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(' '))},o.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t]._remove_indent(),t++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(t){for(t=void 0!==t&&t,this.current_line.trim();t&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(t,n){for(var o=this.__lines.length-2;o>=0;){var i=this.__lines[o];if(i.is_empty())break;if(0!==i.item(0).indexOf(t)&&i.item(-1)!==n){this.__lines.splice(o+1,0,new e(this)),this.previous_line=this.__lines[this.__lines.length-2];break}o--}},t.exports.Output=o},function(t){t.exports.Token=function(t,e,n,o){this.type=t,this.text=e,this.comments_before=null,this.newlines=n||0,this.whitespace_before=o||'',this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},,,function(t){function e(t,e){this.raw_options=n(t,e),this.disabled=this._get_boolean('disabled'),this.eol=this._get_characters('eol','auto'),this.end_with_newline=this._get_boolean('end_with_newline'),this.indent_size=this._get_number('indent_size',4),this.indent_char=this._get_characters('indent_char',' '),this.indent_level=this._get_number('indent_level'),this.preserve_newlines=this._get_boolean('preserve_newlines',!0),this.max_preserve_newlines=this._get_number('max_preserve_newlines',32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean('indent_with_tabs','\t'===this.indent_char),this.indent_with_tabs&&(this.indent_char='\t',1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number('wrap_line_length',this._get_number('max_char')),this.indent_empty_lines=this._get_boolean('indent_empty_lines'),this.templating=this._get_selection_list('templating',['auto','none','django','erb','handlebars','php','smarty'],['auto'])}function n(t,e){var n,i={};for(n in t=o(t))n!==e&&(i[n]=t[n]);if(e&&t[e])for(n in t[e])i[n]=t[e][n];return i}function o(t){var e,n={};for(e in t){n[e.replace(/-/g,"_")]=t[e]}return n}e.prototype._get_array=function(t,e){var n=this.raw_options[t],o=e||[];return'object'==typeof n?null!==n&&'function'==typeof n.concat&&(o=n.concat()):'string'==typeof n&&(o=n.split(/[^a-zA-Z0-9_\/\-]+/)),o},e.prototype._get_boolean=function(t,e){var n=this.raw_options[t];return void 0===n?!!e:!!n},e.prototype._get_characters=function(t,e){var n=this.raw_options[t],o=e||'';return'string'==typeof n&&(o=n.replace(/\\r/,'\r').replace(/\\n/,'\n').replace(/\\t/,'\t')),o},e.prototype._get_number=function(t,e){var n=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var o=parseInt(n,10);return isNaN(o)&&(o=e),o},e.prototype._get_selection=function(t,e,n){var o=this._get_selection_list(t,e,n);if(1!==o.length)throw new Error("Invalid Option Value: The option '"+t+"' can only be one of the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return o[0]},e.prototype._get_selection_list=function(t,e,n){if(!e||0===e.length)throw new Error("Selection list cannot be empty.");if(n=n||[e[0]],!this._is_valid_selection(n,e))throw new Error("Invalid Default Value!");var o=this._get_array(t,n);if(!this._is_valid_selection(o,e))throw new Error("Invalid Option Value: The option '"+t+"' can contain only the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return o},e.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some((function(t){return-1===e.indexOf(t)}))},t.exports.Options=e,t.exports.normalizeOpts=o,t.exports.mergeOpts=n},,function(t){var e=RegExp.prototype.hasOwnProperty('sticky');function n(t){this.__input=t||'',this.__input_length=this.__input.length,this.__position=0}n.prototype.restart=function(){this.__position=0},n.prototype.back=function(){this.__position>0&&(this.__position-=1)},n.prototype.hasNext=function(){return this.__position<this.__input_length},n.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t},n.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e},n.prototype.__match=function(t,n){t.lastIndex=n;var o=t.exec(this.__input);return!o||e&&t.sticky||o.index!==n&&(o=null),o},n.prototype.test=function(t,e){return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&!!this.__match(t,e)},n.prototype.testChar=function(t,e){var n=this.peek(e);return t.lastIndex=0,null!==n&&t.test(n)},n.prototype.match=function(t){var e=this.__match(t,this.__position);return e?this.__position+=e[0].length:e=null,e},n.prototype.read=function(t,e,n){var o,i='';return t&&(o=this.match(t))&&(i+=o[0]),!e||!o&&t||(i+=this.readUntil(e,n)),i},n.prototype.readUntil=function(t,e){var n,o=this.__position;t.lastIndex=this.__position;var i=t.exec(this.__input);return i?(o=i.index,e&&(o+=i[0].length)):o=this.__input_length,n=this.__input.substring(this.__position,o),this.__position=o,n},n.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)},n.prototype.get_regexp=function(t,n){var o=null,i='g';return n&&e&&(i='y'),"string"==typeof t&&''!==t?o=new RegExp(t,i):t&&(o=new RegExp(t.source,i)),o},n.prototype.get_literal_regexp=function(t){return RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&'))},n.prototype.peekUntilAfter=function(t){var e=this.__position,n=this.readUntilAfter(t);return this.__position=e,n},n.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t},t.exports.InputScanner=n},function(t,e,n){var o=n(8).InputScanner,i=n(3).Token,r=n(10).TokenStream,s=n(11).WhitespacePattern,a={START:'TK_START',RAW:'TK_RAW',EOF:'TK_EOF'},l=function(t,e){this._input=new o(t),this._options=e||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new s(this._input)};l.prototype.tokenize=function(){var t;this._input.restart(),this.__tokens=new r,this._reset();for(var e=new i(a.START,''),n=null,o=[],s=new r;e.type!==a.EOF;){for(t=this._get_next_token(e,n);this._is_comment(t);)s.add(t),t=this._get_next_token(e,n);s.isEmpty()||(t.comments_before=s,s=new r),t.parent=n,this._is_opening(t)?(o.push(n),n=t):n&&this._is_closing(t,n)&&(t.opened=n,n.closed=t,n=o.pop(),t.parent=n),t.previous=e,e.next=t,this.__tokens.add(t),e=t}return this.__tokens},l.prototype._is_first_token=function(){return this.__tokens.isEmpty()},l.prototype._reset=function(){},l.prototype._get_next_token=function(t,e){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(a.RAW,n):this._create_token(a.EOF,'')},l.prototype._is_comment=function(t){return!1},l.prototype._is_opening=function(t){return!1},l.prototype._is_closing=function(t,e){return!1},l.prototype._create_token=function(t,e){return new i(t,e,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},l.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},t.exports.Tokenizer=l,t.exports.TOKEN=a},function(t){function e(t){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=t}e.prototype.restart=function(){this.__position=0},e.prototype.isEmpty=function(){return 0===this.__tokens_length},e.prototype.hasNext=function(){return this.__position<this.__tokens_length},e.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__tokens[this.__position],this.__position+=1),t},e.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__tokens_length&&(e=this.__tokens[t]),e},e.prototype.add=function(t){this.__parent_token&&(t.parent=this.__parent_token),this.__tokens.push(t),this.__tokens_length+=1},t.exports.TokenStream=e},function(t,e,n){var o=n(12).Pattern;function i(t,e){o.call(this,t,e),e?this._line_regexp=this._input.get_regexp(e._line_regexp):this.__set_whitespace_patterns('',''),this.newline_count=0,this.whitespace_before_token=''}i.prototype=new o,i.prototype.__set_whitespace_patterns=function(t,e){t+='\\t ',e+='\\n\\r',this._match_pattern=this._input.get_regexp('['+t+e+']+',!0),this._newline_regexp=this._input.get_regexp('\\r\\n|['+e+']')},i.prototype.read=function(){this.newline_count=0,this.whitespace_before_token='';var t=this._input.read(this._match_pattern);if(' '===t)this.whitespace_before_token=' ';else if(t){var e=this.__split(this._newline_regexp,t);this.newline_count=e.length-1,this.whitespace_before_token=e[this.newline_count]}return t},i.prototype.matching=function(t,e){var n=this._create();return n.__set_whitespace_patterns(t,e),n._update(),n},i.prototype._create=function(){return new i(this._input,this)},i.prototype.__split=function(t,e){t.lastIndex=0;for(var n=0,o=[],i=t.exec(e);i;)o.push(e.substring(n,i.index)),n=i.index+i[0].length,i=t.exec(e);return n<e.length?o.push(e.substring(n,e.length)):o.push(''),o},t.exports.WhitespacePattern=i},function(t){function e(t,e){this._input=t,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,e&&(this._starting_pattern=this._input.get_regexp(e._starting_pattern,!0),this._match_pattern=this._input.get_regexp(e._match_pattern,!0),this._until_pattern=this._input.get_regexp(e._until_pattern),this._until_after=e._until_after)}e.prototype.read=function(){var t=this._input.read(this._starting_pattern);return this._starting_pattern&&!t||(t+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),t},e.prototype.read_match=function(){return this._input.match(this._match_pattern)},e.prototype.until_after=function(t){var e=this._create();return e._until_after=!0,e._until_pattern=this._input.get_regexp(t),e._update(),e},e.prototype.until=function(t){var e=this._create();return e._until_after=!1,e._until_pattern=this._input.get_regexp(t),e._update(),e},e.prototype.starting_with=function(t){var e=this._create();return e._starting_pattern=this._input.get_regexp(t,!0),e._update(),e},e.prototype.matching=function(t){var e=this._create();return e._match_pattern=this._input.get_regexp(t,!0),e._update(),e},e.prototype._create=function(){return new e(this._input,this)},e.prototype._update=function(){},t.exports.Pattern=e},function(t){function e(t,e){t='string'==typeof t?t:t.source,e='string'==typeof e?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,'g'),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(t+/\sbeautify\signore:end\s/.source+e,'g')}e.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(t);n;)e[n[1]]=n[2],n=this.__directive_pattern.exec(t);return e},e.prototype.readIgnored=function(t){return t.readUntilAfter(this.__directives_end_ignore_pattern)},t.exports.Directives=e},function(t,e,n){var o=n(12).Pattern,i={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function r(t,e){o.call(this,t,e),this.__template_pattern=null,this._disabled=Object.assign({},i),this._excluded=Object.assign({},i),e&&(this.__template_pattern=this._input.get_regexp(e.__template_pattern),this._excluded=Object.assign(this._excluded,e._excluded),this._disabled=Object.assign(this._disabled,e._disabled));var n=new o(t);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/),smarty:n.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:n.starting_with(/{\*/).until_after(/\*}/),smarty_literal:n.starting_with(/{literal}/).until_after(/{\/literal}/)}}r.prototype=new o,r.prototype._create=function(){return new r(this._input,this)},r.prototype._update=function(){this.__set_templated_pattern()},r.prototype.disable=function(t){var e=this._create();return e._disabled[t]=!0,e._update(),e},r.prototype.read_options=function(t){var e=this._create();for(var n in i)e._disabled[n]=-1===t.templating.indexOf(n);return e._update(),e},r.prototype.exclude=function(t){var e=this._create();return e._excluded[t]=!0,e._update(),e},r.prototype.read=function(){var t='';t=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var e=this._read_template();e;)this._match_pattern?e+=this._input.read(this._match_pattern):e+=this._input.readUntil(this.__template_pattern),t+=e,e=this._read_template();return this._until_after&&(t+=this._input.readUntilAfter(this._until_pattern)),t},r.prototype.__set_templated_pattern=function(){var t=[];this._disabled.php||t.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||t.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||t.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(t.push(this.__patterns.django._starting_pattern.source),t.push(this.__patterns.django_value._starting_pattern.source),t.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||t.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&t.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp('(?:'+t.join('|')+')')},r.prototype._read_template=function(){var t='',e=this._input.peek();if('<'===e){var n=this._input.peek(1);this._disabled.php||this._excluded.php||'?'!==n||(t=t||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||'%'!==n||(t=t||this.__patterns.erb.read())}else'{'===e&&(this._disabled.handlebars||this._excluded.handlebars||(t=(t=(t=t||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(t=t||this.__patterns.django_value.read()),this._excluded.django||(t=(t=t||this.__patterns.django_comment.read())||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(t=(t=(t=t||this.__patterns.smarty_comment.read())||this.__patterns.smarty_literal.read())||this.__patterns.smarty.read()));return t},t.exports.TemplatablePattern=r},,,,function(t,e,n){var o=n(19).Beautifier,i=n(20).Options;t.exports=function(t,e,n,i){return new o(t,e,n,i).beautify()},t.exports.defaultOptions=function(){return new i}},function(t,e,n){var o=n(20).Options,i=n(2).Output,r=n(21).Tokenizer,s=n(21).TOKEN,a=/\r\n|[\r\n]/,l=/\r\n|[\r\n]/g,c=function(t,e){this.indent_level=0,this.alignment_size=0,this.max_preserve_newlines=t.max_preserve_newlines,this.preserve_newlines=t.preserve_newlines,this._output=new i(t,e)};c.prototype.current_line_has_match=function(t){return this._output.current_line.has_match(t)},c.prototype.set_space_before_token=function(t,e){this._output.space_before_token=t,this._output.non_breaking_space=e},c.prototype.set_wrap_point=function(){this._output.set_indent(this.indent_level,this.alignment_size),this._output.set_wrap_point()},c.prototype.add_raw_token=function(t){this._output.add_raw_token(t)},c.prototype.print_preserved_newlines=function(t){var e=0;t.type!==s.TEXT&&t.previous.type!==s.TEXT&&(e=t.newlines?1:0),this.preserve_newlines&&(e=t.newlines<this.max_preserve_newlines+1?t.newlines:this.max_preserve_newlines+1);for(var n=0;n<e;n++)this.print_newline(n>0);return 0!==e},c.prototype.traverse_whitespace=function(t){return!(!t.whitespace_before&&!t.newlines)&&(this.print_preserved_newlines(t)||(this._output.space_before_token=!0),!0)},c.prototype.previous_token_wrapped=function(){return this._output.previous_token_wrapped},c.prototype.print_newline=function(t){this._output.add_new_line(t)},c.prototype.print_token=function(t){t.text&&(this._output.set_indent(this.indent_level,this.alignment_size),this._output.add_token(t.text))},c.prototype.indent=function(){this.indent_level++},c.prototype.get_full_indent=function(t){return(t=this.indent_level+(t||0))<1?'':this._output.get_indent_string(t)};var u=function(t,e){var n=null,o=null;return e.closed?('script'===t?n='text/javascript':'style'===t&&(n='text/css'),n=function(t){for(var e=null,n=t.next;n.type!==s.EOF&&t.closed!==n;){if(n.type===s.ATTRIBUTE&&'type'===n.text){n.next&&n.next.type===s.EQUALS&&n.next.next&&n.next.next.type===s.VALUE&&(e=n.next.next.text);break}n=n.next}return e}(e)||n,n.search('text/css')>-1?o='css':n.search(/module|((text|application|dojo)\/(x-)?(javascript|ecmascript|jscript|livescript|(ld\+)?json|method|aspect))/)>-1?o='javascript':n.search(/(text|application|dojo)\/(x-)?(html)/)>-1?o='html':n.search(/test\/null/)>-1&&(o='null'),o):null};function h(t,e){return-1!==e.indexOf(t)}function p(t,e,n){this.parent=t||null,this.tag=e?e.tag_name:'',this.indent_level=n||0,this.parser_token=e||null}function d(t){this._printer=t,this._current_frame=null}function f(t,e,n,i){this._source_text=t||'',e=e||{},this._js_beautify=n,this._css_beautify=i,this._tag_stack=null;var r=new o(e,'html');this._options=r,this._is_wrap_attributes_force='force'===this._options.wrap_attributes.substr(0,'force'.length),this._is_wrap_attributes_force_expand_multiline='force-expand-multiline'===this._options.wrap_attributes,this._is_wrap_attributes_force_aligned='force-aligned'===this._options.wrap_attributes,this._is_wrap_attributes_aligned_multiple='aligned-multiple'===this._options.wrap_attributes,this._is_wrap_attributes_preserve='preserve'===this._options.wrap_attributes.substr(0,'preserve'.length),this._is_wrap_attributes_preserve_aligned='preserve-aligned'===this._options.wrap_attributes}d.prototype.get_parser_token=function(){return this._current_frame?this._current_frame.parser_token:null},d.prototype.record_tag=function(t){var e=new p(this._current_frame,t,this._printer.indent_level);this._current_frame=e},d.prototype._try_pop_frame=function(t){var e=null;return t&&(e=t.parser_token,this._printer.indent_level=t.indent_level,this._current_frame=t.parent),e},d.prototype._get_frame=function(t,e){for(var n=this._current_frame;n&&-1===t.indexOf(n.tag);){if(e&&-1!==e.indexOf(n.tag)){n=null;break}n=n.parent}return n},d.prototype.try_pop=function(t,e){var n=this._get_frame([t],e);return this._try_pop_frame(n)},d.prototype.indent_to_tag=function(t){var e=this._get_frame(t);e&&(this._printer.indent_level=e.indent_level)},f.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._source_text,e=this._options.eol;'auto'===this._options.eol&&(e='\n',t&&a.test(t)&&(e=t.match(a)[0]));var n=(t=t.replace(l,'\n')).match(/^[\t ]*/)[0],o={text:'',type:''},i=new g,u=new c(this._options,n),h=new r(t,this._options).tokenize();this._tag_stack=new d(u);for(var p=null,f=h.next();f.type!==s.EOF;)f.type===s.TAG_OPEN||f.type===s.COMMENT?i=p=this._handle_tag_open(u,f,i,o,h):f.type===s.ATTRIBUTE||f.type===s.EQUALS||f.type===s.VALUE||f.type===s.TEXT&&!i.tag_complete?p=this._handle_inside_tag(u,f,i,o):f.type===s.TAG_CLOSE?p=this._handle_tag_close(u,f,i):f.type===s.TEXT?p=this._handle_text(u,f,i):u.add_raw_token(f),o=p,f=h.next();return u._output.get_code(e)},f.prototype._handle_tag_close=function(t,e,n){var o={text:e.text,type:e.type};return t.alignment_size=0,n.tag_complete=!0,t.set_space_before_token(e.newlines||''!==e.whitespace_before,!0),n.is_unformatted?t.add_raw_token(e):('<'===n.tag_start_char&&(t.set_space_before_token('/'===e.text[0],!0),this._is_wrap_attributes_force_expand_multiline&&n.has_wrapped_attrs&&t.print_newline(!1)),t.print_token(e)),!n.indent_content||n.is_unformatted||n.is_content_unformatted||(t.indent(),n.indent_content=!1),n.is_inline_element||n.is_unformatted||n.is_content_unformatted||t.set_wrap_point(),o},f.prototype._handle_inside_tag=function(t,e,n,o){var i=n.has_wrapped_attrs,r={text:e.text,type:e.type};return t.set_space_before_token(e.newlines||''!==e.whitespace_before,!0),n.is_unformatted?t.add_raw_token(e):'{'===n.tag_start_char&&e.type===s.TEXT?t.print_preserved_newlines(e)?(e.newlines=0,t.add_raw_token(e)):t.print_token(e):(e.type===s.ATTRIBUTE?t.set_space_before_token(!0):(e.type===s.EQUALS||e.type===s.VALUE&&e.previous.type===s.EQUALS)&&t.set_space_before_token(!1),e.type===s.ATTRIBUTE&&'<'===n.tag_start_char&&((this._is_wrap_attributes_preserve||this._is_wrap_attributes_preserve_aligned)&&(t.traverse_whitespace(e),i=i||0!==e.newlines),this._is_wrap_attributes_force&&n.attr_count>=this._options.wrap_attributes_min_attrs&&(o.type!==s.TAG_OPEN||this._is_wrap_attributes_force_expand_multiline)&&(t.print_newline(!1),i=!0)),t.print_token(e),i=i||t.previous_token_wrapped(),n.has_wrapped_attrs=i),r},f.prototype._handle_text=function(t,e,n){var o={text:e.text,type:'TK_CONTENT'};return n.custom_beautifier_name?this._print_custom_beatifier_text(t,e,n):n.is_unformatted||n.is_content_unformatted?t.add_raw_token(e):(t.traverse_whitespace(e),t.print_token(e)),o},f.prototype._print_custom_beatifier_text=function(t,e,n){var o=this;if(''!==e.text){var i,r=e.text,s=1,a='',l='';'javascript'===n.custom_beautifier_name&&'function'==typeof this._js_beautify?i=this._js_beautify:'css'===n.custom_beautifier_name&&'function'==typeof this._css_beautify?i=this._css_beautify:'html'===n.custom_beautifier_name&&(i=function(t,e){return new f(t,e,o._js_beautify,o._css_beautify).beautify()}),"keep"===this._options.indent_scripts?s=0:"separate"===this._options.indent_scripts&&(s=-t.indent_level);var c=t.get_full_indent(s);if(r=r.replace(/\n[ \t]*$/,''),'html'!==n.custom_beautifier_name&&'<'===r[0]&&r.match(/^(<!--|<!\[CDATA\[)/)){var u=/^(<!--[^\n]*|<!\[CDATA\[)(\n?)([ \t\n]*)([\s\S]*)(-->|]]>)$/.exec(r);if(!u)return void t.add_raw_token(e);a=c+u[1]+'\n',r=u[4],u[5]&&(l=c+u[5]),r=r.replace(/\n[ \t]*$/,''),(u[2]||-1!==u[3].indexOf('\n'))&&(u=u[3].match(/[ \t]+$/))&&(e.whitespace_before=u[0])}if(r)if(i){var h=function(){this.eol='\n'};h.prototype=this._options.raw_options,r=i(c+r,new h)}else{var p=e.whitespace_before;p&&(r=r.replace(new RegExp('\n('+p+')?','g'),'\n')),r=c+r.replace(/\n/g,'\n'+c)}a&&(r=r?a+r+'\n'+l:a+l),t.print_newline(!1),r&&(e.text=r,e.whitespace_before='',e.newlines=0,t.add_raw_token(e),t.print_newline(!0))}},f.prototype._handle_tag_open=function(t,e,n,o,i){var r=this._get_tag_open_token(e);if(!n.is_unformatted&&!n.is_content_unformatted||n.is_empty_element||e.type!==s.TAG_OPEN||r.is_start_tag?(t.traverse_whitespace(e),this._set_tag_position(t,e,r,n,o),r.is_inline_element||t.set_wrap_point(),t.print_token(e)):(t.add_raw_token(e),r.start_tag_token=this._tag_stack.try_pop(r.tag_name)),r.is_start_tag&&this._is_wrap_attributes_force){var a,l=0;do{(a=i.peek(l)).type===s.ATTRIBUTE&&(r.attr_count+=1),l+=1}while(a.type!==s.EOF&&a.type!==s.TAG_CLOSE)}return(this._is_wrap_attributes_force_aligned||this._is_wrap_attributes_aligned_multiple||this._is_wrap_attributes_preserve_aligned)&&(r.alignment_size=e.text.length+1),r.tag_complete||r.is_unformatted||(t.alignment_size=r.alignment_size),r};var g=function(t,e){if(this.parent=t||null,this.text='',this.type='TK_TAG_OPEN',this.tag_name='',this.is_inline_element=!1,this.is_unformatted=!1,this.is_content_unformatted=!1,this.is_empty_element=!1,this.is_start_tag=!1,this.is_end_tag=!1,this.indent_content=!1,this.multiline_content=!1,this.custom_beautifier_name=null,this.start_tag_token=null,this.attr_count=0,this.has_wrapped_attrs=!1,this.alignment_size=0,this.tag_complete=!1,this.tag_start_char='',this.tag_check='',e){var n;this.tag_start_char=e.text[0],this.text=e.text,'<'===this.tag_start_char?(n=e.text.match(/^<([^\s>]*)/),this.tag_check=n?n[1]:''):(n=e.text.match(/^{{~?(?:[\^]|#\*?)?([^\s}]+)/),this.tag_check=n?n[1]:'',(e.text.startsWith('{{#>')||e.text.startsWith('{{~#>'))&&'>'===this.tag_check[0]&&('>'===this.tag_check&&null!==e.next?this.tag_check=e.next.text.split(' ')[0]:this.tag_check=e.text.split('>')[1])),this.tag_check=this.tag_check.toLowerCase(),e.type===s.COMMENT&&(this.tag_complete=!0),this.is_start_tag='/'!==this.tag_check.charAt(0),this.tag_name=this.is_start_tag?this.tag_check:this.tag_check.substr(1),this.is_end_tag=!this.is_start_tag||e.closed&&'/>'===e.closed.text;var o=2;'{'===this.tag_start_char&&this.text.length>=3&&'~'===this.text.charAt(2)&&(o=3),this.is_end_tag=this.is_end_tag||'{'===this.tag_start_char&&(this.text.length<3||/[^#\^]/.test(this.text.charAt(o)))}else this.tag_complete=!0};f.prototype._get_tag_open_token=function(t){var e=new g(this._tag_stack.get_parser_token(),t);return e.alignment_size=this._options.wrap_attributes_indent_size,e.is_end_tag=e.is_end_tag||h(e.tag_check,this._options.void_elements),e.is_empty_element=e.tag_complete||e.is_start_tag&&e.is_end_tag,e.is_unformatted=!e.tag_complete&&h(e.tag_check,this._options.unformatted),e.is_content_unformatted=!e.is_empty_element&&h(e.tag_check,this._options.content_unformatted),e.is_inline_element=h(e.tag_name,this._options.inline)||this._options.inline_custom_elements&&e.tag_name.includes("-")||'{'===e.tag_start_char,e},f.prototype._set_tag_position=function(t,e,n,o,i){if(n.is_empty_element||(n.is_end_tag?n.start_tag_token=this._tag_stack.try_pop(n.tag_name):(this._do_optional_end_element(n)&&(n.is_inline_element||t.print_newline(!1)),this._tag_stack.record_tag(n),'script'!==n.tag_name&&'style'!==n.tag_name||n.is_unformatted||n.is_content_unformatted||(n.custom_beautifier_name=u(n.tag_check,e)))),h(n.tag_check,this._options.extra_liners)&&(t.print_newline(!1),t._output.just_added_blankline()||t.print_newline(!0)),n.is_empty_element){if('{'===n.tag_start_char&&'else'===n.tag_check)this._tag_stack.indent_to_tag(['if','unless','each']),n.indent_content=!0,t.current_line_has_match(/{{#if/)||t.print_newline(!1);'!--'===n.tag_name&&i.type===s.TAG_CLOSE&&o.is_end_tag&&-1===n.text.indexOf('\n')||(n.is_inline_element||n.is_unformatted||t.print_newline(!1),this._calcluate_parent_multiline(t,n))}else if(n.is_end_tag){var r=!1;r=(r=n.start_tag_token&&n.start_tag_token.multiline_content)||!n.is_inline_element&&!(o.is_inline_element||o.is_unformatted)&&!(i.type===s.TAG_CLOSE&&n.start_tag_token===o)&&'TK_CONTENT'!==i.type,(n.is_content_unformatted||n.is_unformatted)&&(r=!1),r&&t.print_newline(!1)}else n.indent_content=!n.custom_beautifier_name,'<'===n.tag_start_char&&('html'===n.tag_name?n.indent_content=this._options.indent_inner_html:'head'===n.tag_name?n.indent_content=this._options.indent_head_inner_html:'body'===n.tag_name&&(n.indent_content=this._options.indent_body_inner_html)),n.is_inline_element||n.is_unformatted||'TK_CONTENT'===i.type&&!n.is_content_unformatted||t.print_newline(!1),this._calcluate_parent_multiline(t,n)},f.prototype._calcluate_parent_multiline=function(t,e){!e.parent||!t._output.just_added_newline()||(e.is_inline_element||e.is_unformatted)&&e.parent.is_inline_element||(e.parent.multiline_content=!0)};var m=['address','article','aside','blockquote','details','div','dl','fieldset','figcaption','figure','footer','form','h1','h2','h3','h4','h5','h6','header','hr','main','menu','nav','ol','p','pre','section','table','ul'],v=['a','audio','del','ins','map','noscript','video'];f.prototype._do_optional_end_element=function(t){var e=null;if(!t.is_empty_element&&t.is_start_tag&&t.parent){if('body'===t.tag_name)e=e||this._tag_stack.try_pop('head');else if('li'===t.tag_name)e=e||this._tag_stack.try_pop('li',['ol','ul','menu']);else if('dd'===t.tag_name||'dt'===t.tag_name)e=(e=e||this._tag_stack.try_pop('dt',['dl']))||this._tag_stack.try_pop('dd',['dl']);else if('p'===t.parent.tag_name&&-1!==m.indexOf(t.tag_name)){var n=t.parent.parent;n&&-1!==v.indexOf(n.tag_name)||(e=e||this._tag_stack.try_pop('p'))}else'rp'===t.tag_name||'rt'===t.tag_name?e=(e=e||this._tag_stack.try_pop('rt',['ruby','rtc']))||this._tag_stack.try_pop('rp',['ruby','rtc']):'optgroup'===t.tag_name?e=e||this._tag_stack.try_pop('optgroup',['select']):'option'===t.tag_name?e=e||this._tag_stack.try_pop('option',['select','datalist','optgroup']):'colgroup'===t.tag_name?e=e||this._tag_stack.try_pop('caption',['table']):'thead'===t.tag_name?e=(e=e||this._tag_stack.try_pop('caption',['table']))||this._tag_stack.try_pop('colgroup',['table']):'tbody'===t.tag_name||'tfoot'===t.tag_name?e=(e=(e=(e=e||this._tag_stack.try_pop('caption',['table']))||this._tag_stack.try_pop('colgroup',['table']))||this._tag_stack.try_pop('thead',['table']))||this._tag_stack.try_pop('tbody',['table']):'tr'===t.tag_name?e=(e=(e=e||this._tag_stack.try_pop('caption',['table']))||this._tag_stack.try_pop('colgroup',['table']))||this._tag_stack.try_pop('tr',['table','thead','tbody','tfoot']):'th'!==t.tag_name&&'td'!==t.tag_name||(e=(e=e||this._tag_stack.try_pop('td',['table','thead','tbody','tfoot','tr']))||this._tag_stack.try_pop('th',['table','thead','tbody','tfoot','tr']));return t.parent=this._tag_stack.get_parser_token(),e}},t.exports.Beautifier=f},function(t,e,n){var o=n(6).Options;function i(t){o.call(this,t,'html'),1===this.templating.length&&'auto'===this.templating[0]&&(this.templating=['django','erb','handlebars','php']),this.indent_inner_html=this._get_boolean('indent_inner_html'),this.indent_body_inner_html=this._get_boolean('indent_body_inner_html',!0),this.indent_head_inner_html=this._get_boolean('indent_head_inner_html',!0),this.indent_handlebars=this._get_boolean('indent_handlebars',!0),this.wrap_attributes=this._get_selection('wrap_attributes',['auto','force','force-aligned','force-expand-multiline','aligned-multiple','preserve','preserve-aligned']),this.wrap_attributes_min_attrs=this._get_number('wrap_attributes_min_attrs',2),this.wrap_attributes_indent_size=this._get_number('wrap_attributes_indent_size',this.indent_size),this.extra_liners=this._get_array('extra_liners',['head','body','/html']),this.inline=this._get_array('inline',['a','abbr','area','audio','b','bdi','bdo','br','button','canvas','cite','code','data','datalist','del','dfn','em','embed','i','iframe','img','input','ins','kbd','keygen','label','map','mark','math','meter','noscript','object','output','progress','q','ruby','s','samp','select','small','span','strong','sub','sup','svg','template','textarea','time','u','var','video','wbr','text','acronym','big','strike','tt']),this.inline_custom_elements=this._get_boolean('inline_custom_elements',!0),this.void_elements=this._get_array('void_elements',['area','base','br','col','embed','hr','img','input','keygen','link','menuitem','meta','param','source','track','wbr','!doctype','?xml','basefont','isindex']),this.unformatted=this._get_array('unformatted',[]),this.content_unformatted=this._get_array('content_unformatted',['pre','textarea']),this.unformatted_content_delimiter=this._get_characters('unformatted_content_delimiter'),this.indent_scripts=this._get_selection('indent_scripts',['normal','keep','separate'])}i.prototype=new o,t.exports.Options=i},function(t,e,n){var o=n(9).Tokenizer,i=n(9).TOKEN,r=n(13).Directives,s=n(14).TemplatablePattern,a=n(12).Pattern,l={TAG_OPEN:'TK_TAG_OPEN',TAG_CLOSE:'TK_TAG_CLOSE',ATTRIBUTE:'TK_ATTRIBUTE',EQUALS:'TK_EQUALS',VALUE:'TK_VALUE',COMMENT:'TK_COMMENT',TEXT:'TK_TEXT',UNKNOWN:'TK_UNKNOWN',START:i.START,RAW:i.RAW,EOF:i.EOF},c=new r(/<\!--/,/-->/),u=function(t,e){o.call(this,t,e),this._current_tag_name='';var n=new s(this._input).read_options(this._options),i=new a(this._input);if(this.__patterns={word:n.until(/[\n\r\t <]/),single_quote:n.until_after(/'/),double_quote:n.until_after(/"/),attribute:n.until(/[\n\r\t =>]|\/>/),element_name:n.until(/[\n\r\t >\/]/),handlebars_comment:i.starting_with(/{{!--/).until_after(/--}}/),handlebars:i.starting_with(/{{/).until_after(/}}/),handlebars_open:i.until(/[\n\r\t }]/),handlebars_raw_close:i.until(/}}/),comment:i.starting_with(/<!--/).until_after(/-->/),cdata:i.starting_with(/<!\[CDATA\[/).until_after(/]]>/),conditional_comment:i.starting_with(/<!\[/).until_after(/]>/),processing:i.starting_with(/<\?/).until_after(/\?>/)},this._options.indent_handlebars&&(this.__patterns.word=this.__patterns.word.exclude('handlebars')),this._unformatted_content_delimiter=null,this._options.unformatted_content_delimiter){var r=this._input.get_literal_regexp(this._options.unformatted_content_delimiter);this.__patterns.unformatted_content_delimiter=i.matching(r).until_after(r)}};(u.prototype=new o)._is_comment=function(t){return!1},u.prototype._is_opening=function(t){return t.type===l.TAG_OPEN},u.prototype._is_closing=function(t,e){return t.type===l.TAG_CLOSE&&e&&(('>'===t.text||'/>'===t.text)&&'<'===e.text[0]||'}}'===t.text&&'{'===e.text[0]&&'{'===e.text[1])},u.prototype._reset=function(){this._current_tag_name=''},u.prototype._get_next_token=function(t,e){var n=null;this._readWhitespace();var o=this._input.peek();return null===o?this._create_token(l.EOF,''):n=(n=(n=(n=(n=(n=(n=(n=(n=n||this._read_open_handlebars(o,e))||this._read_attribute(o,t,e))||this._read_close(o,e))||this._read_raw_content(o,t,e))||this._read_content_word(o))||this._read_comment_or_cdata(o))||this._read_processing(o))||this._read_open(o,e))||this._create_token(l.UNKNOWN,this._input.next())},u.prototype._read_comment_or_cdata=function(t){var e=null,n=null,o=null;'<'===t&&('!'===this._input.peek(1)&&((n=this.__patterns.comment.read())?(o=c.get_directives(n))&&'start'===o.ignore&&(n+=c.readIgnored(this._input)):n=this.__patterns.cdata.read()),n&&((e=this._create_token(l.COMMENT,n)).directives=o));return e},u.prototype._read_processing=function(t){var e=null,n=null;if('<'===t){var o=this._input.peek(1);'!'!==o&&'?'!==o||(n=(n=this.__patterns.conditional_comment.read())||this.__patterns.processing.read()),n&&((e=this._create_token(l.COMMENT,n)).directives=null)}return e},u.prototype._read_open=function(t,e){var n=null,o=null;return e||'<'===t&&(n=this._input.next(),'/'===this._input.peek()&&(n+=this._input.next()),n+=this.__patterns.element_name.read(),o=this._create_token(l.TAG_OPEN,n)),o},u.prototype._read_open_handlebars=function(t,e){var n=null,o=null;return e||this._options.indent_handlebars&&'{'===t&&'{'===this._input.peek(1)&&('!'===this._input.peek(2)?(n=(n=this.__patterns.handlebars_comment.read())||this.__patterns.handlebars.read(),o=this._create_token(l.COMMENT,n)):(n=this.__patterns.handlebars_open.read(),o=this._create_token(l.TAG_OPEN,n))),o},u.prototype._read_close=function(t,e){var n=null,o=null;return e&&('<'===e.text[0]&&('>'===t||'/'===t&&'>'===this._input.peek(1))?(n=this._input.next(),'/'===t&&(n+=this._input.next()),o=this._create_token(l.TAG_CLOSE,n)):'{'===e.text[0]&&'}'===t&&'}'===this._input.peek(1)&&(this._input.next(),this._input.next(),o=this._create_token(l.TAG_CLOSE,'}}'))),o},u.prototype._read_attribute=function(t,e,n){var o=null,i='';if(n&&'<'===n.text[0])if('='===t)o=this._create_token(l.EQUALS,this._input.next());else if('"'===t||"'"===t){var r=this._input.next();r+='"'===t?this.__patterns.double_quote.read():this.__patterns.single_quote.read(),o=this._create_token(l.VALUE,r)}else(i=this.__patterns.attribute.read())&&(o=e.type===l.EQUALS?this._create_token(l.VALUE,i):this._create_token(l.ATTRIBUTE,i));return o},u.prototype._is_content_unformatted=function(t){return-1===this._options.void_elements.indexOf(t)&&(-1!==this._options.content_unformatted.indexOf(t)||-1!==this._options.unformatted.indexOf(t))},u.prototype._read_raw_content=function(t,e,n){var o='';if(n&&'{'===n.text[0])o=this.__patterns.handlebars_raw_close.read();else if(e.type===l.TAG_CLOSE&&'<'===e.opened.text[0]&&'/'!==e.text[0]){var i=e.opened.text.substr(1).toLowerCase();if('script'===i||'style'===i){var r=this._read_comment_or_cdata(t);if(r)return r.type=l.TEXT,r;o=this._input.readUntil(new RegExp('</'+i+'[\\n\\r\\t ]*?>','ig'))}else this._is_content_unformatted(i)&&(o=this._input.readUntil(new RegExp('</'+i+'[\\n\\r\\t ]*?>','ig')))}return o?this._create_token(l.TEXT,o):null},u.prototype._read_content_word=function(t){var e='';if(this._options.unformatted_content_delimiter&&t===this._options.unformatted_content_delimiter[0]&&(e=this.__patterns.unformatted_content_delimiter.read()),e||(e=this.__patterns.word.read()),e)return this._create_token(l.TEXT,e)},t.exports.Tokenizer=u,t.exports.TOKEN=l}],e={};var n=function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}(18);r=n}();var s=r;if(1)o=[n,n(94),n(838)],i=function(t){var e=n(94),o=n(838);return{html_beautify:function(t,n){return s(t,n,e.js_beautify,o.css_beautify)}}}.apply(e,o),void 0===i||(t.exports=i);else;}()},94:(t,e)=>{var n;!function(){var o;!function(){"use strict";var t=[function(t,e,n){var o=n(1).Beautifier,i=n(5).Options;t.exports=function(t,e){return new o(t,e).beautify()},t.exports.defaultOptions=function(){return new i}},function(t,e,n){var o=n(2).Output,i=n(3).Token,r=n(4),s=n(5).Options,a=n(7).Tokenizer,l=n(7).line_starters,c=n(7).positionable_operators,u=n(7).TOKEN;function h(t,e){return-1!==e.indexOf(t)}function p(t,e){return t&&t.type===u.RESERVED&&t.text===e}function d(t,e){return t&&t.type===u.RESERVED&&h(t.text,e)}var f=['case','return','do','if','throw','else','await','break','continue','async'],g=function(t){for(var e={},n=0;n<t.length;n++)e[t[n].replace(/-/g,'_')]=t[n];return e}(['before-newline','after-newline','preserve-newline']),m=[g.before_newline,g.preserve_newline],v='BlockStatement',y='Statement',_='ObjectLiteral',O='ArrayLiteral',b='ForInitializer',w='Conditional',x='Expression';function S(t,e){e.multiline_frame||e.mode===b||e.mode===w||t.remove_indent(e.start_line_index)}function k(t){return t===O}function P(t){return h(t,[x,b,w])}function C(t,e){e=e||{},this._source_text=t||'',this._output=null,this._tokens=null,this._last_last_text=null,this._flags=null,this._previous_flags=null,this._flag_store=null,this._options=new s(e)}C.prototype.create_flags=function(t,e){var n=0;return t&&(n=t.indentation_level,!this._output.just_added_newline()&&t.line_indent_level>n&&(n=t.line_indent_level)),{mode:e,parent:t,last_token:t?t.last_token:new i(u.START_BLOCK,''),last_word:t?t.last_word:'',declaration_statement:!1,declaration_assignment:!1,multiline_frame:!1,inline_frame:!1,if_block:!1,else_block:!1,class_start_block:!1,do_block:!1,do_while:!1,import_block:!1,in_case_statement:!1,in_case:!1,case_body:!1,case_block:!1,indentation_level:n,alignment:0,line_indent_level:t?t.line_indent_level:n,start_line_index:this._output.get_line_number(),ternary_depth:0}},C.prototype._reset=function(t){var e=t.match(/^[\t ]*/)[0];this._last_last_text='',this._output=new o(this._options,e),this._output.raw=this._options.test_output_raw,this._flag_store=[],this.set_mode(v);var n=new a(t,this._options);return this._tokens=n.tokenize(),t},C.prototype.beautify=function(){if(this._options.disabled)return this._source_text;var t=this._reset(this._source_text),e=this._options.eol;'auto'===this._options.eol&&(e='\n',t&&r.lineBreak.test(t||'')&&(e=t.match(r.lineBreak)[0]));for(var n=this._tokens.next();n;)this.handle_token(n),this._last_last_text=this._flags.last_token.text,this._flags.last_token=n,n=this._tokens.next();return this._output.get_code(e)},C.prototype.handle_token=function(t,e){t.type===u.START_EXPR?this.handle_start_expr(t):t.type===u.END_EXPR?this.handle_end_expr(t):t.type===u.START_BLOCK?this.handle_start_block(t):t.type===u.END_BLOCK?this.handle_end_block(t):t.type===u.WORD||t.type===u.RESERVED?this.handle_word(t):t.type===u.SEMICOLON?this.handle_semicolon(t):t.type===u.STRING?this.handle_string(t):t.type===u.EQUALS?this.handle_equals(t):t.type===u.OPERATOR?this.handle_operator(t):t.type===u.COMMA?this.handle_comma(t):t.type===u.BLOCK_COMMENT?this.handle_block_comment(t,e):t.type===u.COMMENT?this.handle_comment(t,e):t.type===u.DOT?this.handle_dot(t):t.type===u.EOF?this.handle_eof(t):(t.type,u.UNKNOWN,this.handle_unknown(t,e))},C.prototype.handle_whitespace_and_comments=function(t,e){var n=t.newlines,o=this._options.keep_array_indentation&&k(this._flags.mode);if(t.comments_before)for(var i=t.comments_before.next();i;)this.handle_whitespace_and_comments(i,e),this.handle_token(i,e),i=t.comments_before.next();if(o)for(var r=0;r<n;r+=1)this.print_newline(r>0,e);else if(this._options.max_preserve_newlines&&n>this._options.max_preserve_newlines&&(n=this._options.max_preserve_newlines),this._options.preserve_newlines&&n>1){this.print_newline(!1,e);for(var s=1;s<n;s+=1)this.print_newline(!0,e)}};var T=['async','break','continue','return','throw','yield'];C.prototype.allow_wrap_or_preserved_newline=function(t,e){if(e=void 0!==e&&e,!this._output.just_added_newline()){var n=this._options.preserve_newlines&&t.newlines||e;if(h(this._flags.last_token.text,c)||h(t.text,c)){var o=h(this._flags.last_token.text,c)&&h(this._options.operator_position,m)||h(t.text,c);n=n&&o}if(n)this.print_newline(!1,!0);else if(this._options.wrap_line_length){if(d(this._flags.last_token,T))return;this._output.set_wrap_point()}}},C.prototype.print_newline=function(t,e){if(!e&&';'!==this._flags.last_token.text&&','!==this._flags.last_token.text&&'='!==this._flags.last_token.text&&(this._flags.last_token.type!==u.OPERATOR||'--'===this._flags.last_token.text||'++'===this._flags.last_token.text))for(var n=this._tokens.peek();!(this._flags.mode!==y||this._flags.if_block&&p(n,'else')||this._flags.do_block);)this.restore_mode();this._output.add_new_line(t)&&(this._flags.multiline_frame=!0)},C.prototype.print_token_line_indentation=function(t){this._output.just_added_newline()&&(this._options.keep_array_indentation&&t.newlines&&('['===t.text||k(this._flags.mode))?(this._output.current_line.set_indent(-1),this._output.current_line.push(t.whitespace_before),this._output.space_before_token=!1):this._output.set_indent(this._flags.indentation_level,this._flags.alignment)&&(this._flags.line_indent_level=this._flags.indentation_level))},C.prototype.print_token=function(t){if(this._output.raw)this._output.add_raw_token(t);else{if(this._options.comma_first&&t.previous&&t.previous.type===u.COMMA&&this._output.just_added_newline()&&','===this._output.previous_line.last()){var e=this._output.previous_line.pop();this._output.previous_line.is_empty()&&(this._output.previous_line.push(e),this._output.trim(!0),this._output.current_line.pop(),this._output.trim()),this.print_token_line_indentation(t),this._output.add_token(','),this._output.space_before_token=!0}this.print_token_line_indentation(t),this._output.non_breaking_space=!0,this._output.add_token(t.text),this._output.previous_token_wrapped&&(this._flags.multiline_frame=!0)}},C.prototype.indent=function(){this._flags.indentation_level+=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},C.prototype.deindent=function(){this._flags.indentation_level>0&&(!this._flags.parent||this._flags.indentation_level>this._flags.parent.indentation_level)&&(this._flags.indentation_level-=1,this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},C.prototype.set_mode=function(t){this._flags?(this._flag_store.push(this._flags),this._previous_flags=this._flags):this._previous_flags=this.create_flags(null,t),this._flags=this.create_flags(this._previous_flags,t),this._output.set_indent(this._flags.indentation_level,this._flags.alignment)},C.prototype.restore_mode=function(){this._flag_store.length>0&&(this._previous_flags=this._flags,this._flags=this._flag_store.pop(),this._previous_flags.mode===y&&S(this._output,this._previous_flags),this._output.set_indent(this._flags.indentation_level,this._flags.alignment))},C.prototype.start_of_object_property=function(){return this._flags.parent.mode===_&&this._flags.mode===y&&(':'===this._flags.last_token.text&&0===this._flags.ternary_depth||d(this._flags.last_token,['get','set']))},C.prototype.start_of_statement=function(t){var e=!1;return!!(e=(e=(e=(e=(e=(e=(e=e||d(this._flags.last_token,['var','let','const'])&&t.type===u.WORD)||p(this._flags.last_token,'do'))||!(this._flags.parent.mode===_&&this._flags.mode===y)&&d(this._flags.last_token,T)&&!t.newlines)||p(this._flags.last_token,'else')&&!(p(t,'if')&&!t.comments_before))||this._flags.last_token.type===u.END_EXPR&&(this._previous_flags.mode===b||this._previous_flags.mode===w))||this._flags.last_token.type===u.WORD&&this._flags.mode===v&&!this._flags.in_case&&!('--'===t.text||'++'===t.text)&&'function'!==this._last_last_text&&t.type!==u.WORD&&t.type!==u.RESERVED)||this._flags.mode===_&&(':'===this._flags.last_token.text&&0===this._flags.ternary_depth||d(this._flags.last_token,['get','set'])))&&(this.set_mode(y),this.indent(),this.handle_whitespace_and_comments(t,!0),this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t,d(t,['do','for','if','while'])),!0)},C.prototype.handle_start_expr=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t);var e=x;if('['===t.text){if(this._flags.last_token.type===u.WORD||')'===this._flags.last_token.text)return d(this._flags.last_token,l)&&(this._output.space_before_token=!0),this.print_token(t),this.set_mode(e),this.indent(),void(this._options.space_in_paren&&(this._output.space_before_token=!0));e=O,k(this._flags.mode)&&('['!==this._flags.last_token.text&&(','!==this._flags.last_token.text||']'!==this._last_last_text&&'}'!==this._last_last_text)||this._options.keep_array_indentation||this.print_newline()),h(this._flags.last_token.type,[u.START_EXPR,u.END_EXPR,u.WORD,u.OPERATOR,u.DOT])||(this._output.space_before_token=!0)}else{if(this._flags.last_token.type===u.RESERVED)'for'===this._flags.last_token.text?(this._output.space_before_token=this._options.space_before_conditional,e=b):h(this._flags.last_token.text,['if','while','switch'])?(this._output.space_before_token=this._options.space_before_conditional,e=w):h(this._flags.last_word,['await','async'])?this._output.space_before_token=!0:'import'===this._flags.last_token.text&&''===t.whitespace_before?this._output.space_before_token=!1:(h(this._flags.last_token.text,l)||'catch'===this._flags.last_token.text)&&(this._output.space_before_token=!0);else if(this._flags.last_token.type===u.EQUALS||this._flags.last_token.type===u.OPERATOR)this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t);else if(this._flags.last_token.type===u.WORD){this._output.space_before_token=!1;var n=this._tokens.peek(-3);if(this._options.space_after_named_function&&n){var o=this._tokens.peek(-4);d(n,['async','function'])||'*'===n.text&&d(o,['async','function'])?this._output.space_before_token=!0:this._flags.mode===_?'{'!==n.text&&','!==n.text&&('*'!==n.text||'{'!==o.text&&','!==o.text)||(this._output.space_before_token=!0):this._flags.parent&&this._flags.parent.class_start_block&&(this._output.space_before_token=!0)}}else this.allow_wrap_or_preserved_newline(t);(this._flags.last_token.type===u.RESERVED&&('function'===this._flags.last_word||'typeof'===this._flags.last_word)||'*'===this._flags.last_token.text&&(h(this._last_last_text,['function','yield'])||this._flags.mode===_&&h(this._last_last_text,['{',','])))&&(this._output.space_before_token=this._options.space_after_anon_function)}';'===this._flags.last_token.text||this._flags.last_token.type===u.START_BLOCK?this.print_newline():this._flags.last_token.type!==u.END_EXPR&&this._flags.last_token.type!==u.START_EXPR&&this._flags.last_token.type!==u.END_BLOCK&&'.'!==this._flags.last_token.text&&this._flags.last_token.type!==u.COMMA||this.allow_wrap_or_preserved_newline(t,t.newlines),this.print_token(t),this.set_mode(e),this._options.space_in_paren&&(this._output.space_before_token=!0),this.indent()},C.prototype.handle_end_expr=function(t){for(;this._flags.mode===y;)this.restore_mode();this.handle_whitespace_and_comments(t),this._flags.multiline_frame&&this.allow_wrap_or_preserved_newline(t,']'===t.text&&k(this._flags.mode)&&!this._options.keep_array_indentation),this._options.space_in_paren&&(this._flags.last_token.type!==u.START_EXPR||this._options.space_in_empty_paren?this._output.space_before_token=!0:(this._output.trim(),this._output.space_before_token=!1)),this.deindent(),this.print_token(t),this.restore_mode(),S(this._output,this._previous_flags),this._flags.do_while&&this._previous_flags.mode===w&&(this._previous_flags.mode=x,this._flags.do_block=!1,this._flags.do_while=!1)},C.prototype.handle_start_block=function(t){this.handle_whitespace_and_comments(t);var e=this._tokens.peek(),n=this._tokens.peek(1);'switch'===this._flags.last_word&&this._flags.last_token.type===u.END_EXPR?(this.set_mode(v),this._flags.in_case_statement=!0):this._flags.case_body?this.set_mode(v):n&&(h(n.text,[':',','])&&h(e.type,[u.STRING,u.WORD,u.RESERVED])||h(e.text,['get','set','...'])&&h(n.type,[u.WORD,u.RESERVED]))?h(this._last_last_text,['class','interface'])&&!h(n.text,[':',','])?this.set_mode(v):this.set_mode(_):this._flags.last_token.type===u.OPERATOR&&'=>'===this._flags.last_token.text?this.set_mode(v):h(this._flags.last_token.type,[u.EQUALS,u.START_EXPR,u.COMMA,u.OPERATOR])||d(this._flags.last_token,['return','throw','import','default'])?this.set_mode(_):this.set_mode(v),this._flags.last_token&&d(this._flags.last_token.previous,['class','extends'])&&(this._flags.class_start_block=!0);var o=!e.comments_before&&'}'===e.text,i=o&&'function'===this._flags.last_word&&this._flags.last_token.type===u.END_EXPR;if(this._options.brace_preserve_inline){var r=0,s=null;this._flags.inline_frame=!0;do{if(r+=1,(s=this._tokens.peek(r-1)).newlines){this._flags.inline_frame=!1;break}}while(s.type!==u.EOF&&(s.type!==u.END_BLOCK||s.opened!==t))}("expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines)&&!this._flags.inline_frame?this._flags.last_token.type!==u.OPERATOR&&(i||this._flags.last_token.type===u.EQUALS||d(this._flags.last_token,f)&&'else'!==this._flags.last_token.text)?this._output.space_before_token=!0:this.print_newline(!1,!0):(!k(this._previous_flags.mode)||this._flags.last_token.type!==u.START_EXPR&&this._flags.last_token.type!==u.COMMA||((this._flags.last_token.type===u.COMMA||this._options.space_in_paren)&&(this._output.space_before_token=!0),(this._flags.last_token.type===u.COMMA||this._flags.last_token.type===u.START_EXPR&&this._flags.inline_frame)&&(this.allow_wrap_or_preserved_newline(t),this._previous_flags.multiline_frame=this._previous_flags.multiline_frame||this._flags.multiline_frame,this._flags.multiline_frame=!1)),this._flags.last_token.type!==u.OPERATOR&&this._flags.last_token.type!==u.START_EXPR&&(h(this._flags.last_token.type,[u.START_BLOCK,u.SEMICOLON])&&!this._flags.inline_frame?this.print_newline():this._output.space_before_token=!0)),this.print_token(t),this.indent(),o||this._options.brace_preserve_inline&&this._flags.inline_frame||this.print_newline()},C.prototype.handle_end_block=function(t){for(this.handle_whitespace_and_comments(t);this._flags.mode===y;)this.restore_mode();var e=this._flags.last_token.type===u.START_BLOCK;this._flags.inline_frame&&!e?this._output.space_before_token=!0:"expand"===this._options.brace_style?e||this.print_newline():e||(k(this._flags.mode)&&this._options.keep_array_indentation?(this._options.keep_array_indentation=!1,this.print_newline(),this._options.keep_array_indentation=!0):this.print_newline()),this.restore_mode(),this.print_token(t)},C.prototype.handle_word=function(t){if(t.type===u.RESERVED)if(h(t.text,['set','get'])&&this._flags.mode!==_)t.type=u.WORD;else if('import'===t.text&&h(this._tokens.peek().text,['(','.']))t.type=u.WORD;else if(h(t.text,['as','from'])&&!this._flags.import_block)t.type=u.WORD;else if(this._flags.mode===_){':'===this._tokens.peek().text&&(t.type=u.WORD)}if(this.start_of_statement(t)?d(this._flags.last_token,['var','let','const'])&&t.type===u.WORD&&(this._flags.declaration_statement=!0):!t.newlines||P(this._flags.mode)||this._flags.last_token.type===u.OPERATOR&&'--'!==this._flags.last_token.text&&'++'!==this._flags.last_token.text||this._flags.last_token.type===u.EQUALS||!this._options.preserve_newlines&&d(this._flags.last_token,['var','let','const','set','get'])?this.handle_whitespace_and_comments(t):(this.handle_whitespace_and_comments(t),this.print_newline()),this._flags.do_block&&!this._flags.do_while){if(p(t,'while'))return this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0,void(this._flags.do_while=!0);this.print_newline(),this._flags.do_block=!1}if(this._flags.if_block)if(!this._flags.else_block&&p(t,'else'))this._flags.else_block=!0;else{for(;this._flags.mode===y;)this.restore_mode();this._flags.if_block=!1,this._flags.else_block=!1}if(this._flags.in_case_statement&&d(t,['case','default']))return this.print_newline(),this._flags.case_block||!this._flags.case_body&&!this._options.jslint_happy||this.deindent(),this._flags.case_body=!1,this.print_token(t),void(this._flags.in_case=!0);if(this._flags.last_token.type!==u.COMMA&&this._flags.last_token.type!==u.START_EXPR&&this._flags.last_token.type!==u.EQUALS&&this._flags.last_token.type!==u.OPERATOR||this.start_of_object_property()||h(this._flags.last_token.text,['+','-'])&&':'===this._last_last_text&&this._flags.parent.mode===_||this.allow_wrap_or_preserved_newline(t),p(t,'function'))return(h(this._flags.last_token.text,['}',';'])||this._output.just_added_newline()&&!h(this._flags.last_token.text,['(','[','{',':','=',','])&&this._flags.last_token.type!==u.OPERATOR)&&(this._output.just_added_blankline()||t.comments_before||(this.print_newline(),this.print_newline(!0))),this._flags.last_token.type===u.RESERVED||this._flags.last_token.type===u.WORD?d(this._flags.last_token,['get','set','new','export'])||d(this._flags.last_token,T)||p(this._flags.last_token,'default')&&'export'===this._last_last_text||'declare'===this._flags.last_token.text?this._output.space_before_token=!0:this.print_newline():this._flags.last_token.type===u.OPERATOR||'='===this._flags.last_token.text?this._output.space_before_token=!0:(this._flags.multiline_frame||!P(this._flags.mode)&&!k(this._flags.mode))&&this.print_newline(),this.print_token(t),void(this._flags.last_word=t.text);var e='NONE';(this._flags.last_token.type===u.END_BLOCK?this._previous_flags.inline_frame?e='SPACE':d(t,['else','catch','finally','from'])?"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines?e='NEWLINE':(e='SPACE',this._output.space_before_token=!0):e='NEWLINE':this._flags.last_token.type===u.SEMICOLON&&this._flags.mode===v?e='NEWLINE':this._flags.last_token.type===u.SEMICOLON&&P(this._flags.mode)?e='SPACE':this._flags.last_token.type===u.STRING?e='NEWLINE':this._flags.last_token.type===u.RESERVED||this._flags.last_token.type===u.WORD||'*'===this._flags.last_token.text&&(h(this._last_last_text,['function','yield'])||this._flags.mode===_&&h(this._last_last_text,['{',',']))?e='SPACE':this._flags.last_token.type===u.START_BLOCK?e=this._flags.inline_frame?'SPACE':'NEWLINE':this._flags.last_token.type===u.END_EXPR&&(this._output.space_before_token=!0,e='NEWLINE'),d(t,l)&&')'!==this._flags.last_token.text&&(e=this._flags.inline_frame||'else'===this._flags.last_token.text||'export'===this._flags.last_token.text?'SPACE':'NEWLINE'),d(t,['else','catch','finally']))?(this._flags.last_token.type!==u.END_BLOCK||this._previous_flags.mode!==v||"expand"===this._options.brace_style||"end-expand"===this._options.brace_style||"none"===this._options.brace_style&&t.newlines)&&!this._flags.inline_frame?this.print_newline():(this._output.trim(!0),'}'!==this._output.current_line.last()&&this.print_newline(),this._output.space_before_token=!0):'NEWLINE'===e?d(this._flags.last_token,f)||'declare'===this._flags.last_token.text&&d(t,['var','let','const'])?this._output.space_before_token=!0:this._flags.last_token.type!==u.END_EXPR?this._flags.last_token.type===u.START_EXPR&&d(t,['var','let','const'])||':'===this._flags.last_token.text||(p(t,'if')&&p(t.previous,'else')?this._output.space_before_token=!0:this.print_newline()):d(t,l)&&')'!==this._flags.last_token.text&&this.print_newline():this._flags.multiline_frame&&k(this._flags.mode)&&','===this._flags.last_token.text&&'}'===this._last_last_text?this.print_newline():'SPACE'===e&&(this._output.space_before_token=!0);!t.previous||t.previous.type!==u.WORD&&t.previous.type!==u.RESERVED||(this._output.space_before_token=!0),this.print_token(t),this._flags.last_word=t.text,t.type===u.RESERVED&&('do'===t.text?this._flags.do_block=!0:'if'===t.text?this._flags.if_block=!0:'import'===t.text?this._flags.import_block=!0:this._flags.import_block&&p(t,'from')&&(this._flags.import_block=!1))},C.prototype.handle_semicolon=function(t){this.start_of_statement(t)?this._output.space_before_token=!1:this.handle_whitespace_and_comments(t);for(var e=this._tokens.peek();!(this._flags.mode!==y||this._flags.if_block&&p(e,'else')||this._flags.do_block);)this.restore_mode();this._flags.import_block&&(this._flags.import_block=!1),this.print_token(t)},C.prototype.handle_string=function(t){(!t.text.startsWith("`")||0!==t.newlines||''!==t.whitespace_before||')'!==t.previous.text&&this._flags.last_token.type!==u.WORD)&&(this.start_of_statement(t)?this._output.space_before_token=!0:(this.handle_whitespace_and_comments(t),this._flags.last_token.type===u.RESERVED||this._flags.last_token.type===u.WORD||this._flags.inline_frame?this._output.space_before_token=!0:this._flags.last_token.type===u.COMMA||this._flags.last_token.type===u.START_EXPR||this._flags.last_token.type===u.EQUALS||this._flags.last_token.type===u.OPERATOR?this.start_of_object_property()||this.allow_wrap_or_preserved_newline(t):!t.text.startsWith("`")||this._flags.last_token.type!==u.END_EXPR||']'!==t.previous.text&&')'!==t.previous.text||0!==t.newlines?this.print_newline():this._output.space_before_token=!0)),this.print_token(t)},C.prototype.handle_equals=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t),this._flags.declaration_statement&&(this._flags.declaration_assignment=!0),this._output.space_before_token=!0,this.print_token(t),this._output.space_before_token=!0},C.prototype.handle_comma=function(t){this.handle_whitespace_and_comments(t,!0),this.print_token(t),this._output.space_before_token=!0,this._flags.declaration_statement?(P(this._flags.parent.mode)&&(this._flags.declaration_assignment=!1),this._flags.declaration_assignment?(this._flags.declaration_assignment=!1,this.print_newline(!1,!0)):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)):this._flags.mode===_||this._flags.mode===y&&this._flags.parent.mode===_?(this._flags.mode===y&&this.restore_mode(),this._flags.inline_frame||this.print_newline()):this._options.comma_first&&this.allow_wrap_or_preserved_newline(t)},C.prototype.handle_operator=function(t){var e='*'===t.text&&(d(this._flags.last_token,['function','yield'])||h(this._flags.last_token.type,[u.START_BLOCK,u.COMMA,u.END_BLOCK,u.SEMICOLON])),n=h(t.text,['-','+'])&&(h(this._flags.last_token.type,[u.START_BLOCK,u.START_EXPR,u.EQUALS,u.OPERATOR])||h(this._flags.last_token.text,l)||','===this._flags.last_token.text);if(this.start_of_statement(t));else{var o=!e;this.handle_whitespace_and_comments(t,o)}if('*'!==t.text||this._flags.last_token.type!==u.DOT)if('::'!==t.text)if(h(t.text,['-','+'])&&this.start_of_object_property())this.print_token(t);else{if(this._flags.last_token.type===u.OPERATOR&&h(this._options.operator_position,m)&&this.allow_wrap_or_preserved_newline(t),':'===t.text&&this._flags.in_case)return this.print_token(t),this._flags.in_case=!1,this._flags.case_body=!0,void(this._tokens.peek().type!==u.START_BLOCK?(this.indent(),this.print_newline(),this._flags.case_block=!1):(this._flags.case_block=!0,this._output.space_before_token=!0));var i=!0,r=!0,s=!1;if(':'===t.text?0===this._flags.ternary_depth?i=!1:(this._flags.ternary_depth-=1,s=!0):'?'===t.text&&(this._flags.ternary_depth+=1),!n&&!e&&this._options.preserve_newlines&&h(t.text,c)){var a=':'===t.text,p=a&&s,_=a&&!s;switch(this._options.operator_position){case g.before_newline:return this._output.space_before_token=!_,this.print_token(t),a&&!p||this.allow_wrap_or_preserved_newline(t),void(this._output.space_before_token=!0);case g.after_newline:return this._output.space_before_token=!0,!a||p?this._tokens.peek().newlines?this.print_newline(!1,!0):this.allow_wrap_or_preserved_newline(t):this._output.space_before_token=!1,this.print_token(t),void(this._output.space_before_token=!0);case g.preserve_newline:return _||this.allow_wrap_or_preserved_newline(t),i=!(this._output.just_added_newline()||_),this._output.space_before_token=i,this.print_token(t),void(this._output.space_before_token=!0)}}if(e){this.allow_wrap_or_preserved_newline(t),i=!1;var O=this._tokens.peek();r=O&&h(O.type,[u.WORD,u.RESERVED])}else if('...'===t.text)this.allow_wrap_or_preserved_newline(t),i=this._flags.last_token.type===u.START_BLOCK,r=!1;else if(h(t.text,['--','++','!','~'])||n){if(this._flags.last_token.type!==u.COMMA&&this._flags.last_token.type!==u.START_EXPR||this.allow_wrap_or_preserved_newline(t),i=!1,r=!1,t.newlines&&('--'===t.text||'++'===t.text||'~'===t.text)){var b=d(this._flags.last_token,f)&&t.newlines;b&&(this._previous_flags.if_block||this._previous_flags.else_block)&&this.restore_mode(),this.print_newline(b,!0)}';'===this._flags.last_token.text&&P(this._flags.mode)&&(i=!0),this._flags.last_token.type===u.RESERVED?i=!0:this._flags.last_token.type===u.END_EXPR?i=!(']'===this._flags.last_token.text&&('--'===t.text||'++'===t.text)):this._flags.last_token.type===u.OPERATOR&&(i=h(t.text,['--','-','++','+'])&&h(this._flags.last_token.text,['--','-','++','+']),h(t.text,['+','-'])&&h(this._flags.last_token.text,['--','++'])&&(r=!0)),(this._flags.mode!==v||this._flags.inline_frame)&&this._flags.mode!==y||'{'!==this._flags.last_token.text&&';'!==this._flags.last_token.text||this.print_newline()}this._output.space_before_token=this._output.space_before_token||i,this.print_token(t),this._output.space_before_token=r}else this.print_token(t);else this.print_token(t)},C.prototype.handle_block_comment=function(t,e){return this._output.raw?(this._output.add_raw_token(t),void(t.directives&&'end'===t.directives.preserve&&(this._output.raw=this._options.test_output_raw))):t.directives?(this.print_newline(!1,e),this.print_token(t),'start'===t.directives.preserve&&(this._output.raw=!0),void this.print_newline(!1,!0)):r.newline.test(t.text)||t.newlines?void this.print_block_commment(t,e):(this._output.space_before_token=!0,this.print_token(t),void(this._output.space_before_token=!0))},C.prototype.print_block_commment=function(t,e){var n,o=function(t){for(var e=[],n=(t=t.replace(r.allLineBreaks,'\n')).indexOf("\n");-1!==n;)e.push(t.substring(0,n)),n=(t=t.substring(n+1)).indexOf("\n");return t.length&&e.push(t),e}(t.text),i=!1,s=!1,a=t.whitespace_before,l=a.length;if(this.print_newline(!1,e),this.print_token_line_indentation(t),this._output.add_token(o[0]),this.print_newline(!1,e),o.length>1){for(i=function(t,e){for(var n=0;n<t.length;n++)if(t[n].trim().charAt(0)!==e)return!1;return!0}(o=o.slice(1),'*'),s=function(t,e){for(var n,o=0,i=t.length;o<i;o++)if((n=t[o])&&0!==n.indexOf(e))return!1;return!0}(o,a),i&&(this._flags.alignment=1),n=0;n<o.length;n++)i?(this.print_token_line_indentation(t),this._output.add_token(o[n].replace(/^\s+/g,''))):s&&o[n]?(this.print_token_line_indentation(t),this._output.add_token(o[n].substring(l))):(this._output.current_line.set_indent(-1),this._output.add_token(o[n])),this.print_newline(!1,e);this._flags.alignment=0}},C.prototype.handle_comment=function(t,e){t.newlines?this.print_newline(!1,e):this._output.trim(!0),this._output.space_before_token=!0,this.print_token(t),this.print_newline(!1,e)},C.prototype.handle_dot=function(t){this.start_of_statement(t)||this.handle_whitespace_and_comments(t,!0),this._flags.last_token.text.match('^[0-9]+$')&&(this._output.space_before_token=!0),d(this._flags.last_token,f)?this._output.space_before_token=!1:this.allow_wrap_or_preserved_newline(t,')'===this._flags.last_token.text&&this._options.break_chained_methods),this._options.unindent_chained_methods&&this._output.just_added_newline()&&this.deindent(),this.print_token(t)},C.prototype.handle_unknown=function(t,e){this.print_token(t),'\n'===t.text[t.text.length-1]&&this.print_newline(!1,e)},C.prototype.handle_eof=function(t){for(;this._flags.mode===y;)this.restore_mode();this.handle_whitespace_and_comments(t)},t.exports.Beautifier=C},function(t){function e(t){this.__parent=t,this.__character_count=0,this.__indent_count=-1,this.__alignment_count=0,this.__wrap_point_index=0,this.__wrap_point_character_count=0,this.__wrap_point_indent_count=-1,this.__wrap_point_alignment_count=0,this.__items=[]}function n(t,e){this.__cache=[''],this.__indent_size=t.indent_size,this.__indent_string=t.indent_char,t.indent_with_tabs||(this.__indent_string=new Array(t.indent_size+1).join(t.indent_char)),e=e||'',t.indent_level>0&&(e=new Array(t.indent_level+1).join(this.__indent_string)),this.__base_string=e,this.__base_string_length=e.length}function o(t,o){this.__indent_cache=new n(t,o),this.raw=!1,this._end_with_newline=t.end_with_newline,this.indent_size=t.indent_size,this.wrap_line_length=t.wrap_line_length,this.indent_empty_lines=t.indent_empty_lines,this.__lines=[],this.previous_line=null,this.current_line=null,this.next_line=new e(this),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1,this.__add_outputline()}e.prototype.clone_empty=function(){var t=new e(this.__parent);return t.set_indent(this.__indent_count,this.__alignment_count),t},e.prototype.item=function(t){return t<0?this.__items[this.__items.length+t]:this.__items[t]},e.prototype.has_match=function(t){for(var e=this.__items.length-1;e>=0;e--)if(this.__items[e].match(t))return!0;return!1},e.prototype.set_indent=function(t,e){this.is_empty()&&(this.__indent_count=t||0,this.__alignment_count=e||0,this.__character_count=this.__parent.get_indent_size(this.__indent_count,this.__alignment_count))},e.prototype._set_wrap_point=function(){this.__parent.wrap_line_length&&(this.__wrap_point_index=this.__items.length,this.__wrap_point_character_count=this.__character_count,this.__wrap_point_indent_count=this.__parent.next_line.__indent_count,this.__wrap_point_alignment_count=this.__parent.next_line.__alignment_count)},e.prototype._should_wrap=function(){return this.__wrap_point_index&&this.__character_count>this.__parent.wrap_line_length&&this.__wrap_point_character_count>this.__parent.next_line.__character_count},e.prototype._allow_wrap=function(){if(this._should_wrap()){this.__parent.add_new_line();var t=this.__parent.current_line;return t.set_indent(this.__wrap_point_indent_count,this.__wrap_point_alignment_count),t.__items=this.__items.slice(this.__wrap_point_index),this.__items=this.__items.slice(0,this.__wrap_point_index),t.__character_count+=this.__character_count-this.__wrap_point_character_count,this.__character_count=this.__wrap_point_character_count," "===t.__items[0]&&(t.__items.splice(0,1),t.__character_count-=1),!0}return!1},e.prototype.is_empty=function(){return 0===this.__items.length},e.prototype.last=function(){return this.is_empty()?null:this.__items[this.__items.length-1]},e.prototype.push=function(t){this.__items.push(t);var e=t.lastIndexOf('\n');-1!==e?this.__character_count=t.length-e:this.__character_count+=t.length},e.prototype.pop=function(){var t=null;return this.is_empty()||(t=this.__items.pop(),this.__character_count-=t.length),t},e.prototype._remove_indent=function(){this.__indent_count>0&&(this.__indent_count-=1,this.__character_count-=this.__parent.indent_size)},e.prototype._remove_wrap_indent=function(){this.__wrap_point_indent_count>0&&(this.__wrap_point_indent_count-=1)},e.prototype.trim=function(){for(;' '===this.last();)this.__items.pop(),this.__character_count-=1},e.prototype.toString=function(){var t='';return this.is_empty()?this.__parent.indent_empty_lines&&(t=this.__parent.get_indent_string(this.__indent_count)):(t=this.__parent.get_indent_string(this.__indent_count,this.__alignment_count),t+=this.__items.join('')),t},n.prototype.get_indent_size=function(t,e){var n=this.__base_string_length;return e=e||0,t<0&&(n=0),n+=t*this.__indent_size,n+=e},n.prototype.get_indent_string=function(t,e){var n=this.__base_string;return e=e||0,t<0&&(t=0,n=''),e+=t*this.__indent_size,this.__ensure_cache(e),n+=this.__cache[e]},n.prototype.__ensure_cache=function(t){for(;t>=this.__cache.length;)this.__add_column()},n.prototype.__add_column=function(){var t=this.__cache.length,e=0,n='';this.__indent_size&&t>=this.__indent_size&&(t-=(e=Math.floor(t/this.__indent_size))*this.__indent_size,n=new Array(e+1).join(this.__indent_string)),t&&(n+=new Array(t+1).join(' ')),this.__cache.push(n)},o.prototype.__add_outputline=function(){this.previous_line=this.current_line,this.current_line=this.next_line.clone_empty(),this.__lines.push(this.current_line)},o.prototype.get_line_number=function(){return this.__lines.length},o.prototype.get_indent_string=function(t,e){return this.__indent_cache.get_indent_string(t,e)},o.prototype.get_indent_size=function(t,e){return this.__indent_cache.get_indent_size(t,e)},o.prototype.is_empty=function(){return!this.previous_line&&this.current_line.is_empty()},o.prototype.add_new_line=function(t){return!(this.is_empty()||!t&&this.just_added_newline())&&(this.raw||this.__add_outputline(),!0)},o.prototype.get_code=function(t){this.trim(!0);var e=this.current_line.pop();e&&('\n'===e[e.length-1]&&(e=e.replace(/\n+$/g,'')),this.current_line.push(e)),this._end_with_newline&&this.__add_outputline();var n=this.__lines.join('\n');return'\n'!==t&&(n=n.replace(/[\n]/g,t)),n},o.prototype.set_wrap_point=function(){this.current_line._set_wrap_point()},o.prototype.set_indent=function(t,e){return t=t||0,e=e||0,this.next_line.set_indent(t,e),this.__lines.length>1?(this.current_line.set_indent(t,e),!0):(this.current_line.set_indent(),!1)},o.prototype.add_raw_token=function(t){for(var e=0;e<t.newlines;e++)this.__add_outputline();this.current_line.set_indent(-1),this.current_line.push(t.whitespace_before),this.current_line.push(t.text),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=!1},o.prototype.add_token=function(t){this.__add_space_before_token(),this.current_line.push(t),this.space_before_token=!1,this.non_breaking_space=!1,this.previous_token_wrapped=this.current_line._allow_wrap()},o.prototype.__add_space_before_token=function(){this.space_before_token&&!this.just_added_newline()&&(this.non_breaking_space||this.set_wrap_point(),this.current_line.push(' '))},o.prototype.remove_indent=function(t){for(var e=this.__lines.length;t<e;)this.__lines[t]._remove_indent(),t++;this.current_line._remove_wrap_indent()},o.prototype.trim=function(t){for(t=void 0!==t&&t,this.current_line.trim();t&&this.__lines.length>1&&this.current_line.is_empty();)this.__lines.pop(),this.current_line=this.__lines[this.__lines.length-1],this.current_line.trim();this.previous_line=this.__lines.length>1?this.__lines[this.__lines.length-2]:null},o.prototype.just_added_newline=function(){return this.current_line.is_empty()},o.prototype.just_added_blankline=function(){return this.is_empty()||this.current_line.is_empty()&&this.previous_line.is_empty()},o.prototype.ensure_empty_line_above=function(t,n){for(var o=this.__lines.length-2;o>=0;){var i=this.__lines[o];if(i.is_empty())break;if(0!==i.item(0).indexOf(t)&&i.item(-1)!==n){this.__lines.splice(o+1,0,new e(this)),this.previous_line=this.__lines[this.__lines.length-2];break}o--}},t.exports.Output=o},function(t){t.exports.Token=function(t,e,n,o){this.type=t,this.text=e,this.comments_before=null,this.newlines=n||0,this.whitespace_before=o||'',this.parent=null,this.next=null,this.previous=null,this.opened=null,this.closed=null,this.directives=null}},function(t,e){var n="\\x24\\x30-\\x39\\x41-\\x5a\\x5f\\x61-\\x7a",o="\\xaa\\xb5\\xba\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02c1\\u02c6-\\u02d1\\u02e0-\\u02e4\\u02ec\\u02ee\\u0370-\\u0374\\u0376\\u0377\\u037a-\\u037d\\u0386\\u0388-\\u038a\\u038c\\u038e-\\u03a1\\u03a3-\\u03f5\\u03f7-\\u0481\\u048a-\\u0527\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05d0-\\u05ea\\u05f0-\\u05f2\\u0620-\\u064a\\u066e\\u066f\\u0671-\\u06d3\\u06d5\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u06fc\\u06ff\\u0710\\u0712-\\u072f\\u074d-\\u07a5\\u07b1\\u07ca-\\u07ea\\u07f4\\u07f5\\u07fa\\u0800-\\u0815\\u081a\\u0824\\u0828\\u0840-\\u0858\\u08a0\\u08a2-\\u08ac\\u0904-\\u0939\\u093d\\u0950\\u0958-\\u0961\\u0971-\\u0977\\u0979-\\u097f\\u0985-\\u098c\\u098f\\u0990\\u0993-\\u09a8\\u09aa-\\u09b0\\u09b2\\u09b6-\\u09b9\\u09bd\\u09ce\\u09dc\\u09dd\\u09df-\\u09e1\\u09f0\\u09f1\\u0a05-\\u0a0a\\u0a0f\\u0a10\\u0a13-\\u0a28\\u0a2a-\\u0a30\\u0a32\\u0a33\\u0a35\\u0a36\\u0a38\\u0a39\\u0a59-\\u0a5c\\u0a5e\\u0a72-\\u0a74\\u0a85-\\u0a8d\\u0a8f-\\u0a91\\u0a93-\\u0aa8\\u0aaa-\\u0ab0\\u0ab2\\u0ab3\\u0ab5-\\u0ab9\\u0abd\\u0ad0\\u0ae0\\u0ae1\\u0b05-\\u0b0c\\u0b0f\\u0b10\\u0b13-\\u0b28\\u0b2a-\\u0b30\\u0b32\\u0b33\\u0b35-\\u0b39\\u0b3d\\u0b5c\\u0b5d\\u0b5f-\\u0b61\\u0b71\\u0b83\\u0b85-\\u0b8a\\u0b8e-\\u0b90\\u0b92-\\u0b95\\u0b99\\u0b9a\\u0b9c\\u0b9e\\u0b9f\\u0ba3\\u0ba4\\u0ba8-\\u0baa\\u0bae-\\u0bb9\\u0bd0\\u0c05-\\u0c0c\\u0c0e-\\u0c10\\u0c12-\\u0c28\\u0c2a-\\u0c33\\u0c35-\\u0c39\\u0c3d\\u0c58\\u0c59\\u0c60\\u0c61\\u0c85-\\u0c8c\\u0c8e-\\u0c90\\u0c92-\\u0ca8\\u0caa-\\u0cb3\\u0cb5-\\u0cb9\\u0cbd\\u0cde\\u0ce0\\u0ce1\\u0cf1\\u0cf2\\u0d05-\\u0d0c\\u0d0e-\\u0d10\\u0d12-\\u0d3a\\u0d3d\\u0d4e\\u0d60\\u0d61\\u0d7a-\\u0d7f\\u0d85-\\u0d96\\u0d9a-\\u0db1\\u0db3-\\u0dbb\\u0dbd\\u0dc0-\\u0dc6\\u0e01-\\u0e30\\u0e32\\u0e33\\u0e40-\\u0e46\\u0e81\\u0e82\\u0e84\\u0e87\\u0e88\\u0e8a\\u0e8d\\u0e94-\\u0e97\\u0e99-\\u0e9f\\u0ea1-\\u0ea3\\u0ea5\\u0ea7\\u0eaa\\u0eab\\u0ead-\\u0eb0\\u0eb2\\u0eb3\\u0ebd\\u0ec0-\\u0ec4\\u0ec6\\u0edc-\\u0edf\\u0f00\\u0f40-\\u0f47\\u0f49-\\u0f6c\\u0f88-\\u0f8c\\u1000-\\u102a\\u103f\\u1050-\\u1055\\u105a-\\u105d\\u1061\\u1065\\u1066\\u106e-\\u1070\\u1075-\\u1081\\u108e\\u10a0-\\u10c5\\u10c7\\u10cd\\u10d0-\\u10fa\\u10fc-\\u1248\\u124a-\\u124d\\u1250-\\u1256\\u1258\\u125a-\\u125d\\u1260-\\u1288\\u128a-\\u128d\\u1290-\\u12b0\\u12b2-\\u12b5\\u12b8-\\u12be\\u12c0\\u12c2-\\u12c5\\u12c8-\\u12d6\\u12d8-\\u1310\\u1312-\\u1315\\u1318-\\u135a\\u1380-\\u138f\\u13a0-\\u13f4\\u1401-\\u166c\\u166f-\\u167f\\u1681-\\u169a\\u16a0-\\u16ea\\u16ee-\\u16f0\\u1700-\\u170c\\u170e-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176c\\u176e-\\u1770\\u1780-\\u17b3\\u17d7\\u17dc\\u1820-\\u1877\\u1880-\\u18a8\\u18aa\\u18b0-\\u18f5\\u1900-\\u191c\\u1950-\\u196d\\u1970-\\u1974\\u1980-\\u19ab\\u19c1-\\u19c7\\u1a00-\\u1a16\\u1a20-\\u1a54\\u1aa7\\u1b05-\\u1b33\\u1b45-\\u1b4b\\u1b83-\\u1ba0\\u1bae\\u1baf\\u1bba-\\u1be5\\u1c00-\\u1c23\\u1c4d-\\u1c4f\\u1c5a-\\u1c7d\\u1ce9-\\u1cec\\u1cee-\\u1cf1\\u1cf5\\u1cf6\\u1d00-\\u1dbf\\u1e00-\\u1f15\\u1f18-\\u1f1d\\u1f20-\\u1f45\\u1f48-\\u1f4d\\u1f50-\\u1f57\\u1f59\\u1f5b\\u1f5d\\u1f5f-\\u1f7d\\u1f80-\\u1fb4\\u1fb6-\\u1fbc\\u1fbe\\u1fc2-\\u1fc4\\u1fc6-\\u1fcc\\u1fd0-\\u1fd3\\u1fd6-\\u1fdb\\u1fe0-\\u1fec\\u1ff2-\\u1ff4\\u1ff6-\\u1ffc\\u2071\\u207f\\u2090-\\u209c\\u2102\\u2107\\u210a-\\u2113\\u2115\\u2119-\\u211d\\u2124\\u2126\\u2128\\u212a-\\u212d\\u212f-\\u2139\\u213c-\\u213f\\u2145-\\u2149\\u214e\\u2160-\\u2188\\u2c00-\\u2c2e\\u2c30-\\u2c5e\\u2c60-\\u2ce4\\u2ceb-\\u2cee\\u2cf2\\u2cf3\\u2d00-\\u2d25\\u2d27\\u2d2d\\u2d30-\\u2d67\\u2d6f\\u2d80-\\u2d96\\u2da0-\\u2da6\\u2da8-\\u2dae\\u2db0-\\u2db6\\u2db8-\\u2dbe\\u2dc0-\\u2dc6\\u2dc8-\\u2dce\\u2dd0-\\u2dd6\\u2dd8-\\u2dde\\u2e2f\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303c\\u3041-\\u3096\\u309d-\\u309f\\u30a1-\\u30fa\\u30fc-\\u30ff\\u3105-\\u312d\\u3131-\\u318e\\u31a0-\\u31ba\\u31f0-\\u31ff\\u3400-\\u4db5\\u4e00-\\u9fcc\\ua000-\\ua48c\\ua4d0-\\ua4fd\\ua500-\\ua60c\\ua610-\\ua61f\\ua62a\\ua62b\\ua640-\\ua66e\\ua67f-\\ua697\\ua6a0-\\ua6ef\\ua717-\\ua71f\\ua722-\\ua788\\ua78b-\\ua78e\\ua790-\\ua793\\ua7a0-\\ua7aa\\ua7f8-\\ua801\\ua803-\\ua805\\ua807-\\ua80a\\ua80c-\\ua822\\ua840-\\ua873\\ua882-\\ua8b3\\ua8f2-\\ua8f7\\ua8fb\\ua90a-\\ua925\\ua930-\\ua946\\ua960-\\ua97c\\ua984-\\ua9b2\\ua9cf\\uaa00-\\uaa28\\uaa40-\\uaa42\\uaa44-\\uaa4b\\uaa60-\\uaa76\\uaa7a\\uaa80-\\uaaaf\\uaab1\\uaab5\\uaab6\\uaab9-\\uaabd\\uaac0\\uaac2\\uaadb-\\uaadd\\uaae0-\\uaaea\\uaaf2-\\uaaf4\\uab01-\\uab06\\uab09-\\uab0e\\uab11-\\uab16\\uab20-\\uab26\\uab28-\\uab2e\\uabc0-\\uabe2\\uac00-\\ud7a3\\ud7b0-\\ud7c6\\ud7cb-\\ud7fb\\uf900-\\ufa6d\\ufa70-\\ufad9\\ufb00-\\ufb06\\ufb13-\\ufb17\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40\\ufb41\\ufb43\\ufb44\\ufb46-\\ufbb1\\ufbd3-\\ufd3d\\ufd50-\\ufd8f\\ufd92-\\ufdc7\\ufdf0-\\ufdfb\\ufe70-\\ufe74\\ufe76-\\ufefc\\uff21-\\uff3a\\uff41-\\uff5a\\uff66-\\uffbe\\uffc2-\\uffc7\\uffca-\\uffcf\\uffd2-\\uffd7\\uffda-\\uffdc",i="\\u0300-\\u036f\\u0483-\\u0487\\u0591-\\u05bd\\u05bf\\u05c1\\u05c2\\u05c4\\u05c5\\u05c7\\u0610-\\u061a\\u0620-\\u0649\\u0672-\\u06d3\\u06e7-\\u06e8\\u06fb-\\u06fc\\u0730-\\u074a\\u0800-\\u0814\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0840-\\u0857\\u08e4-\\u08fe\\u0900-\\u0903\\u093a-\\u093c\\u093e-\\u094f\\u0951-\\u0957\\u0962-\\u0963\\u0966-\\u096f\\u0981-\\u0983\\u09bc\\u09be-\\u09c4\\u09c7\\u09c8\\u09d7\\u09df-\\u09e0\\u0a01-\\u0a03\\u0a3c\\u0a3e-\\u0a42\\u0a47\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a66-\\u0a71\\u0a75\\u0a81-\\u0a83\\u0abc\\u0abe-\\u0ac5\\u0ac7-\\u0ac9\\u0acb-\\u0acd\\u0ae2-\\u0ae3\\u0ae6-\\u0aef\\u0b01-\\u0b03\\u0b3c\\u0b3e-\\u0b44\\u0b47\\u0b48\\u0b4b-\\u0b4d\\u0b56\\u0b57\\u0b5f-\\u0b60\\u0b66-\\u0b6f\\u0b82\\u0bbe-\\u0bc2\\u0bc6-\\u0bc8\\u0bca-\\u0bcd\\u0bd7\\u0be6-\\u0bef\\u0c01-\\u0c03\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55\\u0c56\\u0c62-\\u0c63\\u0c66-\\u0c6f\\u0c82\\u0c83\\u0cbc\\u0cbe-\\u0cc4\\u0cc6-\\u0cc8\\u0cca-\\u0ccd\\u0cd5\\u0cd6\\u0ce2-\\u0ce3\\u0ce6-\\u0cef\\u0d02\\u0d03\\u0d46-\\u0d48\\u0d57\\u0d62-\\u0d63\\u0d66-\\u0d6f\\u0d82\\u0d83\\u0dca\\u0dcf-\\u0dd4\\u0dd6\\u0dd8-\\u0ddf\\u0df2\\u0df3\\u0e34-\\u0e3a\\u0e40-\\u0e45\\u0e50-\\u0e59\\u0eb4-\\u0eb9\\u0ec8-\\u0ecd\\u0ed0-\\u0ed9\\u0f18\\u0f19\\u0f20-\\u0f29\\u0f35\\u0f37\\u0f39\\u0f41-\\u0f47\\u0f71-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97\\u0f99-\\u0fbc\\u0fc6\\u1000-\\u1029\\u1040-\\u1049\\u1067-\\u106d\\u1071-\\u1074\\u1082-\\u108d\\u108f-\\u109d\\u135d-\\u135f\\u170e-\\u1710\\u1720-\\u1730\\u1740-\\u1750\\u1772\\u1773\\u1780-\\u17b2\\u17dd\\u17e0-\\u17e9\\u180b-\\u180d\\u1810-\\u1819\\u1920-\\u192b\\u1930-\\u193b\\u1951-\\u196d\\u19b0-\\u19c0\\u19c8-\\u19c9\\u19d0-\\u19d9\\u1a00-\\u1a15\\u1a20-\\u1a53\\u1a60-\\u1a7c\\u1a7f-\\u1a89\\u1a90-\\u1a99\\u1b46-\\u1b4b\\u1b50-\\u1b59\\u1b6b-\\u1b73\\u1bb0-\\u1bb9\\u1be6-\\u1bf3\\u1c00-\\u1c22\\u1c40-\\u1c49\\u1c5b-\\u1c7d\\u1cd0-\\u1cd2\\u1d00-\\u1dbe\\u1e01-\\u1f15\\u200c\\u200d\\u203f\\u2040\\u2054\\u20d0-\\u20dc\\u20e1\\u20e5-\\u20f0\\u2d81-\\u2d96\\u2de0-\\u2dff\\u3021-\\u3028\\u3099\\u309a\\ua640-\\ua66d\\ua674-\\ua67d\\ua69f\\ua6f0-\\ua6f1\\ua7f8-\\ua800\\ua806\\ua80b\\ua823-\\ua827\\ua880-\\ua881\\ua8b4-\\ua8c4\\ua8d0-\\ua8d9\\ua8f3-\\ua8f7\\ua900-\\ua909\\ua926-\\ua92d\\ua930-\\ua945\\ua980-\\ua983\\ua9b3-\\ua9c0\\uaa00-\\uaa27\\uaa40-\\uaa41\\uaa4c-\\uaa4d\\uaa50-\\uaa59\\uaa7b\\uaae0-\\uaae9\\uaaf2-\\uaaf3\\uabc0-\\uabe1\\uabec\\uabed\\uabf0-\\uabf9\\ufb20-\\ufb28\\ufe00-\\ufe0f\\ufe20-\\ufe26\\ufe33\\ufe34\\ufe4d-\\ufe4f\\uff10-\\uff19\\uff3f",r="\\\\u[0-9a-fA-F]{4}|\\\\u\\{[0-9a-fA-F]+\\}",s="(?:"+r+"|["+"\\x23\\x24\\x40\\x41-\\x5a\\x5f\\x61-\\x7a"+o+"])",a="(?:"+r+"|["+n+o+i+"])*";e.identifier=new RegExp(s+a,'g'),e.identifierStart=new RegExp(s),e.identifierMatch=new RegExp("(?:"+r+"|["+n+o+i+"])+");e.newline=/[\n\r\u2028\u2029]/,e.lineBreak=new RegExp('\r\n|'+e.newline.source),e.allLineBreaks=new RegExp(e.lineBreak.source,'g')},function(t,e,n){var o=n(6).Options,i=['before-newline','after-newline','preserve-newline'];function r(t){o.call(this,t,'js');var e=this.raw_options.brace_style||null;"expand-strict"===e?this.raw_options.brace_style="expand":"collapse-preserve-inline"===e?this.raw_options.brace_style="collapse,preserve-inline":void 0!==this.raw_options.braces_on_own_line&&(this.raw_options.brace_style=this.raw_options.braces_on_own_line?"expand":"collapse");var n=this._get_selection_list('brace_style',['collapse','expand','end-expand','none','preserve-inline']);this.brace_preserve_inline=!1,this.brace_style="collapse";for(var r=0;r<n.length;r++)"preserve-inline"===n[r]?this.brace_preserve_inline=!0:this.brace_style=n[r];this.unindent_chained_methods=this._get_boolean('unindent_chained_methods'),this.break_chained_methods=this._get_boolean('break_chained_methods'),this.space_in_paren=this._get_boolean('space_in_paren'),this.space_in_empty_paren=this._get_boolean('space_in_empty_paren'),this.jslint_happy=this._get_boolean('jslint_happy'),this.space_after_anon_function=this._get_boolean('space_after_anon_function'),this.space_after_named_function=this._get_boolean('space_after_named_function'),this.keep_array_indentation=this._get_boolean('keep_array_indentation'),this.space_before_conditional=this._get_boolean('space_before_conditional',!0),this.unescape_strings=this._get_boolean('unescape_strings'),this.e4x=this._get_boolean('e4x'),this.comma_first=this._get_boolean('comma_first'),this.operator_position=this._get_selection('operator_position',i),this.test_output_raw=this._get_boolean('test_output_raw'),this.jslint_happy&&(this.space_after_anon_function=!0)}r.prototype=new o,t.exports.Options=r},function(t){function e(t,e){this.raw_options=n(t,e),this.disabled=this._get_boolean('disabled'),this.eol=this._get_characters('eol','auto'),this.end_with_newline=this._get_boolean('end_with_newline'),this.indent_size=this._get_number('indent_size',4),this.indent_char=this._get_characters('indent_char',' '),this.indent_level=this._get_number('indent_level'),this.preserve_newlines=this._get_boolean('preserve_newlines',!0),this.max_preserve_newlines=this._get_number('max_preserve_newlines',32786),this.preserve_newlines||(this.max_preserve_newlines=0),this.indent_with_tabs=this._get_boolean('indent_with_tabs','\t'===this.indent_char),this.indent_with_tabs&&(this.indent_char='\t',1===this.indent_size&&(this.indent_size=4)),this.wrap_line_length=this._get_number('wrap_line_length',this._get_number('max_char')),this.indent_empty_lines=this._get_boolean('indent_empty_lines'),this.templating=this._get_selection_list('templating',['auto','none','django','erb','handlebars','php','smarty'],['auto'])}function n(t,e){var n,i={};for(n in t=o(t))n!==e&&(i[n]=t[n]);if(e&&t[e])for(n in t[e])i[n]=t[e][n];return i}function o(t){var e,n={};for(e in t){n[e.replace(/-/g,"_")]=t[e]}return n}e.prototype._get_array=function(t,e){var n=this.raw_options[t],o=e||[];return'object'==typeof n?null!==n&&'function'==typeof n.concat&&(o=n.concat()):'string'==typeof n&&(o=n.split(/[^a-zA-Z0-9_\/\-]+/)),o},e.prototype._get_boolean=function(t,e){var n=this.raw_options[t];return void 0===n?!!e:!!n},e.prototype._get_characters=function(t,e){var n=this.raw_options[t],o=e||'';return'string'==typeof n&&(o=n.replace(/\\r/,'\r').replace(/\\n/,'\n').replace(/\\t/,'\t')),o},e.prototype._get_number=function(t,e){var n=this.raw_options[t];e=parseInt(e,10),isNaN(e)&&(e=0);var o=parseInt(n,10);return isNaN(o)&&(o=e),o},e.prototype._get_selection=function(t,e,n){var o=this._get_selection_list(t,e,n);if(1!==o.length)throw new Error("Invalid Option Value: The option '"+t+"' can only be one of the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return o[0]},e.prototype._get_selection_list=function(t,e,n){if(!e||0===e.length)throw new Error("Selection list cannot be empty.");if(n=n||[e[0]],!this._is_valid_selection(n,e))throw new Error("Invalid Default Value!");var o=this._get_array(t,n);if(!this._is_valid_selection(o,e))throw new Error("Invalid Option Value: The option '"+t+"' can contain only the following values:\n"+e+"\nYou passed in: '"+this.raw_options[t]+"'");return o},e.prototype._is_valid_selection=function(t,e){return t.length&&e.length&&!t.some((function(t){return-1===e.indexOf(t)}))},t.exports.Options=e,t.exports.normalizeOpts=o,t.exports.mergeOpts=n},function(t,e,n){var o=n(8).InputScanner,i=n(9).Tokenizer,r=n(9).TOKEN,s=n(13).Directives,a=n(4),l=n(12).Pattern,c=n(14).TemplatablePattern;function u(t,e){return-1!==e.indexOf(t)}var h={START_EXPR:'TK_START_EXPR',END_EXPR:'TK_END_EXPR',START_BLOCK:'TK_START_BLOCK',END_BLOCK:'TK_END_BLOCK',WORD:'TK_WORD',RESERVED:'TK_RESERVED',SEMICOLON:'TK_SEMICOLON',STRING:'TK_STRING',EQUALS:'TK_EQUALS',OPERATOR:'TK_OPERATOR',COMMA:'TK_COMMA',BLOCK_COMMENT:'TK_BLOCK_COMMENT',COMMENT:'TK_COMMENT',DOT:'TK_DOT',UNKNOWN:'TK_UNKNOWN',START:r.START,RAW:r.RAW,EOF:r.EOF},p=new s(/\/\*/,/\*\//),d=/0[xX][0123456789abcdefABCDEF_]*n?|0[oO][01234567_]*n?|0[bB][01_]*n?|\d[\d_]*n|(?:\.\d[\d_]*|\d[\d_]*\.?[\d_]*)(?:[eE][+-]?[\d_]+)?/,f=/[0-9]/,g=/[^\d\.]/,m=(">>> === !== &&= ??= ||= "+"<< && >= ** != == <= >> || ?? |> "+"< / - + > : & % ? ^ | *").split(' '),v=">>>= "+"... >>= <<= === >>> !== **= &&= ??= ||= "+"=> ^= :: /= << <= == && -= >= >> != -- += ** || ?? ++ %= &= *= |= |> "+"= ! ? > < : / ^ - + * & % ~ |";v=(v='\\?\\.(?!\\d) '+(v=v.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&"))).replace(/ /g,'|');var y,_=new RegExp(v),O='continue,try,throw,return,var,let,const,if,switch,case,default,for,while,break,function,import,export'.split(','),b=O.concat(['do','in','of','else','get','set','new','catch','finally','typeof','yield','async','await','from','as','class','extends']),w=new RegExp('^(?:'+b.join('|')+')$'),x=function(t,e){i.call(this,t,e),this._patterns.whitespace=this._patterns.whitespace.matching(/\u00A0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff/.source,/\u2028\u2029/.source);var n=new l(this._input),o=new c(this._input).read_options(this._options);this.__patterns={template:o,identifier:o.starting_with(a.identifier).matching(a.identifierMatch),number:n.matching(d),punct:n.matching(_),comment:n.starting_with(/\/\//).until(/[\n\r\u2028\u2029]/),block_comment:n.starting_with(/\/\*/).until_after(/\*\//),html_comment_start:n.matching(/<!--/),html_comment_end:n.matching(/-->/),include:n.starting_with(/#include/).until_after(a.lineBreak),shebang:n.starting_with(/#!/).until_after(a.lineBreak),xml:n.matching(/[\s\S]*?<(\/?)([-a-zA-Z:0-9_.]+|{[^}]+?}|!\[CDATA\[[^\]]*?\]\]|)(\s*{[^}]+?}|\s+[-a-zA-Z:0-9_.]+|\s+[-a-zA-Z:0-9_.]+\s*=\s*('[^']*'|"[^"]*"|{([^{}]|{[^}]+?})+?}))*\s*(\/?)\s*>/),single_quote:o.until(/['\\\n\r\u2028\u2029]/),double_quote:o.until(/["\\\n\r\u2028\u2029]/),template_text:o.until(/[`\\$]/),template_expression:o.until(/[`}\\]/)}};(x.prototype=new i)._is_comment=function(t){return t.type===h.COMMENT||t.type===h.BLOCK_COMMENT||t.type===h.UNKNOWN},x.prototype._is_opening=function(t){return t.type===h.START_BLOCK||t.type===h.START_EXPR},x.prototype._is_closing=function(t,e){return(t.type===h.END_BLOCK||t.type===h.END_EXPR)&&e&&(']'===t.text&&'['===e.text||')'===t.text&&'('===e.text||'}'===t.text&&'{'===e.text)},x.prototype._reset=function(){y=!1},x.prototype._get_next_token=function(t,e){var n=null;this._readWhitespace();var o=this._input.peek();return null===o?this._create_token(h.EOF,''):n=(n=(n=(n=(n=(n=(n=(n=(n=(n=n||this._read_non_javascript(o))||this._read_string(o))||this._read_pair(o,this._input.peek(1)))||this._read_word(t))||this._read_singles(o))||this._read_comment(o))||this._read_regexp(o,t))||this._read_xml(o,t))||this._read_punctuation())||this._create_token(h.UNKNOWN,this._input.next())},x.prototype._read_word=function(t){var e;return''!==(e=this.__patterns.identifier.read())?(e=e.replace(a.allLineBreaks,'\n'),t.type!==h.DOT&&(t.type!==h.RESERVED||'set'!==t.text&&'get'!==t.text)&&w.test(e)?'in'!==e&&'of'!==e||t.type!==h.WORD&&t.type!==h.STRING?this._create_token(h.RESERVED,e):this._create_token(h.OPERATOR,e):this._create_token(h.WORD,e)):''!==(e=this.__patterns.number.read())?this._create_token(h.WORD,e):void 0},x.prototype._read_singles=function(t){var e=null;return'('===t||'['===t?e=this._create_token(h.START_EXPR,t):')'===t||']'===t?e=this._create_token(h.END_EXPR,t):'{'===t?e=this._create_token(h.START_BLOCK,t):'}'===t?e=this._create_token(h.END_BLOCK,t):';'===t?e=this._create_token(h.SEMICOLON,t):'.'===t&&g.test(this._input.peek(1))?e=this._create_token(h.DOT,t):','===t&&(e=this._create_token(h.COMMA,t)),e&&this._input.next(),e},x.prototype._read_pair=function(t,e){var n=null;return'#'===t&&'{'===e&&(n=this._create_token(h.START_BLOCK,t+e)),n&&(this._input.next(),this._input.next()),n},x.prototype._read_punctuation=function(){var t=this.__patterns.punct.read();if(''!==t)return'='===t?this._create_token(h.EQUALS,t):'?.'===t?this._create_token(h.DOT,t):this._create_token(h.OPERATOR,t)},x.prototype._read_non_javascript=function(t){var e='';if('#'===t){if(this._is_first_token()&&(e=this.__patterns.shebang.read()))return this._create_token(h.UNKNOWN,e.trim()+'\n');if(e=this.__patterns.include.read())return this._create_token(h.UNKNOWN,e.trim()+'\n');t=this._input.next();var n='#';if(this._input.hasNext()&&this._input.testChar(f)){do{n+=t=this._input.next()}while(this._input.hasNext()&&'#'!==t&&'='!==t);return'#'===t||('['===this._input.peek()&&']'===this._input.peek(1)?(n+='[]',this._input.next(),this._input.next()):'{'===this._input.peek()&&'}'===this._input.peek(1)&&(n+='{}',this._input.next(),this._input.next())),this._create_token(h.WORD,n)}this._input.back()}else if('<'===t&&this._is_first_token()){if(e=this.__patterns.html_comment_start.read()){for(;this._input.hasNext()&&!this._input.testChar(a.newline);)e+=this._input.next();return y=!0,this._create_token(h.COMMENT,e)}}else if(y&&'-'===t&&(e=this.__patterns.html_comment_end.read()))return y=!1,this._create_token(h.COMMENT,e);return null},x.prototype._read_comment=function(t){var e=null;if('/'===t){var n='';if('*'===this._input.peek(1)){n=this.__patterns.block_comment.read();var o=p.get_directives(n);o&&'start'===o.ignore&&(n+=p.readIgnored(this._input)),n=n.replace(a.allLineBreaks,'\n'),(e=this._create_token(h.BLOCK_COMMENT,n)).directives=o}else'/'===this._input.peek(1)&&(n=this.__patterns.comment.read(),e=this._create_token(h.COMMENT,n))}return e},x.prototype._read_string=function(t){if('`'===t||"'"===t||'"'===t){var e=this._input.next();return this.has_char_escapes=!1,e+='`'===t?this._read_string_recursive('`',!0,'${'):this._read_string_recursive(t),this.has_char_escapes&&this._options.unescape_strings&&(e=function(t){var e='',n=0,i=new o(t),r=null;for(;i.hasNext();)if((r=i.match(/([\s]|[^\\]|\\\\)+/g))&&(e+=r[0]),'\\'===i.peek()){if(i.next(),'x'===i.peek())r=i.match(/x([0-9A-Fa-f]{2})/g);else{if('u'!==i.peek()){e+='\\',i.hasNext()&&(e+=i.next());continue}(r=i.match(/u([0-9A-Fa-f]{4})/g))||(r=i.match(/u\{([0-9A-Fa-f]+)\}/g))}if(!r)return t;if((n=parseInt(r[1],16))>126&&n<=255&&0===r[0].indexOf('x'))return t;e+=n>=0&&n<32||n>1114111?'\\'+r[0]:34===n||39===n||92===n?'\\'+String.fromCharCode(n):String.fromCharCode(n)}return e}(e)),this._input.peek()===t&&(e+=this._input.next()),e=e.replace(a.allLineBreaks,'\n'),this._create_token(h.STRING,e)}return null},x.prototype._allow_regexp_or_xml=function(t){return t.type===h.RESERVED&&u(t.text,['return','case','throw','else','do','typeof','yield'])||t.type===h.END_EXPR&&')'===t.text&&t.opened.previous.type===h.RESERVED&&u(t.opened.previous.text,['if','while','for'])||u(t.type,[h.COMMENT,h.START_EXPR,h.START_BLOCK,h.START,h.END_BLOCK,h.OPERATOR,h.EQUALS,h.EOF,h.SEMICOLON,h.COMMA])},x.prototype._read_regexp=function(t,e){if('/'===t&&this._allow_regexp_or_xml(e)){for(var n=this._input.next(),o=!1,i=!1;this._input.hasNext()&&(o||i||this._input.peek()!==t)&&!this._input.testChar(a.newline);)n+=this._input.peek(),o?o=!1:(o='\\'===this._input.peek(),'['===this._input.peek()?i=!0:']'===this._input.peek()&&(i=!1)),this._input.next();return this._input.peek()===t&&(n+=this._input.next(),n+=this._input.read(a.identifier)),this._create_token(h.STRING,n)}return null},x.prototype._read_xml=function(t,e){if(this._options.e4x&&"<"===t&&this._allow_regexp_or_xml(e)){var n='',o=this.__patterns.xml.read_match();if(o){for(var i=o[2].replace(/^{\s+/,'{').replace(/\s+}$/,'}'),r=0===i.indexOf('{'),s=0;o;){var l=!!o[1],c=o[2];if(!(!!o[o.length-1]||"![CDATA["===c.slice(0,8))&&(c===i||r&&c.replace(/^{\s+/,'{').replace(/\s+}$/,'}'))&&(l?--s:++s),n+=o[0],s<=0)break;o=this.__patterns.xml.read_match()}return o||(n+=this._input.match(/[\s\S]*/g)[0]),n=n.replace(a.allLineBreaks,'\n'),this._create_token(h.STRING,n)}}return null},x.prototype._read_string_recursive=function(t,e,n){var o,i;'\''===t?i=this.__patterns.single_quote:'"'===t?i=this.__patterns.double_quote:'`'===t?i=this.__patterns.template_text:'}'===t&&(i=this.__patterns.template_expression);for(var r=i.read(),s='';this._input.hasNext();){if((s=this._input.next())===t||!e&&a.newline.test(s)){this._input.back();break}'\\'===s&&this._input.hasNext()?('x'===(o=this._input.peek())||'u'===o?this.has_char_escapes=!0:'\r'===o&&'\n'===this._input.peek(1)&&this._input.next(),s+=this._input.next()):n&&('${'===n&&'$'===s&&'{'===this._input.peek()&&(s+=this._input.next()),n===s&&(s+='`'===t?this._read_string_recursive('}',e,'`'):this._read_string_recursive('`',e,'${'),this._input.hasNext()&&(s+=this._input.next()))),r+=s+=i.read()}return r},t.exports.Tokenizer=x,t.exports.TOKEN=h,t.exports.positionable_operators=m.slice(),t.exports.line_starters=O.slice()},function(t){var e=RegExp.prototype.hasOwnProperty('sticky');function n(t){this.__input=t||'',this.__input_length=this.__input.length,this.__position=0}n.prototype.restart=function(){this.__position=0},n.prototype.back=function(){this.__position>0&&(this.__position-=1)},n.prototype.hasNext=function(){return this.__position<this.__input_length},n.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__input.charAt(this.__position),this.__position+=1),t},n.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__input_length&&(e=this.__input.charAt(t)),e},n.prototype.__match=function(t,n){t.lastIndex=n;var o=t.exec(this.__input);return!o||e&&t.sticky||o.index!==n&&(o=null),o},n.prototype.test=function(t,e){return e=e||0,(e+=this.__position)>=0&&e<this.__input_length&&!!this.__match(t,e)},n.prototype.testChar=function(t,e){var n=this.peek(e);return t.lastIndex=0,null!==n&&t.test(n)},n.prototype.match=function(t){var e=this.__match(t,this.__position);return e?this.__position+=e[0].length:e=null,e},n.prototype.read=function(t,e,n){var o,i='';return t&&(o=this.match(t))&&(i+=o[0]),!e||!o&&t||(i+=this.readUntil(e,n)),i},n.prototype.readUntil=function(t,e){var n,o=this.__position;t.lastIndex=this.__position;var i=t.exec(this.__input);return i?(o=i.index,e&&(o+=i[0].length)):o=this.__input_length,n=this.__input.substring(this.__position,o),this.__position=o,n},n.prototype.readUntilAfter=function(t){return this.readUntil(t,!0)},n.prototype.get_regexp=function(t,n){var o=null,i='g';return n&&e&&(i='y'),"string"==typeof t&&''!==t?o=new RegExp(t,i):t&&(o=new RegExp(t.source,i)),o},n.prototype.get_literal_regexp=function(t){return RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&'))},n.prototype.peekUntilAfter=function(t){var e=this.__position,n=this.readUntilAfter(t);return this.__position=e,n},n.prototype.lookBack=function(t){var e=this.__position-1;return e>=t.length&&this.__input.substring(e-t.length,e).toLowerCase()===t},t.exports.InputScanner=n},function(t,e,n){var o=n(8).InputScanner,i=n(3).Token,r=n(10).TokenStream,s=n(11).WhitespacePattern,a={START:'TK_START',RAW:'TK_RAW',EOF:'TK_EOF'},l=function(t,e){this._input=new o(t),this._options=e||{},this.__tokens=null,this._patterns={},this._patterns.whitespace=new s(this._input)};l.prototype.tokenize=function(){var t;this._input.restart(),this.__tokens=new r,this._reset();for(var e=new i(a.START,''),n=null,o=[],s=new r;e.type!==a.EOF;){for(t=this._get_next_token(e,n);this._is_comment(t);)s.add(t),t=this._get_next_token(e,n);s.isEmpty()||(t.comments_before=s,s=new r),t.parent=n,this._is_opening(t)?(o.push(n),n=t):n&&this._is_closing(t,n)&&(t.opened=n,n.closed=t,n=o.pop(),t.parent=n),t.previous=e,e.next=t,this.__tokens.add(t),e=t}return this.__tokens},l.prototype._is_first_token=function(){return this.__tokens.isEmpty()},l.prototype._reset=function(){},l.prototype._get_next_token=function(t,e){this._readWhitespace();var n=this._input.read(/.+/g);return n?this._create_token(a.RAW,n):this._create_token(a.EOF,'')},l.prototype._is_comment=function(t){return!1},l.prototype._is_opening=function(t){return!1},l.prototype._is_closing=function(t,e){return!1},l.prototype._create_token=function(t,e){return new i(t,e,this._patterns.whitespace.newline_count,this._patterns.whitespace.whitespace_before_token)},l.prototype._readWhitespace=function(){return this._patterns.whitespace.read()},t.exports.Tokenizer=l,t.exports.TOKEN=a},function(t){function e(t){this.__tokens=[],this.__tokens_length=this.__tokens.length,this.__position=0,this.__parent_token=t}e.prototype.restart=function(){this.__position=0},e.prototype.isEmpty=function(){return 0===this.__tokens_length},e.prototype.hasNext=function(){return this.__position<this.__tokens_length},e.prototype.next=function(){var t=null;return this.hasNext()&&(t=this.__tokens[this.__position],this.__position+=1),t},e.prototype.peek=function(t){var e=null;return t=t||0,(t+=this.__position)>=0&&t<this.__tokens_length&&(e=this.__tokens[t]),e},e.prototype.add=function(t){this.__parent_token&&(t.parent=this.__parent_token),this.__tokens.push(t),this.__tokens_length+=1},t.exports.TokenStream=e},function(t,e,n){var o=n(12).Pattern;function i(t,e){o.call(this,t,e),e?this._line_regexp=this._input.get_regexp(e._line_regexp):this.__set_whitespace_patterns('',''),this.newline_count=0,this.whitespace_before_token=''}i.prototype=new o,i.prototype.__set_whitespace_patterns=function(t,e){t+='\\t ',e+='\\n\\r',this._match_pattern=this._input.get_regexp('['+t+e+']+',!0),this._newline_regexp=this._input.get_regexp('\\r\\n|['+e+']')},i.prototype.read=function(){this.newline_count=0,this.whitespace_before_token='';var t=this._input.read(this._match_pattern);if(' '===t)this.whitespace_before_token=' ';else if(t){var e=this.__split(this._newline_regexp,t);this.newline_count=e.length-1,this.whitespace_before_token=e[this.newline_count]}return t},i.prototype.matching=function(t,e){var n=this._create();return n.__set_whitespace_patterns(t,e),n._update(),n},i.prototype._create=function(){return new i(this._input,this)},i.prototype.__split=function(t,e){t.lastIndex=0;for(var n=0,o=[],i=t.exec(e);i;)o.push(e.substring(n,i.index)),n=i.index+i[0].length,i=t.exec(e);return n<e.length?o.push(e.substring(n,e.length)):o.push(''),o},t.exports.WhitespacePattern=i},function(t){function e(t,e){this._input=t,this._starting_pattern=null,this._match_pattern=null,this._until_pattern=null,this._until_after=!1,e&&(this._starting_pattern=this._input.get_regexp(e._starting_pattern,!0),this._match_pattern=this._input.get_regexp(e._match_pattern,!0),this._until_pattern=this._input.get_regexp(e._until_pattern),this._until_after=e._until_after)}e.prototype.read=function(){var t=this._input.read(this._starting_pattern);return this._starting_pattern&&!t||(t+=this._input.read(this._match_pattern,this._until_pattern,this._until_after)),t},e.prototype.read_match=function(){return this._input.match(this._match_pattern)},e.prototype.until_after=function(t){var e=this._create();return e._until_after=!0,e._until_pattern=this._input.get_regexp(t),e._update(),e},e.prototype.until=function(t){var e=this._create();return e._until_after=!1,e._until_pattern=this._input.get_regexp(t),e._update(),e},e.prototype.starting_with=function(t){var e=this._create();return e._starting_pattern=this._input.get_regexp(t,!0),e._update(),e},e.prototype.matching=function(t){var e=this._create();return e._match_pattern=this._input.get_regexp(t,!0),e._update(),e},e.prototype._create=function(){return new e(this._input,this)},e.prototype._update=function(){},t.exports.Pattern=e},function(t){function e(t,e){t='string'==typeof t?t:t.source,e='string'==typeof e?e:e.source,this.__directives_block_pattern=new RegExp(t+/ beautify( \w+[:]\w+)+ /.source+e,'g'),this.__directive_pattern=/ (\w+)[:](\w+)/g,this.__directives_end_ignore_pattern=new RegExp(t+/\sbeautify\signore:end\s/.source+e,'g')}e.prototype.get_directives=function(t){if(!t.match(this.__directives_block_pattern))return null;var e={};this.__directive_pattern.lastIndex=0;for(var n=this.__directive_pattern.exec(t);n;)e[n[1]]=n[2],n=this.__directive_pattern.exec(t);return e},e.prototype.readIgnored=function(t){return t.readUntilAfter(this.__directives_end_ignore_pattern)},t.exports.Directives=e},function(t,e,n){var o=n(12).Pattern,i={django:!1,erb:!1,handlebars:!1,php:!1,smarty:!1};function r(t,e){o.call(this,t,e),this.__template_pattern=null,this._disabled=Object.assign({},i),this._excluded=Object.assign({},i),e&&(this.__template_pattern=this._input.get_regexp(e.__template_pattern),this._excluded=Object.assign(this._excluded,e._excluded),this._disabled=Object.assign(this._disabled,e._disabled));var n=new o(t);this.__patterns={handlebars_comment:n.starting_with(/{{!--/).until_after(/--}}/),handlebars_unescaped:n.starting_with(/{{{/).until_after(/}}}/),handlebars:n.starting_with(/{{/).until_after(/}}/),php:n.starting_with(/<\?(?:[= ]|php)/).until_after(/\?>/),erb:n.starting_with(/<%[^%]/).until_after(/[^%]%>/),django:n.starting_with(/{%/).until_after(/%}/),django_value:n.starting_with(/{{/).until_after(/}}/),django_comment:n.starting_with(/{#/).until_after(/#}/),smarty:n.starting_with(/{(?=[^}{\s\n])/).until_after(/[^\s\n]}/),smarty_comment:n.starting_with(/{\*/).until_after(/\*}/),smarty_literal:n.starting_with(/{literal}/).until_after(/{\/literal}/)}}r.prototype=new o,r.prototype._create=function(){return new r(this._input,this)},r.prototype._update=function(){this.__set_templated_pattern()},r.prototype.disable=function(t){var e=this._create();return e._disabled[t]=!0,e._update(),e},r.prototype.read_options=function(t){var e=this._create();for(var n in i)e._disabled[n]=-1===t.templating.indexOf(n);return e._update(),e},r.prototype.exclude=function(t){var e=this._create();return e._excluded[t]=!0,e._update(),e},r.prototype.read=function(){var t='';t=this._match_pattern?this._input.read(this._starting_pattern):this._input.read(this._starting_pattern,this.__template_pattern);for(var e=this._read_template();e;)this._match_pattern?e+=this._input.read(this._match_pattern):e+=this._input.readUntil(this.__template_pattern),t+=e,e=this._read_template();return this._until_after&&(t+=this._input.readUntilAfter(this._until_pattern)),t},r.prototype.__set_templated_pattern=function(){var t=[];this._disabled.php||t.push(this.__patterns.php._starting_pattern.source),this._disabled.handlebars||t.push(this.__patterns.handlebars._starting_pattern.source),this._disabled.erb||t.push(this.__patterns.erb._starting_pattern.source),this._disabled.django||(t.push(this.__patterns.django._starting_pattern.source),t.push(this.__patterns.django_value._starting_pattern.source),t.push(this.__patterns.django_comment._starting_pattern.source)),this._disabled.smarty||t.push(this.__patterns.smarty._starting_pattern.source),this._until_pattern&&t.push(this._until_pattern.source),this.__template_pattern=this._input.get_regexp('(?:'+t.join('|')+')')},r.prototype._read_template=function(){var t='',e=this._input.peek();if('<'===e){var n=this._input.peek(1);this._disabled.php||this._excluded.php||'?'!==n||(t=t||this.__patterns.php.read()),this._disabled.erb||this._excluded.erb||'%'!==n||(t=t||this.__patterns.erb.read())}else'{'===e&&(this._disabled.handlebars||this._excluded.handlebars||(t=(t=(t=t||this.__patterns.handlebars_comment.read())||this.__patterns.handlebars_unescaped.read())||this.__patterns.handlebars.read()),this._disabled.django||(this._excluded.django||this._excluded.handlebars||(t=t||this.__patterns.django_value.read()),this._excluded.django||(t=(t=t||this.__patterns.django_comment.read())||this.__patterns.django.read())),this._disabled.smarty||this._disabled.django&&this._disabled.handlebars&&(t=(t=(t=t||this.__patterns.smarty_comment.read())||this.__patterns.smarty_literal.read())||this.__patterns.smarty.read()));return t},t.exports.TemplatablePattern=r}],e={};var n=function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}(0);o=n}();var i=o;1&&(void 0===(n=function(){return{js_beautify:i}}.apply(e,[]))||(t.exports=n))}()},410:(t,e,n)=>{var o,i,r;1&&(i=[n(50),n(316)],void 0===(r='function'==typeof(o=function(t,e){var n=Array.prototype.slice;function o(t,e,n){return n.length<=4?t.call(e,n[0],n[1],n[2],n[3]):t.apply(e,n)}function i(t,e){return n.call(t,e)}function r(e,n){return null!=e&&(t.isArray(n)||(n=i(arguments,1)),t.all(n,(function(t){return t in e})))}var s=function(){var e=!1,n=-1;function o(){n++,e=!0,t.defer((function(){e=!1}))}return function(){return e||o(),n}}();function a(){this.registeredObjects=[],this.cidIndexes=[]}function l(e,n,o,i){for(var r,s=0,a=n.length;s<a;s++)if(r=n[s]){if("on"===e){if(!i.objectRegistry.register(r))continue}else if(!i.objectRegistry.unregister(r))continue;t.isFunction(r[e])&&r[e]("all",o,i)}}function c(e,n){var o=n.type,i=n.undoTypes,r=!i[o]||i[o][e];t.isFunction(r)&&r(n.object,n.before,n.after,n.options)}function u(e,o,i,r,s){if(!(i.isCurrentlyUndoRedoing||"undo"===e&&-1===i.pointer||"redo"===e&&i.pointer===i.length-1)){i.isCurrentlyUndoRedoing=!0;var a,l,c="undo"===e;for(s?l=c&&i.pointer===i.length-1||!c&&-1===i.pointer?t.clone(i.models):n.apply(i.models,c?[0,i.pointer]:[i.pointer,i.length-1]):(a=i.at(c?i.pointer:i.pointer+1),l=r?i.where({magicFusionIndex:a.get("magicFusionIndex")}):[a]),i.pointer+=(c?-1:1)*l.length;a=c?l.pop():l.shift();)a[e]();i.isCurrentlyUndoRedoing=!1,o.trigger(e,o)}}function h(t,e){var n=t.condition,i=typeof n;return"function"===i?!!o(n,t,e):"boolean"!==i||n}function p(t,e,n,i){if(t.track&&!t.isCurrentlyUndoRedoing&&e in i&&h(i[e],n)){var a=o(i[e]["on"],i[e],n);if(r(a,"object","before","after")){if(a.type=e,a.magicFusionIndex=s(),a.undoTypes=i,t.pointer<t.length-1)for(var l=t.length-t.pointer-1;l--;)t.pop();t.pointer=t.length,t.add(a),t.length>t.maximumStackLength&&(t.shift(),t.pointer--)}}}a.prototype={isRegistered:function(e){return e&&e.cid?this.registeredObjects[e.cid]:t.contains(this.registeredObjects,e)},register:function(t){return!this.isRegistered(t)&&(t&&t.cid?(this.registeredObjects[t.cid]=t,this.cidIndexes.push(t.cid)):this.registeredObjects.push(t),!0)},unregister:function(e){if(this.isRegistered(e)){if(e&&e.cid)delete this.registeredObjects[e.cid],this.cidIndexes.splice(t.indexOf(this.cidIndexes,e.cid),1);else{var n=t.indexOf(this.registeredObjects,e);this.registeredObjects.splice(n,1)}return!0}return!1},get:function(){return t.map(this.cidIndexes,(function(t){return this.registeredObjects[t]}),this).concat(this.registeredObjects)}};var d={add:{undo:function(t,e,n,o){t.remove(n,o)},redo:function(t,e,n,o){o.index&&(o.at=o.index),t.add(n,o)},on:function(e,n,o){return{object:n,before:void 0,after:e,options:t.clone(o)}}},remove:{undo:function(t,e,n,o){"index"in o&&(o.at=o.index),t.add(e,o)},redo:function(t,e,n,o){t.remove(e,o)},on:function(e,n,o){return{object:n,before:e,after:void 0,options:t.clone(o)}}},change:{undo:function(e,n,o,i){t.isEmpty(n)?t.each(t.keys(o),e.unset,e):(e.set(n),i&&i.unsetData&&i.unsetData.before&&i.unsetData.before.length&&t.each(i.unsetData.before,e.unset,e))},redo:function(e,n,o,i){t.isEmpty(o)?t.each(t.keys(n),e.unset,e):(e.set(o),i&&i.unsetData&&i.unsetData.after&&i.unsetData.after.length&&t.each(i.unsetData.after,e.unset,e))},on:function(e,n){var o=e.changedAttributes(),i=t.keys(o),r=t.pick(e.previousAttributes(),i),s=t.keys(r),a=(n||(n={})).unsetData={after:[],before:[]};return i.length!=s.length&&(i.length>s.length?t.each(i,(function(t){t in r||a.before.push(t)}),this):t.each(s,(function(t){t in o||a.after.push(t)}))),{object:e,before:r,after:o,options:t.clone(n)}}},reset:{undo:function(t,e,n){t.reset(e)},redo:function(t,e,n){t.reset(n)},on:function(e,n){return{object:e,before:n.previousModels,after:t.clone(e.models)}}}};function f(){}function g(e,n,o,i){if("object"==typeof n)return t.each(n,(function(t,n){2===e?g(e,t,o,i):g(e,n,t,o)}));switch(e){case 0:r(o,"undo","redo","on")&&t.all(t.pick(o,"undo","redo","on"),t.isFunction)&&(i[n]=o);break;case 1:i[n]&&t.isObject(o)&&(i[n]=t.extend({},i[n],o));break;case 2:delete i[n]}return this}f.prototype=d;var m=e.Model.extend({defaults:{type:null,object:null,before:null,after:null,magicFusionIndex:null},undo:function(t){c("undo",this.attributes)},redo:function(t){c("redo",this.attributes)}}),v=e.Collection.extend({model:m,pointer:-1,track:!1,isCurrentlyUndoRedoing:!1,maximumStackLength:1/0,setMaxLength:function(t){this.maximumStackLength=t}}),y=e.Model.extend({defaults:{maximumStackLength:1/0,track:!1},initialize:function(e){this.stack=new v,this.objectRegistry=new a,this.undoTypes=new f,this.stack.setMaxLength(this.get("maximumStackLength")),this.on("change:maximumStackLength",(function(t,e){this.stack.setMaxLength(e)}),this),e&&e.track&&this.startTracking(),e&&e.register&&(t.isArray(e.register)||t.isArguments(e.register)?o(this.register,this,e.register):this.register(e.register))},startTracking:function(){this.set("track",!0),this.stack.track=!0},stopTracking:function(){this.set("track",!1),this.stack.track=!1},isTracking:function(){return this.get("track")},_addToStack:function(t){p(this.stack,t,i(arguments,1),this.undoTypes)},register:function(){l("on",arguments,this._addToStack,this)},unregister:function(){l("off",arguments,this._addToStack,this)},unregisterAll:function(){o(this.unregister,this,this.objectRegistry.get())},undo:function(t){u("undo",this,this.stack,t)},undoAll:function(){u("undo",this,this.stack,!1,!0)},redo:function(t){u("redo",this,this.stack,t)},redoAll:function(){u("redo",this,this.stack,!1,!0)},isAvailable:function(t){var e=this.stack,n=e.length;switch(t){case"undo":return n>0&&e.pointer>-1;case"redo":return n>0&&e.pointer<n-1;default:return!1}},merge:function(e){for(var n,o=t.isArray(e)?e:i(arguments);n=o.pop();)n instanceof y&&n.stack instanceof v&&(n.stack=this.stack)},addUndoType:function(t,e){g(0,t,e,this.undoTypes)},changeUndoType:function(t,e){g(1,t,e,this.undoTypes)},removeUndoType:function(t){g(2,t,void 0,this.undoTypes)},clear:function(){this.stack.reset(),this.stack.pointer=-1}});return t.extend(y,{defaults:function(e){t.extend(y.prototype.defaults,e)},addUndoType:function(t,e){g(0,t,e,d)},changeUndoType:function(t,e){g(1,t,e,d)},removeUndoType:function(t){g(2,t,void 0,d)}}),e.UndoManager=y})?o.apply(e,i):o)||(t.exports=r))},316:(t,e,n)=>{var o,i;!function(r){var s='object'==typeof self&&self.self===self&&self||'object'==typeof n.g&&n.g.global===n.g&&n.g;if(1)o=[n(50),n(815),e],i=function(t,e,n){s.Backbone=function(t,e,n,o){var i=t.Backbone,r=Array.prototype.slice;e.VERSION='1.4.1',e.$=o,e.noConflict=function(){return t.Backbone=i,this},e.emulateHTTP=!1,e.emulateJSON=!1;var s,a=e.Events={},l=/\s+/,c=function(t,e,o,i,r){var s,a=0;if(o&&'object'==typeof o){void 0!==i&&'context'in r&&void 0===r.context&&(r.context=i);for(s=n.keys(o);a<s.length;a++)e=c(t,e,s[a],o[s[a]],r)}else if(o&&l.test(o))for(s=o.split(l);a<s.length;a++)e=t(e,s[a],i,r);else e=t(e,o,i,r);return e};a.on=function(t,e,n){(this._events=c(u,this._events||{},t,e,{context:n,ctx:this,listening:s}),s)&&((this._listeners||(this._listeners={}))[s.id]=s,s.interop=!1);return this},a.listenTo=function(t,e,o){if(!t)return this;var i=t._listenId||(t._listenId=n.uniqueId('l')),r=this._listeningTo||(this._listeningTo={}),a=s=r[i];a||(this._listenId||(this._listenId=n.uniqueId('l')),a=s=r[i]=new m(this,t));var l=h(t,e,o,this);if(s=void 0,l)throw l;return a.interop&&a.on(e,o),this};var u=function(t,e,n,o){if(n){var i=t[e]||(t[e]=[]),r=o.context,s=o.ctx,a=o.listening;a&&a.count++,i.push({callback:n,context:r,ctx:r||s,listening:a})}return t},h=function(t,e,n,o){try{t.on(e,n,o)}catch(t){return t}};a.off=function(t,e,n){return this._events?(this._events=c(p,this._events,t,e,{context:n,listeners:this._listeners}),this):this},a.stopListening=function(t,e,o){var i=this._listeningTo;if(!i)return this;for(var r=t?[t._listenId]:n.keys(i),s=0;s<r.length;s++){var a=i[r[s]];if(!a)break;a.obj.off(e,o,this),a.interop&&a.off(e,o)}return n.isEmpty(i)&&(this._listeningTo=void 0),this};var p=function(t,e,o,i){if(t){var r,s=i.context,a=i.listeners,l=0;if(e||s||o){for(r=e?[e]:n.keys(t);l<r.length;l++){var c=t[e=r[l]];if(!c)break;for(var u=[],h=0;h<c.length;h++){var p=c[h];if(o&&o!==p.callback&&o!==p.callback._callback||s&&s!==p.context)u.push(p);else{var d=p.listening;d&&d.off(e,o)}}u.length?t[e]=u:delete t[e]}return t}for(r=n.keys(a);l<r.length;l++)a[r[l]].cleanup()}};a.once=function(t,e,n){var o=c(d,{},t,e,this.off.bind(this));return'string'==typeof t&&null==n&&(e=void 0),this.on(o,e,n)},a.listenToOnce=function(t,e,n){var o=c(d,{},e,n,this.stopListening.bind(this,t));return this.listenTo(t,o)};var d=function(t,e,o,i){if(o){var r=t[e]=n.once((function(){i(e,r),o.apply(this,arguments)}));r._callback=o}return t};a.trigger=function(t){if(!this._events)return this;for(var e=Math.max(0,arguments.length-1),n=Array(e),o=0;o<e;o++)n[o]=arguments[o+1];return c(f,this._events,t,void 0,n),this};var f=function(t,e,n,o){if(t){var i=t[e],r=t.all;i&&r&&(r=r.slice()),i&&g(i,o),r&&g(r,[e].concat(o))}return t},g=function(t,e){var n,o=-1,i=t.length,r=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++o<i;)(n=t[o]).callback.call(n.ctx);return;case 1:for(;++o<i;)(n=t[o]).callback.call(n.ctx,r);return;case 2:for(;++o<i;)(n=t[o]).callback.call(n.ctx,r,s);return;case 3:for(;++o<i;)(n=t[o]).callback.call(n.ctx,r,s,a);return;default:for(;++o<i;)(n=t[o]).callback.apply(n.ctx,e);return}},m=function(t,e){this.id=t._listenId,this.listener=t,this.obj=e,this.interop=!0,this.count=0,this._events=void 0};m.prototype.on=a.on,m.prototype.off=function(t,e){var n;this.interop?(this._events=c(p,this._events,t,e,{context:void 0,listeners:void 0}),n=!this._events):(this.count--,n=0===this.count),n&&this.cleanup()},m.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},a.bind=a.on,a.unbind=a.off,n.extend(e,a);var v=e.Model=function(t,e){var o=t||{};e||(e={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(o=this.parse(o,e)||{});var i=n.result(this,'defaults');o=n.defaults(n.extend({},i,o),i),this.set(o,e),this.changed={},this.initialize.apply(this,arguments)};n.extend(v.prototype,a,{changed:null,validationError:null,idAttribute:'id',cidPrefix:'c',preinitialize:function(){},initialize:function(){},toJSON:function(t){return n.clone(this.attributes)},sync:function(){return e.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return n.escape(this.get(t))},has:function(t){return null!=this.get(t)},matches:function(t){return!!n.iteratee(t,this)(this.attributes)},set:function(t,e,o){if(null==t)return this;var i;if('object'==typeof t?(i=t,o=e):(i={})[t]=e,o||(o={}),!this._validate(i,o))return!1;var r=o.unset,s=o.silent,a=[],l=this._changing;this._changing=!0,l||(this._previousAttributes=n.clone(this.attributes),this.changed={});var c=this.attributes,u=this.changed,h=this._previousAttributes;for(var p in i)e=i[p],n.isEqual(c[p],e)||a.push(p),n.isEqual(h[p],e)?delete u[p]:u[p]=e,r?delete c[p]:c[p]=e;if(this.idAttribute in i){var d=this.id;this.id=this.get(this.idAttribute),this.trigger('changeId',this,d,o)}if(!s){a.length&&(this._pending=o);for(var f=0;f<a.length;f++)this.trigger('change:'+a[f],this,c[a[f]],o)}if(l)return this;if(!s)for(;this._pending;)o=this._pending,this._pending=!1,this.trigger('change',this,o);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,n.extend({},e,{unset:!0}))},clear:function(t){var e={};for(var o in this.attributes)e[o]=void 0;return this.set(e,n.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!n.isEmpty(this.changed):n.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&n.clone(this.changed);var e,o=this._changing?this._previousAttributes:this.attributes,i={};for(var r in t){var s=t[r];n.isEqual(o[r],s)||(i[r]=s,e=!0)}return!!e&&i},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(t){t=n.extend({parse:!0},t);var e=this,o=t.success;return t.success=function(n){var i=t.parse?e.parse(n,t):n;if(!e.set(i,t))return!1;o&&o.call(t.context,e,n,t),e.trigger('sync',e,n,t)},B(this,t),this.sync('read',this,t)},save:function(t,e,o){var i;null==t||'object'==typeof t?(i=t,o=e):(i={})[t]=e;var r=(o=n.extend({validate:!0,parse:!0},o)).wait;if(i&&!r){if(!this.set(i,o))return!1}else if(!this._validate(i,o))return!1;var s=this,a=o.success,l=this.attributes;o.success=function(t){s.attributes=l;var e=o.parse?s.parse(t,o):t;if(r&&(e=n.extend({},i,e)),e&&!s.set(e,o))return!1;a&&a.call(o.context,s,t,o),s.trigger('sync',s,t,o)},B(this,o),i&&r&&(this.attributes=n.extend({},l,i));var c=this.isNew()?'create':o.patch?'patch':'update';'patch'!==c||o.attrs||(o.attrs=i);var u=this.sync(c,this,o);return this.attributes=l,u},destroy:function(t){t=t?n.clone(t):{};var e=this,o=t.success,i=t.wait,r=function(){e.stopListening(),e.trigger('destroy',e,e.collection,t)};t.success=function(n){i&&r(),o&&o.call(t.context,e,n,t),e.isNew()||e.trigger('sync',e,n,t)};var s=!1;return this.isNew()?n.defer(t.success):(B(this,t),s=this.sync('delete',this,t)),i||r(),s},url:function(){var t=n.result(this,'urlRoot')||n.result(this.collection,'url')||U();if(this.isNew())return t;var e=this.get(this.idAttribute);return t.replace(/[^\/]$/,'$&/')+encodeURIComponent(e)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},n.extend({},t,{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=n.extend({},this.attributes,t);var o=this.validationError=this.validate(t,e)||null;return!o||(this.trigger('invalid',this,o,n.extend(e,{validationError:o})),!1)}});var y=e.Collection=function(t,e){e||(e={}),this.preinitialize.apply(this,arguments),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,n.extend({silent:!0},e))},_={add:!0,remove:!0,merge:!0},O={add:!0,remove:!1},b=function(t,e,n){n=Math.min(Math.max(n,0),t.length);var o,i=Array(t.length-n),r=e.length;for(o=0;o<i.length;o++)i[o]=t[o+n];for(o=0;o<r;o++)t[o+n]=e[o];for(o=0;o<i.length;o++)t[o+r+n]=i[o]};n.extend(y.prototype,a,{model:v,preinitialize:function(){},initialize:function(){},toJSON:function(t){return this.map((function(e){return e.toJSON(t)}))},sync:function(){return e.sync.apply(this,arguments)},add:function(t,e){return this.set(t,n.extend({merge:!1},e,O))},remove:function(t,e){e=n.extend({},e);var o=!n.isArray(t);t=o?[t]:t.slice();var i=this._removeModels(t,e);return!e.silent&&i.length&&(e.changes={added:[],merged:[],removed:i},this.trigger('update',this,e)),o?i[0]:i},set:function(t,e){if(null!=t){(e=n.extend({},_,e)).parse&&!this._isModel(t)&&(t=this.parse(t,e)||[]);var o=!n.isArray(t);t=o?[t]:t.slice();var i=e.at;null!=i&&(i=+i),i>this.length&&(i=this.length),i<0&&(i+=this.length+1);var r,s,a=[],l=[],c=[],u=[],h={},p=e.add,d=e.merge,f=e.remove,g=!1,m=this.comparator&&null==i&&!1!==e.sort,v=n.isString(this.comparator)?this.comparator:null;for(s=0;s<t.length;s++){r=t[s];var y=this.get(r);if(y){if(d&&r!==y){var O=this._isModel(r)?r.attributes:r;e.parse&&(O=y.parse(O,e)),y.set(O,e),c.push(y),m&&!g&&(g=y.hasChanged(v))}h[y.cid]||(h[y.cid]=!0,a.push(y)),t[s]=y}else p&&(r=t[s]=this._prepareModel(r,e))&&(l.push(r),this._addReference(r,e),h[r.cid]=!0,a.push(r))}if(f){for(s=0;s<this.length;s++)h[(r=this.models[s]).cid]||u.push(r);u.length&&this._removeModels(u,e)}var w=!1,x=!m&&p&&f;if(a.length&&x?(w=this.length!==a.length||n.some(this.models,(function(t,e){return t!==a[e]})),this.models.length=0,b(this.models,a,0),this.length=this.models.length):l.length&&(m&&(g=!0),b(this.models,l,null==i?this.length:i),this.length=this.models.length),g&&this.sort({silent:!0}),!e.silent){for(s=0;s<l.length;s++)null!=i&&(e.index=i+s),(r=l[s]).trigger('add',r,this,e);(g||w)&&this.trigger('sort',this,e),(l.length||u.length||c.length)&&(e.changes={added:l,removed:u,merged:c},this.trigger('update',this,e))}return o?t[0]:t}},reset:function(t,e){e=e?n.clone(e):{};for(var o=0;o<this.models.length;o++)this._removeReference(this.models[o],e);return e.previousModels=this.models,this._reset(),t=this.add(t,n.extend({silent:!0},e)),e.silent||this.trigger('reset',this,e),t},push:function(t,e){return this.add(t,n.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t)},unshift:function(t,e){return this.add(t,n.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t)},slice:function(){return r.apply(this.models,arguments)},get:function(t){if(null!=t)return this._byId[t]||this._byId[this.modelId(this._isModel(t)?t.attributes:t,t.idAttribute)]||t.cid&&this._byId[t.cid]},has:function(t){return null!=this.get(t)},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(t,e){return this[e?'find':'filter'](t)},findWhere:function(t){return this.where(t,!0)},sort:function(t){var e=this.comparator;if(!e)throw new Error('Cannot sort a set without a comparator');t||(t={});var o=e.length;return n.isFunction(e)&&(e=e.bind(this)),1===o||n.isString(e)?this.models=this.sortBy(e):this.models.sort(e),t.silent||this.trigger('sort',this,t),this},pluck:function(t){return this.map(t+'')},fetch:function(t){var e=(t=n.extend({parse:!0},t)).success,o=this;return t.success=function(n){var i=t.reset?'reset':'set';o[i](n,t),e&&e.call(t.context,o,n,t),o.trigger('sync',o,n,t)},B(this,t),this.sync('read',this,t)},create:function(t,e){var o=(e=e?n.clone(e):{}).wait;if(!(t=this._prepareModel(t,e)))return!1;o||this.add(t,e);var i=this,r=e.success;return e.success=function(t,e,n){o&&i.add(t,n),r&&r.call(n.context,t,e,n)},t.save(null,e),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t,e){return t[e||this.model.prototype.idAttribute||'id']},values:function(){return new x(this,S)},keys:function(){return new x(this,k)},entries:function(){return new x(this,P)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){return this._isModel(t)?(t.collection||(t.collection=this),t):((e=e?n.clone(e):{}).collection=this,(o=this.model.prototype?new this.model(t,e):this.model(t,e)).validationError?(this.trigger('invalid',this,o.validationError,e),!1):o);var o},_removeModels:function(t,e){for(var n=[],o=0;o<t.length;o++){var i=this.get(t[o]);if(i){var r=this.indexOf(i);this.models.splice(r,1),this.length--,delete this._byId[i.cid];var s=this.modelId(i.attributes,i.idAttribute);null!=s&&delete this._byId[s],e.silent||(e.index=r,i.trigger('remove',i,this,e)),n.push(i),this._removeReference(i,e)}}return n},_isModel:function(t){return t instanceof v},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes,t.idAttribute);null!=n&&(this._byId[n]=t),t.on('all',this._onModelEvent,this)},_removeReference:function(t,e){delete this._byId[t.cid];var n=this.modelId(t.attributes,t.idAttribute);null!=n&&delete this._byId[n],this===t.collection&&delete t.collection,t.off('all',this._onModelEvent,this)},_onModelEvent:function(t,e,n,o){if(e){if(('add'===t||'remove'===t)&&n!==this)return;if('destroy'===t&&this.remove(e,o),'changeId'===t){var i=this.modelId(e.previousAttributes(),e.idAttribute),r=this.modelId(e.attributes,e.idAttribute);null!=i&&delete this._byId[i],null!=r&&(this._byId[r]=e)}}this.trigger.apply(this,arguments)}});var w='function'==typeof Symbol&&Symbol.iterator;w&&(y.prototype[w]=y.prototype.values);var x=function(t,e){this._collection=t,this._kind=e,this._index=0},S=1,k=2,P=3;w&&(x.prototype[w]=function(){return this});x.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var t,e=this._collection.at(this._index);if(this._index++,this._kind===S)t=e;else{var n=this._collection.modelId(e.attributes,e.idAttribute);t=this._kind===k?n:[n,e]}return{value:t,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var C=e.View=function(t){this.cid=n.uniqueId('view'),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(t,E)),this._ensureElement(),this.initialize.apply(this,arguments)},T=/^(\S+)\s*(.*)$/,E=['model','collection','el','id','attributes','className','tagName','events'];n.extend(C.prototype,a,{tagName:'div',$:function(t){return this.$el.find(t)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof e.$?t:e.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=n.result(this,'events')),!t)return this;for(var e in this.undelegateEvents(),t){var o=t[e];if(n.isFunction(o)||(o=this[o]),o){var i=e.match(T);this.delegate(i[1],i[2],o.bind(this))}}return this},delegate:function(t,e,n){return this.$el.on(t+'.delegateEvents'+this.cid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off('.delegateEvents'+this.cid),this},undelegate:function(t,e,n){return this.$el.off(t+'.delegateEvents'+this.cid,e,n),this},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,'el'));else{var t=n.extend({},n.result(this,'attributes'));this.id&&(t.id=n.result(this,'id')),this.className&&(t['class']=n.result(this,'className')),this.setElement(this._createElement(n.result(this,'tagName'))),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}});var Q=function(t,e,n,o){switch(e){case 1:return function(){return t[n](this[o])};case 2:return function(e){return t[n](this[o],e)};case 3:return function(e,i){return t[n](this[o],$(e,this),i)};case 4:return function(e,i,r){return t[n](this[o],$(e,this),i,r)};default:return function(){var e=r.call(arguments);return e.unshift(this[o]),t[n].apply(t,e)}}},A=function(t,e,o,i){n.each(o,(function(n,o){e[o]&&(t.prototype[o]=Q(e,n,o,i))}))},$=function(t,e){return n.isFunction(t)?t:n.isObject(t)&&!e._isModel(t)?j(t):n.isString(t)?function(e){return e.get(t)}:t},j=function(t){var e=n.matches(t);return function(t){return e(t.attributes)}},R={forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},Z={keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1};n.each([[y,R,'models'],[v,Z,'attributes']],(function(t){var e=t[0],o=t[1],i=t[2];e.mixin=function(t){var o=n.reduce(n.functions(t),(function(t,e){return t[e]=0,t}),{});A(e,t,o,i)},A(e,n,o,i)})),e.sync=function(t,o,i){var r=M[t];n.defaults(i||(i={}),{emulateHTTP:e.emulateHTTP,emulateJSON:e.emulateJSON});var s={type:r,dataType:'json'};if(i.url||(s.url=n.result(o,'url')||U()),null!=i.data||!o||'create'!==t&&'update'!==t&&'patch'!==t||(s.contentType='application/json',s.data=JSON.stringify(i.attrs||o.toJSON(i))),i.emulateJSON&&(s.contentType='application/x-www-form-urlencoded',s.data=s.data?{model:s.data}:{}),i.emulateHTTP&&('PUT'===r||'DELETE'===r||'PATCH'===r)){s.type='POST',i.emulateJSON&&(s.data._method=r);var a=i.beforeSend;i.beforeSend=function(t){if(t.setRequestHeader('X-HTTP-Method-Override',r),a)return a.apply(this,arguments)}}'GET'===s.type||i.emulateJSON||(s.processData=!1);var l=i.error;i.error=function(t,e,n){i.textStatus=e,i.errorThrown=n,l&&l.call(i.context,t,e,n)};var c=i.xhr=e.ajax(n.extend(s,i));return o.trigger('request',o,c,i),c};var M={create:'POST',update:'PUT',patch:'PATCH',delete:'DELETE',read:'GET'};e.ajax=function(){return e.$.ajax.apply(e.$,arguments)};var V=e.Router=function(t){t||(t={}),this.preinitialize.apply(this,arguments),t.routes&&(this.routes=t.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},D=/\((.*?)\)/g,I=/(\(\?)?:\w+/g,N=/\*\w+/g,W=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(V.prototype,a,{preinitialize:function(){},initialize:function(){},route:function(t,o,i){n.isRegExp(t)||(t=this._routeToRegExp(t)),n.isFunction(o)&&(i=o,o=''),i||(i=this[o]);var r=this;return e.history.route(t,(function(n){var s=r._extractParameters(t,n);!1!==r.execute(i,s,o)&&(r.trigger.apply(r,['route:'+o].concat(s)),r.trigger('route',o,s),e.history.trigger('route',r,o,s))})),this},execute:function(t,e,n){t&&t.apply(this,e)},navigate:function(t,n){return e.history.navigate(t,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,'routes');for(var t,e=n.keys(this.routes);null!=(t=e.pop());)this.route(t,this.routes[t])}},_routeToRegExp:function(t){return t=t.replace(W,'\\$&').replace(D,'(?:$1)?').replace(I,(function(t,e){return e?t:'([^/?]+)'})).replace(N,'([^?]*?)'),new RegExp('^'+t+'(?:\\?([\\s\\S]*))?$')},_extractParameters:function(t,e){var o=t.exec(e).slice(1);return n.map(o,(function(t,e){return e===o.length-1?t||null:t?decodeURIComponent(t):null}))}});var X=e.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),'undefined'!=typeof window&&(this.location=window.location,this.history=window.history)},L=/^[#\/]|\s+$/g,Y=/^\/+|\/+$/g,z=/#.*$/;X.started=!1,n.extend(X.prototype,a,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,'$&/')===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+'/'===this.root},decodeFragment:function(t){return decodeURI(t.replace(/%25/g,'%2525'))},getSearch:function(){var t=this.location.href.replace(/#.*/,'').match(/\?.+/);return t?t[0]:''},getHash:function(t){var e=(t||this).location.href.match(/#(.*)$/);return e?e[1]:''},getPath:function(){var t=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return'/'===t.charAt(0)?t.slice(1):t},getFragment:function(t){return null==t&&(t=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),t.replace(L,'')},start:function(t){if(X.started)throw new Error('Backbone.history has already been started');if(X.started=!0,this.options=n.extend({root:'/'},this.options,t),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange='onhashchange'in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=('/'+this.root+'/').replace(Y,'/'),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var e=this.root.slice(0,-1)||'/';return this.location.replace(e+'#'+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement('iframe'),this.iframe.src='javascript:0',this.iframe.style.display='none',this.iframe.tabIndex=-1;var o=document.body,i=o.insertBefore(this.iframe,o.firstChild).contentWindow;i.document.open(),i.document.close(),i.location.hash='#'+this.fragment}var r=window.addEventListener||function(t,e){return attachEvent('on'+t,e)};if(this._usePushState?r('popstate',this.checkUrl,!1):this._useHashChange&&!this.iframe?r('hashchange',this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var t=window.removeEventListener||function(t,e){return detachEvent('on'+t,e)};this._usePushState?t('popstate',this.checkUrl,!1):this._useHashChange&&!this.iframe&&t('hashchange',this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),X.started=!1},route:function(t,e){this.handlers.unshift({route:t,callback:e})},checkUrl:function(t){var e=this.getFragment();if(e===this.fragment&&this.iframe&&(e=this.getHash(this.iframe.contentWindow)),e===this.fragment)return!1;this.iframe&&this.navigate(e),this.loadUrl()},loadUrl:function(t){return!!this.matchRoot()&&(t=this.fragment=this.getFragment(t),n.some(this.handlers,(function(e){if(e.route.test(t))return e.callback(t),!0})))},navigate:function(t,e){if(!X.started)return!1;e&&!0!==e||(e={trigger:!!e}),t=this.getFragment(t||'');var n=this.root;''!==t&&'?'!==t.charAt(0)||(n=n.slice(0,-1)||'/');var o=n+t;t=t.replace(z,'');var i=this.decodeFragment(t);if(this.fragment!==i){if(this.fragment=i,this._usePushState)this.history[e.replace?'replaceState':'pushState']({},document.title,o);else{if(!this._wantsHashChange)return this.location.assign(o);if(this._updateHash(this.location,t,e.replace),this.iframe&&t!==this.getHash(this.iframe.contentWindow)){var r=this.iframe.contentWindow;e.replace||(r.document.open(),r.document.close()),this._updateHash(r.location,t,e.replace)}}return e.trigger?this.loadUrl(t):void 0}},_updateHash:function(t,e,n){if(n){var o=t.href.replace(/(javascript:|#).*$/,'');t.replace(o+'#'+e)}else t.hash='#'+e}}),e.history=new X;var q=function(t,e){var o,i=this;return o=t&&n.has(t,'constructor')?t.constructor:function(){return i.apply(this,arguments)},n.extend(o,i,e),o.prototype=n.create(i.prototype,t),o.prototype.constructor=o,o.__super__=i.prototype,o};v.extend=y.extend=V.extend=C.extend=X.extend=q;var U=function(){throw new Error('A "url" property or function must be specified')},B=function(t,e){var n=e.error;e.error=function(o){n&&n.call(e.context,t,o,e),t.trigger('error',t,o,e)}};return e}(s,n,t,e)}.apply(e,o),void 0===i||(t.exports=i);else;}()},728:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var o,i=n(847),r=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const s=function(t){function e(e,n,o){var i=t.call(this,n,o)||this;return i._module=e,i}return r(e,t),Object.defineProperty(e.prototype,"module",{get:function(){return this._module},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this._module.config},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"em",{get:function(){return this._module.em},enumerable:!1,configurable:!0}),e}(i.Hn)},201:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a,q:()=>i});var o,i,r=n(728),s=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});!function(t){t["Select"]="select",t["Hover"]="hover",t["Spacing"]="spacing",t["Target"]="target",t["Resize"]="resize"}(i||(i={}));const a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.defaults=function(){return{id:'',type:''}},Object.defineProperty(e.prototype,"type",{get:function(){return this.get('type')||''},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"component",{get:function(){var t;return this.get('component')||(null===(t=this.get('componentView'))||void 0===t?void 0:t.model)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"componentView",{get:function(){var t;return this.get('componentView')||(null===(t=this.get('component'))||void 0===t?void 0:t.getView())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"el",{get:function(){var t;return null===(t=this.componentView)||void 0===t?void 0:t.el},enumerable:!1,configurable:!0}),e.prototype.getBoxRect=function(t){var e=this.el,n=this.em.Canvas.getCanvasView(),o=this.get('boxRect');return o||(e&&n?n.getElBoxRect(e,t):{x:0,y:0,width:0,height:0})},e.prototype.getStyle=function(t){void 0===t&&(t={});var e=t.boxRect||this.getBoxRect(t),n=e.width,o=e.height,i=e.x,r=e.y;return{width:"".concat(n,"px"),height:"".concat(o,"px"),top:'0',left:'0',position:'absolute',translate:"".concat(i,"px ").concat(r,"px")}},e.prototype.isType=function(t){return this.type===t},e}(r.Z)},266:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const o={run:function(t){t.Components.clear(),t.Css.clear()}}},142:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var o=n(50),i=n(250),r=n(968);const s={run:function(t){(0,o.bindAll)(this,'onKeyUp','enableDragger','disableDragger'),this.editor=t,this.canvasModel=this.canvas.getCanvasView().model,this.toggleMove(1)},stop:function(t){this.toggleMove(),this.disableDragger()},onKeyUp:function(t){' '===(0,r.sN)(t)&&this.editor.stopCommand(this.id)},enableDragger:function(t){this.toggleDragger(1,t)},disableDragger:function(t){this.toggleDragger(0,t)},toggleDragger:function(t,e){var n=this.canvasModel,o=this.em,r=this.dragger,s=t?'add':'remove';this.getCanvas().classList[s]("".concat(this.ppfx,"is__grabbing")),r||(r=new i.Z({getPosition:function(){return{x:n.get('x'),y:n.get('y')}},setPosition:function(t){var e=t.x,o=t.y;n.set({x:e,y:o})},onStart:function(t,e){o.trigger('canvas:move:start',e)},onDrag:function(t,e){o.trigger('canvas:move',e)},onEnd:function(t,e){o.trigger('canvas:move:end',e)}}),this.dragger=r),t?r.start(e):r.stop()},toggleMove:function(t){var e=this.ppfx,n=t?'add':'remove',o=t?'on':'off',i={on:r.on,off:r.S1},s=this.getCanvas(),a=["".concat(e,"is__grab")];!t&&a.push("".concat(e,"is__grabbing")),a.forEach((function(t){return s.classList[n](t)})),i[o](document,'keyup',this.onKeyUp),i[o](s,'mousedown',this.enableDragger),i[o](document,'mouseup',this.disableDragger)}}},458:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a,defineCommand:()=>s});var o,i=n(847),r=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});function s(t){return t}const a=function(t){function e(e){var n=t.call(this,0)||this;n.config=e||{},n.em=n.config.em||{};var o=n.config.stylePrefix;return n.pfx=o,n.ppfx=n.config.pStylePrefix,n.hoverClass="".concat(o,"hover"),n.badgeClass="".concat(o,"badge"),n.plhClass="".concat(o,"placeholder"),n.freezClass="".concat(n.ppfx,"freezed"),n.canvas=n.em.Canvas,n.init(n.config),n}return r(e,t),e.prototype.onFrameScroll=function(t){},e.prototype.getCanvas=function(){return this.canvas.getElement()},e.prototype.getCanvasBody=function(){return this.canvas.getBody()},e.prototype.getCanvasTools=function(){return this.canvas.getToolsEl()},e.prototype.offset=function(t){var e=t.getBoundingClientRect();return{top:e.top+t.ownerDocument.body.scrollTop,left:e.left+t.ownerDocument.body.scrollLeft}},e.prototype.init=function(t){},e.prototype.callRun=function(t,e){void 0===e&&(e={});var n=this.id;if(t.trigger("run:".concat(n,":before"),e),!e||!e.abort){var o=e.sender||t,i=this.run(t,o,e);return t.trigger("run:".concat(n),i,e),t.trigger('run',n,i,e),i}t.trigger("abort:".concat(n),e)},e.prototype.callStop=function(t,e){void 0===e&&(e={});var n=this.id,o=e.sender||t;t.trigger("stop:".concat(n,":before"),e);var i=this.stop(t,o,e);return t.trigger("stop:".concat(n),i,e),t.trigger('stop',n,i,e),i},e.prototype.stopCommand=function(t){this.em.Commands.stop(this.id,t)},e.prototype.run=function(t,e,n){},e.prototype.stop=function(t,e,n){},e}(i.Hn)},463:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var o=n(50),i=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};const r={run:function(t,e,n){var r=this;void 0===n&&(n={});var s=[],a=n.component||t.getSelectedAll();return(a=(0,o.isArray)(a)?i([],a,!0):[a]).filter(Boolean).forEach((function(t){var e,n;if(!t.get('removable'))return s.push(t),r.em.logWarning('The element is not removable',{component:t});((null===(n=null===(e=t.delegate)||void 0===e?void 0:e.remove)||void 0===n?void 0:n.call(e,t))||t).remove()})),t.select(s),a}}},474:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>a});var o=n(50),i=n(250),r=void 0&&(void 0).__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},s='dmode';const a={run:function(t,e,n){var a=this;void 0===n&&(n={}),(0,o.bindAll)(this,'setPosition','onStart','onDrag','onEnd','getPosition','getGuidesStatic','renderGuide','getGuidesTarget');var l=n.target,c=n.event,u=n.mode,h=n.dragger,p=void 0===h?{}:h,d=l.getEl(),f=r({doc:d.ownerDocument,onStart:this.onStart,onEnd:this.onEnd,onDrag:this.onDrag,getPosition:this.getPosition,setPosition:this.setPosition,guidesStatic:function(){return a.guidesStatic},guidesTarget:function(){return a.guidesTarget}},p);this.setupGuides(),this.opts=n,this.editor=t,this.em=t.getModel(),this.target=l,this.isTran='translate'==u,this.guidesContainer=this.getGuidesContainer(),this.guidesTarget=this.getGuidesTarget(),this.guidesStatic=this.getGuidesStatic();var g=this.dragger;return g?g.setOptions(f):(g=new i.Z(f),this.dragger=g),c&&g.start(c),this.toggleDrag(1),this.em.trigger("".concat(s,":start"),this.getEventOpts()),g},getEventOpts:function(){return{mode:this.opts.mode,target:this.target,guidesTarget:this.guidesTarget,guidesStatic:this.guidesStatic}},stop:function(){this.toggleDrag()},setupGuides:function(){(this.guides||[]).forEach((function(t){var e=t.guide;e&&e.parentNode.removeChild(e)})),this.guides=[]},getGuidesContainer:function(){var t=this,e=this.guidesEl;if(!e){var n=this,i=n.editor,r=n.em,s=n.opts,a=i.getConfig().stylePrefix,l=document.createElement('div'),c=document.createElement('div'),u="<div class=\"".concat(a,"guide-info__line ").concat(a,"danger-bg\">\n        <div class=\"").concat(a,"guide-info__content ").concat(a,"danger-color\"></div>\n      </div>");(e=document.createElement('div')).className="".concat(a,"guides"),l.className="".concat(a,"guide-info ").concat(a,"guide-info__x"),c.className="".concat(a,"guide-info ").concat(a,"guide-info__y"),l.innerHTML=u,c.innerHTML=u,e.appendChild(l),e.appendChild(c),i.Canvas.getGlobalToolsEl().appendChild(e),this.guidesEl=e,this.elGuideInfoX=l,this.elGuideInfoY=c,this.elGuideInfoContentX=l.querySelector(".".concat(a,"guide-info__content")),this.elGuideInfoContentY=c.querySelector(".".concat(a,"guide-info__content")),r.on('canvas:update frame:scroll',(0,o.debounce)((function(){var e;t.updateGuides(),s.debug&&(null===(e=t.guides)||void 0===e||e.forEach((function(e){return t.renderGuide(e)})))}),200))}return e},getGuidesStatic:function(){var t=this,e=[],n=this.target.getEl(),i=n.parentNode,r=void 0===i?{}:i;return(0,o.each)(r.children,(function(o){return e=e.concat(n!==o?t.getElementGuides(o):[])})),e.concat(this.getElementGuides(r))},getGuidesTarget:function(){return this.getElementGuides(this.target.getEl())},updateGuides:function(t){var e,n,i=this;(t||this.guides).forEach((function(t){var r=t.origin,s=e===r?n:i.getElementPos(r);e=r,n=s,(0,o.each)(i.getGuidePosUpdate(t,s),(function(e,n){return t[n]=e})),t.originRect=s}))},getGuidePosUpdate:function(t,e){var n={},o=e.top,i=e.height,r=e.left,s=e.width;switch(t.type){case't':n.y=o;break;case'b':n.y=o+i;break;case'l':n.x=r;break;case'r':n.x=r+s;break;case'x':n.x=r+s/2;break;case'y':n.y=o+i/2}return n},renderGuide:function(t){void 0===t&&(t={});var e=t.guide||document.createElement('div'),n='px',o=t.active?2:1,i=e.children[0];return e.style="position: absolute; background-color: ".concat(t.active?'green':'red',";"),e.children.length||((i=document.createElement('div')).style='position: absolute; color: red; padding: 5px; top: 0; left: 0;',e.appendChild(i)),t.y?(e.style.width='100%',e.style.height="".concat(o).concat(n),e.style.top="".concat(t.y).concat(n),e.style.left=0):(e.style.width="".concat(o).concat(n),e.style.height='100%',e.style.left="".concat(t.x).concat(n),e.style.top="0".concat(n)),!t.guide&&this.guidesContainer.appendChild(e),e},getElementPos:function(t){return this.editor.Canvas.getElementPos(t,{noScroll:1})},getElementGuides:function(t){var e=this,n=this.opts,o=this.getElementPos(t),i=o.top,s=o.height,a=o.left,l=o.width,c=[{type:'t',y:i},{type:'b',y:i+s},{type:'l',x:a},{type:'r',x:a+l},{type:'x',x:a+l/2},{type:'y',y:i+s/2}].map((function(i){return r(r({},i),{origin:t,originRect:o,guide:n.debug&&e.renderGuide(i)})}));return c.forEach((function(t){var n;return null===(n=e.guides)||void 0===n?void 0:n.push(t)})),c},getTranslate:function(t,e){void 0===e&&(e='x');var n=0;return(t||'').split(' ').forEach((function(t){var o=t.trim(),i="translate".concat(e.toUpperCase(),"(");0===o.indexOf(i)&&(n=parseFloat(o.replace(i,'')))})),n},setTranslate:function(t,e,n){var o="translate".concat(e.toUpperCase(),"("),i="".concat(o).concat(n,")"),r=(t||'').split(' ').map((function(t){return 0===t.trim().indexOf(o)&&(t=i),t})).join(' ');return r.indexOf(o)<0&&(r+=" ".concat(i)),r},getPosition:function(){var t=this.target,e=this.isTran,n=t.getStyle(),o=n.left,i=n.top,r=n.transform,s=0,a=0;return e?(s=this.getTranslate(r),a=this.getTranslate(r,'y')):(s=parseFloat(o||0),a=parseFloat(i||0)),{x:s,y:a}},setPosition:function(t){var e=t.x,n=t.y,i=t.end,r=t.position,s=t.width,a=t.height,l=this,c=l.target,u=l.isTran,h=l.em,p='px',d=!i,f="".concat(parseInt(e,10)).concat(p),g="".concat(parseInt(n,10)).concat(p),m={};if(u){var v=c.getStyle()['transform']||'';v=this.setTranslate(v,'x',f),m={transform:v=this.setTranslate(v,'y',g),__p:d},c.addStyle(m,{avoidStore:!i})}else{var y={position:r,width:s,height:a},_={left:f,top:g,__p:d};(0,o.keys)(y).forEach((function(t){var e=y[t];e&&(_[t]=e)})),m=_,c.addStyle(m,{avoidStore:!i})}null==h||h.Styles.__emitCmpStyleUpdate(m,{components:h.getSelected()})},_getDragData:function(){var t=this.target;return{target:t,parent:t.parent(),index:t.index()}},onStart:function(t){var e=this,n=e.target,o=e.editor,i=e.isTran,r=e.opts,s=r.center,a=r.onStart,l=o.Canvas,c=n.getStyle(),u='absolute',h=[u,'relative'];if(a&&a(this._getDragData()),!i&&c.position!==u){var p=l.offset(n.getEl()),d=p.left,f=p.top,g=p.width,m=p.height,v=n.parent(),y=void 0;do{var _=v.getStyle();y=h.indexOf(_.position)>=0?v:null,v=v.parent()}while(v&&!y);if(s){var O=l.getMouseRelativeCanvas(t);d=O.x,f=O.y}else if(y){var b=l.offset(y.getEl());d-=b.left,f-=b.top}this.setPosition({x:d,y:f,width:"".concat(g,"px"),height:"".concat(m,"px"),position:u})}},onDrag:function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var o=this.guidesTarget,i=this.opts,r=i.onDrag;this.updateGuides(o),i.debug&&o.forEach((function(e){return t.renderGuide(e)})),i.guidesInfo&&this.renderGuideInfo(o.filter((function(t){return t.active}))),r&&r(this._getDragData())},onEnd:function(t,e,n){void 0===n&&(n={});var o=this,i=o.editor,a=o.opts,l=o.id,c=a.onEnd;c&&c(t,n,r(r({event:t},n),this._getDragData())),i.stopCommand(l),this.hideGuidesInfo(),this.em.trigger("".concat(s,":end"),this.getEventOpts())},hideGuidesInfo:function(){var t=this;['X','Y'].forEach((function(e){var n=t["elGuideInfo".concat(e)];n&&(n.style.display='none')}))},renderGuideInfo:function(t){var e=this;void 0===t&&(t=[]);var n=this.guidesStatic;this.hideGuidesInfo(),t.forEach((function(t){var i=t.origin,a=t.x,l=e.getElementPos(i),c=(0,o.isUndefined)(a)?'y':'x',u='y'===c,h=l[u?'left':'top'],p=l.rect[u?'left':'top'],d=u?h+l.width:h+l.height,f=u?p+l.rect.width:p+l.rect.height,g=e["elGuideInfo".concat(c.toUpperCase())],m=e["elGuideInfoContent".concat(c.toUpperCase())],v=g.style,y=null==n?void 0:n.filter((function(e){return e.type===t.type})).map((function(t){var e=t.originRect,n=e.left,o=e.width,i=e.top,r=e.height,s=u?n+o:i+r;return{gap:s<h?h-s:(u?n:i)-d,guide:t}})).filter((function(t){return t.gap>0})).sort((function(t,e){return t.gap-e.gap})).map((function(t){return t.guide}))[0];if(y){var _=y.originRect,O=_.left,b=_.width,w=_.top,x=_.height,S=_.rect,k=u?O<l.left:w<l.top,P=u?O:w,C=u?S.left:S.top,T=u?O+b:w+x,E=u?S.left+S.width:S.top+S.height,Q=u?t.y:t.x,A=k?T:d,$="".concat(Q,"px"),j=k?h-T:P-d,R=k?p-E:C-f;v.display='',v[u?'top':'left']=$,v[u?'left':'top']="".concat(A,"px"),v[u?'width':'height']="".concat(j,"px"),m.innerHTML="".concat(Math.round(R),"px"),e.em.trigger("".concat(s,":active"),r(r({},e.getEventOpts()),{guide:t,guidesStatic:n,matched:y,posFirst:Q,posSecond:A,size:j,sizeRaw:R,elGuideInfo:g,elGuideInfoCnt:m}))}}))},toggleDrag:function(t){var e=this.ppfx,n=this.editor,o=t?'add':'remove',i=["".concat(e,"is__grabbing")],r=n.Canvas,s=r.getBody();i.forEach((function(t){return s.classList[o](t)})),r[t?'startAutoscroll':'stopAutoscroll']()}}},866:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const o={run:function(t){if(t.Canvas.hasFocus()){var e=[];t.getSelectedAll().forEach((function(t){var n=t.components(),o=n&&n.filter((function(t){return t.get('selectable')}))[0];o&&e.push(o)})),e.length&&t.select(e)}}}},594:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const o={run:function(t,e,n){if(void 0===n&&(n={}),t.Canvas.hasFocus()||n.force){var o=[];t.getSelectedAll().forEach((function(t){for(var e=t.parent();e&&!e.get('selectable');)e=e.parent();e&&o.push(e)})),o.length&&t.select(o)}}}},656:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const o={run:function(t){if(t.Canvas.hasFocus()){var e=[];t.getSelectedAll().forEach((function(t){var n=t.parent();if(n){var o,i=n.components().length,r=0,s=0;do{r++,o=(s=t.index()+r)<=i?n.getChildAt(s):null}while(o&&!o.get('selectable'));e.push(o||t)}})),e.length&&t.select(e)}}}},768:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const o={run:function(t){if(t.Canvas.hasFocus()){var e=[];t.getSelectedAll().forEach((function(t){var n=t.parent();if(n){var o,i=0,r=0;do{i++,o=(r=t.index()-i)>=0?n.getChildAt(r):null}while(o&&!o.get('selectable'));e.push(o||t)}})),e.length&&t.select(e)}}}},570:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=n(50);const i={run:function(t,e,n){void 0===n&&(n={});var i=n.target,r=[];if(!i.get('styles'))return r;var s=i.get('type'),a=t.Pages.getAllWrappers();if(!(0,o.flatten)(a.map((function(t){return t.findType(s)}))).length){var l=t.CssComposer.getAll();r=l.filter((function(t){return t.get('group')==="cmp:".concat(s)})),l.remove(r)}return r}}},282:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};const i={run:function(t){var e=t.getModel(),n=o([],t.getSelectedAll(),!0).map((function(t){var e,n;return(null===(n=null===(e=t.delegate)||void 0===e?void 0:e.copy)||void 0===n?void 0:n.call(e,t))||t})).filter(Boolean);n.length&&e.set('clipboard',n)}}},905:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=n(968);const i={run:function(t,e,n){var i=this;void 0===n&&(n={}),e&&e.set&&e.set('active',0);var r=t.getConfig(),s=t.Modal,a=r.stylePrefix;if(this.cm=t.CodeManager||null,!this.editors){var l=this.buildEditor('htmlmixed','hopscotch','HTML'),c=this.buildEditor('css','hopscotch','CSS');this.htmlEditor=l.model,this.cssEditor=c.model;var u=(0,o.ut)('div',{class:"".concat(a,"export-dl")});u.appendChild(l.el),u.appendChild(c.el),this.editors=u}s.open({title:r.textViewCode,content:this.editors}).getModel().once('change:open',(function(){return t.stopCommand("".concat(i.id))})),this.htmlEditor.setContent(t.getHtml(n.optsHtml)),this.cssEditor.setContent(t.getCss(n.optsCss))},stop:function(t){var e=t.Modal;e&&e.close()},buildEditor:function(t,e,n){var o=this.em.CodeManager,i=o.createViewer({label:n,codeName:t,theme:e});return{model:i,el:new o.EditorView({model:i,config:o.getConfig()}).render().el}}}},212:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=n(50);const i={isEnabled:function(){var t=document;return!!(t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement)},enable:function(t){var e='';return t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen?(e='webkit',t.webkitRequestFullscreen()):t.mozRequestFullScreen?(e='moz',t.mozRequestFullScreen()):t.msRequestFullscreen&&t.msRequestFullscreen(),e},disable:function(){var t=document;this.isEnabled()&&(t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen?t.webkitExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.msExitFullscreen&&t.msExitFullscreen())},fsChanged:function(t){this.isEnabled()||(this.stopCommand({sender:this.sender}),document.removeEventListener("".concat(t||'',"fullscreenchange"),this.fsChanged))},run:function(t,e,n){void 0===n&&(n={}),this.sender=e;var i=n.target,r=(0,o.isElement)(i)?i:document.querySelector(i),s=this.enable(r||t.getContainer());this.fsChanged=this.fsChanged.bind(this,s),document.addEventListener(s+'fullscreenchange',this.fsChanged),t.trigger('change:canvasOffset')},stop:function(t,e){e&&e.set&&e.set('active',!1),this.disable(),t&&t.trigger('change:canvasOffset')}}},907:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l});var o=n(50),i=n(815),r=n(968),s=n(938),a=n(477);const l=(0,o.extend)({},a["default"],s["default"],{init:function(t){s["default"].init.apply(this,arguments),(0,o.bindAll)(this,'initSorter','rollback','onEndMove'),this.opt=t,this.hoverClass=this.ppfx+'highlighter-warning',this.badgeClass=this.ppfx+'badge-warning',this.noSelClass=this.ppfx+'no-select'},enable:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s["default"].enable.apply(this,t),this.getBadgeEl().addClass(this.badgeClass),this.getHighlighterEl().addClass(this.hoverClass);var n=this.$wrapper;n.css('cursor','move'),n.on('mousedown',this.initSorter),n.addClass(this.noSelClass)},toggleClipboard:function(){},initSorter:function(t){var e=(0,i["default"])(t.target).data('model').get('draggable');e&&(this.cacheEl=null,this.startSelectPosition(t.target,this.frameEl.contentDocument),this.sorter.draggable=e,this.sorter.onEndMove=this.onEndMove.bind(this),this.stopSelectComponent(),this.$wrapper.off('mousedown',this.initSorter),(0,r.on)(this.getContentWindow(),'keydown',this.rollback))},initSorterFromModel:function(t){var e=t.get('draggable');if(e){this.cacheEl=null;var n=t.view.el;this.startSelectPosition(n,this.frameEl.contentDocument),this.sorter.draggable=e,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,r.on)(this.getContentWindow(),'keydown',this.rollback)}},initSorterFromModels:function(t){this.cacheEl=null;var e=t[t.length-1],n=this.em.getCurrentFrame(),o=e.getEl(null==n?void 0:n.model),i=o.ownerDocument;this.startSelectPosition(o,i,{onStart:this.onStart}),this.sorter.draggable=e.get('draggable'),this.sorter.toMove=t,this.sorter.onMoveClb=this.onDrag,this.sorter.onEndMove=this.onEndMoveFromModel.bind(this),this.stopSelectComponent(),(0,r.on)(this.getContentWindow(),'keydown',this.rollback)},onEndMoveFromModel:function(){(0,r.S1)(this.getContentWindow(),'keydown',this.rollback)},onEndMove:function(){this.enable(),(0,r.S1)(this.getContentWindow(),'keydown',this.rollback)},onSelect:function(t,e){},rollback:function(t,e){(27==(t.which||t.keyCode)||e)&&(this.sorter.moved=!1,this.sorter.endMove())},getBadgeEl:function(){return this.$badge||(this.$badge=(0,i["default"])(this.getBadge())),this.$badge},getHighlighterEl:function(){return this.$hl||(this.$hl=(0,i["default"])(this.canvas.getHighlighter())),this.$hl},stop:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];s["default"].stop.apply(this,t),this.getBadgeEl().removeClass(this.badgeClass),this.getHighlighterEl().removeClass(this.hoverClass),this.$wrapper.css('cursor','').unbind().removeClass(this.noSelClass)}})},963:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var o=n(50),i=n(968);const r={open:function(t){var e=this,n=this,i=n.editor,r=n.title,s=n.config,a=n.am,l=s.custom;if((0,o.isFunction)(l.open))return l.open(a.__customData());i.Modal.open({title:r,content:t}).onceClose((function(){return i.stopCommand(e.id)}))},close:function(){var t=this.config.custom;if((0,o.isFunction)(t.close))return t.close(this.am.__customData());var e=this.editor.Modal;e&&e.close()},run:function(t,e,n){void 0===n&&(n={});var o=t.AssetManager,r=o.getConfig(),s=n.types,a=void 0===s?[]:s,l=n.accept,c=n.select;if(this.title=n.modalTitle||t.t('assetManager.modalTitle')||'',this.editor=t,this.config=r,this.am=o,o.setTarget(n.target),o.onClick(n.onClick),o.onDblClick(n.onDblClick),o.onSelect(n.onSelect),o.__behaviour({select:c,types:a,options:n}),r.custom)this.rendered=this.rendered||(0,i.ut)('div'),this.rendered.className="".concat(r.stylePrefix,"custom-wrp"),o.__behaviour({container:this.rendered}),o.__trgCustom();else{if(!this.rendered||a){var u=o.getAll().filter((function(t){return t}));a&&a.length&&(u=u.filter((function(t){return-1!==a.indexOf(t.get('type'))}))),o.render(u),this.rendered=o.getContainer()}if(l){var h=this.rendered.querySelector("input#".concat(r.stylePrefix,"uploadFile"));h&&h.setAttribute('accept',l)}}return this.open(this.rendered),this},stop:function(t){this.editor=t,this.close(this.rendered)}}},268:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var o=n(50),i=n(968);const r={open:function(){var t=this,e=t.container,n=t.editor,i=t.bm,r=t.config,s=r.custom,a=r.appendTo;if((0,o.isFunction)(s.open))return s.open(i.__customData());if(this.firstRender&&!a){var l='views-container',c=n.Panels;(c.getPanel(l)||c.addPanel({id:l})).set('appendContent',e).trigger('change:appendContent'),s||e.appendChild(i.render())}e&&(e.style.display='block')},close:function(){var t=this.container,e=this.config.custom;if((0,o.isFunction)(e.close))return e.close(this.bm.__customData());t&&(t.style.display='none')},run:function(t){var e=t.Blocks;this.config=e.getConfig(),this.firstRender=!this.container,this.container=this.container||(0,i.ut)('div'),this.editor=t,this.bm=e;var n=this.container;e.__behaviour({container:n}),this.config.custom&&e.__trgCustom(),this.open()},stop:function(){this.close()}}},556:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const o={run:function(t){var e=t.LayerManager,n=t.Panels,o=e.getConfig();if(!o.appendTo){if(!this.layers){var i='views-container',r=document.createElement('div'),s=n.getPanel(i)||n.addPanel({id:i});o.custom?e.__trgCustom({container:r}):r.appendChild(e.render()),s.set('appendContent',r).trigger('change:appendContent'),this.layers=r}this.layers.style.display='block'}},stop:function(){var t=this.layers;t&&(t.style.display='none')}}},120:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>o});const o={run:function(t){var e=t.Pages,n=t.Panels;if(!e.getConfig().appendTo){if(!this.layers){var o='views-container',i=document.createElement('div'),r=n.getPanel(o)||n.addPanel({id:o});i.appendChild(e.render()),r.set('appendContent',i).trigger('change:appendContent'),this.layers=i}this.layers.style.display='block'}},stop:function(){var t=this.layers;t&&(t.style.display='none')}}},462:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=n(815);const i={run:function(t,e){if(this.sender=e,!this.$cnt){var n=t.getConfig(),i=t.Panels,r=t.DeviceManager,s=t.SelectorManager,a=t.StyleManager,l='change:appendContent',c=(0,o["default"])('<div></div>'),u=(0,o["default"])('<div></div>'),h=(0,o["default"])('<div></div>'),p=(0,o["default"])('<div></div>');if(this.$cnt=c,this.$cntInner=u,u.append(h),u.append(p),c.append(u),r&&n.showDevices){var d=i.addPanel({id:'devices-c'}),f=r.render();d.set('appendContent',f).trigger(l)}var g=s.getConfig();g.custom?s.__trgCustom({container:h.get(0)}):g.appendTo||h.append(s.render([])),this.sm=a;var m=a.getConfig(),v=m.stylePrefix;this.$header=(0,o["default"])("<div class=\"".concat(v,"header\">").concat(t.t('styleManager.empty'),"</div>")),c.append(this.$header),m.custom?a.__trgCustom({container:p.get(0)}):m.appendTo||p.append(a.render());var y='views-container';(i.getPanel(y)||i.addPanel({id:y})).set('appendContent',c).trigger(l);var _=t.getModel();this.listenTo(_,a.events.target,this.toggleSm)}this.toggleSm()},toggleSm:function(){var t=this,e=t.sender,n=t.sm,o=t.$cntInner,i=t.$header;e&&e.get&&!e.get('active')||!n||(n.getSelected()?(null==o||o.show(),null==i||i.hide()):(null==o||o.hide(),null==i||i.show()))},stop:function(){var t,e;null===(t=this.$cntInner)||void 0===t||t.hide(),null===(e=this.$header)||void 0===e||e.hide()}}},521:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=n(815);const i={run:function(t,e){this.sender=e;var n,i=t.getModel(),r=t.Config.stylePrefix,s=t.TraitManager,a=s.getConfig();if(!a.appendTo){if(!this.$cn){this.$cn=(0,o["default"])('<div></div>'),this.$cn2=(0,o["default"])('<div></div>'),this.$cn.append(this.$cn2),this.$header=(0,o["default"])('<div>').append("<div class=\"".concat(a.stylePrefix,"header\">").concat(i.t('traitManager.empty'),"</div>")),this.$cn.append(this.$header),a.custom?s.__trgCustom({container:this.$cn2.get(0)}):(this.$cn2.append("<div class=\"".concat(r,"traits-label\">").concat(i.t('traitManager.label'),"</div>")),this.$cn2.append(s.render()));var l=t.Panels;null==(n=l.getPanel('views-container')?l.getPanel('views-container'):l.addPanel({id:'views-container'}))||n.set('appendContent',this.$cn.get(0)).trigger('change:appendContent'),this.target=t.getModel(),this.listenTo(this.target,'component:toggled',this.toggleTm)}this.toggleTm()}},toggleTm:function(){var t=this.sender;t&&t.get&&!t.get('active')||(1===this.target.getSelectedAll().length?(this.$cn2.show(),this.$header.hide()):(this.$cn2.hide(),this.$header.show()))},stop:function(){this.$cn2&&this.$cn2.hide(),this.$header&&this.$header.hide()}}},133:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=n(50);const i={run:function(t,e,n){void 0===n&&(n={});var i=t.getModel(),s=i.get('clipboard'),a=t.getSelected();(null==s?void 0:s.length)&&a&&(t.getSelectedAll().forEach((function(e){var a,l,c,u,h=(null===(l=null===(a=e.delegate)||void 0===a?void 0:a.copy)||void 0===l?void 0:l.call(a,e))||e,p=h.collection;if(p){var d={at:h.index()+1,action:n.action||'paste-component'};u=(0,o.contains)(s,h)&&h.get('copyable')?p.add(h.clone(),d):r(t,s,h.parent(),d)}else{var f=null===(c=i.Pages.getSelected())||void 0===c?void 0:c.getMainComponent();d={at:(null==f?void 0:f.components().length)||0,action:n.action||'paste-component'};u=r(t,s,f,d)}(u=(0,o.isArray)(u)?u:[u]).forEach((function(e){return t.trigger('component:paste',e)}))})),a.emitUpdate())}};function r(t,e,n,o){var i=e.filter((function(t){return t.get('copyable')})).filter((function(e){return t.Components.canMove(n,e).result}));return n.components().add(i.map((function(t){return t.clone()})),o)}},931:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>s});var o=n(50),i=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},r='core:component-outline';const s={getPanels:function(t){return this.panels||(this.panels=t.Panels.getPanels()),this.panels},preventDrag:function(t){t.abort=1},tglEffects:function(t){var e=this.em,n=t?'on':'off';if(e){var i=e.Canvas,r=i.getBody(),s=i.getToolbarEl();s&&(s.style.display=t?'none':'');var a=r.querySelectorAll(".".concat(this.ppfx,"no-pointer"));(0,o.each)(a,(function(e){return e.style.pointerEvents=t?'all':''})),e[n]('run:tlb-move:before',this.preventDrag)}},run:function(t,e){var n=this;this.sender=e,this.selected=i([],t.getSelectedAll(),!0),t.select(),this.shouldRunSwVisibility||(this.shouldRunSwVisibility=t.Commands.isActive(r)),this.shouldRunSwVisibility&&t.stopCommand(r),t.getModel().stopDefault();var o=this.getPanels(t),s=t.Canvas.getElement(),a=t.getEl(),l=t.Config.stylePrefix;if(!this.helper){var c=document.createElement('span');c.className="".concat(l,"off-prv fa fa-eye-slash"),a.appendChild(c),c.onclick=function(){return n.stopCommand()},this.helper=c}this.helper.style.display='inline-block',o.forEach((function(t){return t.set('visible',!1)}));var u=s.style;u.width='100%',u.height='100%',u.top='0',u.left='0',u.padding='0',u.margin='0',t.refresh(),this.tglEffects(1)},stop:function(t){var e=this.sender,n=void 0===e?{}:e,o=this.selected;n.set&&n.set('active',0);var i=this.getPanels(t);this.shouldRunSwVisibility&&(t.runCommand(r),this.shouldRunSwVisibility=!1),t.getModel().runDefault(),i.forEach((function(t){return t.set('visible',!0)})),t.Canvas.getElement().setAttribute('style',''),o&&t.select(o),delete this.selected,this.helper&&(this.helper.style.display='none'),t.refresh(),this.tglEffects()}}},676:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=void 0&&(void 0).__assign||function(){return o=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)};const i={run:function(t,e,n){var i=n||{},r=t.Canvas,s=r.getCanvasView(),a=o({appendTo:r.getResizerEl(),prefix:t.getConfig().stylePrefix,posFetcher:s.getElementPos.bind(s),mousePosFetcher:r.getMouseRelativePos.bind(r)},i.options||{}),l=this.canvasResizer;return l&&!i.forceNew||(this.canvasResizer=new t.Utils.Resizer(a),l=this.canvasResizer),l.setOptions(a,!0),l.blur(),l.focus(i.el),l},stop:function(){var t;null===(t=this.canvasResizer)||void 0===t||t.blur()}}},938:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>k});var o,i=n(50),r=n(847),s=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});const a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return s(e,t),e.prototype.defaults=function(){return{command:'',attributes:{}}},e}(r.Hn);var l=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return l(e,t),e}(r.FE);const u=c;c.prototype.model=a;var h=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),p=function(t){function e(e,n,o){void 0===e&&(e={}),void 0===o&&(o=!1);var i=t.call(this,e)||this;return i.itemsView='',i.itemType='type',i.reuseView=!1,i.config=n||e.config||{},o&&i.listenTo(i.collection,'add',i.addTo),i.items=[],i}return h(e,t),e.prototype.addTo=function(t){this.add(t)},e.prototype.itemViewNotFound=function(t){var e=this.config,n=this.ns,o=e.em,i="".concat(n?"[".concat(n,"]: "):'',"'").concat(t,"' type not found");o&&o.logWarning(i)},e.prototype.add=function(t,e){var n,o=this,r=o.config,s=o.reuseView,a=o.items,l=this.itemsView||{},c=e||null,u=this.itemView,h=t.get(this.itemType);l[h]?u=l[h]:!h||l[h]||(0,i.includes)(['button','checkbox','color','date','datetime-local','email','file','hidden','image','month','number','password','radio','range','reset','search','submit','tel','text','time','url','week'],h)||this.itemViewNotFound(h),n=t.view&&s?t.view:new u({model:t,config:r},r),a&&a.push(n);var p=n.render().el;c?c.appendChild(p):this.$el.append(p)},e.prototype.render=function(){var t=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each((function(e){this.add(e,t)}),this),this.$el.append(t),this.onRender(),this},e.prototype.onRender=function(){},e.prototype.onRemoveBefore=function(t,e){},e.prototype.onRemove=function(t,e){},e.prototype.remove=function(e){void 0===e&&(e={});var n=this.items;return this.onRemoveBefore(n,e),this.clearItems(),t.prototype.remove.call(this),this.onRemove(n,e),this},e.prototype.clearItems=function(){this.items},e}(r.G7);const d=p;p.prototype.itemView='';var f=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),g=void 0&&(void 0).__assign||function(){return g=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},g.apply(this,arguments)};const m=function(t){function e(e){var n=t.call(this,e)||this;return n.em=e.config.em,n}return f(e,t),e.prototype.events=function(){return this.model.get('events')||{mousedown:'handleClick'}},e.prototype.attributes=function(){return this.model.get('attributes')},e.prototype.handleClick=function(t){t.preventDefault(),t.stopPropagation();var e=this.em,n=e.Canvas.getFrameEl().getBoundingClientRect(),o=n.left,i=n.top,r=g(g({},t),{clientX:t.clientX-o,clientY:t.clientY-i});e.trigger('toolbar:run:before',{event:r}),this.execCommand(r)},e.prototype.execCommand=function(t){var e=this.em,n={event:t},o=this.model.get('command'),r=e.Editor;(0,i.isFunction)(o)&&o(r,null,n),(0,i.isString)(o)&&r.runCommand(o,n)},e.prototype.render=function(){var t=this,e=t.em,n=t.$el,o=t.model,i=o.get('id'),r=o.get('label'),s=e.getConfig().stylePrefix;return n.addClass("".concat(s,"toolbar-item")),i&&n.addClass("".concat(s,"toolbar-item__").concat(i)),r&&n.append(r),this},e}(r.G7);var v=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),y=function(t){function e(e){var n=t.call(this,e)||this,o=e.em;return n.em=o,n.config={em:o},n.listenTo(n.collection,'reset',n.render),n}return v(e,t),e.prototype.onRender=function(){var t=this.em.config.stylePrefix;this.el.className="".concat(t,"toolbar-items")},e}(d);const _=y;y.prototype.itemView=m;var O,b=n(968),w=n(283),x=n(201),S=void 0&&(void 0).__assign||function(){return S=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},S.apply(this,arguments)};const k={init:function(){this.onSelect=(0,i.debounce)(this.onSelect,0),(0,i.bindAll)(this,'onHover','onOut','onClick','onFrameScroll','onFrameResize','onFrameUpdated','onContainerChange')},enable:function(){this.frameOff=this.canvasOff=this.adjScroll=null,this.startSelectComponent(),O=!0},startSelectComponent:function(){this.toggleSelectComponent(1),this.em.getSelected()&&this.onSelect()},stopSelectComponent:function(){this.toggleSelectComponent()},toggleSelectComponent:function(t){var e=this,n=this.em,o=n.getConfig().listenToEl,i=n.getContainer().parentNode,r=t?'on':'off',s={on:b.on,off:b.S1};!o.length&&i&&o.push(i);s[r](window,'resize',this.onFrameUpdated),s[r](o,'scroll',this.onContainerChange),n[r]('component:toggled component:update undo redo',this.onSelect,this),n[r]('change:componentHovered',this.onHovered,this),n[r]('component:resize styleable:change component:input',this.updateGlobalPos,this),n[r]('component:update:toolbar',this._upToolbar,this),n[r]('change:canvasOffset',this.updateAttached,this),n[r]('frame:updated',this.onFrameUpdated,this),n[r]('canvas:updateTools',this.onFrameUpdated,this),n.Canvas.getFrames().forEach((function(t){var n=t.view,o=null==n?void 0:n.getWindow();o&&function(t,n){s[r](n,'mouseover',e.onHover),s[r](n,'mouseleave',e.onOut),s[r](n,'click',e.onClick),s[r](t,'scroll',e.onFrameScroll,!0),s[r](t,'resize',e.onFrameResize)}(o,null==n?void 0:n.getBody())}))},onHover:function(t){t.stopPropagation();var e=this.em,n=t.target,o=(0,w.getComponentView)(n),i=null==o?void 0:o.frameView,r=null==o?void 0:o.model;if(!r)for(var s=n.parentNode;!r&&s&&!(0,b.Mx)(s);)r=(0,w.getComponentModel)(s),s=s.parentNode;this.currentDoc=n.ownerDocument,e.setHovered(r,{useValid:!0}),i&&e.setCurrentFrame(i)},onFrameUpdated:function(){this.updateLocalPos(),this.updateGlobalPos()},onHovered:function(t,e){var n,o=this,i={};e?null===(n=e.views)||void 0===n||n.forEach((function(t){var n=t.el,r=o.getElementPos(n);i={el:n,pos:r,component:e,view:(0,w.getViewEl)(n)},n.ownerDocument===o.currentDoc&&(o.elHovered=i),o.updateToolsLocal(i)})):(this.currentDoc=null,this.elHovered=0,this.updateToolsLocal(),this.canvas.getFrames().forEach((function(t){var e=t.view,n=e&&e.getToolsEl();n&&o.toggleToolsEl(0,0,{el:n})})))},onSelect:function(){var t=this.em,e=t.getSelected(),n=t.getCurrentFrame(),o=e&&e.getView(null==n?void 0:n.model),i=o&&o.el,r={};i&&(0,b.pn)(i)&&(r={el:i,pos:this.getElementPos(i),component:e,view:(0,w.getViewEl)(i)});this.elSelected=r,this.updateToolsGlobal(),this.updateLocalPos(r),this.initResize(e)},updateGlobalPos:function(){var t=this.getElSelected();t.el&&(t.pos=this.getElementPos(t.el),this.updateToolsGlobal())},updateLocalPos:function(t){var e=this.getElHovered();e.el&&(e.pos=this.getElementPos(e.el),this.updateToolsLocal(t))},getElHovered:function(){return this.elHovered||{}},getElSelected:function(){return this.elSelected||{}},onOut:function(){this.em.setHovered()},toggleToolsEl:function(t,e,n){void 0===n&&(n={});var o=n.el||this.canvas.getToolsEl(e);return o&&(o.style.display=t?'':'none'),o||{}},showElementOffset:function(t,e,n){void 0===n&&(n={}),O&&this.editor.runCommand('show-offset',{el:t,elPos:e,view:n.view,force:1,top:0,left:0})},hideElementOffset:function(t){this.editor.stopCommand('show-offset',{view:t})},showFixedElementOffset:function(t,e){this.editor.runCommand('show-offset',{el:t,elPos:e,state:'Fixed'})},hideFixedElementOffset:function(){this.editor&&this.editor.stopCommand('show-offset',{state:'Fixed'})},hideHighlighter:function(t){this.canvas.getHighlighter(t).style.opacity=0},onClick:function(t){t.stopPropagation(),t.preventDefault();var e=this.em;if(e.get('_cmpDrag'))return e.set('_cmpDrag');var n=t.target,o=(0,w.getComponentModel)(n);if(!o)for(var i=n.parentNode;!o&&i&&!(0,b.Mx)(i);)o=(0,w.getComponentModel)(i),i=i.parentNode;if(o){if(e.isEditing()&&!o.get('textable')&&o.isChildOf('text'))return;this.select(o,t)}},select:function(t,e){void 0===e&&(e={}),t&&(this.editor.select(t,{event:e,useValid:!0}),this.initResize(t))},updateBadge:function(t,e,n){void 0===n&&(n={});var o=this.canvas,i=(0,w.getComponentModel)(t),r=this.getBadge(n),s=r.style;if(i&&i.get('badgable')){if(!n.posOnly){var a=this.canvas.getConfig(),l=i.getIcon(),c=a.pStylePrefix||'',u="".concat(c,"badge"),h=a.customBadgeLabel,p="".concat(l?"<div class=\"".concat(u,"__icon\">").concat(l,"</div>"):'',"\n        <div class=\"").concat(u,"__name\">").concat(i.getName(),"</div>");r.innerHTML=h?h(i):p}var d='px';s.display='block';var f=o.getTargetToElementFixed(t,r,{pos:e}).top,g=n.leftOff<0?-n.leftOff:0;s.top=f+d,s.left=g+d}else s.display='none'},showHighlighter:function(t){this.canvas.getHighlighter(t).style.opacity=''},initResize:function(t){var e=this.em,n=this.canvas,o=e.Editor,r=!(0,i.isElement)(t)&&(0,b.o5)(t)?t:e.getSelected(),s=null==r?void 0:r.get('resizable'),a=x.q.Resize,l=n.hasCustomSpot(a);if(n.removeSpots({type:a}),r&&s){n.addSpot({type:a,component:r});var c,u=(0,i.isElement)(t)?t:r.getEl();if(l||!u)return;var h=e.config.stylePrefix||'',p="".concat(h,"resizing"),d=function(t,e,n){var o=n.docs;o&&o.forEach((function(e){var n=e.body,o=n.className||'';n.className=('add'==t?"".concat(o," ").concat(p):o.replace(p,'')).trim()}))},f=S({onStart:function(t,o){void 0===o&&(o={});var i=o.el,s=o.config,a=o.resizer,l=s.keyHeight,u=s.keyWidth,h=s.currentUnit,p=s.keepAutoHeight,f=s.keepAutoWidth;d('add',0,o),c=e.Styles.getModelToStyle(r),n.toggleFramesEvents(!1);var g=getComputedStyle(i),m=c.getStyle(),v=m[u];s.autoWidth=f&&'auto'===v,isNaN(parseFloat(v))&&(v=g[u]);var y=m[l];s.autoHeight=p&&'auto'===y,isNaN(parseFloat(y))&&(y=g[l]),a.startDim.w=parseFloat(v),a.startDim.h=parseFloat(y),O=!1,h&&(s.unitHeight=(0,w.getUnitFromValue)(y),s.unitWidth=(0,w.getUnitFromValue)(v))},onMove:function(){o.trigger('component:resize')},onEnd:function(t,e){d('remove',0,e),o.trigger('component:resize'),n.toggleFramesEvents(!0),O=!0},updateTarget:function(t,o,i){if(void 0===i&&(i={}),c){var s=i.store,a=i.selectedHandler,l=i.config,u=l.keyHeight,h=l.keyWidth,p=l.autoHeight,d=l.autoWidth,f=l.unitWidth,g=l.unitHeight,m=['tc','bc'].indexOf(a)>=0,v=['cl','cr'].indexOf(a)>=0,y={};if(!m){var _=n.getBody().offsetWidth,O=o.w<_?o.w:_;y[h]=d?'auto':"".concat(O).concat(f)}v||(y[u]=p?'auto':"".concat(o.h).concat(g)),e.getDragMode(r)&&(y.top="".concat(o.t).concat(g),y.left="".concat(o.l).concat(f));var b=S(S({},y),{__p:!s});c.addStyle(b,{avoidStore:!s}),e.Styles.__emitCmpStyleUpdate(b,{components:e.getSelected()})}}},(0,w.isObject)(s)?s:{});this.resizer=o.runCommand('resize',{el:u,options:f,force:1})}else{if(l)return;o.stopCommand('resize'),this.resizer=null}},updateToolbar:function(t){var e=this.canvas,n=this.config.em,o=t===n?n.getSelected():t,i=e.getToolbarEl(),r=i.style,s=o.get('toolbar'),a=n.config.showToolbar,l=!e.hasCustomSpot(x.q.Select);if(o&&a&&s&&s.length&&l){if(r.display='',!this.toolbar){i.innerHTML='',this.toolbar=new u(s);var c=new _({collection:this.toolbar,em:n});i.appendChild(c.render().el)}this.toolbar.reset(s),r.top='-100px',r.left='0'}else r.display='none'},updateToolbarPos:function(t){var e='px',n=this.canvas.getToolbarEl().style;n.top="".concat(t.top).concat(e),n.left="".concat(t.left).concat(e),n.opacity=''},getCanvasPosition:function(){return this.canvas.getCanvasView().getPosition()},getBadge:function(t){return void 0===t&&(t={}),this.canvas.getBadgeEl(t.view)},onFrameScroll:function(){this.updateTools(),this.canvas.refreshSpots()},onFrameResize:function(){this.canvas.refreshSpots()},updateTools:function(){this.updateLocalPos(),this.updateGlobalPos()},isCompSelected:function(t){return t&&'selected'===t.get('status')},updateToolsLocal:function(t){var e=this.em.getConfig(),n=t||this.getElHovered(),o=n.el,i=n.pos,r=n.view,s=n.component;if(o){var a=s.get('hoverable'),l=this.lastHovered!==o,c=l?{}:{posOnly:1},u=this.canvas.hasCustomSpot(x.q.Hover);l&&a&&(this.lastHovered=o,u?this.hideHighlighter(r):this.showHighlighter(r),this.showElementOffset(o,i,{view:r})),this.isCompSelected(s)&&(this.hideHighlighter(r),!e.showOffsetsSelected&&this.hideElementOffset(r));var h='px',p=this.toggleToolsEl(1,r),d=p.style,f=this.canvas.canvasRectOffset(o,i),g=f.top,m=f.left;!u&&this.updateBadge(o,i,S(S({},c),{view:r,topOff:g,leftOff:m})),d.top=g+h,d.left=m+h,d.width=i.width+h,d.height=i.height+h,this._trgToolUp('local',{component:s,el:p,top:g,left:m,width:i.width,height:i.height})}else this.lastHovered=0},_upToolbar:(0,i.debounce)((function(){this.updateToolsGlobal({force:1})}),0),_trgToolUp:function(t,e){void 0===e&&(e={}),this.em.trigger('canvas:tools:update',S({type:t},e))},updateToolsGlobal:function(t){void 0===t&&(t={});var e=this.getElSelected(),n=e.el,o=e.pos,i=e.component;if(!n)return this.toggleToolsEl(),void(this.lastSelected=0);var r=this.canvas;(this.lastSelected!==n||t.force)&&(this.lastSelected=n,this.updateToolbar(i));var s='px',a=this.toggleToolsEl(1),l=a.style,c=r.getTargetToElementFixed(n,r.getToolbarEl(),{pos:o}),u=c.canvasOffsetTop,h=c.canvasOffsetLeft;l.top=u+s,l.left=h+s,l.width=o.width+s,l.height=o.height+s,this.updateToolbarPos({top:c.top,left:c.left}),this._trgToolUp('global',{component:i,el:a,top:u,left:h,width:o.width,height:o.height})},updateAttached:(0,i.debounce)((function(){this.updateGlobalPos()}),0),onContainerChange:(0,i.debounce)((function(){this.em.refreshCanvas()}),150),getElementPos:function(t){return this.canvas.getCanvasView().getElementPos(t,{noScroll:!0})},hideBadge:function(){this.getBadge().style.display='none'},cleanPrevious:function(t){t&&t.set({status:'',state:''})},getContentWindow:function(){return this.canvas.getWindow()},run:function(t){(0,w.hasWin)()&&(this.editor=t&&t.get('Editor'),this.enable())},stop:function(t,e,n){if(void 0===n&&(n={}),(0,w.hasWin)()){var o=this.em,i=this.editor;this.onHovered(),this.stopSelectComponent(),!n.preserveSelected&&o.setSelected(),this.toggleToolsEl(),i&&i.stopCommand('resize')}}}},477:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>i});var o=n(815);const i={startSelectPosition:function(t,e,n){var o=this;void 0===n&&(n={}),this.isPointed=!1;var i=this.em.Utils,r=t.ownerDocument.body;i&&!this.sorter&&(this.sorter=new i.Sorter({container:r,placer:this.canvas.getPlacerEl(),containerSel:'*',itemSel:'*',pfx:this.ppfx,direction:'a',document:e,wmargin:1,nested:1,em:this.em,canvasRelative:1,scale:function(){return o.em.getZoomDecimal()}})),n.onStart&&(this.sorter.onStart=n.onStart),t&&this.sorter.startSort(t,{container:r})},getOffsetDim:function(){var t=this.offset(this.canvas.getFrameEl()),e=this.offset(this.canvas.getElement());return{top:t.top-e.top,left:t.left-e.left}},stopSelectPosition:function(){this.posTargetCollection=null,this.posIndex='after'==this.posMethod&&0!==this.cDim.length?this.posIndex+1:this.posIndex,this.sorter&&(this.sorter.moved=0,this.sorter.endMove()),this.cDim&&(this.posIsLastEl=0!==this.cDim.length&&'after'==this.posMethod&&this.posIndex==this.cDim.length,this.posTargetEl=0===this.cDim.length?(0,o["default"])(this.outsideElem):!this.posIsLastEl&&this.cDim[this.posIndex]?(0,o["default"])(this.cDim[this.posIndex][5]).parent():(0,o["default"])(this.outsideElem),this.posTargetModel=this.posTargetEl.data('model'),this.posTargetCollection=this.posTargetEl.data('model-comp'))},enable:function(){this.startSelectPosition()},nearFloat:function(t,e,n){var o=t||0,i=e||'before',r=n.length,s=0!==r&&'after'==i&&o==r;return 0!==r&&(!s&&!n[o][4]||n[o-1]&&!n[o-1][4]||s&&!n[o-1][4])?1:0},run:function(){this.enable()},stop:function(){this.stopSelectPosition(),this.$wrapper.css('cursor',''),this.$wrapper.unbind()}}},886:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>l});var o=n(50),i=n(201),r=n(815),s=n(968),a=void 0&&(void 0).__assign||function(){return a=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},a.apply(this,arguments)};const l={getOffsetMethod:function(t){return'get'+(t||'')+'OffsetViewerEl'},run:function(t,e,n){var l=this.canvas,c=n||{},u=c.state||'',h=t.getConfig(),p=this.em.getZoomDecimal(),d=c.el;if(h.showOffsets&&d&&!(0,s.BM)(d)&&(h.showOffsetsSelected||'Fixed'!=u)){if(!l.hasCustomSpot(i.q.Spacing)){var f=a({},c.elPos||l.getElementPos(d));(0,o.isUndefined)(c.top)||(f.top=c.top),(0,o.isUndefined)(c.left)||(f.left=c.left);var g=window.getComputedStyle(d),m=this.ppfx,v=u+'State',y=l[this.getOffsetMethod(u)](n.view);y.style.opacity='';var _=this['marginT'+u],O=this['marginB'+u],b=this['marginL'+u],w=this['marginR'+u],x=this['padT'+u],S=this['padB'+u],k=this['padL'+u],P=this['padR'+u];if(y.childNodes.length&&(this[v]='1',_=y.querySelector('[data-offset-m-t]'),O=y.querySelector('[data-offset-m-b]'),b=y.querySelector('[data-offset-m-l]'),w=y.querySelector('[data-offset-m-r]'),x=y.querySelector('[data-offset-p-t]'),S=y.querySelector('[data-offset-p-b]'),k=y.querySelector('[data-offset-p-l]'),P=y.querySelector('[data-offset-p-r]')),!this[v]){var C=u.toLowerCase(),T=C+'margin-v',E=C+'padding-v',Q=(0,r["default"])("<div class=\"".concat(m,"marginName\">")).get(0),A=(0,r["default"])("<div class=\"".concat(m,"paddingName\">")).get(0),$=m+E+'-el',j="".concat(m+T+'-el'," ").concat(m+T),R="".concat($," ").concat(m+E);_=(0,r["default"])("<div class=\"".concat(j,"-top\"></div>")).get(0),O=(0,r["default"])("<div class=\"".concat(j,"-bottom\"></div>")).get(0),b=(0,r["default"])("<div class=\"".concat(j,"-left\"></div>")).get(0),w=(0,r["default"])("<div class=\"".concat(j,"-right\"></div>")).get(0),x=(0,r["default"])("<div class=\"".concat(R,"-top\"></div>")).get(0),S=(0,r["default"])("<div class=\"".concat(R,"-bottom\"></div>")).get(0),k=(0,r["default"])("<div class=\"".concat(R,"-left\"></div>")).get(0),P=(0,r["default"])("<div class=\"".concat(R,"-right\"></div>")).get(0),this['marginT'+u]=_,this['marginB'+u]=O,this['marginL'+u]=b,this['marginR'+u]=w,this['padT'+u]=x,this['padB'+u]=S,this['padL'+u]=k,this['padR'+u]=P,Q.appendChild(_),Q.appendChild(O),Q.appendChild(b),Q.appendChild(w),A.appendChild(x),A.appendChild(S),A.appendChild(k),A.appendChild(P),y.appendChild(Q),y.appendChild(A),this[v]='1'}var Z='px',M=parseFloat(g.marginLeft.replace(Z,''))*p,V=parseFloat(g.marginRight.replace(Z,''))*p,D=parseFloat(g.marginTop.replace(Z,''))*p,I=parseFloat(g.marginBottom.replace(Z,''))*p,N=_.style,W=O.style,X=b.style,L=w.style,Y=x.style,z=S.style,q=k.style,U=P.style,B=parseFloat(f.left),F=parseFloat(g.width)*p+Z;N.height=D+Z,N.width=F,N.top=f.top-D+Z,N.left=B+Z,W.height=I+Z,W.width=F,W.top=f.top+f.height+Z,W.left=B+Z;var G=f.height+D+I+Z,H=f.top-D+Z;X.height=G,X.width=M+Z,X.top=H,X.left=B-M+Z,L.height=G,L.width=V+Z,L.top=H,L.left=B+f.width+Z;var K=parseFloat(g.paddingTop)*p;Y.height=K+Z;var J=parseFloat(g.paddingBottom)*p;z.height=J+Z;var tt=f.height-J-K+Z,et=f.top+K+Z;q.height=tt,q.width=parseFloat(g.paddingLeft)*p+Z,q.top=et;var nt=parseFloat(g.paddingRight)*p;U.height=tt,U.width=nt+Z,U.top=et}}else t.stopCommand("".concat(this.id),n)},stop:function(t,e,n){void 0===n&&(n={});var o=(n||{}).state||'',i=this.getOffsetMethod(o),r=n.view;this.canvas[i](r).style.opacity=0}}},817:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var o=n(50),i=n(283);const r={init:function(){(0,o.bindAll)(this,'_onFramesChange')},run:function(t){this.toggleVis(t,!0)},stop:function(t){this.toggleVis(t,!1)},toggleVis:function(t,e){if(void 0===e&&(e=!0),!t.Commands.isActive('preview')){var n=t.Canvas,o=e?'on':'off';n.getModel()[o]('change:frames',this._onFramesChange),this.handleFrames(n.getFrames(),e)}},handleFrames:function(t,e){var n=this;t.forEach((function(t){var o;(null===(o=t.view)||void 0===o?void 0:o.loaded)&&n._upFrame(t,e),t.__ol||(t.on('loaded',(function(){return n._upFrame(t)})),t.__ol=!0)}))},_onFramesChange:function(t,e){this.handleFrames(e)},_upFrame:function(t,e){var n,o=this,r=o.ppfx,s=o.em,a=o.id,l=((0,i.isDef)(e)?e:s.Commands.isActive(a))?'add':'remove',c="".concat(r,"dashed");null===(n=t.view)||void 0===n||n.getBody().classList[l](c)}}},847:(t,e,n)=>{"use strict";n.d(e,{FE:()=>u,G7:()=>h,Hn:()=>c,pH:()=>p,vA:()=>i});var o,i,r=n(316),s=n.n(r),a=void 0&&(void 0).__extends||(o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),l=void 0&&(void 0).__assign||function(){return l=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},l.apply(this,arguments)},c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e}(s().Model),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e}(s().Collection),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a(e,t),e}(s().View);!function(t){function e(e){var n=t.call(this,e)||this;return n.collection=e.collection,n}a(e,t)}(s().View);!function(t){t["Screen"]="screen",t["World"]="world"}(i||(i={}));var p={x:0,y:0};l(l({},p),{width:0,height:0})},250:(t,e,n)=>{"use strict";n.d(e,{Z:()=>a});var o=n(50),i=n(968),r=void 0&&(void 0).__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},s=['x','y'];const a=function(){function t(t){return void 0===t&&(t={}),this.opts={snapOffset:5,scale:1},(0,o.bindAll)(this,'drag','stop','keyHandle','handleScroll'),this.setOptions(t),this.delta={x:0,y:0},this.lastScroll={x:0,y:0},this.lastScrollDiff={x:0,y:0},this.startPointer={x:0,y:0},this.startPosition={x:0,y:0},this.globScrollDiff={x:0,y:0},this.currentPointer={x:0,y:0},this.position={x:0,y:0},this.guidesStatic=[],this.guidesTarget=[],this.docs=[],this}return t.prototype.setOptions=function(t){void 0===t&&(t={}),this.opts=r(r({},this.opts),t)},t.prototype.toggleDrag=function(t){var e=this.getDocumentEl(),n=this.getContainerEl(),o=this.getWindowEl(),r=t?'on':'off',s={on:i.on,off:i.S1};s[r](n,'mousemove dragover',this.drag),s[r](e,'mouseup dragend touchend',this.stop),s[r](e,'keydown',this.keyHandle),s[r](o,'scroll',this.handleScroll)},t.prototype.handleScroll=function(){var t=this.lastScroll,e=this.delta,n=this.getScrollInfo(),o={x:n.x-t.x,y:n.y-t.y};this.move(e.x+o.x,e.y+o.y),this.lastScrollDiff=o},t.prototype.start=function(t){var e=this.opts,n=e.onStart;this.toggleDrag(!0),this.startPointer=this.getPointerPos(t),this.guidesStatic=(0,o.result)(e,'guidesStatic')||[],this.guidesTarget=(0,o.result)(e,'guidesTarget')||[],(0,o.isFunction)(n)&&n(t,this),this.startPosition=this.getStartPosition(),this.lastScrollDiff={x:0,y:0},this.globScrollDiff={x:0,y:0},this.drag(t)},t.prototype.drag=function(t){var e=this,n=this,i=n.opts,a=n.lastScrollDiff,l=n.globScrollDiff,c=i.onDrag,u=this.startPointer,h=this.getPointerPos(t),p={x:l.x+a.x,y:l.y+a.y};this.globScrollDiff=p;var d={x:h.x-u.x+p.x,y:h.y-u.y+p.y};this.lastScrollDiff={x:0,y:0};var f=this.lockedAxis;'x'===(f=t.shiftKey?!f&&this.detectAxisLock(d.x,d.y):null)?d.x=u.x:'y'===f&&(d.y=u.y);var g=function(n){s.forEach((function(t){return n[t]=n[t]*(0,o.result)(i,'scale')})),e.delta=n,e.move(n.x,n.y),(0,o.isFunction)(c)&&c(t,e)},m=r({},d);if(this.currentPointer=h,this.lockedAxis=f,this.lastScroll=this.getScrollInfo(),g(d),this.guidesTarget.length){var v=this.snapGuides(m),y=v.newDelta,_=v.trgX,O=v.trgY;(_||O)&&g(y)}0===t.which&&this.stop(t)},t.prototype.snapGuides=function(t){var e=this,n=t,i=this.trgX,r=this.trgY;return this.guidesTarget.forEach((function(n){n.x&&e.trgX||n.y&&e.trgY||(n.active=!1,e.guidesStatic.forEach((function(s){if(!(n.y&&s.x||n.x&&s.y)){var a=n.y&&s.y,l=a?'y':'x',c=n[l],u=s[l],h=t[l],p=a?r:i;if(e.isPointIn(c,u)&&(0,o.isUndefined)(p)){var d=h-(c-u);e.setGuideLock(n,d)}}})))})),i=this.trgX,r=this.trgY,s.forEach((function(i){var r=i.toUpperCase(),s=e["trg".concat(r)];s&&!e.isPointIn(t[i],s.lock)&&(e.setGuideLock(s,null),s=null),s&&!(0,o.isUndefined)(s.lock)&&(n[i]=s.lock)})),{newDelta:n,trgX:this.trgX,trgY:this.trgY}},t.prototype.isPointIn=function(t,e,n){var o=(void 0===n?{}:n).offset||this.opts.snapOffset||0;return t>=e&&t<=e+o||t<=e&&t>=e-o},t.prototype.setGuideLock=function(t,e){var n=(0,o.isUndefined)(t.x)?'Y':'X',i="trg".concat(n);return null!==e?(t.active=!0,t.lock=e,this[i]=t):(delete t.active,delete t.lock,delete this[i]),t},t.prototype.stop=function(t,e){void 0===e&&(e={});var n=this.delta,i=!!e.cancel,r=i?0:n.x,s=i?0:n.y;this.toggleDrag(),this.lockedAxis=null,this.move(r,s,!0);var a=this.opts.onEnd;(0,o.isFunction)(a)&&a(t,this,{cancelled:i})},t.prototype.keyHandle=function(t){(0,i.kl)(t)&&this.stop(t,{cancel:!0})},t.prototype.move=function(t,e,n){var i=this.el,r=this.opts,s=this.startPosition;if(s){var a=r.setPosition,l=s.x+t,c=s.y+e;this.position={x:l,y:c,end:n},(0,o.isFunction)(a)&&a(this.position),i&&(i.style.left="".concat(l,"px"),i.style.top="".concat(c,"px"))}},t.prototype.getContainerEl=function(){var t=this.opts.container;return t?[t]:this.getDocumentEl()},t.prototype.getWindowEl=function(){return this.getContainerEl().map((function(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow}))},t.prototype.getDocumentEl=function(t){var e=this.opts.doc;if(t=t||this.el,!this.docs.length){var n=[document];t&&n.push(t.ownerDocument),e&&n.push(e),this.docs=n}return this.docs},t.prototype.getPointerPos=function(t){var e=this.opts.getPointerPosition,n=(0,i.VB)(t);return e?e(t):{x:n.clientX,y:n.clientY}},t.prototype.getStartPosition=function(){var t=this.el,e=this.opts.getPosition,n={x:0,y:0};return(0,o.isFunction)(e)?n=e():t&&(n={x:parseFloat(t.style.left),y:parseFloat(t.style.top)}),n},t.prototype.getScrollInfo=function(){var t=this.opts.doc,e=t&&t.body;return{y:e?e.scrollTop:0,x:e?e.scrollLeft:0}},t.prototype.detectAxisLock=function(t,e){var n=t,o=e,i=Math.abs(n),r=Math.abs(o);return o>=i||o<=-i?'x':n>r||n<-r?'y':void 0},t}()},815:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>mt});var o='undefined'!=typeof document?document:null,i='undefined'!=typeof window?window:null,r=Array.prototype,s=r.filter,a=r.indexOf,l=r.map,c=r.push,u=r.reverse,h=r.slice,p=r.splice,d=/^#[\w-]*$/,f=/^\.[\w-]*$/,g=/<.+>/,m=/^\w+$/;function v(t,e){return void 0===e&&(e=o),f.test(t)?e.getElementsByClassName(t.slice(1)):m.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t)}function y(t,e){if(void 0===e&&(e=o),t){if(t.__cash)return t;var n=t;if(T(t)){if(e.__cash&&(e=e[0]),!(n=d.test(t)?e.getElementById(t.slice(1)):g.test(t)?dt(t):v(t,e)))return}else if(C(t))return this.ready(t);(n.nodeType||n===i)&&(n=[n]),this.length=n.length;for(var r=0,s=this.length;r<s;r++)this[r]=n[r]}}function _(t,e){return new y(t,e)}var O=_.fn=_.prototype=y.prototype={constructor:_,__cash:!0,length:0,splice:p};O.get=function(t){return void 0===t?h.call(this):this[t<0?t+this.length:t]},O.eq=function(t){return _(this.get(t))},O.first=function(){return this.eq(0)},O.last=function(){return this.eq(-1)},O.map=function(t){return _(l.call(this,(function(e,n){return t.call(e,n,e)})))},O.slice=function(){return _(h.apply(this,arguments))};var b=/(?:^\w|[A-Z]|\b\w)/g,w=/[\s-_]+/g;function x(t){return t.replace(b,(function(t,e){return t[e?'toUpperCase':'toLowerCase']()})).replace(w,'')}function S(t,e){for(var n=0,o=t.length;n<o&&!1!==e.call(t[n],t[n],n,t);n++);}_.camelCase=x,_.each=S,O.each=function(t){return S(this,(function(e,n){return t.call(e,n,e)})),this},O.removeProp=function(t){return this.each((function(e,n){delete n[t]}))},_.extend=O.extend=function(t){void 0===t&&(t=this);for(var e=arguments,n=e.length,o=n<2?0:1;o<n;o++)for(var i in e[o])t[i]=e[o][i];return t};var k=1;function P(t,e){var n=t&&(t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector);return!!n&&n.call(t,e)}function C(t){return'function'==typeof t}function T(t){return'string'==typeof t}function E(t){return!isNaN(parseFloat(t))&&isFinite(t)}_.guid=k,_.matches=P,_.isFunction=C,_.isString=T,_.isNumeric=E;var Q=Array.isArray;function A(t){return T(t)?function(e,n){return P(n,t)}:t.__cash?function(e,n){return t.is(n)}:function(t,e,n){return e===n}}_.isArray=Q,O.prop=function(t,e){if(t){if(T(t))return arguments.length<2?this[0]&&this[0][t]:this.each((function(n,o){o[t]=e}));for(var n in t)this.prop(n,t[n]);return this}},O.filter=function(t){if(!t)return _();var e=C(t)?t:A(t);return _(s.call(this,(function(n,o){return e.call(n,o,n,t)})))};var $=/\S+/g;function j(t){return T(t)&&t.match($)||[]}function R(t){return t.filter((function(t,e,n){return n.indexOf(t)===e}))}function Z(t,e,n){if(1===t.nodeType){var o=i.getComputedStyle(t,null);return e?n?o.getPropertyValue(e):o[e]:o}}function M(t,e){return parseInt(Z(t,e),10)||0}O.hasClass=function(t){var e=j(t),n=!1;return e.length&&this.each((function(t,o){return!(n=o.classList.contains(e[0]))})),n},O.removeAttr=function(t){var e=j(t);return e.length?this.each((function(t,n){S(e,(function(t){n.removeAttribute(t)}))})):this},O.attr=function(t,e){if(t){if(T(t)){if(arguments.length<2){if(!this[0])return;var n=this[0].getAttribute(t);return null===n?void 0:n}return null===e?this.removeAttr(t):this.each((function(n,o){o.setAttribute(t,e)}))}for(var o in t)this.attr(o,t[o]);return this}},O.toggleClass=function(t,e){var n=j(t),o=void 0!==e;return n.length?this.each((function(t,i){S(n,(function(t){o?e?i.classList.add(t):i.classList.remove(t):i.classList.toggle(t)}))})):this},O.addClass=function(t){return this.toggleClass(t,!0)},O.removeClass=function(t){return arguments.length?this.toggleClass(t,!1):this.attr('class','')},_.unique=R,O.add=function(t,e){return _(R(this.get().concat(_(t,e).get())))};var V=/^--/;function D(t){return V.test(t)}var I={},N=o&&o.createElement('div'),W=N?N.style:{},X=['webkit','moz','ms','o'];function L(t,e){if(void 0===e&&(e=D(t)),e)return t;if(!I[t]){var n=x(t),o=''+n.charAt(0).toUpperCase()+n.slice(1);S((n+' '+X.join(o+' ')+o).split(' '),(function(e){if(e in W)return I[t]=e,!1}))}return I[t]}_.prefixedProp=L;var Y={animationIterationCount:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0};function z(t,e,n){return void 0===n&&(n=D(t)),n||Y[t]||!E(e)?e:e+'px'}O.css=function(t,e){if(T(t)){var n=D(t);return t=L(t,n),arguments.length<2?this[0]&&Z(this[0],t,n):t?(e=z(t,e,n),this.each((function(o,i){1===i.nodeType&&(n?i.style.setProperty(t,e):i.style[t]=e)}))):this}for(var o in t)this.css(o,t[o]);return this};var q='__cashData',U=/^data-(.*)/;function B(t){return t[q]=t[q]||{}}function F(t,e){var n=B(t);if(e){if(!(e in n)){var o=t.dataset?t.dataset[e]||t.dataset[x(e)]:_(t).attr('data-'+e);if(void 0!==o){try{o=JSON.parse(o)}catch(t){}n[e]=o}}return n[e]}return n}function G(t,e){return M(t,'border'+(e?'Left':'Top')+'Width')+M(t,'padding'+(e?'Left':'Top'))+M(t,'padding'+(e?'Right':'Bottom'))+M(t,'border'+(e?'Right':'Bottom')+'Width')}function H(t,e){for(var n=0,o=e.length;n<o;n++)if(t.indexOf(e[n])<0)return!1;return!0}function K(t,e,n){S(t[n],(function(t){t[0];var o=t[1];e.removeEventListener(n,o)})),delete t[n]}_.hasData=function(t){return q in t},O.data=function(t,e){var n=this;if(!t){if(!this[0])return;return S(this[0].attributes,(function(t){var e=t.name.match(U);e&&n.data(e[1])})),F(this[0])}if(T(t))return void 0===e?this[0]&&F(this[0],t):this.each((function(n,o){return function(t,e,n){B(t)[e]=n}(o,t,e)}));for(var o in t)this.data(o,t[o]);return this},O.removeData=function(t){return this.each((function(e,n){return function(t,e){void 0===e?delete t[q]:delete B(t)[e]}(n,t)}))},S(['Width','Height'],(function(t){O['inner'+t]=function(){if(this[0])return this[0]===i?i['inner'+t]:this[0]['client'+t]}})),S(['width','height'],(function(t,e){O[t]=function(n){return this[0]?arguments.length?(n=parseInt(n,10),this.each((function(o,i){if(1===i.nodeType){var r=Z(i,'boxSizing');i.style[t]=z(t,n+('border-box'===r?G(i,!e):0))}}))):this[0]===i?this[0][x('outer-'+t)]:this[0].getBoundingClientRect()[t]-G(this[0],!e):void 0===n?void 0:this}})),S(['Width','Height'],(function(t,e){O['outer'+t]=function(n){if(this[0])return this[0]===i?i['outer'+t]:this[0]['offset'+t]+(n?M(this[0],'margin'+(e?'Top':'Left'))+M(this[0],'margin'+(e?'Bottom':'Right')):0)}}));var J='__cashEvents',tt='.';function et(t){return t[J]=t[J]||{}}function nt(t){var e=t.split(tt);return[e[0],e.slice(1).sort()]}function ot(t,e,n,o){var i=et(t);if(e){var r=i[e];if(!r)return;o&&(o.guid=o.guid||k++),i[e]=r.filter((function(i){var r=i[0],s=i[1];if(o&&s.guid!==o.guid||!H(r,n))return!0;t.removeEventListener(e,s)}))}else if(n&&n.length)for(e in i)ot(t,e,n,o);else for(e in i)K(i,t,e)}O.off=function(t,e){var n=this;return void 0===t?this.each((function(t,e){return ot(e)})):S(j(t),(function(t){var o=nt(t),i=o[0],r=o[1];n.each((function(t,n){return ot(n,i,r,e)}))})),this},O.on=function(t,e,n,o){var i=this;if(!T(t)){for(var r in t)this.on(r,e,t[r]);return this}return C(e)&&(n=e,e=!1),S(j(t),(function(t){var r=nt(t),s=r[0],a=r[1];i.each((function(t,i){var r=function t(r){if(!r.namespace||H(a,r.namespace.split(tt))){var l=i;if(e){for(var c=r.target;!P(c,e);){if(c===i)return;if(!(c=c.parentNode))return}l=c}r.namespace=r.namespace||'';var u=n.call(l,r,r.data);o&&ot(i,s,a,t),!1===u&&(r.preventDefault(),r.stopPropagation())}};r.guid=n.guid=n.guid||k++,function(t,e,n,o){o.guid=o.guid||k++;var i=et(t);i[e]=i[e]||[],i[e].push([n,o]),t.addEventListener(e,o)}(i,s,a,r)}))})),this},O.one=function(t,e,n){return this.on(t,e,n,!0)},O.ready=function(t){var e=function(){return t(_)};return'loading'!==o.readyState?setTimeout(e):o.addEventListener('DOMContentLoaded',e),this},O.trigger=function(t,e){var n=t;if(T(t)){var i=nt(t),r=i[0],s=i[1];(n=o.createEvent('HTMLEvents')).initEvent(r,!0,!0),n.namespace=s.join(tt)}return n.data=e,this.each((function(t,e){e.dispatchEvent(n)}))};var it=/select-one/i,rt=/select-multiple/i;function st(t){var e=t.type;return it.test(e)?function(t){return t.selectedIndex<0?null:t.options[t.selectedIndex].value}(t):rt.test(e)?function(t){var e=[];return S(t.options,(function(t){!t.selected||t.disabled||t.parentNode.disabled||e.push(t.value)})),e}(t):t.value}var at=/%20/g;var lt=/file|reset|submit|button|image/i,ct=/radio|checkbox/i;O.serialize=function(){var t='';return this.each((function(e,n){S(n.elements||[n],(function(e){if(!e.disabled&&e.name&&'FIELDSET'!==e.tagName&&!lt.test(e.type)&&(!ct.test(e.type)||e.checked)){var n=st(e);if(void 0!==n)S(Q(n)?n:[n],(function(n){t+=function(t,e){return'&'+encodeURIComponent(t)+'='+encodeURIComponent(e).replace(at,'+')}(e.name,n)}))}}))})),t.substr(1)},O.val=function(t){return void 0===t?this[0]&&st(this[0]):this.each((function(e,n){var o=rt.test(n.type),i=null===t?o?[]:'':t;o&&Q(i)?S(n.options,(function(t){t.selected=i.indexOf(t.value)>=0})):n.value=i}))},O.clone=function(){return this.map((function(t,e){return e.cloneNode(!0)}))},O.detach=function(){return this.each((function(t,e){e.parentNode&&e.parentNode.removeChild(e)}))};var ut,ht=/^\s*<(\w+)[^>]*>/,pt=/^\s*<(\w+)\s*\/?>(?:<\/\1>)?\s*$/;function dt(t){if(function(){if(!ut){var t=o.createElement('table'),e=o.createElement('tr');ut={'*':o.createElement('div'),tr:o.createElement('tbody'),td:e,th:e,thead:t,tbody:t,tfoot:t}}}(),!T(t))return[];if(pt.test(t))return[o.createElement(RegExp.$1)];var e=ht.test(t)&&RegExp.$1,n=ut[e]||ut['*'];return n.innerHTML=t,_(n.childNodes).detach().get()}function ft(t,e,n){if(void 0!==e){var o=T(e);!o&&e.length?S(e,(function(e){return ft(t,e,n)})):S(t,o?function(t){t.insertAdjacentHTML(n?'afterbegin':'beforeend',e)}:function(t,o){return function(t,e,n){n?t.insertBefore(e,t.childNodes[0]):t.appendChild(e)}(t,o?e.cloneNode(!0):e,n)})}}_.parseHTML=dt,O.empty=function(){var t=this[0];if(t)for(;t.firstChild;)t.removeChild(t.firstChild);return this},O.append=function(){var t=this;return S(arguments,(function(e){ft(t,e)})),this},O.appendTo=function(t){return ft(_(t),this),this},O.html=function(t){if(void 0===t)return this[0]&&this[0].innerHTML;var e=t.nodeType?t[0].outerHTML:t;return this.each((function(t,n){n.innerHTML=e}))},O.insertAfter=function(t){var e=this;return _(t).each((function(t,n){var o=n.parentNode;e.each((function(e,i){o.insertBefore(t?i.cloneNode(!0):i,n.nextSibling)}))})),this},O.after=function(){var t=this;return S(u.apply(arguments),(function(e){u.apply(_(e).slice()).insertAfter(t)})),this},O.insertBefore=function(t){var e=this;return _(t).each((function(t,n){var o=n.parentNode;e.each((function(e,i){o.insertBefore(t?i.cloneNode(!0):i,n)}))})),this},O.before=function(){var t=this;return S(arguments,(function(e){_(e).insertBefore(t)})),this},O.prepend=function(){var t=this;return S(arguments,(function(e){ft(t,e,!0)})),this},O.prependTo=function(t){return ft(_(t),u.apply(this.slice()),!0),this},O.remove=function(){return this.detach().off()},O.replaceWith=function(t){var e=this;return this.each((function(n,o){var i=o.parentNode;if(i){var r=n?_(t).clone():_(t);if(!r[0])return e.remove(),!1;i.replaceChild(r[0],o),_(r[0]).after(r.slice(1))}}))},O.replaceAll=function(t){return _(t).replaceWith(this),this},O.text=function(t){return void 0===t?this[0]?this[0].textContent:'':this.each((function(e,n){n.textContent=t}))};var gt=o&&o.documentElement;O.offset=function(){var t=this[0];if(t){var e=t.getBoundingClientRect();return{top:e.top+i.pageYOffset-gt.clientTop,left:e.left+i.pageXOffset-gt.clientLeft}}},O.offsetParent=function(){return _(this[0]&&this[0].offsetParent)},O.position=function(){var t=this[0];if(t)return{left:t.offsetLeft,top:t.offsetTop}},O.children=function(t){var e=[];return this.each((function(t,n){c.apply(e,n.children)})),e=_(R(e)),t?e.filter((function(e,n){return P(n,t)})):e},O.contents=function(){var t=[];return this.each((function(e,n){c.apply(t,'IFRAME'===n.tagName?[n.contentDocument]:n.childNodes)})),_(t.length&&R(t))},O.find=function(t){for(var e=[],n=0,o=this.length;n<o;n++){var i=v(t,this[n]);i.length&&c.apply(e,i)}return _(e.length&&R(e))},O.has=function(t){var e=T(t)?function(e,n){return!!v(t,n).length}:function(e,n){return n.contains(t)};return this.filter(e)},O.is=function(t){if(!t||!this[0])return!1;var e=A(t),n=!1;return this.each((function(o,i){return!(n=e(o,i,t))})),n},O.next=function(){return _(this[0]&&this[0].nextElementSibling)},O.not=function(t){if(!t||!this[0])return this;var e=A(t);return this.filter((function(n,o){return!e(n,o,t)}))},O.parent=function(){var t=[];return this.each((function(e,n){n&&n.parentNode&&t.push(n.parentNode)})),_(R(t))},O.index=function(t){var e=t?_(t)[0]:this[0],n=t?this:_(e).parent().children();return a.call(n,e)},O.closest=function(t){return t&&this[0]?this.is(t)?this.filter(t):this.parent().closest(t):_()},O.parents=function(t){var e,n=[];return this.each((function(i,r){for(e=r;e&&e.parentNode&&e!==o.body.parentNode;)e=e.parentNode,(!t||t&&P(e,t))&&n.push(e)})),_(R(n))},O.prev=function(){return _(this[0]&&this[0].previousElementSibling)},O.siblings=function(){var t=this[0];return this.parent().children().filter((function(e,n){return n!==t}))};const mt=_},968:(t,e,n)=>{"use strict";n.d(e,{$Q:()=>g,BM:()=>b,FW:()=>p,G1:()=>a,GX:()=>S,L_:()=>c,Mx:()=>l,R3:()=>m,S1:()=>$,SJ:()=>O,Ut:()=>x,VB:()=>C,Vb:()=>Q,cx:()=>u,dL:()=>f,kl:()=>T,o5:()=>w,on:()=>A,pn:()=>d,r$:()=>E,rw:()=>y,sE:()=>h,sN:()=>P,t3:()=>_,ut:()=>v});var o=n(50),i=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},r='tag',s='attributes',a='transitionend oTransitionEnd transitionend webkitTransitionEnd',l=function(t){return(null==t?void 0:t.nodeType)===Node.DOCUMENT_NODE},c=function(t){var e=t&&t.parentNode;e&&e.removeChild(t)};function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(Array.isArray(t[0])?t[0]:i([],t,!0)).filter(Boolean).join(' ')}var h=function(t,e){return t.querySelectorAll(e)},p=function(t,e){return void 0===e&&(e={}),t&&t.setAttribute&&(0,o.each)(e,(function(e,n){return t.setAttribute(n,e)}))},d=function(t){return t&&!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},f=function(t,e){var n;null===(n=t.parentNode)||void 0===n||n.replaceChild(e,t)},g=function(t,e,n){var i=t.childNodes,r=i.length,s=(0,o.isUndefined)(n)?r:n;(0,o.isString)(e)&&(t.insertAdjacentHTML('beforeEnd',e),e=t.lastChild,t.removeChild(e)),s>=r?t.appendChild(e):t.insertBefore(e,i[s])},m=function(t,e){return g(t,e)},v=function(t,e,n){void 0===e&&(e={});var i=document.createElement(t);return e&&(0,o.each)(e,(function(t,e){return i.setAttribute(e,t)})),n&&((0,o.isString)(n)?i.innerHTML=n:i.appendChild(n)),i},y=function(t){return document.createTextNode(t)},_=function(t,e){var n,o=t.type;try{n=new window[e](o,t)}catch(t){(n=document.createEvent(e)).initEvent(o,!0,!0)}return n._parentEvent=t,0===o.indexOf('key')&&(n.keyCodeVal=t.keyCode,['keyCode','which'].forEach((function(t){Object.defineProperty(n,t,{get:function(){return this.keyCodeVal}})}))),n},O=function(t,e){void 0===e&&(e=[]),(Array.isArray(e)?e:[e]).forEach((function(e){var n=e[r]||'div',i=e[s]||{},a=document.createElement(n);(0,o.each)(i,(function(t,e){a.setAttribute(e,t)})),t.appendChild(a)}))},b=function(t){return(null==t?void 0:t.nodeType)===Node.TEXT_NODE},w=function(t){return t&&!b(t)&&!function(t){return(null==t?void 0:t.nodeType)===Node.COMMENT_NODE}(t)},x=function(t){var e,n={top:0,left:0,width:0,height:0};if(!t)return n;if(b(t)){var o=document.createRange();o.selectNode(t),e=o.getBoundingClientRect(),o.detach()}return e||(t.getBoundingClientRect?t.getBoundingClientRect():n)},S=function(t){var e=(null==t?void 0:t.ownerDocument)||document,n=e.documentElement,o=e.defaultView||window;return{x:(o.pageXOffset||n.scrollLeft||0)-(n.clientLeft||0),y:(o.pageYOffset||n.scrollTop||0)-(n.clientTop||0)}},k=function(t){return t.which||t.keyCode},P=function(t){return String.fromCharCode(k(t))},C=function(t){return t.touches&&t.touches[0]?t.touches[0]:t},T=function(t){return 27===k(t)},E=function(t){return 13===k(t)},Q=function(t){return function(t){return t.ctrlKey}(t)||t.metaKey},A=function(t,e,n,i){var r=e.split(/\s+/),s=(0,o.isArray)(t)?t:[t];r.forEach((function(t){s.forEach((function(e){return null==e?void 0:e.addEventListener(t,n,i)}))}))},$=function(t,e,n,i){var r=e.split(/\s+/),s=(0,o.isArray)(t)?t:[t];r.forEach((function(t){s.forEach((function(e){return null==e?void 0:e.removeEventListener(t,n,i)}))}))}},283:(t,e,n)=>{"use strict";n.r(e),n.d(e,{appendStyles:()=>y,buildBase64UrlFromSvg:()=>W,camelCase:()=>w,capitalize:()=>j,createId:()=>N,deepMerge:()=>E,escape:()=>C,escapeNodeContent:()=>T,find:()=>P,getComponentModel:()=>D,getComponentView:()=>V,getElement:()=>k,getGlobal:()=>d,getModel:()=>Q,getUiClass:()=>v,getUnitFromValue:()=>O,getViewEl:()=>Z,hasDnd:()=>S,hasWin:()=>p,isBultInMethod:()=>l,isComponent:()=>M,isDef:()=>h,isEmptyObj:()=>$,isObject:()=>A,isRule:()=>R,matches:()=>m,normalizeFloat:()=>x,normalizeKey:()=>c,setViewEl:()=>I,shallowDiff:()=>_,toLowerCase:()=>f,upFirst:()=>b,wait:()=>u});var o=n(50),i=n(968),r=void 0&&(void 0).__assign||function(){return r=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},s=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},a={},l=function(t){return(0,o.isFunction)(a[t])},c=function(t){return l(t)?"_".concat(t):t},u=function(t){return void 0===t&&(t=0),new Promise((function(e){return setTimeout(e,t)}))},h=function(t){return void 0!==t},p=function(){return'undefined'!=typeof window},d=function(){return'undefined'!=typeof globalThis?globalThis:'undefined'!=typeof window?window:n.g},f=function(t){return(t||'').toLowerCase()},g=p()?window.Element.prototype:{},m=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.msMatchesSelector,v=function(t,e){var n=t.getConfig(),o=n.stylePrefix;return[n.customUI&&"".concat(o,"cui"),e].filter((function(t){return t})).join(' ')},y=function(t,e){void 0===e&&(e={});var n=(0,o.isArray)(t)?s([],t,!0):[t];if(n.length){var i=n.shift();if(i&&(!e.unique||!document.querySelector("link[href=\"".concat(i,"\"]")))){var r=document.head,a=document.createElement('link');a.href=i,a.rel='stylesheet',e.prepand?r.insertBefore(a,r.firstChild):r.appendChild(a)}y(n)}},_=function(t,e){var n={},i=(0,o.keys)(e);for(var r in t)if(t.hasOwnProperty(r)){var s=t[r],a=e[r];i.indexOf(r)>=0?s!==a&&(n[r]=a):n[r]=null}for(var r in e)e.hasOwnProperty(r)&&(0,o.isUndefined)(t[r])&&(n[r]=e[r]);return n},O=function(t){return t.replace(parseFloat(t),'')},b=function(t){return t[0].toUpperCase()+t.toLowerCase().slice(1)},w=function(t){return t.replace(/-./g,(function(t){return t[1].toUpperCase()}))},x=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=0);var o=0;if(isNaN(t))return n;if(t=parseFloat(t),Math.floor(t)!==t){var i=e.toString().split('.')[1];o=i?i.length:0}return o?parseFloat(t.toFixed(o)):t},S=function(t){return'draggable'in document.createElement('i')&&(!t||t.config.nativeDnD)},k=function(t){return(0,o.isElement)(t)||(0,i.BM)(t)?t:t&&t.getEl?t.getEl():void 0},P=function(t,e){var n=null;return t.some((function(o,i){return e(o,i,t)?(n=o,1):0})),n},C=function(t){return void 0===t&&(t=''),"".concat(t).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#039;').replace(/`/g,'&#96;')},T=function(t){return void 0===t&&(t=''),"".concat(t).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;')},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=r({},t[0]),o=1;o<t.length;o++){var i=r({},t[o]);for(var s in i){var a=n[s],l=i[s];A(a)&&A(l)?n[s]=E(a,l):n[s]=l}}return n},Q=function(t,e){var n;return!e&&t&&t.__cashData?n=t.__cashData.model:e&&(0,o.isElement)(t)&&(n=e(t).data('model')),n},A=function(t){return t&&!Array.isArray(t)&&'object'==typeof t},$=function(t){return Object.keys(t).length<=0},j=function(t){return void 0===t&&(t=''),t&&t.charAt(0).toUpperCase()+t.substring(1)},R=function(t){return t&&t.toCSS},Z=function(t){return null==t?void 0:t.__gjsv},M=function(t){return!!(null==t?void 0:t.toHTML)},V=function(t){return Z(t)},D=function(t){var e;return null===(e=V(t))||void 0===e?void 0:e.model},I=function(t,e){t.__gjsv=e},N=function(t){void 0===t&&(t=16);for(var e='',n='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789',o=n.length,i=0;i<t;i++)e+=n.charAt(Math.floor(Math.random()*o));return e},W=function(t){if(t&&'<svg'===t.substr(0,4)){var e='';return p()?e=window.btoa(t):'undefined'!=typeof Buffer&&(e=Buffer.from(t,'utf8').toString('base64')),e?"data:image/svg+xml;base64,".concat(e):t}return t}},828:(t,e,n)=>{var o={"./CanvasClear":266,"./CanvasClear.ts":266,"./CanvasMove":142,"./CanvasMove.ts":142,"./CommandAbstract":458,"./CommandAbstract.ts":458,"./ComponentDelete":463,"./ComponentDelete.ts":463,"./ComponentDrag":474,"./ComponentDrag.ts":474,"./ComponentEnter":866,"./ComponentEnter.ts":866,"./ComponentExit":594,"./ComponentExit.ts":594,"./ComponentNext":656,"./ComponentNext.ts":656,"./ComponentPrev":768,"./ComponentPrev.ts":768,"./ComponentStyleClear":570,"./ComponentStyleClear.ts":570,"./CopyComponent":282,"./CopyComponent.ts":282,"./ExportTemplate":905,"./ExportTemplate.ts":905,"./Fullscreen":212,"./Fullscreen.ts":212,"./MoveComponent":907,"./MoveComponent.ts":907,"./OpenAssets":963,"./OpenAssets.ts":963,"./OpenBlocks":268,"./OpenBlocks.ts":268,"./OpenLayers":556,"./OpenLayers.ts":556,"./OpenPages":120,"./OpenPages.ts":120,"./OpenStyleManager":462,"./OpenStyleManager.ts":462,"./OpenTraitManager":521,"./OpenTraitManager.ts":521,"./PasteComponent":133,"./PasteComponent.ts":133,"./Preview":931,"./Preview.ts":931,"./Resize":676,"./Resize.ts":676,"./SelectComponent":938,"./SelectComponent.ts":938,"./SelectPosition":477,"./SelectPosition.ts":477,"./ShowOffset":886,"./ShowOffset.ts":886,"./SwitchVisibility":817,"./SwitchVisibility.ts":817};function i(t){var e=r(t);return n(e)}function r(t){if(!n.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code='MODULE_NOT_FOUND',e}return o[t]}i.keys=function(){return Object.keys(o)},i.resolve=r,t.exports=i,i.id=828},50:(t,e,n)=>{"use strict";n.r(e),n.d(e,{VERSION:()=>i,after:()=>Ze,all:()=>en,allKeys:()=>mt,any:()=>nn,assign:()=>Zt,before:()=>Me,bind:()=>xe,bindAll:()=>Pe,chain:()=>_e,chunk:()=>In,clone:()=>It,collect:()=>Fe,compact:()=>Tn,compose:()=>Re,constant:()=>K,contains:()=>on,countBy:()=>yn,create:()=>Dt,debounce:()=>Ae,default:()=>Yn,defaults:()=>Mt,defer:()=>Ee,delay:()=>Te,detect:()=>qe,difference:()=>Qn,drop:()=>Pn,each:()=>Be,escape:()=>ae,every:()=>en,extend:()=>Rt,extendOwn:()=>Zt,filter:()=>Je,find:()=>qe,findIndex:()=>Ne,findKey:()=>De,findLastIndex:()=>We,findWhere:()=>Ue,first:()=>kn,flatten:()=>En,foldl:()=>He,foldr:()=>Ke,forEach:()=>Be,functions:()=>$t,get:()=>Yt,groupBy:()=>mn,has:()=>zt,head:()=>kn,identity:()=>qt,include:()=>on,includes:()=>on,indexBy:()=>vn,indexOf:()=>Ye,initial:()=>Sn,inject:()=>He,intersection:()=>Rn,invert:()=>At,invoke:()=>rn,isArguments:()=>F,isArray:()=>q,isArrayBuffer:()=>V,isBoolean:()=>T,isDataView:()=>z,isDate:()=>j,isElement:()=>E,isEmpty:()=>lt,isEqual:()=>gt,isError:()=>Z,isFinite:()=>G,isFunction:()=>N,isMap:()=>kt,isMatch:()=>ct,isNaN:()=>H,isNull:()=>P,isNumber:()=>$,isObject:()=>k,isRegExp:()=>R,isSet:()=>Ct,isString:()=>A,isSymbol:()=>M,isTypedArray:()=>it,isUndefined:()=>C,isWeakMap:()=>Pt,isWeakSet:()=>Tt,iteratee:()=>Ht,keys:()=>at,last:()=>Cn,lastIndexOf:()=>ze,map:()=>Fe,mapObject:()=>Jt,matcher:()=>Ut,matches:()=>Ut,max:()=>ln,memoize:()=>Ce,methods:()=>$t,min:()=>cn,mixin:()=>Wn,negate:()=>je,noop:()=>te,now:()=>ie,object:()=>Vn,omit:()=>xn,once:()=>Ve,pairs:()=>Qt,partial:()=>we,partition:()=>_n,pick:()=>wn,pluck:()=>sn,property:()=>Bt,propertyOf:()=>ee,random:()=>oe,range:()=>Dn,reduce:()=>He,reduceRight:()=>Ke,reject:()=>tn,rest:()=>Pn,restArguments:()=>S,result:()=>me,sample:()=>pn,select:()=>Je,shuffle:()=>dn,size:()=>On,some:()=>nn,sortBy:()=>fn,sortedIndex:()=>Xe,tail:()=>Pn,take:()=>kn,tap:()=>Nt,template:()=>ge,templateSettings:()=>ce,throttle:()=>Qe,times:()=>ne,toArray:()=>hn,toPath:()=>Wt,transpose:()=>Zn,unescape:()=>le,union:()=>jn,uniq:()=>$n,unique:()=>$n,uniqueId:()=>ye,unzip:()=>Zn,values:()=>Et,where:()=>an,without:()=>An,wrap:()=>$e,zip:()=>Mn});var o={};n.r(o),n.d(o,{VERSION:()=>i,after:()=>Ze,all:()=>en,allKeys:()=>mt,any:()=>nn,assign:()=>Zt,before:()=>Me,bind:()=>xe,bindAll:()=>Pe,chain:()=>_e,chunk:()=>In,clone:()=>It,collect:()=>Fe,compact:()=>Tn,compose:()=>Re,constant:()=>K,contains:()=>on,countBy:()=>yn,create:()=>Dt,debounce:()=>Ae,default:()=>Xn,defaults:()=>Mt,defer:()=>Ee,delay:()=>Te,detect:()=>qe,difference:()=>Qn,drop:()=>Pn,each:()=>Be,escape:()=>ae,every:()=>en,extend:()=>Rt,extendOwn:()=>Zt,filter:()=>Je,find:()=>qe,findIndex:()=>Ne,findKey:()=>De,findLastIndex:()=>We,findWhere:()=>Ue,first:()=>kn,flatten:()=>En,foldl:()=>He,foldr:()=>Ke,forEach:()=>Be,functions:()=>$t,get:()=>Yt,groupBy:()=>mn,has:()=>zt,head:()=>kn,identity:()=>qt,include:()=>on,includes:()=>on,indexBy:()=>vn,indexOf:()=>Ye,initial:()=>Sn,inject:()=>He,intersection:()=>Rn,invert:()=>At,invoke:()=>rn,isArguments:()=>F,isArray:()=>q,isArrayBuffer:()=>V,isBoolean:()=>T,isDataView:()=>z,isDate:()=>j,isElement:()=>E,isEmpty:()=>lt,isEqual:()=>gt,isError:()=>Z,isFinite:()=>G,isFunction:()=>N,isMap:()=>kt,isMatch:()=>ct,isNaN:()=>H,isNull:()=>P,isNumber:()=>$,isObject:()=>k,isRegExp:()=>R,isSet:()=>Ct,isString:()=>A,isSymbol:()=>M,isTypedArray:()=>it,isUndefined:()=>C,isWeakMap:()=>Pt,isWeakSet:()=>Tt,iteratee:()=>Ht,keys:()=>at,last:()=>Cn,lastIndexOf:()=>ze,map:()=>Fe,mapObject:()=>Jt,matcher:()=>Ut,matches:()=>Ut,max:()=>ln,memoize:()=>Ce,methods:()=>$t,min:()=>cn,mixin:()=>Wn,negate:()=>je,noop:()=>te,now:()=>ie,object:()=>Vn,omit:()=>xn,once:()=>Ve,pairs:()=>Qt,partial:()=>we,partition:()=>_n,pick:()=>wn,pluck:()=>sn,property:()=>Bt,propertyOf:()=>ee,random:()=>oe,range:()=>Dn,reduce:()=>He,reduceRight:()=>Ke,reject:()=>tn,rest:()=>Pn,restArguments:()=>S,result:()=>me,sample:()=>pn,select:()=>Je,shuffle:()=>dn,size:()=>On,some:()=>nn,sortBy:()=>fn,sortedIndex:()=>Xe,tail:()=>Pn,take:()=>kn,tap:()=>Nt,template:()=>ge,templateSettings:()=>ce,throttle:()=>Qe,times:()=>ne,toArray:()=>hn,toPath:()=>Wt,transpose:()=>Zn,unescape:()=>le,union:()=>jn,uniq:()=>$n,unique:()=>$n,uniqueId:()=>ye,unzip:()=>Zn,values:()=>Et,where:()=>an,without:()=>An,wrap:()=>$e,zip:()=>Mn});var i='1.13.6',r='object'==typeof self&&self.self===self&&self||'object'==typeof global&&global.global===global&&global||Function('return this')()||{},s=Array.prototype,a=Object.prototype,l='undefined'!=typeof Symbol?Symbol.prototype:null,c=s.push,u=s.slice,h=a.toString,p=a.hasOwnProperty,d='undefined'!=typeof ArrayBuffer,f='undefined'!=typeof DataView,g=Array.isArray,m=Object.keys,v=Object.create,y=d&&ArrayBuffer.isView,_=isNaN,O=isFinite,b=!{toString:null}.propertyIsEnumerable('toString'),w=['valueOf','isPrototypeOf','toString','propertyIsEnumerable','hasOwnProperty','toLocaleString'],x=Math.pow(2,53)-1;function S(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),o=Array(n),i=0;i<n;i++)o[i]=arguments[i+e];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,arguments[0],o);case 2:return t.call(this,arguments[0],arguments[1],o)}var r=Array(e+1);for(i=0;i<e;i++)r[i]=arguments[i];return r[e]=o,t.apply(this,r)}}function k(t){var e=typeof t;return'function'===e||'object'===e&&!!t}function P(t){return null===t}function C(t){return void 0===t}function T(t){return!0===t||!1===t||'[object Boolean]'===h.call(t)}function E(t){return!(!t||1!==t.nodeType)}function Q(t){var e='[object '+t+']';return function(t){return h.call(t)===e}}const A=Q('String'),$=Q('Number'),j=Q('Date'),R=Q('RegExp'),Z=Q('Error'),M=Q('Symbol'),V=Q('ArrayBuffer');var D=Q('Function'),I=r.document&&r.document.childNodes;1&&'object'!=typeof Int8Array&&'function'!=typeof I&&(D=function(t){return'function'==typeof t||!1});const N=D,W=Q('Object');var X=f&&W(new DataView(new ArrayBuffer(8))),L='undefined'!=typeof Map&&W(new Map),Y=Q('DataView');const z=X?function(t){return null!=t&&N(t.getInt8)&&V(t.buffer)}:Y,q=g||Q('Array');function U(t,e){return null!=t&&p.call(t,e)}var B=Q('Arguments');!function(){B(arguments)||(B=function(t){return U(t,'callee')})}();const F=B;function G(t){return!M(t)&&O(t)&&!isNaN(parseFloat(t))}function H(t){return $(t)&&_(t)}function K(t){return function(){return t}}function J(t){return function(e){var n=t(e);return'number'==typeof n&&n>=0&&n<=x}}function tt(t){return function(e){return null==e?void 0:e[t]}}const et=tt('byteLength'),nt=J(et);var ot=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const it=d?function(t){return y?y(t)&&!z(t):nt(t)&&ot.test(h.call(t))}:K(!1),rt=tt('length');function st(t,e){e=function(t){for(var e={},n=t.length,o=0;o<n;++o)e[t[o]]=!0;return{contains:function(t){return!0===e[t]},push:function(n){return e[n]=!0,t.push(n)}}}(e);var n=w.length,o=t.constructor,i=N(o)&&o.prototype||a,r='constructor';for(U(t,r)&&!e.contains(r)&&e.push(r);n--;)(r=w[n])in t&&t[r]!==i[r]&&!e.contains(r)&&e.push(r)}function at(t){if(!k(t))return[];if(m)return m(t);var e=[];for(var n in t)U(t,n)&&e.push(n);return b&&st(t,e),e}function lt(t){if(null==t)return!0;var e=rt(t);return'number'==typeof e&&(q(t)||A(t)||F(t))?0===e:0===rt(at(t))}function ct(t,e){var n=at(e),o=n.length;if(null==t)return!o;for(var i=Object(t),r=0;r<o;r++){var s=n[r];if(e[s]!==i[s]||!(s in i))return!1}return!0}function ut(t){return t instanceof ut?t:this instanceof ut?void(this._wrapped=t):new ut(t)}function ht(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,et(t))}ut.VERSION=i,ut.prototype.value=function(){return this._wrapped},ut.prototype.valueOf=ut.prototype.toJSON=ut.prototype.value,ut.prototype.toString=function(){return String(this._wrapped)};var pt='[object DataView]';function dt(t,e,n,o){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=typeof t;return('function'===i||'object'===i||'object'==typeof e)&&ft(t,e,n,o)}function ft(t,e,n,o){t instanceof ut&&(t=t._wrapped),e instanceof ut&&(e=e._wrapped);var i=h.call(t);if(i!==h.call(e))return!1;if(X&&'[object Object]'==i&&z(t)){if(!z(e))return!1;i=pt}switch(i){case'[object RegExp]':case'[object String]':return''+t==''+e;case'[object Number]':return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case'[object Date]':case'[object Boolean]':return+t==+e;case'[object Symbol]':return l.valueOf.call(t)===l.valueOf.call(e);case'[object ArrayBuffer]':case pt:return ft(ht(t),ht(e),n,o)}var r='[object Array]'===i;if(!r&&it(t)){if(et(t)!==et(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;r=!0}if(!r){if('object'!=typeof t||'object'!=typeof e)return!1;var s=t.constructor,a=e.constructor;if(s!==a&&!(N(s)&&s instanceof s&&N(a)&&a instanceof a)&&'constructor'in t&&'constructor'in e)return!1}o=o||[];for(var c=(n=n||[]).length;c--;)if(n[c]===t)return o[c]===e;if(n.push(t),o.push(e),r){if((c=t.length)!==e.length)return!1;for(;c--;)if(!dt(t[c],e[c],n,o))return!1}else{var u,p=at(t);if(c=p.length,at(e).length!==c)return!1;for(;c--;)if(!U(e,u=p[c])||!dt(t[u],e[u],n,o))return!1}return n.pop(),o.pop(),!0}function gt(t,e){return dt(t,e)}function mt(t){if(!k(t))return[];var e=[];for(var n in t)e.push(n);return b&&st(t,e),e}function vt(t){var e=rt(t);return function(n){if(null==n)return!1;var o=mt(n);if(rt(o))return!1;for(var i=0;i<e;i++)if(!N(n[t[i]]))return!1;return t!==xt||!N(n[yt])}}var yt='forEach',_t='has',Ot=['clear','delete'],bt=['get',_t,'set'],wt=Ot.concat(yt,bt),xt=Ot.concat(bt),St=['add'].concat(Ot,yt,_t);const kt=L?vt(wt):Q('Map'),Pt=L?vt(xt):Q('WeakMap'),Ct=L?vt(St):Q('Set'),Tt=Q('WeakSet');function Et(t){for(var e=at(t),n=e.length,o=Array(n),i=0;i<n;i++)o[i]=t[e[i]];return o}function Qt(t){for(var e=at(t),n=e.length,o=Array(n),i=0;i<n;i++)o[i]=[e[i],t[e[i]]];return o}function At(t){for(var e={},n=at(t),o=0,i=n.length;o<i;o++)e[t[n[o]]]=n[o];return e}function $t(t){var e=[];for(var n in t)N(t[n])&&e.push(n);return e.sort()}function jt(t,e){return function(n){var o=arguments.length;if(e&&(n=Object(n)),o<2||null==n)return n;for(var i=1;i<o;i++)for(var r=arguments[i],s=t(r),a=s.length,l=0;l<a;l++){var c=s[l];e&&void 0!==n[c]||(n[c]=r[c])}return n}}const Rt=jt(mt),Zt=jt(at),Mt=jt(mt,!0);function Vt(t){if(!k(t))return{};if(v)return v(t);var e=function(){};e.prototype=t;var n=new e;return e.prototype=null,n}function Dt(t,e){var n=Vt(t);return e&&Zt(n,e),n}function It(t){return k(t)?q(t)?t.slice():Rt({},t):t}function Nt(t,e){return e(t),t}function Wt(t){return q(t)?t:[t]}function Xt(t){return ut.toPath(t)}function Lt(t,e){for(var n=e.length,o=0;o<n;o++){if(null==t)return;t=t[e[o]]}return n?t:void 0}function Yt(t,e,n){var o=Lt(t,Xt(e));return C(o)?n:o}function zt(t,e){for(var n=(e=Xt(e)).length,o=0;o<n;o++){var i=e[o];if(!U(t,i))return!1;t=t[i]}return!!n}function qt(t){return t}function Ut(t){return t=Zt({},t),function(e){return ct(e,t)}}function Bt(t){return t=Xt(t),function(e){return Lt(e,t)}}function Ft(t,e,n){if(void 0===e)return t;switch(null==n?3:n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,o,i){return t.call(e,n,o,i)};case 4:return function(n,o,i,r){return t.call(e,n,o,i,r)}}return function(){return t.apply(e,arguments)}}function Gt(t,e,n){return null==t?qt:N(t)?Ft(t,e,n):k(t)&&!q(t)?Ut(t):Bt(t)}function Ht(t,e){return Gt(t,e,1/0)}function Kt(t,e,n){return ut.iteratee!==Ht?ut.iteratee(t,e):Gt(t,e,n)}function Jt(t,e,n){e=Kt(e,n);for(var o=at(t),i=o.length,r={},s=0;s<i;s++){var a=o[s];r[a]=e(t[a],a,t)}return r}function te(){}function ee(t){return null==t?te:function(e){return Yt(t,e)}}function ne(t,e,n){var o=Array(Math.max(0,t));e=Ft(e,n,1);for(var i=0;i<t;i++)o[i]=e(i);return o}function oe(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}ut.toPath=Wt,ut.iteratee=Ht;const ie=Date.now||function(){return(new Date).getTime()};function re(t){var e=function(e){return t[e]},n='(?:'+at(t).join('|')+')',o=RegExp(n),i=RegExp(n,'g');return function(t){return t=null==t?'':''+t,o.test(t)?t.replace(i,e):t}}const se={'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#x27;','`':'&#x60;'},ae=re(se),le=re(At(se)),ce=ut.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ue=/(.)^/,he={"'":"'",'\\':'\\','\r':'r','\n':'n','\u2028':'u2028','\u2029':'u2029'},pe=/\\|'|\r|\n|\u2028|\u2029/g;function de(t){return'\\'+he[t]}var fe=/^\s*(\w|\$)+\s*$/;function ge(t,e,n){!e&&n&&(e=n),e=Mt({},e,ut.templateSettings);var o=RegExp([(e.escape||ue).source,(e.interpolate||ue).source,(e.evaluate||ue).source].join('|')+'|$','g'),i=0,r="__p+='";t.replace(o,(function(e,n,o,s,a){return r+=t.slice(i,a).replace(pe,de),i=a+e.length,n?r+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":o?r+="'+\n((__t=("+o+"))==null?'':__t)+\n'":s&&(r+="';\n"+s+"\n__p+='"),e})),r+="';\n";var s,a=e.variable;if(a){if(!fe.test(a))throw new Error('variable is not a bare identifier: '+a)}else r='with(obj||{}){\n'+r+'}\n',a='obj';r="var __t,__p='',__j=Array.prototype.join,"+"print=function(){__p+=__j.call(arguments,'');};\n"+r+'return __p;\n';try{s=new Function(a,'_',r)}catch(t){throw t.source=r,t}var l=function(t){return s.call(this,t,ut)};return l.source='function('+a+'){\n'+r+'}',l}function me(t,e,n){var o=(e=Xt(e)).length;if(!o)return N(n)?n.call(t):n;for(var i=0;i<o;i++){var r=null==t?void 0:t[e[i]];void 0===r&&(r=n,i=o),t=N(r)?r.call(t):r}return t}var ve=0;function ye(t){var e=++ve+'';return t?t+e:e}function _e(t){var e=ut(t);return e._chain=!0,e}function Oe(t,e,n,o,i){if(!(o instanceof e))return t.apply(n,i);var r=Vt(t.prototype),s=t.apply(r,i);return k(s)?s:r}var be=S((function(t,e){var n=be.placeholder,o=function(){for(var i=0,r=e.length,s=Array(r),a=0;a<r;a++)s[a]=e[a]===n?arguments[i++]:e[a];for(;i<arguments.length;)s.push(arguments[i++]);return Oe(t,o,this,this,s)};return o}));be.placeholder=ut;const we=be,xe=S((function(t,e,n){if(!N(t))throw new TypeError('Bind must be called on a function');var o=S((function(i){return Oe(t,o,e,this,n.concat(i))}));return o})),Se=J(rt);function ke(t,e,n,o){if(o=o||[],e||0===e){if(e<=0)return o.concat(t)}else e=1/0;for(var i=o.length,r=0,s=rt(t);r<s;r++){var a=t[r];if(Se(a)&&(q(a)||F(a)))if(e>1)ke(a,e-1,n,o),i=o.length;else for(var l=0,c=a.length;l<c;)o[i++]=a[l++];else n||(o[i++]=a)}return o}const Pe=S((function(t,e){var n=(e=ke(e,!1,!1)).length;if(n<1)throw new Error('bindAll must be passed function names');for(;n--;){var o=e[n];t[o]=xe(t[o],t)}return t}));function Ce(t,e){var n=function(o){var i=n.cache,r=''+(e?e.apply(this,arguments):o);return U(i,r)||(i[r]=t.apply(this,arguments)),i[r]};return n.cache={},n}const Te=S((function(t,e,n){return setTimeout((function(){return t.apply(null,n)}),e)})),Ee=we(Te,ut,1);function Qe(t,e,n){var o,i,r,s,a=0;n||(n={});var l=function(){a=!1===n.leading?0:ie(),o=null,s=t.apply(i,r),o||(i=r=null)},c=function(){var c=ie();a||!1!==n.leading||(a=c);var u=e-(c-a);return i=this,r=arguments,u<=0||u>e?(o&&(clearTimeout(o),o=null),a=c,s=t.apply(i,r),o||(i=r=null)):o||!1===n.trailing||(o=setTimeout(l,u)),s};return c.cancel=function(){clearTimeout(o),a=0,o=i=r=null},c}function Ae(t,e,n){var o,i,r,s,a,l=function(){var c=ie()-i;e>c?o=setTimeout(l,e-c):(o=null,n||(s=t.apply(a,r)),o||(r=a=null))},c=S((function(c){return a=this,r=c,i=ie(),o||(o=setTimeout(l,e),n&&(s=t.apply(a,r))),s}));return c.cancel=function(){clearTimeout(o),o=r=a=null},c}function $e(t,e){return we(e,t)}function je(t){return function(){return!t.apply(this,arguments)}}function Re(){var t=arguments,e=t.length-1;return function(){for(var n=e,o=t[e].apply(this,arguments);n--;)o=t[n].call(this,o);return o}}function Ze(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function Me(t,e){var n;return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}const Ve=we(Me,2);function De(t,e,n){e=Kt(e,n);for(var o,i=at(t),r=0,s=i.length;r<s;r++)if(e(t[o=i[r]],o,t))return o}function Ie(t){return function(e,n,o){n=Kt(n,o);for(var i=rt(e),r=t>0?0:i-1;r>=0&&r<i;r+=t)if(n(e[r],r,e))return r;return-1}}const Ne=Ie(1),We=Ie(-1);function Xe(t,e,n,o){for(var i=(n=Kt(n,o,1))(e),r=0,s=rt(t);r<s;){var a=Math.floor((r+s)/2);n(t[a])<i?r=a+1:s=a}return r}function Le(t,e,n){return function(o,i,r){var s=0,a=rt(o);if('number'==typeof r)t>0?s=r>=0?r:Math.max(r+a,s):a=r>=0?Math.min(r+1,a):r+a+1;else if(n&&r&&a)return o[r=n(o,i)]===i?r:-1;if(i!=i)return(r=e(u.call(o,s,a),H))>=0?r+s:-1;for(r=t>0?s:a-1;r>=0&&r<a;r+=t)if(o[r]===i)return r;return-1}}const Ye=Le(1,Ne,Xe),ze=Le(-1,We);function qe(t,e,n){var o=(Se(t)?Ne:De)(t,e,n);if(void 0!==o&&-1!==o)return t[o]}function Ue(t,e){return qe(t,Ut(e))}function Be(t,e,n){var o,i;if(e=Ft(e,n),Se(t))for(o=0,i=t.length;o<i;o++)e(t[o],o,t);else{var r=at(t);for(o=0,i=r.length;o<i;o++)e(t[r[o]],r[o],t)}return t}function Fe(t,e,n){e=Kt(e,n);for(var o=!Se(t)&&at(t),i=(o||t).length,r=Array(i),s=0;s<i;s++){var a=o?o[s]:s;r[s]=e(t[a],a,t)}return r}function Ge(t){return function(e,n,o,i){var r=arguments.length>=3;return function(e,n,o,i){var r=!Se(e)&&at(e),s=(r||e).length,a=t>0?0:s-1;for(i||(o=e[r?r[a]:a],a+=t);a>=0&&a<s;a+=t){var l=r?r[a]:a;o=n(o,e[l],l,e)}return o}(e,Ft(n,i,4),o,r)}}const He=Ge(1),Ke=Ge(-1);function Je(t,e,n){var o=[];return e=Kt(e,n),Be(t,(function(t,n,i){e(t,n,i)&&o.push(t)})),o}function tn(t,e,n){return Je(t,je(Kt(e)),n)}function en(t,e,n){e=Kt(e,n);for(var o=!Se(t)&&at(t),i=(o||t).length,r=0;r<i;r++){var s=o?o[r]:r;if(!e(t[s],s,t))return!1}return!0}function nn(t,e,n){e=Kt(e,n);for(var o=!Se(t)&&at(t),i=(o||t).length,r=0;r<i;r++){var s=o?o[r]:r;if(e(t[s],s,t))return!0}return!1}function on(t,e,n,o){return Se(t)||(t=Et(t)),('number'!=typeof n||o)&&(n=0),Ye(t,e,n)>=0}const rn=S((function(t,e,n){var o,i;return N(e)?i=e:(e=Xt(e),o=e.slice(0,-1),e=e[e.length-1]),Fe(t,(function(t){var r=i;if(!r){if(o&&o.length&&(t=Lt(t,o)),null==t)return;r=t[e]}return null==r?r:r.apply(t,n)}))}));function sn(t,e){return Fe(t,Bt(e))}function an(t,e){return Je(t,Ut(e))}function ln(t,e,n){var o,i,r=-1/0,s=-1/0;if(null==e||'number'==typeof e&&'object'!=typeof t[0]&&null!=t)for(var a=0,l=(t=Se(t)?t:Et(t)).length;a<l;a++)null!=(o=t[a])&&o>r&&(r=o);else e=Kt(e,n),Be(t,(function(t,n,o){((i=e(t,n,o))>s||i===-1/0&&r===-1/0)&&(r=t,s=i)}));return r}function cn(t,e,n){var o,i,r=1/0,s=1/0;if(null==e||'number'==typeof e&&'object'!=typeof t[0]&&null!=t)for(var a=0,l=(t=Se(t)?t:Et(t)).length;a<l;a++)null!=(o=t[a])&&o<r&&(r=o);else e=Kt(e,n),Be(t,(function(t,n,o){((i=e(t,n,o))<s||i===1/0&&r===1/0)&&(r=t,s=i)}));return r}var un=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function hn(t){return t?q(t)?u.call(t):A(t)?t.match(un):Se(t)?Fe(t,qt):Et(t):[]}function pn(t,e,n){if(null==e||n)return Se(t)||(t=Et(t)),t[oe(t.length-1)];var o=hn(t),i=rt(o);e=Math.max(Math.min(e,i),0);for(var r=i-1,s=0;s<e;s++){var a=oe(s,r),l=o[s];o[s]=o[a],o[a]=l}return o.slice(0,e)}function dn(t){return pn(t,1/0)}function fn(t,e,n){var o=0;return e=Kt(e,n),sn(Fe(t,(function(t,n,i){return{value:t,index:o++,criteria:e(t,n,i)}})).sort((function(t,e){var n=t.criteria,o=e.criteria;if(n!==o){if(n>o||void 0===n)return 1;if(n<o||void 0===o)return-1}return t.index-e.index})),'value')}function gn(t,e){return function(n,o,i){var r=e?[[],[]]:{};return o=Kt(o,i),Be(n,(function(e,i){var s=o(e,i,n);t(r,e,s)})),r}}const mn=gn((function(t,e,n){U(t,n)?t[n].push(e):t[n]=[e]})),vn=gn((function(t,e,n){t[n]=e})),yn=gn((function(t,e,n){U(t,n)?t[n]++:t[n]=1})),_n=gn((function(t,e,n){t[n?0:1].push(e)}),!0);function On(t){return null==t?0:Se(t)?t.length:at(t).length}function bn(t,e,n){return e in n}const wn=S((function(t,e){var n={},o=e[0];if(null==t)return n;N(o)?(e.length>1&&(o=Ft(o,e[1])),e=mt(t)):(o=bn,e=ke(e,!1,!1),t=Object(t));for(var i=0,r=e.length;i<r;i++){var s=e[i],a=t[s];o(a,s,t)&&(n[s]=a)}return n})),xn=S((function(t,e){var n,o=e[0];return N(o)?(o=je(o),e.length>1&&(n=e[1])):(e=Fe(ke(e,!1,!1),String),o=function(t,n){return!on(e,n)}),wn(t,o,n)}));function Sn(t,e,n){return u.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function kn(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:Sn(t,t.length-e)}function Pn(t,e,n){return u.call(t,null==e||n?1:e)}function Cn(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:Pn(t,Math.max(0,t.length-e))}function Tn(t){return Je(t,Boolean)}function En(t,e){return ke(t,e,!1)}const Qn=S((function(t,e){return e=ke(e,!0,!0),Je(t,(function(t){return!on(e,t)}))})),An=S((function(t,e){return Qn(t,e)}));function $n(t,e,n,o){T(e)||(o=n,n=e,e=!1),null!=n&&(n=Kt(n,o));for(var i=[],r=[],s=0,a=rt(t);s<a;s++){var l=t[s],c=n?n(l,s,t):l;e&&!n?(s&&r===c||i.push(l),r=c):n?on(r,c)||(r.push(c),i.push(l)):on(i,l)||i.push(l)}return i}const jn=S((function(t){return $n(ke(t,!0,!0))}));function Rn(t){for(var e=[],n=arguments.length,o=0,i=rt(t);o<i;o++){var r=t[o];if(!on(e,r)){var s;for(s=1;s<n&&on(arguments[s],r);s++);s===n&&e.push(r)}}return e}function Zn(t){for(var e=t&&ln(t,rt).length||0,n=Array(e),o=0;o<e;o++)n[o]=sn(t,o);return n}const Mn=S(Zn);function Vn(t,e){for(var n={},o=0,i=rt(t);o<i;o++)e?n[t[o]]=e[o]:n[t[o][0]]=t[o][1];return n}function Dn(t,e,n){null==e&&(e=t||0,t=0),n||(n=e<t?-1:1);for(var o=Math.max(Math.ceil((e-t)/n),0),i=Array(o),r=0;r<o;r++,t+=n)i[r]=t;return i}function In(t,e){if(null==e||e<1)return[];for(var n=[],o=0,i=t.length;o<i;)n.push(u.call(t,o,o+=e));return n}function Nn(t,e){return t._chain?ut(e).chain():e}function Wn(t){return Be($t(t),(function(e){var n=ut[e]=t[e];ut.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),Nn(this,n.apply(ut,t))}})),ut}Be(['pop','push','reverse','shift','sort','splice','unshift'],(function(t){var e=s[t];ut.prototype[t]=function(){var n=this._wrapped;return null!=n&&(e.apply(n,arguments),'shift'!==t&&'splice'!==t||0!==n.length||delete n[0]),Nn(this,n)}})),Be(['concat','join','slice'],(function(t){var e=s[t];ut.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),Nn(this,t)}}));const Xn=ut;var Ln=Wn(o);Ln._=Ln;const Yn=Ln}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}n.n=t=>{var e=t&&t.__esModule?()=>t['default']:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},n.g=function(){if('object'==typeof globalThis)return globalThis;try{return this||new Function('return this')()}catch(t){if('object'==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(t,'__esModule',{value:!0})};var o={};return(()=>{"use strict";n.d(o,{default:()=>UZ});var t=n(50),e=n(283);function i(t){for(var n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=t.raw;return i.reduce((function(t,o,r){var s=n[r-1],a=i[r-1];return Array.isArray(s)?s=s.join(''):a&&'$'===a.slice(-1)?t=t.slice(0,-1):s=(0,e.escape)(s),t+s+o}))}const r={stylePrefix:'gjs-',components:'',style:'',fromElement:!1,projectData:void 0,noticeOnUnload:!0,showOffsets:!1,showOffsetsSelected:!1,forceClass:!0,height:'900px',width:'100%',log:['warning','error'],baseCss:'',protectedCss:'* { box-sizing: border-box; } body {margin: 0;}',canvasCss:'',defaultCommand:'select-comp',showToolbar:!0,showDevices:!0,devicePreviewMode:!1,mediaCondition:'max-width',tagVarStart:'{[ ',tagVarEnd:' ]}',keepEmptyTextNodes:!1,jsInHtml:!0,nativeDnD:!0,multipleSelection:!0,optsHtml:{},optsCss:{},avoidInlineStyle:!0,avoidDefaults:!0,clearStyles:!1,listenToEl:[],cssIcons:'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css',icons:{close:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',move:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"/></svg>',plus:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z" /></svg>',caret:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7,10L12,15L17,10H7Z" /></svg>',delete:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19A2,2 0 0,0 8,21H16A2,2 0 0,0 18,19V7H6V19Z" /></svg>',copy:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z" /></svg>',arrowUp:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M13,20H11V8L5.5,13.5L4.08,12.08L12,4.16L19.92,12.08L18.5,13.5L13,8V20Z" /></svg>',chevron:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M7.41,15.41L12,10.83L16.59,15.41L18,14L12,8L6,14L7.41,15.41Z" /></svg>',eye:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M12,9A3,3 0 0,0 9,12A3,3 0 0,0 12,15A3,3 0 0,0 15,12A3,3 0 0,0 12,9M12,17A5,5 0 0,1 7,12A5,5 0 0,1 12,7A5,5 0 0,1 17,12A5,5 0 0,1 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z" /></svg>',eyeOff:'<svg viewBox="0 0 24 24"><path fill="currentColor" d="M11.83,9L15,12.16C15,12.11 15,12.05 15,12A3,3 0 0,0 12,9C11.94,9 11.89,9 11.83,9M7.53,9.8L9.08,11.35C9.03,11.56 9,11.77 9,12A3,3 0 0,0 12,15C12.22,15 12.44,14.97 12.65,14.92L14.2,16.47C13.53,16.8 12.79,17 12,17A5,5 0 0,1 7,12C7,11.21 7.2,10.47 7.53,9.8M2,4.27L4.28,6.55L4.73,7C3.08,8.3 1.78,10 1,12C2.73,16.39 7,19.5 12,19.5C13.55,19.5 15.03,19.2 16.38,18.66L16.81,19.08L19.73,22L21,20.73L3.27,3M12,7A5,5 0 0,1 17,12C17,12.64 16.87,13.26 16.64,13.82L19.57,16.75C21.07,15.5 22.27,13.86 23,12C21.27,7.61 17,4.5 12,4.5C10.6,4.5 9.26,4.75 8,5.2L10.17,7.35C10.74,7.13 11.35,7 12,7Z" /></svg>'},i18n:{},undoManager:{},assetManager:{},canvas:{},layerManager:{},storageManager:{},richTextEditor:{},domComponents:{},modal:{},codeManager:{},panels:{},commands:{},cssComposer:{},selectorManager:{},deviceManager:{},styleManager:{},blockManager:{},traitManager:{},textViewCode:'Code',keepUnusedStyles:!1,customUI:!1};var s=n(316),a=n.n(s),l=n(815);var c,u=n(847),h=void 0&&(void 0).__extends||(c=function(t,e){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},c(t,e)},function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}c(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return h(e,t),e}(u.Hn),d=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return h(n,e),n.prototype.getByComponent=function(t){var e=this;return this.filter((function(n){return e.getComponent(n)===t}))[0]},n.prototype.addComponent=function(e,n){var o=this,i=((0,t.isArray)(e)?e:[e]).filter((function(t){return!o.hasComponent(t)})).map((function(t){return new p({component:t})}))[0];return this.push(i,n)},n.prototype.getComponent=function(t){return t.get('component')},n.prototype.hasComponent=function(t){var e=this.getByComponent(t);return e&&this.contains(e)},n.prototype.lastComponent=function(){var t=this.last();return t?this.getComponent(t):void 0},n.prototype.allComponents=function(){var t=this;return this.map((function(e){return t.getComponent(e)})).filter((function(t){return t}))},n.prototype.removeComponent=function(e,n){var o=this,i=((0,t.isArray)(e)?e:[e]).map((function(t){return o.getByComponent(t)}));return this.remove(i,n)},n}(u.FE);const f=d;var g=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),m=void 0&&(void 0).__assign||function(){return m=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},m.apply(this,arguments)},v=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},y=function(){function n(n,o,i){this.cls=[],this._em=n,this._name=o;var r=this.name.charAt(0).toLowerCase()+this.name.slice(1),s=(0,t.isUndefined)(n.config[r])?n.config[this.name]:n.config[r],a=!0===s?{}:s||{};a.pStylePrefix=n.config.pStylePrefix||'',(0,t.isUndefined)(s)||s||(a._disable=1),a.em=n,this._config=(0,e.deepMerge)(i||{},a)}return Object.defineProperty(n.prototype,"em",{get:function(){return this._em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),n.prototype.render=function(t){},n.prototype.postLoad=function(t){},Object.defineProperty(n.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),n.prototype.getConfig=function(t){return t?this.config[t]:this.config},n.prototype.__logWarn=function(t,e){void 0===e&&(e={}),this.em.logWarning("[".concat(this.name,"]: ").concat(t),e)},n.prototype.__appendTo=function(){var e=this.getConfig().appendTo;if(e){var n=(0,t.isElement)(e)?e:document.querySelector(e);if(!n)return this.__logWarn('"appendTo" element not found');n.appendChild(this.render())}},n}();const _=y;var O=function(n){function o(t,e,o,i,r,s){void 0===s&&(s={});var a=n.call(this,t,e,r)||this;return a.cls=[],a.private=!1,a.all=o,a.events=i,!s.skipListen&&a.__initListen(),a}return g(o,n),o.prototype.postLoad=function(t){},o.prototype.render=function(t){},o.prototype.getProjectData=function(t){var e={},n=this.storageKey;return n&&(e[n]=t||this.getAll()),e},o.prototype.loadProjectData=function(t,n){void 0===t&&(t={}),void 0===n&&(n={});var o=n.all,i=n.onResult,r=n.reset,s=this.storageKey,a={action:'load'},l=o||this.all,c=t[s];if('string'==typeof c)try{c=JSON.parse(c)}catch(t){this.__logWarn('Data parsing failed',{input:c})}return r&&c&&l.reset(void 0,a),i?c&&i(c,a):c&&(0,e.isDef)(c.length)&&l.reset(c,a),c},o.prototype.clear=function(t){void 0===t&&(t={});var e=this.all;return e&&e.reset(void 0,t),this},o.prototype.getAll=function(){return v([],this.all.models,!0)},o.prototype.getAllMap=function(){return this.getAll().reduce((function(t,e){return t[e.get(e.idAttribute)]=e,t}),{})},o.prototype.__initListen=function(t){void 0===t&&(t={});var e=this,n=e.all,o=e.em,i=e.events;n&&o&&n.on('add',(function(t,e,n){return o.trigger(i.add,t,n)})).on('remove',(function(t,e,n){return o.trigger(i.remove,t,n)})).on('change',(function(t,e){return o.trigger(i.update,t,t.changedAttributes(),e)})).on('all',this.__catchAllEvent,this),this.cls=[n].concat(t.collections||[]),(t.propagate||[]).forEach((function(t){var e=t.entity,i=t.event;e.on('all',(function(t,e,r,s){var a=m({event:t},s||r);[o,n].map((function(t){return t.trigger(i,e,a)}))}))}))},o.prototype.__remove=function(e,n){var o=this;void 0===n&&(n={});var i=this.em,r=(0,t.isString)(e)?this.get(e):e,s=function(){return r&&o.all.remove(r,n),r};return!n.silent&&(null==i||i.trigger(this.events.removeBefore,r,s,n)),!n.abort&&s()},o.prototype.__catchAllEvent=function(t,e,n,o){var i=this.em,r=this.events,s=o||n;i&&r.all&&i.trigger(r.all,{event:t,model:e,options:s}),this.__onAllEvent()},o.prototype.__appendTo=function(e){var n=this.config.appendTo;if(n){var o=(0,t.isElement)(n)?n:document.querySelector(n);if(!o)return this.__logWarn('"appendTo" element not found');o.appendChild(this.render(e))}},o.prototype.__onAllEvent=function(){},o.prototype._createId=function(t){void 0===t&&(t=16);var n,o=this.getAll().length+t,i=this.getAllMap();do{n=(0,e.createId)(o)}while(i[n]);return n},o.prototype.__listenAdd=function(t,e){var n=this;t.on('add',(function(t,o,i){return n.em.trigger(e,t,i)}))},o.prototype.__listenRemove=function(t,e){var n=this;t.on('remove',(function(t,o,i){return n.em.trigger(e,t,i)}))},o.prototype.__listenUpdate=function(t,e){var n=this;t.on('change',(function(t,o){return n.em.trigger(e,t,t.changedAttributes(),o)}))},o.prototype.__destroy=function(){var t;this.cls.forEach((function(t){t.stopListening(),t.reset()})),null===(t=this.view)||void 0===t||t.remove(),this.view=void 0},o}(y);const b={stylePrefix:'cv-',scripts:[],styles:[],customBadgeLabel:void 0,autoscrollLimit:50,extHl:!1,frameContent:'<!DOCTYPE html>',frameStyle:"\n    body { background-color: #fff }\n    * ::-webkit-scrollbar-track { background: rgba(0, 0, 0, 0.1) }\n    * ::-webkit-scrollbar-thumb { background: rgba(255, 255, 255, 0.2) }\n    * ::-webkit-scrollbar { width: 10px }\n  ",notTextable:['button','a','input[type=checkbox]','input[type=radio]'],allowExternalDrop:!0};var w=n(728);const x={default:'',devices:[{id:'desktop',name:'Desktop',width:''},{id:'tablet',name:'Tablet',width:'770px',widthMedia:'992px'},{id:'mobileLandscape',name:'Mobile landscape',width:'568px',widthMedia:'768px'},{id:'mobilePortrait',name:'Mobile portrait',width:'320px',widthMedia:'480px'}]};var S=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return S(e,t),e.prototype.defaults=function(){return{name:'',width:null,height:'',widthMedia:null,priority:null}},e.prototype.initialize=function(){var t=this;null===this.get('widthMedia')&&this.set('widthMedia',this.get('width')),null===this.get('width')&&this.set('width',this.get('widthMedia')),!this.get('priority')&&this.set('priority',parseFloat(this.get('widthMedia'))||0);['width','height','widthMedia'].forEach((function(e){return t.checkUnit(e)}))},e.prototype.checkUnit=function(t){var e=this.get(t)||'';(parseFloat(e)||0).toString()===e.toString()&&this.set(t,"".concat(e,"px"))},e.prototype.getName=function(){return this.get('name')||this.get('id')},e.prototype.getWidthMedia=function(){return this.get('widthMedia')||''},e}(u.Hn);var P=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),C=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return P(e,t),e}(u.FE);const T=C;C.prototype.model=k;var E=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Q=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},A=function(t){function e(e){var n=t.call(this,e)||this;return n.config=e.config||{},n.em=n.config.em,n.ppfx=n.config.pStylePrefix||'',n.listenTo(n.em,'change:device',n.updateSelect),n}return E(e,t),e.prototype.template=function(t){var e=t.ppfx,n=t.label;return i(R||(R=Q(["\n      <div class=\"","device-label\">","</div>\n      <div class=\"","field ","select\">\n        <span id=\"","input-holder\">\n          <select class=\"","devices\"></select>\n        </span>\n        <div class=\"","sel-arrow\">\n          <div class=\"","d-s-arrow\"></div>\n        </div>\n      </div>\n      <button style=\"display:none\" class=\"","add-trasp\" data-add-trasp>+</button>\n    "],["\n      <div class=\"","device-label\">","</div>\n      <div class=\"","field ","select\">\n        <span id=\"","input-holder\">\n          <select class=\"","devices\"></select>\n        </span>\n        <div class=\"","sel-arrow\">\n          <div class=\"","d-s-arrow\"></div>\n        </div>\n      </div>\n      <button style=\"display:none\" class=\"","add-trasp\" data-add-trasp>+</button>\n    "])),e,n,e,e,e,e,e,e,e)},e.prototype.events=function(){return{change:'updateDevice','click [data-add-trasp]':'startAdd'}},e.prototype.startAdd=function(){},e.prototype.updateDevice=function(){var t=this.em;if(t){var e=this.devicesEl;t.set('device',e?e.val():'')}},e.prototype.updateSelect=function(){var t=this.em,e=this.devicesEl;if(t&&t.getDeviceModel&&e){var n=t.getDeviceModel();e.val(n?n.get('id'):'')}},e.prototype.getOptions=function(){var t=this.collection,e=this.em,n='';return t.forEach((function(t){var o=t.attributes,i=o.name,r=o.id,s=e&&e.t&&e.t("deviceManager.devices.".concat(r))||i;n+="<option value=\"".concat(r||i,"\">").concat(s,"</option>")})),n},e.prototype.render=function(){var t=this,e=t.em,n=t.ppfx,o=t.$el,i=t.el,r=e&&e.t&&e.t('deviceManager.device');return o.html(this.template({ppfx:n,label:r})),this.devicesEl=o.find(".".concat(n,"devices")),this.devicesEl.append(this.getOptions()),this.devicesEl.val(e.get('device')),i.className="".concat(n,"devices-c"),this},e}(u.G7);const j=A;var R,Z=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),M=void 0&&(void 0).__assign||function(){return M=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},M.apply(this,arguments)},V='device',D="".concat(V,":"),I="".concat(D,"select"),N=("".concat(I,":before"),"".concat(D,"update")),W="".concat(D,"add"),X=("".concat(W,":before"),"".concat(D,"remove")),L="".concat(X,":before"),Y='change:device',z={all:V,select:I,update:N,add:W,remove:X,removeBefore:L},q=function(e){function n(t){var n,o=e.call(this,t,'DeviceManager',new T,z,x)||this;return o.Device=k,o.Devices=T,o.storageKey='',o.devices=o.all,null===(n=o.config.devices)||void 0===n||n.forEach((function(t){return o.add(t,{silent:!0})})),o.select(o.config.default||o.devices.at(0)),t.on(Y,o._onSelect,o),o}return Z(n,e),n.prototype._onSelect=function(t,e,n){var o=this.em,i=this.events,r=t.previous('device'),s=this.get(e),a=i.select;o.trigger(a,s,this.get(r)),this.__catchAllEvent(a,s,n)},n.prototype.add=function(e,n){var o;void 0===n&&(n={});var i=n;if((0,t.isString)(e)){var r=n;o=M(M({},i=arguments[2]||{}),{id:e,name:i.name||e,width:r})}else o=e;return o.id||(o.id=o.name||this._createId()),this.devices.add(o,i)},n.prototype.get=function(t){return this.getAll().filter((function(e){return e.get('name')===t}))[0]||this.devices.get(t)||null},n.prototype.remove=function(t,e){return void 0===e&&(e={}),this.__remove(t,e)},n.prototype.getDevices=function(){return this.devices.models},n.prototype.select=function(e,n){void 0===n&&(n={});var o=(0,t.isString)(e)?this.get(e):e;return o&&this.em.set('device',o.get('id'),n),this},n.prototype.getSelected=function(){return this.get(this.em.get('device'))},n.prototype.getAll=function(){return this.devices},n.prototype.render=function(){var t,e=this.em;return null===(t=this.view)||void 0===t||t.remove(),this.view=new j({collection:this.devices,config:M({em:e},this.config)}),this.view.render().el},n.prototype.destroy=function(){this.__destroy()},n}(O);const U=q;var B=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),F=function(e){function n(t,n,o){return e.call(this,n,{module:t,modelConstructor:o})||this}return B(n,e),n.prototype.add=function(n,o){var i,r=this,s=(0,t.isArray)(n)?n:(0,t.isUndefined)(n)?void 0:[n];return s=null!==(i=null==s?void 0:s.map((function(t){return t instanceof r.newModel?t:new r.newModel(r.module,t)})))&&void 0!==i?i:[void 0],e.prototype.add.call(this,(0,t.isArray)(n)?s:s[0],o)},n.prototype.preinitialize=function(t,e){this.newModel=e.modelConstructor,this.module=e.module},n}(u.FE);const G=F;var H=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),K=void 0&&(void 0).__assign||function(){return K=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},K.apply(this,arguments)},J=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},tt='__aw',et='__ah',nt=function(e,n){var o,i=e.get(n),r=null===(o=e.view)||void 0===o?void 0:o.el['width'===n?'offsetWidth':'offsetHeight'];return(0,t.isNumber)(i)?i:(0,t.isString)(i)&&i.endsWith('px')?parseFloat(i):r||0},ot=function(n){function o(o,i){var r=n.call(this,o,i)||this,s=r.em,a=r.attributes,l=a.styles,c=a.component,u=s.Components,h=u.getConfig(),p=s.Css.getAll(),d={},f={em:s,config:h,frame:r,idMap:d};if(!(0,e.isComponent)(c)){var g=(0,e.isObject)(c)?c:{components:c};!g.type&&(g.type='wrapper');var m=u.getType('wrapper').model;r.set('component',new m(g,f))}if(l){if(!(0,e.isObject)(l)){var v=l;(0,t.keys)(d).length&&(v=(0,t.isString)(v)?s.Parser.parseCss(v):v,s.Css.checkId(v,{idMap:d})),p.add(v),r.set('styles',p)}}else r.set('styles',p);return!i.width&&r.set(tt,1),!i.height&&r.set(et,1),!r.id&&r.set('id',(0,e.createId)()),r}return H(o,n),o.prototype.defaults=function(){return{x:0,y:0,changesCount:0,attributes:{},width:null,height:null,head:[],component:'',styles:'',refFrame:null,_undo:!0,_undoexc:['changesCount']}},Object.defineProperty(o.prototype,"width",{get:function(){return nt(this,'width')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"height",{get:function(){return nt(this,'height')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"head",{get:function(){return this.get('head')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"refFrame",{get:function(){return this.get('refFrame')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"root",{get:function(){var t=this.refFrame;return(null==t?void 0:t.getComponent())||this.getComponent()},enumerable:!1,configurable:!0}),o.prototype.initRefs=function(){var e=this.refFrame;if((0,t.isString)(e)){var n=this.module.framesById[e];n&&this.set({refFrame:n},{silent:!0})}},o.prototype.getBoxRect=function(){var t=this.attributes;return{x:t.x,y:t.y,width:this.width,height:this.height}},o.prototype.onRemove=function(){!this.refFrame&&this.getComponent().remove({root:1})},o.prototype.changesUp=function(t){void 0===t&&(t={}),t.temporary||t.noCount||t.avoidStore||this.set('changesCount',this.get('changesCount')+1)},o.prototype.getComponent=function(){return this.get('component')},o.prototype.getStyles=function(){return this.get('styles')},o.prototype.disable=function(){this.trigger('disable')},o.prototype.remove=function(){var t;null===(t=this.view)||void 0===t||t.remove(),this.view=void 0;var e=this.collection;return e&&e.remove(this)},o.prototype.getHead=function(){return J([],this.head,!0)},o.prototype.setHead=function(t){return this.set('head',J([],t,!0))},o.prototype.addHeadItem=function(t){this.head.push(t)},o.prototype.getHeadByAttr=function(t,e,n){return this.head.filter((function(o){return o.attributes&&o.attributes[t]==e&&(!n||n===o.tag)}))[0]},o.prototype.removeHeadByAttr=function(t,e,n){var o=this.getHeadByAttr(t,e,n),i=this.head.indexOf(o);i>=0&&this.head.splice(i,1)},o.prototype.addLink=function(t){var e='link';!this.getHeadByAttr('href',t,e)&&this.addHeadItem({tag:e,attributes:{href:t,rel:'stylesheet'}})},o.prototype.removeLink=function(t){this.removeHeadByAttr('href',t,'link')},o.prototype.addScript=function(t){var e='script';!this.getHeadByAttr('src',t,e)&&this.addHeadItem({tag:e,attributes:{src:t}})},o.prototype.removeScript=function(t){this.removeHeadByAttr('src',t,'script')},o.prototype.getPage=function(){var t;return null===(t=this.collection)||void 0===t?void 0:t.page},o.prototype._emitUpdated=function(t){void 0===t&&(t={}),this.em.trigger('frame:updated',K({frame:this},t))},o.prototype.hasAutoHeight=function(){return!('auto'!==this.attributes.height&&!this.config.infiniteCanvas)},o.prototype.toJSON=function(e){void 0===e&&(e={});var n=w.Z.prototype.toJSON.call(this,e),o=(0,t.result)(this,'defaults');return e.fromUndo&&delete n.component,delete n.styles,delete n.changesCount,n[tt]&&delete n.width,n[et]&&delete n.height,n.refFrame&&(n.refFrame=n.refFrame.id,delete n.component),(0,t.forEach)(n,(function(t,e){0===e.indexOf('_')&&delete n[e]})),(0,t.forEach)(o,(function(t,e){n[e]===t&&delete n[e]})),(0,t.forEach)(['attributes','head'],(function(e){(0,t.isEmpty)(n[e])&&delete n[e]})),n},o}(w.Z);const it=ot;var rt=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const st=function(e){function n(n,o){void 0===o&&(o=[]);var i=e.call(this,n,o,it)||this;return i.loadedItems=0,i.itemsToLoad=0,(0,t.bindAll)(i,'itemLoaded'),i.on('add',i.onAdd),i.on('reset',i.onReset),i.on('remove',i.onRemove),i.forEach((function(t){return i.onAdd(t)})),i}return rt(n,e),n.prototype.onAdd=function(t){this.module.framesById[t.id]=t},n.prototype.onReset=function(t,e){var n=this;((null==e?void 0:e.previousModels)||[]).map((function(t){return n.onRemove(t)}))},n.prototype.onRemove=function(t){t.onRemove(),delete this.module.framesById[t.id]},n.prototype.initRefs=function(){this.forEach((function(t){return t.initRefs()}))},n.prototype.itemLoaded=function(){this.loadedItems++,this.loadedItems>=this.itemsToLoad&&(this.trigger('loaded:all'),this.listenToLoadItems(!1))},n.prototype.listenToLoad=function(){this.loadedItems=0,this.itemsToLoad=this.length,this.listenToLoadItems(!0)},n.prototype.listenToLoadItems=function(t){var e=this;this.forEach((function(n){return n[t?'on':'off']('loaded',e.itemLoaded)}))},n}(G);var at=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),lt=function(e){function n(t,n){void 0===n&&(n={});var o=e.call(this,t,n)||this,i=n.em,r={};o.em=i,t.frames||(r.component=t.component,r.styles=t.styles,['component','styles'].map((function(t){return o.unset(t)})));var s=t.frames||[r],a=new st(i.Canvas,s);return a.page=o,o.set('frames',a),!o.getId()&&o.set('id',null==i?void 0:i.Pages._createId()),null==i||i.UndoManager.add(a),o}return at(n,e),n.prototype.defaults=function(){return{name:'',frames:[],_undo:!0}},n.prototype.onRemove=function(){this.getFrames().reset()},n.prototype.getFrames=function(){return this.get('frames')},n.prototype.getId=function(){return this.id},n.prototype.getName=function(){return this.get('name')},n.prototype.setName=function(t){return this.set({name:t})},n.prototype.getAllFrames=function(){return this.getFrames().models||[]},n.prototype.getMainFrame=function(){return this.getFrames().at(0)},n.prototype.getMainComponent=function(){var t=this.getMainFrame();return null==t?void 0:t.getComponent()},n.prototype.toJSON=function(e){void 0===e&&(e={});var n=u.Hn.prototype.toJSON.call(this,e),o=(0,t.result)(this,'defaults');return(0,t.forEach)(n,(function(t,e){0===e.indexOf('_')&&delete n[e]})),(0,t.forEach)(o,(function(t,e){n[e]===t&&delete n[e]})),n},n}(u.Hn);const ct=lt;var ut=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ht=void 0&&(void 0).__assign||function(){return ht=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ht.apply(this,arguments)},pt=function(t){function e(e,n){var o=t.call(this,e)||this;return o.on('reset',o.onReset),o.on('remove',o.onRemove),o.model=function(t,e){return void 0===e&&(e={}),new ct(t,ht(ht({},e),{em:n}))},o}return ut(e,t),e.prototype.onReset=function(t,e){var n,o=this;null===(n=null==e?void 0:e.previousModels)||void 0===n||n.map((function(t){return o.onRemove(t)}))},e.prototype.onRemove=function(t){null==t||t.onRemove()},e}(u.FE);const dt=pt;var ft=void 0&&(void 0).__assign||function(){return ft=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ft.apply(this,arguments)},gt=function(){function t(t){var e,n;this.updatingValue=!1,this.opts=ft(ft({},t),{default:null!==(n=null!==(e=null==t?void 0:t.value)&&void 0!==e?e:null==t?void 0:t.default)&&void 0!==n?n:''})}return Object.defineProperty(t.prototype,"name",{get:function(){return this.opts.name},enumerable:!1,configurable:!0}),t.prototype.registerForUpdateEvent=function(t){this.view=t},Object.defineProperty(t.prototype,"changeProp",{get:function(){var t;return null!==(t=this.opts.changeProp)&&void 0!==t&&t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){var t;return null!==(t=this.getValue())&&void 0!==t?t:this.opts.default},set:function(t){this.updatingValue=!0,this.setValue(t),this.updatingValue=!1},enumerable:!1,configurable:!0}),t.prototype.setValueFromModel=function(){var t;this.updatingValue||null===(t=this.view)||void 0===t||t.onUpdateEvent(this.value)},t.prototype.updateOpts=function(t){this.opts=ft(ft({},this.opts),t)},t}();const mt=gt;var vt=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),yt=void 0&&(void 0).__assign||function(){return yt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},yt.apply(this,arguments)};const _t=function(t){function e(e,n,o){var i=t.call(this,yt(yt({},o),{name:e}))||this;return i.parent=n,i}return vt(e,t),e.prototype.getValue=function(){var t=this.name;console.log('getValues');var e=this.parent.getParentValue(t);return null!=e?e:this.opts.default},e.prototype.setValue=function(t){var e=this.parent,n=this.name;console.log('TraitGroupItem:setValues'),e.setParentValue(n,t)},e}(mt);var Ot=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bt=void 0&&(void 0).__assign||function(){return bt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},bt.apply(this,arguments)},wt=function(e){function n(n,o,i){var r,s=e.call(this,bt(bt({},i),{name:n,changeProp:!0}))||this;return s.parent=o,s.templates=null!==(r=i.traits)&&void 0!==r?r:[{type:'text'}],(0,t.isObject)(o.getParentValue(n))||o.setParentValue(n,{}),console.log(s.value),s}return Ot(n,e),Object.defineProperty(n.prototype,"traits",{get:function(){var t=this,e=this.value;return this.templates.map((function(n){return new _t(n.name,t,bt(bt({},n),{value:e[n.name]}))}))},enumerable:!1,configurable:!0}),n.prototype.getParentValue=function(t){return this.value[t]},n.prototype.setParentValue=function(t,e){var n;this.value=bt(bt({},this.value),((n={})[t]=e,n)),console.log('group setvalue')},n.prototype.getValue=function(){var t=this.parent,e=this.name;return console.log(e),t.getParentValue(e)},n.prototype.setValue=function(t){var e=this.name;this.parent.setParentValue(e,t)},n}(mt);const xt=wt;var St=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),kt=void 0&&(void 0).__assign||function(){return kt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},kt.apply(this,arguments)},Pt=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Ct=function(e){function n(t,n,o){var i,r=e.call(this,kt(kt({},o),{type:'list',name:t,changeProp:!0}))||this;return n.on('change:'+t,r.setValueFromModel,r),r.model=n,null!==(i=n.get(t))&&void 0!==i||n.set(t,[],{silent:!0}),r.templates=o.traits,r}return St(n,e),Object.defineProperty(n.prototype,"traits",{get:function(){var t=this;return this.value.map((function(e){return t.initTrait(e.id,e.value)}))},enumerable:!1,configurable:!0}),n.prototype.getParentValue=function(t){var e;return null===(e=this.value.find((function(e){return e.id==t})))||void 0===e?void 0:e.value},n.prototype.setParentValue=function(t,e){var n=this.value,o=n.findIndex((function(e){return e.id==t}));console.log(e),console.log(n),n[o]={id:t,value:e},console.log(n),this.setValue(n)},n.prototype.initTrait=function(e,n){var o=this.templates,i=this.templates;return console.log('paklsjdf;lkj;laksdjf;lakjdsf;lakjsdf;laksjf;laksej;lsdk'),console.log(n),(0,t.isArray)(o)&&o.length>1?new xt(e,this,{name:e,traits:i,value:n}):new _t(e,this,kt(kt({},i),{value:n}))},n.prototype.getValue=function(){var t=this.model,e=this.name;return t.get(e).map((function(t,e){return{id:e+'',value:t}}))},n.prototype.setValue=function(t){var e=this.name;this.model.set(e,t.map((function(t){return t.value})))},n.prototype.add=function(){this.setValue(Pt(Pt([],this.value,!0),[{id:this.value.length+'',value:''}],!1)),this.model.trigger("change:".concat(this.name))},n.prototype.remove=function(t){var e,n=this.value,o=null!==(e=null==n?void 0:n.findIndex((function(e){return e.id==t})))&&void 0!==e?e:-1;o>-1&&n.splice(o,1),this.setValue(n)},n}(mt);const Tt=Ct;var Et=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Qt=void 0&&(void 0).__assign||function(){return Qt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Qt.apply(this,arguments)},At=function(t){function e(e,n,o){var i=t.call(this,Qt(Qt({},o),{name:e}))||this;return n.on('change:'+e,i.setValueFromModel,i),i.model=n,i}return Et(e,t),e.prototype.getValue=function(){var t=this,e=t.changeProp,n=t.model,o=t.name;return e?n.get(o):n.get('attributes')[o]},e.prototype.setValue=function(t){var e,n=this,o=n.name,i=n.model;n.changeProp?i.set(o,t):i.set('attributes',Qt(Qt({},i.get('attributes')),((e={})[o]=t,e)))},e}(mt);const $t=At;const jt=function(){function e(){}return e.build=function(e,n){return n instanceof mt?n:(0,t.isString)(n)?new $t(n,e,{type:'text',label:n}):'list'===n.type?new Tt(n.name,e,n):new $t(n.name,e,n)},e}();var Rt=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Zt=void 0&&(void 0).__assign||function(){return Zt=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Zt.apply(this,arguments)},Mt=function(n){function o(t,e){var o,i=n.call(this,{el:null==e?void 0:e.el})||this;i.em=t;var r=i.em.Traits.config;return i.ppfx=r.pStylePrefix||'',i.pfx=i.ppfx+r.stylePrefix||'',i._label=null==e?void 0:e.label,i.noLabel=null!==(o=(null==e?void 0:e.noLabel)&&!1!==(null==e?void 0:e.label))&&void 0!==o&&o,i}return Rt(o,n),Object.defineProperty(o.prototype,"name",{get:function(){var t;return null===(t=this.target)||void 0===t?void 0:t.opts.name},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"clsField",{get:function(){var t=this.ppfx,e=this.type;return"".concat(t,"field ").concat(t,"field-").concat(e)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"label",{get:function(){var t;return null!==(t=this._label)&&void 0!==t?t:this.name},enumerable:!1,configurable:!0}),o.prototype.setTarget=function(e,n,o){return(0,t.isString)(e)&&void 0!==n&&(e=jt.build(n,Zt(Zt({},o),{type:this.type,name:e}))),this.target=e,this.target.registerForUpdateEvent(this),this},o.prototype.getLabelText=function(){var t=this.em,n=this.label;return n&&(t.t("traitManager.traits.labels.".concat(n))||(0,e.capitalize)(n).replace(/-/g,' '))},o.prototype.hasLabel=function(){return!this.noLabel},o}(u.G7);const Vt=Mt;var Dt=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),It=void 0&&(void 0).__assign||function(){return It=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},It.apply(this,arguments)},Nt=function(n){function o(t,e){var o=n.call(this,t,e)||this;return o.appendInput=!0,o}return Dt(o,n),Object.defineProperty(o.prototype,"clsField",{get:function(){var t=this.ppfx,e=this.type;return"".concat(t,"field ").concat(t,"field-").concat(e)},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"clsLabel",{get:function(){var t=this.ppfx;return"".concat(t,"label-wrp")},enumerable:!1,configurable:!0}),o.prototype.events=function(){return{change:this.onChange}},o.prototype.templateLabel=function(){var t=this.ppfx,e=this.name,n=this.getLabel();return"<div class=\"".concat(t,"label\" title=\"").concat(e,"\">").concat(n,"</div>")},o.prototype.templateInput=function(t){var e=this.clsField;return"<div class=\"".concat(e,"\" data-input></div>")},o.prototype.onChange=function(){console.log('traitchange'),this.target.value=this.inputValue},o.prototype.onUpdateEvent=function(t){this.inputValue=t},o.prototype.renderLabel=function(){var t=this.$el,e=this.templateLabel();t.find('[data-label]').append(e)},o.prototype.getLabel=function(){var t=this.em,n=this.name,o=null!=n?n:this.label;return t.t("traitManager.traits.labels.".concat(o))||(0,e.capitalize)(o).replace(/-/g,' ')},o.prototype.getInputEl=function(){if(!this.$input){var e=this,n=e.em,o=e.name,i=e.type,r=this.target.value,s=(0,l["default"])("<input type=\"".concat(i,"\">")),a=n.t("traitManager.traits.attributes.".concat(o))||{};s.attr(It({placeholder:this.paceholder||r},a)),(0,t.isUndefined)(r)||s.prop('value',r),this.$input=s}return this.$input.get(0)},o.prototype.getElInput=function(){return this.elInput},o.prototype.renderField=function(){var t=this,e=t.$el,n=t.appendInput,o=t.elInput,i=e.find('[data-input]'),r=i[i.length-1];o||(this.elInput=this.getInputEl(),n?r.appendChild(this.elInput):r.insertBefore(this.elInput,r.firstChild))},o.prototype.rerender=function(){delete this.elInput,this.render()},o.prototype.render=function(){var t=this,e=t.$el,n=t.pfx,o=t.ppfx,i=t.name,r=t.type,s=t.clsLabel,a=this.hasLabel(),l="".concat(n,"trait");delete this.$input;var c="<div class=\"".concat(l," ").concat(l,"--").concat(r,"\">\n      ").concat(a?"<div class=\"".concat(s,"\" data-label></div>"):'',"\n      <div class=\"").concat(o,"field-wrp ").concat(o,"field-wrp--").concat(r,"\" data-input>\n        ").concat(this.templateInput(this.target.value),"\n      </div>\n    </div>");return e.empty().append(c),a&&this.renderLabel(),this.renderField(),this.el.className="".concat(l,"__wrp ").concat(l,"__wrp-").concat(i),this.setElement(this.el),this},o}(Vt);const Wt=Nt;var Xt=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lt=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.type='text',o}return Xt(e,t),e.prototype.getInputElem=function(){var t=this.input,e=this.$input;return t||e&&e.get&&e.get(0)||this.getElInput()},Object.defineProperty(e.prototype,"inputValue",{get:function(){var t,e=this.getInputElem();return null!==(t=null==e?void 0:e.value)&&void 0!==t?t:this.target.value},set:function(t){var e=this.getInputElem();e&&(e.value=t)},enumerable:!1,configurable:!0}),e}(Wt);const Yt=Lt;var zt=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qt=function(t){function e(e,n){var o=t.call(this,e)||this;o.highlightedClass='gjs-three-bg',o.config=n;var i=o,r=i.model,s=i.pfx,a=i.ppfx,l=r.get('type')||'default';return o.className="".concat(a,"layer ").concat(a,"layer__t-").concat(l," no-select ").concat(s,"two-color"),o}return zt(e,t),e.prototype.render=function(){var t=this,e=t.em;t.pfx,t.ppfx,t.model;this.$el.attr('class',this.className);var n=new Yt(e).setTarget('name',this.model,{changeProp:!0});return this.$el.append(n.render().el),this},e.prototype.events=function(){var t=this;return{click:function(){return t.trigger('onClick',t)}}},Object.defineProperty(e.prototype,"em",{get:function(){return this.config.em},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),e.prototype.setHighlighted=function(t){t?this.$el.addClass(this.highlightedClass):this.$el.removeClass(this.highlightedClass)},Object.defineProperty(e.prototype,"page",{get:function(){return this.model},enumerable:!1,configurable:!0}),e}(u.G7);const Ut=qt;var Bt=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ft=function(t){function e(e,n){var o=t.call(this,e)||this;o.config=n||{};var i=o.config.pStylePrefix||'';o.ppfx=i;var r=o.collection;return o.listenTo(r,'reset',o.render),o.listenTo(r,'remove',o.render),o.em=o.config.em,o}return Bt(e,t),e.prototype.events=function(){var t,e=this.buttonAddId,n='click #'+this.buttonRemoveId;return(t={})['click #'+e]=this.__addPage,t[n]=this.__removePage,t},e.prototype.__getModule=function(){return this.em.Pages},Object.defineProperty(e.prototype,"buttonAddId",{get:function(){return this.ppfx+'button-add'},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonRemoveId",{get:function(){return this.ppfx+'button-remove'},enumerable:!1,configurable:!0}),e.prototype.__addPage=function(){var t=this.em;this.collection.add(new ct({},{em:t})),this.render()},e.prototype.__removePage=function(){this.selectedView&&this.collection.remove(this.selectedView.model)},e.prototype.addTo=function(t){this.collection.add(t)},e.prototype.add=function(t,e){var n,o=this.config,i=new Ut({model:t},o),r=i.render().el;(null===(n=this.em.Pages.getSelected())||void 0===n?void 0:n.id)==t.id&&(i.setHighlighted(!0),this.selectedView=i),i.on('onClick',this.selectedHandler,this),e.appendChild(r)},e.prototype.selectedHandler=function(t){var e;this.em.Pages.select(t.model),null===(e=this.selectedView)||void 0===e||e.setHighlighted(!1),this.trigger('selected',t.model),this.selectedView=t,this.selectedView.setHighlighted(!0)},e.prototype.getCommandsNav=function(){var t=this.buttonAddId,e=this.buttonRemoveId;return(0,l["default"])("<div data-val-id=\"\">\n    <div><button id=\"".concat(t,"\">Add page</button></div>\n    <div><button id=\"").concat(e,"\">Delete page</button></div>\n    </div>"))},e.prototype.render=function(){var t=this;this.$el.empty();var e=(0,l["default"])('<div class=""></div>');e.className='gps-block',e.append(this.getCommandsNav());var n=document.createDocumentFragment();return this.collection.each((function(e){t.add(e,n)}),this),e.append(n),this.$el.append(e),this.setElement(this.$el),this},e}(u.G7);const Gt=Ft;const Ht={stylePrefix:'pg-',appendTo:'',optionsTarget:[{value:!1},{value:'_blank'}],custom:!1};var Kt=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Jt=function(e){function n(t,n){var o=e.call(this,t,n)||this;return o.type='button',o.command=n.command,o.text=n.text,o.full=n.full,o}return Kt(n,e),n.prototype.events=function(){return{'click button':this.handleClick}},n.prototype.templateInput=function(){return''},Object.defineProperty(n.prototype,"inputValue",{get:function(){},set:function(t){this.handleClick()},enumerable:!1,configurable:!0}),n.prototype.handleClick=function(){var e=this,n=e.model,o=e.command,i=e.em;o&&((0,t.isString)(o)?i.Commands.run(o):o(i.Editor,n))},n.prototype.getInputEl=function(){var t=this,e=t.ppfx,n=t.text,o=t.full,i="".concat(e,"btn");return(0,l["default"])("<button type=\"button\" class=\"".concat(i,"-prim").concat(o?" ".concat(i,"--full"):'',"\">").concat(n,"</button>")).get(0)},n}(Wt);const te=Jt;var ee=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ne=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.type='checkbox',o.appendInput=!1,o}return ee(e,t),e.prototype.templateInput=function(){var t=this.ppfx,e=this.clsField;return"<label class=\"".concat(e,"\" data-input>\n    <i class=\"").concat(t,"chk-icon\"></i>\n  </label>")},e.prototype.getInputElem=function(){var t=this.input,e=this.$input;return t||e&&e.get&&e.get(0)||this.getElInput()},Object.defineProperty(e.prototype,"inputValue",{get:function(){var t,e=this.getInputElem();return null!==(t=null==e?void 0:e.checked)&&void 0!==t?t:this.target.value},set:function(t){console.log('Text input value '+t);var e=this.getInputElem();e&&(e.checked=!!t)},enumerable:!1,configurable:!0}),e}(Wt);const oe=ne;function ie(t,n){if((0,e.hasWin)()){var o={beforeShow:C,move:C,change:C,show:C,hide:C,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:'body',maxSelectionSize:7,cancelText:'cancel',chooseText:'choose',togglePaletteMoreText:'more',togglePaletteLessText:'less',clearText:'Clear Color Selection',noColorSelectedText:'No Color Selected',preferredFormat:!1,className:'',containerClassName:'',replacerClassName:'',showAlpha:!1,theme:'sp-light',palette:[['#ffffff','#000000','#ff0000','#ff8000','#ffff00','#008000','#0000ff','#4b0082','#9400d3']],selectionPalette:[],disabled:!1,offset:null},i=[],r=!!/msie/i.exec(window.navigator.userAgent),s=function(){function t(t,e){return!!~(''+t).indexOf(e)}var e=document.createElement('div').style;return e.cssText='background-color:rgba(0,0,0,.5)',t(e.backgroundColor,'rgba')||t(e.backgroundColor,'hsla')}(),a=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>",'</div>'].join(''),l=function(){var t='';if(r)for(var e=1;e<=6;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>",'</div>','</div>',"<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>",'</div>','</div>','</div>',"<div class='sp-clear sp-clear-display'>",'</div>',"<div class='sp-hue'>","<div class='sp-slider'></div>",t,'</div>','</div>',"<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>",'</div>',"<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />",'</div>',"<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>",'</div>','</div>','</div>'].join('')}(),c='spectrum.id';t.fn.spectrum=function(e,n){if('string'==typeof e){var o=this,r=Array.prototype.slice.call(arguments,1);return this.each((function(){var n=i[t(this).data(c)];if(n){var s=n[e];if(!s)throw new Error("Spectrum: no such method: '"+e+"'");'get'==e?o=n.get():'container'==e?o=n.container:'option'==e?o=n.option.apply(n,r):'destroy'==e?(n.destroy(),t(this).removeData(c)):s.apply(n,r)}})),o}return this.spectrum('destroy').each((function(){var n=P(this,t.extend({},e,t(this).data()));t(this).data(c,n.id)}))},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=Q,t.fn.spectrum.defaults=o,t.fn.spectrum.inputTypeColorSupport=function e(){if(void 0===e._cachedResult){var n=t("<input type='color'/>")[0];e._cachedResult='color'===n.type&&''!==n.value}return e._cachedResult},t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){var e=t('input[type=color]');e.length&&!A()&&e.spectrum({preferredFormat:'hex6'})};var u=/^[\s,#]+/,h=/\s+$/,p=0,d=Math,f=d.round,g=d.min,m=d.max,v=d.random,y=function(t,e){if(e=e||{},(t=t||'')instanceof y)return t;if(!(this instanceof y))return new y(t,e);var n=function(t){var e={r:0,g:0,b:0},n=1,o=!1,i=!1;'string'==typeof t&&(t=function(t){t=t.replace(u,'').replace(h,'').toLowerCase();var e,n=!1;if(w[t])t=w[t],n=!0;else if('transparent'==t)return{r:0,g:0,b:0,a:0,format:'name'};if(e=S.rgb.exec(t))return{r:e[1],g:e[2],b:e[3]};if(e=S.rgba.exec(t))return{r:e[1],g:e[2],b:e[3],a:e[4]};if(e=S.hsl.exec(t))return{h:e[1],s:e[2],l:e[3]};if(e=S.hsla.exec(t))return{h:e[1],s:e[2],l:e[3],a:e[4]};if(e=S.hsv.exec(t))return{h:e[1],s:e[2],v:e[3]};if(e=S.hsva.exec(t))return{h:e[1],s:e[2],v:e[3],a:e[4]};if(e=S.hex8.exec(t))return{a:et(e[1]),r:K(e[2]),g:K(e[3]),b:K(e[4]),format:n?'name':'hex8'};if(e=S.hex6.exec(t))return{r:K(e[1]),g:K(e[2]),b:K(e[3]),format:n?'name':'hex'};if(e=S.hex3.exec(t))return{r:K(e[1]+''+e[1]),g:K(e[2]+''+e[2]),b:K(e[3]+''+e[3]),format:n?'name':'hex'};return!1}(t));'object'==typeof t&&(t.hasOwnProperty('r')&&t.hasOwnProperty('g')&&t.hasOwnProperty('b')?(r=t.r,s=t.g,a=t.b,e={r:255*G(r,255),g:255*G(s,255),b:255*G(a,255)},o=!0,i='%'===String(t.r).substr(-1)?'prgb':'rgb'):t.hasOwnProperty('h')&&t.hasOwnProperty('s')&&t.hasOwnProperty('v')?(t.s=tt(t.s),t.v=tt(t.v),e=function(t,e,n){t=6*G(t,360),e=G(e,100),n=G(n,100);var o=d.floor(t),i=t-o,r=n*(1-e),s=n*(1-i*e),a=n*(1-(1-i)*e),l=o%6,c=[n,s,r,r,a,n][l],u=[a,n,n,s,r,r][l],h=[r,r,a,n,n,s][l];return{r:255*c,g:255*u,b:255*h}}(t.h,t.s,t.v),o=!0,i='hsv'):t.hasOwnProperty('h')&&t.hasOwnProperty('s')&&t.hasOwnProperty('l')&&(t.s=tt(t.s),t.l=tt(t.l),e=function(t,e,n){var o,i,r;function s(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=G(t,360),e=G(e,100),n=G(n,100),0===e)o=i=r=n;else{var a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;o=s(l,a,t+1/3),i=s(l,a,t),r=s(l,a,t-1/3)}return{r:255*o,g:255*i,b:255*r}}(t.h,t.s,t.l),o=!0,i='hsl'),t.hasOwnProperty('a')&&(n=t.a));var r,s,a;return n=F(n),{ok:o,format:t.format||i,r:g(255,m(e.r,0)),g:g(255,m(e.g,0)),b:g(255,m(e.b,0)),a:n}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=f(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=f(this._r)),this._g<1&&(this._g=f(this._g)),this._b<1&&(this._b=f(this._b)),this._ok=n.ok,this._tc_id=p++};y.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=F(t),this._roundA=f(100*this._a)/100,this},toHsv:function(){var t=j(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=j(this._r,this._g,this._b),e=f(360*t.h),n=f(100*t.s),o=f(100*t.v);return 1==this._a?'hsv('+e+', '+n+'%, '+o+'%)':'hsva('+e+', '+n+'%, '+o+'%, '+this._roundA+')'},toHsl:function(){var t=$(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=$(this._r,this._g,this._b),e=f(360*t.h),n=f(100*t.s),o=f(100*t.l);return 1==this._a?'hsl('+e+', '+n+'%, '+o+'%)':'hsla('+e+', '+n+'%, '+o+'%, '+this._roundA+')'},toHex:function(t){return R(this._r,this._g,this._b,t)},toHexString:function(t){return'#'+this.toHex(t)},toHex8:function(){return Z(this._r,this._g,this._b,this._a)},toHex8String:function(){return'#'+this.toHex8()},toRgb:function(){return{r:f(this._r),g:f(this._g),b:f(this._b),a:this._a}},toRgbString:function(){return 1==this._a?'rgb('+f(this._r)+', '+f(this._g)+', '+f(this._b)+')':'rgba('+f(this._r)+', '+f(this._g)+', '+f(this._b)+', '+this._roundA+')'},toPercentageRgb:function(){return{r:f(100*G(this._r,255))+'%',g:f(100*G(this._g,255))+'%',b:f(100*G(this._b,255))+'%',a:this._a}},toPercentageRgbString:function(){return 1==this._a?'rgb('+f(100*G(this._r,255))+'%, '+f(100*G(this._g,255))+'%, '+f(100*G(this._b,255))+'%)':'rgba('+f(100*G(this._r,255))+'%, '+f(100*G(this._g,255))+'%, '+f(100*G(this._b,255))+'%, '+this._roundA+')'},toName:function(){return 0===this._a?'transparent':!(this._a<1)&&(x[R(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e='#'+Z(this._r,this._g,this._b,this._a),n=e,o=this._gradientType?'GradientType = 1, ':'';t&&(n=y(t).toHex8String());return'progid:DXImageTransform.Microsoft.gradient('+o+'startColorstr='+e+',endColorstr='+n+')'},toString:function(t){var e=!!t;t=t||this._format;var n=!1,o=this._a<1&&this._a>=0;return e||!o||'hex'!==t&&'hex6'!==t&&'hex3'!==t&&'name'!==t?('rgb'===t&&(n=this.toRgbString()),'prgb'===t&&(n=this.toPercentageRgbString()),'hex'!==t&&'hex6'!==t||(n=this.toHexString()),'hex3'===t&&(n=this.toHexString(!0)),'hex8'===t&&(n=this.toHex8String()),'name'===t&&(n=this.toName()),'hsl'===t&&(n=this.toHslString()),'hsv'===t&&(n=this.toHsvString()),n||this.toHexString()):'name'===t&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(I,arguments)},brighten:function(){return this._applyModification(N,arguments)},darken:function(){return this._applyModification(W,arguments)},desaturate:function(){return this._applyModification(M,arguments)},saturate:function(){return this._applyModification(V,arguments)},greyscale:function(){return this._applyModification(D,arguments)},spin:function(){return this._applyModification(X,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(U,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(B,arguments)},splitcomplement:function(){return this._applyCombination(q,arguments)},triad:function(){return this._applyCombination(Y,arguments)},tetrad:function(){return this._applyCombination(z,arguments)}},y.fromRatio=function(t,e){if('object'==typeof t){var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]='a'===o?t[o]:tt(t[o]));t=n}return y(t,e)},y.equals=function(t,e){return!(!t||!e)&&y(t).toRgbString()==y(e).toRgbString()},y.random=function(){return y.fromRatio({r:v(),g:v(),b:v()})},y.mix=function(t,e,n){n=0===n?0:n||50;var o,i=y(t).toRgb(),r=y(e).toRgb(),s=n/100,a=2*s-1,l=r.a-i.a,c=1-(o=((o=a*l==-1?a:(a+l)/(1+a*l))+1)/2),u={r:r.r*o+i.r*c,g:r.g*o+i.g*c,b:r.b*o+i.b*c,a:r.a*s+i.a*(1-s)};return y(u)},y.readability=function(t,e){var n=y(t),o=y(e),i=n.toRgb(),r=o.toRgb(),s=n.getBrightness(),a=o.getBrightness(),l=Math.max(i.r,r.r)-Math.min(i.r,r.r)+Math.max(i.g,r.g)-Math.min(i.g,r.g)+Math.max(i.b,r.b)-Math.min(i.b,r.b);return{brightness:Math.abs(s-a),color:l}},y.isReadable=function(t,e){var n=y.readability(t,e);return n.brightness>125&&n.color>500},y.mostReadable=function(t,e){for(var n=null,o=0,i=!1,r=0;r<e.length;r++){var s=y.readability(t,e[r]),a=s.brightness>125&&s.color>500,l=3*(s.brightness/125)+s.color/500;(a&&!i||a&&i&&l>o||!a&&!i&&l>o)&&(i=a,o=l,n=y(e[r]))}return n};var _,O,b,w=y.names={aliceblue:'f0f8ff',antiquewhite:'faebd7',aqua:'0ff',aquamarine:'7fffd4',azure:'f0ffff',beige:'f5f5dc',bisque:'ffe4c4',black:'000',blanchedalmond:'ffebcd',blue:'00f',blueviolet:'8a2be2',brown:'a52a2a',burlywood:'deb887',burntsienna:'ea7e5d',cadetblue:'5f9ea0',chartreuse:'7fff00',chocolate:'d2691e',coral:'ff7f50',cornflowerblue:'6495ed',cornsilk:'fff8dc',crimson:'dc143c',cyan:'0ff',darkblue:'00008b',darkcyan:'008b8b',darkgoldenrod:'b8860b',darkgray:'a9a9a9',darkgreen:'006400',darkgrey:'a9a9a9',darkkhaki:'bdb76b',darkmagenta:'8b008b',darkolivegreen:'556b2f',darkorange:'ff8c00',darkorchid:'9932cc',darkred:'8b0000',darksalmon:'e9967a',darkseagreen:'8fbc8f',darkslateblue:'483d8b',darkslategray:'2f4f4f',darkslategrey:'2f4f4f',darkturquoise:'00ced1',darkviolet:'9400d3',deeppink:'ff1493',deepskyblue:'00bfff',dimgray:'696969',dimgrey:'696969',dodgerblue:'1e90ff',firebrick:'b22222',floralwhite:'fffaf0',forestgreen:'228b22',fuchsia:'f0f',gainsboro:'dcdcdc',ghostwhite:'f8f8ff',gold:'ffd700',goldenrod:'daa520',gray:'808080',green:'008000',greenyellow:'adff2f',grey:'808080',honeydew:'f0fff0',hotpink:'ff69b4',indianred:'cd5c5c',indigo:'4b0082',ivory:'fffff0',khaki:'f0e68c',lavender:'e6e6fa',lavenderblush:'fff0f5',lawngreen:'7cfc00',lemonchiffon:'fffacd',lightblue:'add8e6',lightcoral:'f08080',lightcyan:'e0ffff',lightgoldenrodyellow:'fafad2',lightgray:'d3d3d3',lightgreen:'90ee90',lightgrey:'d3d3d3',lightpink:'ffb6c1',lightsalmon:'ffa07a',lightseagreen:'20b2aa',lightskyblue:'87cefa',lightslategray:'789',lightslategrey:'789',lightsteelblue:'b0c4de',lightyellow:'ffffe0',lime:'0f0',limegreen:'32cd32',linen:'faf0e6',magenta:'f0f',maroon:'800000',mediumaquamarine:'66cdaa',mediumblue:'0000cd',mediumorchid:'ba55d3',mediumpurple:'9370db',mediumseagreen:'3cb371',mediumslateblue:'7b68ee',mediumspringgreen:'00fa9a',mediumturquoise:'48d1cc',mediumvioletred:'c71585',midnightblue:'191970',mintcream:'f5fffa',mistyrose:'ffe4e1',moccasin:'ffe4b5',navajowhite:'ffdead',navy:'000080',oldlace:'fdf5e6',olive:'808000',olivedrab:'6b8e23',orange:'ffa500',orangered:'ff4500',orchid:'da70d6',palegoldenrod:'eee8aa',palegreen:'98fb98',paleturquoise:'afeeee',palevioletred:'db7093',papayawhip:'ffefd5',peachpuff:'ffdab9',peru:'cd853f',pink:'ffc0cb',plum:'dda0dd',powderblue:'b0e0e6',purple:'800080',rebeccapurple:'663399',red:'f00',rosybrown:'bc8f8f',royalblue:'4169e1',saddlebrown:'8b4513',salmon:'fa8072',sandybrown:'f4a460',seagreen:'2e8b57',seashell:'fff5ee',sienna:'a0522d',silver:'c0c0c0',skyblue:'87ceeb',slateblue:'6a5acd',slategray:'708090',slategrey:'708090',snow:'fffafa',springgreen:'00ff7f',steelblue:'4682b4',tan:'d2b48c',teal:'008080',thistle:'d8bfd8',tomato:'ff6347',turquoise:'40e0d0',violet:'ee82ee',wheat:'f5deb3',white:'fff',whitesmoke:'f5f5f5',yellow:'ff0',yellowgreen:'9acd32'},x=y.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(w),S=(O='[\\s|\\(]+('+(_='(?:'+'[-\\+]?\\d*\\.\\d+%?'+')|(?:'+'[-\\+]?\\d+%?'+')')+')[,|\\s]+('+_+')[,|\\s]+('+_+')\\s*\\)?',b='[\\s|\\(]+('+_+')[,|\\s]+('+_+')[,|\\s]+('+_+')[,|\\s]+('+_+')\\s*\\)?',{rgb:new RegExp('rgb'+O),rgba:new RegExp('rgba'+b),hsl:new RegExp('hsl'+O),hsla:new RegExp('hsla'+b),hsv:new RegExp('hsv'+O),hsva:new RegExp('hsva'+b),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=y,t((function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()}))}function k(e,n,o,i){for(var r=[],a=0;a<e.length;a++){var l=e[a];if(l){var c=y(l),u=c.toHsl().l<.5?'sp-thumb-el sp-thumb-dark':'sp-thumb-el sp-thumb-light';u+=y.equals(n,l)?' sp-thumb-active':'';var h=c.toString(i.preferredFormat||'rgb'),p=s?'background-color:'+c.toRgbString():'filter:'+c.toFilter();r.push('<span title="'+h+'" data-color="'+c.toRgbString()+'" class="'+u+'"><span class="sp-thumb-inner" style="'+p+';"></span></span>')}else{r.push(t('<div />').append(t('<span data-color="" style="background-color:transparent;" class="'+'sp-clear-display'+'"></span>').attr('title',i.noColorSelectedText)).html())}}return"<div class='sp-cf "+o+"'>"+r.join('')+'</div>'}function P(e,c){var u,h,p,d,f=function(e,n){var i=t.extend({},o,e);return i.callbacks={move:E(i.move,n),change:E(i.change,n),show:E(i.show,n),hide:E(i.hide,n),beforeShow:E(i.beforeShow,n)},i}(c,e),g=f.flat,m=f.showSelectionPalette,v=f.localStorageKey,_=f.theme,O=f.callbacks,b=(u=zt,h=10,function(){var t=this,e=arguments,n=function(){d=null,u.apply(t,e)};p&&clearTimeout(d),!p&&d||(d=setTimeout(n,h))}),w=!1,x=!1,S=!0,P=0,C=0,$=0,j=0,R=0,Z=0,M=0,V=0,D=0,I=0,N=1,W=[],X=[],L={},Y=f.selectionPalette.slice(0),z=f.maxSelectionSize,q='sp-dragging',U=null,B=e.ownerDocument,F=(B.body,t(e)),G=!1,H=t(l,B).addClass(_),K=H.find('.sp-picker-container'),J=H.find('.sp-color'),tt=H.find('.sp-dragger'),et=H.find('.sp-hue'),nt=H.find('.sp-slider'),ot=H.find('.sp-alpha-inner'),it=H.find('.sp-alpha'),rt=H.find('.sp-alpha-handle'),st=H.find('.sp-input'),at=H.find('.sp-palette'),lt=H.find('.sp-initial'),ct=H.find('.sp-cancel'),ut=H.find('.sp-clear'),ht=H.find('.sp-choose'),pt=H.find('.sp-palette-toggle'),dt=F.is('input'),ft=dt&&'color'===F.attr('type')&&A(),gt=dt&&!g,mt=gt?t(a).addClass(_).addClass(f.className).addClass(f.replacerClassName):t([]),vt=gt?mt:F,yt=mt.find('.sp-preview-inner'),_t=f.color||dt&&F.val(),Ot=!1,bt=f.preferredFormat,wt=!f.showButtons||f.clickoutFiresChange,xt=!_t,St=f.allowEmpty&&!ft;function kt(){if(f.showPaletteOnly&&(f.showPalette=!0),pt.text(f.showPaletteOnly?f.togglePaletteMoreText:f.togglePaletteLessText),f.palette){W=f.palette.slice(0),X=t.isArray(W[0])?W:[W],L={};for(var e=0;e<X.length;e++)for(var n=0;n<X[e].length;n++){var o=y(X[e][n]).toRgbString();L[o]=!0}}H.toggleClass('sp-flat',g),H.toggleClass('sp-input-disabled',!f.showInput),H.toggleClass('sp-alpha-enabled',f.showAlpha),H.toggleClass('sp-clear-enabled',St),H.toggleClass('sp-buttons-disabled',!f.showButtons),H.toggleClass('sp-palette-buttons-disabled',!f.togglePaletteOnly),H.toggleClass('sp-palette-disabled',!f.showPalette),H.toggleClass('sp-palette-only',f.showPaletteOnly),H.toggleClass('sp-initial-disabled',!f.showInitial),H.addClass(f.className).addClass(f.containerClassName),zt()}function Pt(){if(v&&window.localStorage){try{var e=window.localStorage[v].split(',#');e.length>1&&(delete window.localStorage[v],t.each(e,(function(t,e){Ct(e)})))}catch(t){}try{Y=window.localStorage[v].split(';')}catch(t){}}}function Ct(e){if(m){var n=y(e).toRgbString();if(!L[n]&&-1===t.inArray(n,Y))for(Y.push(n);Y.length>z;)Y.shift();if(v&&window.localStorage)try{window.localStorage[v]=Y.join(';')}catch(t){}}}function Tt(){var e=Nt(),n=t.map(X,(function(t,n){return k(t,e,'sp-palette-row sp-palette-row-'+n,f)}));Pt(),Y&&n.push(k(function(){var t=[];if(f.showPalette)for(var e=0;e<Y.length;e++){var n=y(Y[e]).toRgbString();L[n]||t.push(Y[e])}return t.reverse().slice(0,f.maxSelectionSize)}(),e,'sp-palette-row sp-palette-row-selection',f)),at.html(n.join(''))}function Et(){if(f.showInitial){var t=Ot,e=Nt();lt.html(k([t,e],e,'sp-palette-row-initial',f))}}function Qt(){(C<=0||P<=0||j<=0)&&zt(),x=!0,H.addClass(q),U=null,F.trigger('dragstart.spectrum',[Nt()])}function At(){x=!1,H.removeClass(q),F.trigger('dragstop.spectrum',[Nt()])}function $t(){var t=st.val();if(null!==t&&''!==t||!St){var e=y(t);e.isValid()?(It(e),Yt(!0)):st.addClass('sp-validation-error')}else It(null),Yt(!0)}function jt(){w?Vt():Rt()}function Rt(){var e=t.Event('beforeShow.spectrum');if(w)zt();else if(F.trigger('beforeShow.spectrum',[Nt()]),!1!==O.beforeShow(Nt())&&!e.isDefaultPrevented()){!function(){for(var t=0;t<i.length;t++)i[t]&&i[t].hide()}(),w=!0;var n=t(B);n.bind('keydown.spectrum',Zt),n.bind('click.spectrum',Mt),t(window).bind('resize.spectrum',b),mt.addClass('sp-active'),H.removeClass('sp-hidden'),zt(),Xt(),Ot=Nt(),Et(),O.show(Ot),F.trigger('show.spectrum',[Ot])}}function Zt(t){27===t.keyCode&&Vt()}function Mt(t){2!=t.button&&(x||(wt?Yt(!0):Dt(),Vt()))}function Vt(){w&&!g&&(w=!1,t(B).unbind('keydown.spectrum',Zt),t(B).unbind('click.spectrum',Mt),t(window).unbind('resize.spectrum',b),mt.removeClass('sp-active'),H.addClass('sp-hidden'),O.hide(Nt()),F.trigger('hide.spectrum',[Nt()]))}function Dt(){It(Ot,!0)}function It(t,e){var n,o;y.equals(t,Nt())?Xt():(!t&&St?xt=!0:(xt=!1,S=!t,o=(n=y(t)).toHsv(),V=o.h%360/360,D=o.s,I=o.v,N=o.a),Xt(),n&&n.isValid()&&!e&&(bt=f.preferredFormat||n.getFormat()))}function Nt(t){return t=t||{},St&&xt?null:y.fromRatio({h:V,s:D,v:I,a:Math.round(100*N)/100},{format:t.format||bt})}function Wt(){Xt(),O.move(Nt()),F.trigger('move.spectrum',[Nt()])}function Xt(){st.removeClass('sp-validation-error'),Lt();var t=y.fromRatio({h:V,s:1,v:1});J.css('background-color',t.toHexString());var e=bt;N<1&&(0!==N||'name'!==e)&&('hex'!==e&&'hex3'!==e&&'hex6'!==e&&'name'!==e||(e='rgb'));var n=Nt({format:e}),o='';if(yt.removeClass('sp-clear-display'),yt.css('background-color','transparent'),!n&&St)yt.addClass('sp-clear-display');else{var i=n.toHexString(),a=n.toRgbString();if(s||1===n.alpha?yt.css('background-color',a):(yt.css('background-color','transparent'),yt.css('filter',n.toFilter())),f.showAlpha){var l=n.toRgb();l.a=0;var c=y(l).toRgbString(),u='linear-gradient(left, '+c+', '+i+')';r?ot.css('filter',y(c).toFilter({gradientType:1},i)):(ot.css('background','-webkit-'+u),ot.css('background','-moz-'+u),ot.css('background','-ms-'+u),ot.css('background','linear-gradient(to right, '+c+', '+i+')'))}o=n.toString(e)}f.showInput&&st.val(o),f.showPalette&&Tt(),Et()}function Lt(){var t=D,e=I;if(St&&xt)rt.hide(),nt.hide(),tt.hide();else{rt.show(),nt.show(),tt.show();var n=t*P,o=C-e*C;n=Math.max(-$,Math.min(P-$,n-$)),o=Math.max(-$,Math.min(C-$,o-$)),tt.css({top:o+'px',left:n+'px'});var i=N*R;rt.css({left:i-Z/2+'px'});var r=V*j;nt.css({top:r-M+'px'})}}function Yt(t){var e=Nt(),n='',o=!!S||!y.equals(e,Ot);e&&(n=e.toString(bt),!w&&Ct(e)),dt&&F.val(n),t&&o&&(O.change(e),F.trigger('change',[e]))}function zt(){w&&(P=J.width(),C=J.height(),$=tt.height(),et.width(),j=et.height(),M=nt.height(),R=it.width(),Z=rt.width(),g||(H.css('position','absolute'),f.offset?H.offset(f.offset):H.offset(function(e,n){var o=0,i=e.outerWidth(),r=e.outerHeight(),s=n.outerHeight(),a=e[0].ownerDocument,l=a.documentElement,c=l.clientWidth,u=l.clientHeight,h=t(a).scrollLeft(),p=t(a).scrollTop(),d=c+h,f=u+p,g=n.offset();return g.top+=s,g.left-=Math.min(g.left,g.left+i>d&&d>i?Math.abs(g.left+i-d):0),g.top-=Math.min(g.top,g.top+r>f&&f>r?Math.abs(r+s-o):o),g}(H,vt))),Lt(),f.showPalette&&Tt(),F.trigger('reflow.spectrum'))}function qt(){Vt(),G=!0,F.attr('disabled',!0),vt.addClass('sp-disabled')}!function(){if(r&&H.find('*:not(input)').attr('unselectable','on'),kt(),gt&&F.after(mt).hide(),St||ut.hide(),g)F.after(H).hide();else{var e='parent'===f.appendTo?F.parent():t(f.appendTo);1!==e.length&&(e=t('body')),e.append(H)}function n(e){return e.data&&e.data.ignore?(It(t(e.target).closest('.sp-thumb-el').data('color')),Wt()):(It(t(e.target).closest('.sp-thumb-el').data('color')),Wt(),f.hideAfterPaletteSelect&&(Yt(!0),Vt())),!1}Pt(),vt.bind('click.spectrum touchstart.spectrum',(function(e){G||jt(),e.stopPropagation(),t(e.target).is('input')||e.preventDefault()})),(F.is(':disabled')||!0===f.disabled)&&qt(),H.click(T),st.change($t),st.bind('paste',(function(){setTimeout($t,1)})),st.keydown((function(t){13==t.keyCode&&$t()})),ct.text(f.cancelText),ct.bind('click.spectrum',(function(t){t.stopPropagation(),t.preventDefault(),Dt(),Vt()})),ut.attr('title',f.clearText),ut.bind('click.spectrum',(function(t){t.stopPropagation(),t.preventDefault(),xt=!0,Wt(),g&&Yt(!0)})),ht.text(f.chooseText),ht.bind('click.spectrum',(function(t){t.stopPropagation(),t.preventDefault(),r&&st.is(':focus')&&st.trigger('change'),st.hasClass('sp-validation-error')||(Yt(!0),Vt())})),pt.text(f.showPaletteOnly?f.togglePaletteMoreText:f.togglePaletteLessText),pt.bind('click.spectrum',(function(t){t.stopPropagation(),t.preventDefault(),f.showPaletteOnly=!f.showPaletteOnly,f.showPaletteOnly||g||H.css('left','-='+(K.outerWidth(!0)+5)),kt()})),Q(it,(function(t,e,n){N=t/R,xt=!1,n.shiftKey&&(N=Math.round(10*N)/10),Wt()}),Qt,At),Q(et,(function(t,e){V=parseFloat(e/j),xt=!1,f.showAlpha||(N=1),Wt()}),Qt,At),Q(J,(function(t,e,n){if(n.shiftKey){if(!U){var o=D*P,i=C-I*C,r=Math.abs(t-o)>Math.abs(e-i);U=r?'x':'y'}}else U=null;var s=!U||'y'===U;(!U||'x'===U)&&(D=parseFloat(t/P)),s&&(I=parseFloat((C-e)/C)),xt=!1,f.showAlpha||(N=1),Wt()}),Qt,At),_t?(It(_t),Xt(),bt=f.preferredFormat||y(_t).getFormat(),Ct(_t)):Xt(),g&&Rt();var o=r?'mousedown.spectrum':'click.spectrum touchstart.spectrum';at.delegate('.sp-thumb-el',o,n),lt.delegate('.sp-thumb-el:nth-child(1)',o,{ignore:!0},n)}();var Ut={show:Rt,hide:Vt,toggle:jt,reflow:zt,option:function(e,o){return e===n?t.extend({},f):o===n?f[e]:(f[e]=o,'preferredFormat'===e&&(bt=f.preferredFormat),void kt())},enable:function(){G=!1,F.attr('disabled',!1),vt.removeClass('sp-disabled')},disable:qt,offset:function(t){f.offset=t,zt()},set:function(t){It(t),Yt()},get:Nt,destroy:function(){F.show(),vt.unbind('click.spectrum touchstart.spectrum'),H.remove(),mt.remove(),i[Ut.id]=null},container:H};return Ut.id=i.push(Ut)-1,Ut}function C(){}function T(t){t.stopPropagation()}function E(t,e){var n=Array.prototype.slice,o=n.call(arguments,2);return function(){return t.apply(e,o.concat(n.call(arguments)))}}function Q(e,n,o,i){n=n||function(){},o=o||function(){},i=i||function(){};var s=document,a=!1,l={},c=0,u=0,h='ontouchstart'in window,p={};function d(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function f(t){if(a){if(r&&s.documentMode<9&&!t.button)return g();var o=t&&t.touches&&t.touches[0],i=o&&o.pageX||t.pageX,p=o&&o.pageY||t.pageY,f=Math.max(0,Math.min(i-l.left,u)),m=Math.max(0,Math.min(p-l.top,c));h&&d(t),n.apply(e,[f,m,t])}}function g(){a&&(t(s).unbind(p),t(s.body).removeClass('sp-dragging'),setTimeout((function(){i.apply(e,arguments)}),0)),a=!1}p['selectstart']=d,p['dragstart']=d,p['touchmove mousemove']=f,p['touchend mouseup']=g,t(e).bind('touchstart mousedown',(function(n){(n.which?3==n.which:2==n.button)||a||!1!==o.apply(e,arguments)&&(a=!0,c=t(e).height(),u=t(e).width(),l=t(e).offset(),t(s).bind(p),t(s.body).addClass('sp-dragging'),f(n),d(n))}))}function A(){return t.fn.spectrum.inputTypeColorSupport()}function $(t,e,n){t=G(t,255),e=G(e,255),n=G(n,255);var o,i,r=m(t,e,n),s=g(t,e,n),a=(r+s)/2;if(r==s)o=i=0;else{var l=r-s;switch(i=a>.5?l/(2-r-s):l/(r+s),r){case t:o=(e-n)/l+(e<n?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4}o/=6}return{h:o,s:i,l:a}}function j(t,e,n){t=G(t,255),e=G(e,255),n=G(n,255);var o,i,r=m(t,e,n),s=g(t,e,n),a=r,l=r-s;if(i=0===r?0:l/r,r==s)o=0;else{switch(r){case t:o=(e-n)/l+(e<n?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4}o/=6}return{h:o,s:i,v:a}}function R(t,e,n,o){var i=[J(f(t).toString(16)),J(f(e).toString(16)),J(f(n).toString(16))];return o&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join('')}function Z(t,e,n,o){var i;return[J((i=o,Math.round(255*parseFloat(i)).toString(16))),J(f(t).toString(16)),J(f(e).toString(16)),J(f(n).toString(16))].join('')}function M(t,e){e=0===e?0:e||10;var n=y(t).toHsl();return n.s-=e/100,n.s=H(n.s),y(n)}function V(t,e){e=0===e?0:e||10;var n=y(t).toHsl();return n.s+=e/100,n.s=H(n.s),y(n)}function D(t){return y(t).desaturate(100)}function I(t,e){e=0===e?0:e||10;var n=y(t).toHsl();return n.l+=e/100,n.l=H(n.l),y(n)}function N(t,e){e=0===e?0:e||10;var n=y(t).toRgb();return n.r=m(0,g(255,n.r-f(255*(-e/100)))),n.g=m(0,g(255,n.g-f(255*(-e/100)))),n.b=m(0,g(255,n.b-f(255*(-e/100)))),y(n)}function W(t,e){e=0===e?0:e||10;var n=y(t).toHsl();return n.l-=e/100,n.l=H(n.l),y(n)}function X(t,e){var n=y(t).toHsl(),o=(f(n.h)+e)%360;return n.h=o<0?360+o:o,y(n)}function L(t){var e=y(t).toHsl();return e.h=(e.h+180)%360,y(e)}function Y(t){var e=y(t).toHsl(),n=e.h;return[y(t),y({h:(n+120)%360,s:e.s,l:e.l}),y({h:(n+240)%360,s:e.s,l:e.l})]}function z(t){var e=y(t).toHsl(),n=e.h;return[y(t),y({h:(n+90)%360,s:e.s,l:e.l}),y({h:(n+180)%360,s:e.s,l:e.l}),y({h:(n+270)%360,s:e.s,l:e.l})]}function q(t){var e=y(t).toHsl(),n=e.h;return[y(t),y({h:(n+72)%360,s:e.s,l:e.l}),y({h:(n+216)%360,s:e.s,l:e.l})]}function U(t,e,n){e=e||6,n=n||30;var o=y(t).toHsl(),i=360/n,r=[y(t)];for(o.h=(o.h-(i*e>>1)+720)%360;--e;)o.h=(o.h+i)%360,r.push(y(o));return r}function B(t,e){e=e||6;for(var n=y(t).toHsv(),o=n.h,i=n.s,r=n.v,s=[],a=1/e;e--;)s.push(y({h:o,s:i,v:r})),r=(r+a)%1;return s}function F(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function G(t,e){(function(t){return'string'==typeof t&&-1!=t.indexOf('.')&&1===parseFloat(t)})(t)&&(t='100%');var n=function(t){return'string'==typeof t&&-1!=t.indexOf('%')}(t);return t=g(e,m(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),d.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function H(t){return g(1,m(0,t))}function K(t){return parseInt(t,16)}function J(t){return 1==t.length?'0'+t:''+t}function tt(t){return t<=1&&(t=100*t+'%'),t}function et(t){return K(t)/255}}var re=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),se=void 0&&(void 0).__assign||function(){return se=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},se.apply(this,arguments)};l["default"]&&ie(l["default"]);var ae=function(t){var e='name'===t.getFormat()&&t.toName(),n=1==t.getAlpha()?t.toHexString():t.toRgbString();return e||n.replace(/ /g,'')},le=function(e){function n(t,n){var o=e.call(this,t,n)||this;return o.type='text',o}return re(n,e),n.prototype.templateInput=function(){return''},Object.defineProperty(n.prototype,"inputValue",{get:function(){var t,e=null===(t=this.$input)||void 0===t?void 0:t.get(0);return(null==e?void 0:e.value)?e.value:this.target.value},set:function(t){var e,n=this.getColorEl();if(n){var o='none'!=t?t:'';n.spectrum('set',o);var i=n.spectrum('get'),r=o&&ae(i);n.get(0).style.backgroundColor=o,this.noneColor='none'==t,this.movedColor=o;var s=null===(e=this.$input)||void 0===e?void 0:e.get(0);s&&(s.value=r)}},enumerable:!1,configurable:!0}),n.prototype.getInputEl=function(){if(!this.input){var t=this.target.value,e=this,n=(e.ppfx,e.target),o=e.type,i=e.paceholder;console.log(this.$el.get(0));var r=(0,l["default"])(document.createElement('div'));r.addClass(this.inputClass()),r.html(this.template());var s=i||n.value,a=(0,l["default"])("<input type=\"".concat(o,"\" placeholder=\"").concat(s,"\">"));r.find(".".concat(this.holderClass())).append(a);var c=this.getColorEl();return r.find('[data-colorp-c]').append(c),a.val(t),this.$input=a,r.get(0)}return this.input},n.prototype.template=function(){var t=this.ppfx;return"\n      <div class=\"".concat(this.holderClass(),"\"></div>\n      <div class=\"").concat(t,"field-colorp\">\n        <div class=\"").concat(t,"field-colorp-c\" data-colorp-c>\n          <div class=\"").concat(t,"checker-bg\"></div>\n        </div>\n      </div>\n    ")},n.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.remove=function(){return e.prototype.remove.call(this),this.colorEl.spectrum('destroy'),this},n.prototype.setValue=function(e,n){void 0===n&&(n={});var o=this.model,i=(0,t.isUndefined)(n.def)?o.get('defaults'):n.def,r=(0,t.isUndefined)(e)?(0,t.isUndefined)(i)?'':i:e,s=this.getInputEl(),a=this.getColorEl(),l='none'!=r?r:'';s.value=r,a.get(0).style.backgroundColor=l,(n.fromTarget||n.fromInput&&!n.avoidStore)&&(a.spectrum('set',l),this.noneColor='none'==r,this.movedColor=l)},n.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var e=this.em,n=this.colorPicker,o=this.ppfx,i=(0,l["default"])("<div class=\"".concat(this.ppfx,"field-color-picker\"></div>")),r=i.get(0).style,s=e&&e.config?e.config.el:'',a=e&&e.getConfig&&e.getConfig().colorPicker||{};this.movedColor='';var c,u=!1,h=function(e){t.inputValue=e};i.spectrum(se(se(se({color:this.target.value||!1,containerClassName:"".concat(o,"one-bg ").concat(o,"two-color"),appendTo:s||'body',maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:'Ok',cancelText:'⨯',palette:[]},a),n||{}),{move:function(e){var n=ae(e);t.movedColor=n,r.backgroundColor=n,h(n)},change:function(e){u=!0;var n=ae(e);r.backgroundColor=n,h(n),t.noneColor=!1},show:function(e){u=!1,t.movedColor='',c=ae(e)},hide:function(){!u&&c&&(t.noneColor&&(c=''),r.backgroundColor=c,i.spectrum('set',c),h(c))}})),this.colorEl=i}return this.colorEl},n}(Wt);const ce=le;var ue=n(968),he=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),pe=function(e){function n(n,o){var i,r,s=e.call(this,n,o)||this;return s.type='number',(0,t.bindAll)(s,'moveIncrement','upIncrement'),s.step=null!==(i=null==o?void 0:o.step)&&void 0!==i?i:1,s.min=null==o?void 0:o.min,s.max=null==o?void 0:o.max,s.fixedValues=null!==(r=null==o?void 0:o.fixedValues)&&void 0!==r?r:[],s}return he(n,e),n.prototype.events=function(){return{'change input':'handleChange','change select':'handleUnitChange','click [data-arrow-up]':'upArrowClick','click [data-arrow-down]':'downArrowClick','mousedown [data-arrows]':'downIncrement',keydown:'handleKeyDown'}},Object.defineProperty(n.prototype,"inputNumberValue",{get:function(){var t,e=null===(t=this.$input)||void 0===t?void 0:t.get(0);return(null==e?void 0:e.value)?parseFloat(e.value):this.target.value},set:function(t){var e,n=null===(e=this.$input)||void 0===e?void 0:e.get(0);n&&(n.value=t)},enumerable:!1,configurable:!0}),n.prototype.getInputEl=function(){var t=this,e=(t.ppfx,t.target),n=t.type,o=t.paceholder,i=this.target.value;console.log(this.$el.get(0));var r=(0,l["default"])(document.createElement('div'));r.addClass(this.inputClass()),r.html(this.template());var s=o||e.value,a=(0,l["default"])("<input type=\"".concat(n,"\" placeholder=\"").concat(s,"\">"));return r.find(".".concat("".concat(this.ppfx,"input-holder"))).append(a),console.log(r.get(0)),a.val(i),console.log(this.$el.get(0)),this.$input=a,r.get(0)},n.prototype.template=function(){var t=this.ppfx;return"\n        <span class=\"".concat(t,"input-holder\"></span>\n        <span class=\"").concat(t,"field-units\"></span>\n        <div class=\"").concat(t,"field-arrows\" data-arrows>\n          <div class=\"").concat(t,"field-arrow-u\" data-arrow-up></div>\n          <div class=\"").concat(t,"field-arrow-d\" data-arrow-down></div>\n        </div>\n      ")},n.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field-int")||0},n.prototype.setValue=function(t){var e=this.validateInputValue(t,{deepCheck:1});this.inputNumberValue=e,console.log('SetValue'+this.inputValue),this.target.value=this.inputValue},n.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.inputNumberValue)},n.prototype.handleKeyDown=function(t){'ArrowUp'===t.key&&(t.preventDefault(),this.upArrowClick()),'ArrowDown'===t.key&&(t.preventDefault(),this.downArrowClick())},n.prototype.upArrowClick=function(){var t=this.step,e=this.inputNumberValue;this.setValue(this.normalizeValue(e+t))},n.prototype.downArrowClick=function(){var t=this.step,e=this.inputNumberValue;this.setValue(this.normalizeValue(e-t))},n.prototype.downIncrement=function(t){t.preventDefault(),console.log('downIncrement'),this.moved=!1,this.inputNumberValue=this.inputNumberValue||0;var e=this.normalizeValue(this.inputNumberValue);this.setValue(e),this.current={y:t.pageY,val:e},(0,ue.on)(document,'mousemove',this.moveIncrement),(0,ue.on)(document,'mouseup',this.upIncrement)},n.prototype.moveIncrement=function(t){this.moved=!0,console.log('moveIncrement');var e=this.step,n=this.current,o=this.normalizeValue(n.val+(n.y-t.pageY)*e),i=this.validateInputValue(o);return this.prValue=i,this.inputNumberValue=i,!1},n.prototype.upIncrement=function(){if(console.log('upIncrement'),(0,ue.S1)(document,'mouseup',this.upIncrement),(0,ue.S1)(document,'mousemove',this.moveIncrement),this.prValue&&this.moved){var t=this.prValue;this.setValue(t)}},n.prototype.normalizeValue=function(t,e){void 0===e&&(e=0);var n=this.step,o=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var i=n.toString().split('.')[1];o=i?i.length:0}return o?parseFloat(t.toFixed(o)):t},n.prototype.validateInputValue=function(e,n){void 0===n&&(n={});var o=this,i=o.min,r=o.max,s=o.fixedValues,a=n||{},l='',c=(0,t.isUndefined)(e)?l:e;if(a.deepCheck&&c){var u=new RegExp('^'+s.join('|'),'g');s.length&&u.test(c)?c=c.match(u)[0]:(c+='',c=parseFloat(c.replace(',','.')),c=isNaN(c)?l:c)}return(0,t.isUndefined)(r)||(c=c>r?r:c),(0,t.isUndefined)(i)||(c=c<i?i:c),c},n}(Wt),de=function(t){function e(e,n){return t.call(this,e,n)||this}return he(e,t),Object.defineProperty(e.prototype,"inputValue",{get:function(){return this.inputNumberValue},set:function(t){this.inputNumberValue=t},enumerable:!1,configurable:!0}),e}(pe),fe=function(e){function n(t,n){var o=e.call(this,t,n)||this;return o.units=n.units,o}return he(n,e),Object.defineProperty(n.prototype,"inputValue",{get:function(){var t=this.inputUnitValue;return''===this.inputNumberValue&&(t=''),this.inputNumberValue+t},set:function(t){var e=t+'',n=e.match(/^\d*\.?\d*/),o=n?n[0]:'';this.inputNumberValue=parseFloat(o);var i=e.slice(o.length);this.inputUnitValue=i},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"inputUnitValue",{get:function(){var t,e=this.units,n=this.unitEl;return null!==(t=null==n?void 0:n.value)&&void 0!==t?t:e.length&&e[0]||''},set:function(e){var n=this.unitEl,o=this.units,i='';(0,t.indexOf)(o,e)>=0&&(i=e),n&&(n.value=i)},enumerable:!1,configurable:!0}),n.prototype.getInputEl=function(){var t=e.prototype.getInputEl.call(this);this.unitEl=void 0;var n=this.getUnitEl();return n&&(0,l["default"])(t).find(".".concat(this.ppfx,"field-units")).get(0).appendChild(n),t},n.prototype.handleUnitChange=function(t){t.stopPropagation(),console.log('Unit changed'),this.target.value=this.inputValue},n.prototype.getUnitEl=function(){var t=this;if(!this.unitEl){var e=this.units;if(e.length){var n=['<option value="" disabled hidden>-</option>'];e.forEach((function(e){var o=e==t.inputUnitValue?'selected':'';n.push("<option ".concat(o,">").concat(e,"</option>"))}));var o=document.createElement('div');o.innerHTML="<select class=\"".concat(this.ppfx,"input-unit\">").concat(n.join(''),"</select>"),this.unitEl=o.firstChild}}return this.unitEl},n}(pe),ge=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),me=function(e){function n(t,n){var o=e.call(this,t,n)||this;return o.type='select',o.options=n.options,o}return ge(n,e),n.prototype.getInputElem=function(){var t=this.input,e=this.$input;return t||e&&e.get&&e.get(0)||this.getElInput()},Object.defineProperty(n.prototype,"inputValue",{get:function(){var t,e=this.getInputElem();return null!==(t=null==e?void 0:e.value)&&void 0!==t?t:this.target.value},set:function(t){console.log('Text input value '+t);var e=this.getInputElem();e&&(e.value=t)},enumerable:!1,configurable:!0}),n.prototype.templateInput=function(){var t=this.ppfx,e=this.clsField;return"<div class=\"".concat(e,"\">\n      <div data-input></div>\n      <div class=\"").concat(t,"sel-arrow\">\n        <div class=\"").concat(t,"d-s-arrow\"></div>\n      </div>\n    </div>")},n.prototype.getInputEl=function(){if(!this.$input){var e=this,n=(e.name,e.options),o=e.em,i=[],r='<select>';n.forEach((function(e){var n,s,a,l='';(0,t.isString)(e)?(n=e,s=e):(n=e.name||e.value,s="".concat((0,t.isUndefined)(e.value)?e.name:e.value).replace(/"/g,'&quot;'),l+=(a=e.style?e.style.replace(/"/g,'&quot;'):'')?" style=\"".concat(a,"\""):'');var c=o.t("traitManager.traits.options.".concat(n,".").concat(s))||n;r+="<option value=\"".concat(s,"\"").concat(l,">").concat(c,"</option>"),i.push(s)})),r+='</select>',this.$input=(0,l["default"])(r);var s=this.target.value,a=i.indexOf(s)>=0?s:'';!(0,t.isUndefined)(a)&&this.$input.val(a)}return this.$input.get(0)},n}(Wt);const ve=me;var ye=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_e=function(t){function e(e,n){var o=t.call(this,{model:e})||this;o.highlightedClass='gjs-three-bg',o.config=n;var i=o,r=i.pfx,s=i.ppfx;return o.className="".concat(s,"layer no-select ").concat(r,"two-color"),o}return ye(e,t),e.prototype.render=function(){var t=this.em;if(this.$el.empty(),this.$el.attr('class',this.className),this.model){var e=new de(t,{min:0});e.setTarget('name',this.model,{changeProp:!0}),this.$el.append(e.render().el);var n=new fe(t,{min:0,units:['px','%']});n.setTarget('name',this.model,{changeProp:!0}),this.$el.append(n.render().el),this.$el.append(new ve(t,{options:['px','%']}).setTarget('name',this.model,{changeProp:!0}).render().el),this.$el.append(new oe(t).setTarget('name',this.model,{changeProp:!0}).render().el),this.$el.append(new te(t,{text:'Ok',command:function(){console.log('click')},full:!0}).setTarget('name',this.model,{changeProp:!0}).render().el),this.$el.append(new ce(t,{}).setTarget('name',this.model,{changeProp:!0}).render().el);var o=new Yt(t,{}).setTarget('route',this.model,{changeProp:!0});this.$el.append(o.render().el)}return this},e.prototype.events=function(){var t=this;return{click:function(){return t.trigger('onClick',t)}}},e.prototype.changePage=function(t){this.model=t,this.render()},Object.defineProperty(e.prototype,"em",{get:function(){return this.config.em},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),e.prototype.setHighlighted=function(t){t?this.$el.addClass(this.highlightedClass):this.$el.removeClass(this.highlightedClass)},Object.defineProperty(e.prototype,"page",{get:function(){return this.model},enumerable:!1,configurable:!0}),e}(u.G7);const Oe=_e;var be=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),we=void 0&&(void 0).__assign||function(){return we=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},we.apply(this,arguments)},xe=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Se='page',ke="".concat(Se,":"),Pe="".concat(ke,"select"),Ce="".concat(Pe,":before"),Te="".concat(ke,"update"),Ee="".concat(ke,"add"),Qe="".concat(Ee,":before"),Ae="".concat(ke,"remove"),$e="".concat(Ae,":before"),je='change:selected',Re='main',Ze={all:Se,select:Pe,selectBefore:Ce,update:Te,add:Ee,addBefore:Qe,remove:Ae,removeBefore:$e},Me=function(n){function o(e){var o=n.call(this,e,'PageManager',new dt([],e),Ze,Ht)||this;o.storageKey='pages',(0,t.bindAll)(o,'_onPageChange');var i=new w.Z({_undo:!0});return o.model=i,o.pages.on('reset',(function(t){return t.at(0)&&o.select(t.at(0))})),o.pages.on('all',o.__onChange,o),i.on(je,o._onPageChange),o}return be(o,n),Object.defineProperty(o.prototype,"pages",{get:function(){return this.all},enumerable:!1,configurable:!0}),o.prototype.getAll=function(){return xe([],this.all.models,!0)},o.prototype.__onChange=function(t,e,n,o){var i=o||n;this.em.trigger(Se,{event:t,page:e,options:i})},o.prototype.onLoad=function(){var t,e=this,n=e.pages,o=e.config,i=e.em,r={silent:!0},s=(null===(t=o.pages)||void 0===t?void 0:t.map((function(t){return new ct(t,{em:i,config:o})})))||[];n.add(s,r);var a=n.length?this.getMain():this.add({type:Re},r);a&&this.select(a,r)},o.prototype._onPageChange=function(t,e,n){var o=this.em,i=o.Layers,r=e.getMainComponent();i&&r&&i.setRoot(r),o.trigger(Pe,e,t.previous('selected')),this.__onChange(je,e,n)},o.prototype.postLoad=function(){var t=this,e=t.em,n=t.model,o=t.pages,i=e.UndoManager;i.add(n),i.add(o),o.on('add remove reset change',(function(t,n,o){return e.changesUp(o||n)}))},o.prototype.add=function(t,e){var n=this;void 0===e&&(e={});var o=this.em;t.id=t.id||this._createId();var i=function(){var o=n.pages.add(new ct(t,{em:n.em,config:n.config}),e);return e.select&&n.select(o),o};return!e.silent&&o.trigger(Qe,t,i,e),e.abort?void 0:i()},o.prototype.remove=function(e,n){var o=this;void 0===n&&(n={});var i=this.em,r=(0,t.isString)(e)?this.get(e):e,s=function(){return r&&o.pages.remove(r,n),r};return!n.silent&&i.trigger($e,r,s,n),!n.abort&&s()},o.prototype.get=function(t){return this.pages.filter((function(e){return e.get(e.idAttribute)===t}))[0]},o.prototype.getMain=function(){var t=this.pages;return t.filter((function(t){return t.get('type')===Re}))[0]||t.at(0)},o.prototype.getAllWrappers=function(){var e=this.getAll();return(0,t.unique)((0,t.flatten)(e.map((function(t){return t.getAllFrames().map((function(t){return t.getComponent()}))}))))},o.prototype.select=function(e,n){void 0===n&&(n={});var o=(0,t.isString)(e)?this.get(e):e;return o&&(this.em.trigger(Ce,o,n),this.model.set('selected',o,n)),this},o.prototype.getSelected=function(){return this.model.get('selected')},o.prototype.destroy=function(){var t=this;this.pages.off().reset(),this.model.stopListening(),this.model.clear({silent:!0}),['selected','model'].map((function(e){return t[e]=0}))},o.prototype.store=function(){return this.getProjectData()},o.prototype.load=function(t){var e=this.loadProjectData(t,{all:this.pages,reset:!0});return this.pages.forEach((function(t){return t.getFrames().initRefs()})),e},o.prototype._createId=function(){var t,n=this.getAll().length+16,o=this.getAllMap();do{t=(0,e.createId)(n)}while(o[t]);return t},o.prototype.render=function(t){var e=this.getConfig(),n=this.em,o=this.all,i=new Gt({collection:o,module:this},we(we({},e),{em:n})),r=new Oe(this.getSelected(),we(we({},e),{em:n}));i.on('selected',r.changePage,r);var s=document.createElement('div');return s.append(r.render().el),s.append(i.render().el),s},o}(O);const Ve=Me;var De=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ie=function(t){function e(e){var n=this,o=e.em,i=e.config,r=i.scripts,s=i.styles;return(n=t.call(this,e,{scripts:r,styles:s})||this).set('frames',new st(e)),n.on('change:zoom',n.onZoomChange),n.on('change:x change:y',n.onCoordsChange),n.on('change:pointer change:pointerScreen',n.onPointerChange),n.listenTo(o,"change:device ".concat(N),n.updateDevice),n.listenTo(o,Pe,n._pageUpdated),n}return De(e,t),e.prototype.defaults=function(){return{frame:'',frames:[],rulers:!1,zoom:100,x:0,y:0,scripts:[],styles:[],pointer:u.pH,pointerScreen:u.pH}},Object.defineProperty(e.prototype,"frames",{get:function(){return this.get('frames')},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this.em.Pages.getMain();this.set('frames',t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},e.prototype._pageUpdated=function(t,e){var n=this.em;n.setSelected(),n.get('readyCanvas')&&n.stopDefault(),null==e||e.getFrames().map((function(t){return t.disable()})),this.set('frames',t.getFrames()),this.updateDevice({frame:t.getMainFrame()})},e.prototype.updateDevice=function(t){void 0===t&&(t={});var e=this.em,n=e.getDeviceModel(),o=t.frame||e.getCurrentFrameModel();if(o&&n){var i=n.attributes,r=i.width,s=i.height;o.set({width:r,height:s},{noUndo:1})}},e.prototype.onZoomChange=function(){var t=this.em,e=this.module;this.get('zoom')<1&&this.set('zoom',1),t.trigger(e.events.zoom)},e.prototype.onCoordsChange=function(){var t=this.em,e=this.module;t.trigger(e.events.coords)},e.prototype.onPointerChange=function(){var t=this.em,e=this.module;t.trigger(e.events.pointer)},e.prototype.getPointerCoords=function(t){void 0===t&&(t=u.vA.World);var e=this.attributes,n=e.pointer,o=e.pointerScreen;return t===u.vA.World?n:o},e}(w.Z);const Ne=Ie;var We=n(201),Xe=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Le=function(e){function n(n,o){void 0===o&&(o=[]);var i=e.call(this,n,o,We.Z)||this;i.on('add',i.onAdd),i.on('change',i.onChange),i.on('remove',i.onRemove);var r=i.em;i.refreshDbn=(0,t.debounce)((function(){return i.refresh()}),0);return i.listenTo(r,'component:resize styleable:change component:input component:update frame:updated undo redo',(function(){return i.refreshDbn()})),i}return Xe(n,e),Object.defineProperty(n.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"events",{get:function(){return this.module.events},enumerable:!1,configurable:!0}),n.prototype.refresh=function(){var t=this.em,e=this.events;t.trigger(e.spot)},n.prototype.onAdd=function(t){this.__trgEvent(this.events.spotAdd,{spot:t})},n.prototype.onChange=function(t){this.__trgEvent(this.events.spotUpdate,{spot:t})},n.prototype.onRemove=function(t){this.__trgEvent(this.events.spotRemove,{spot:t})},n.prototype.__trgEvent=function(t,e){this.module.em.trigger(t,e),this.refreshDbn()},n}(G);const Ye=Le;var ze;!function(t){t["dragEnter"]="canvas:dragenter",t["dragOver"]="canvas:dragover",t["dragEnd"]="canvas:dragend",t["dragData"]="canvas:dragdata",t["drop"]="canvas:drop",t["spot"]="canvas:spot",t["spotAdd"]="canvas:spot:add",t["spotUpdate"]="canvas:spot:update",t["spotRemove"]="canvas:spot:remove",t["coords"]="canvas:coords",t["zoom"]="canvas:zoom",t["pointer"]="canvas:pointer",t["frameLoad"]="canvas:frame:load",t["frameLoadHead"]="canvas:frame:load:head",t["frameLoadBody"]="canvas:frame:load:body"}(ze||(ze={}));const qe=ze;var Ue=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Be=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ue(e,t),Object.defineProperty(e.prototype,"pfx",{get:function(){return this.ppfx+this.config.stylePrefix||''},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ppfx",{get:function(){return this.em.config.stylePrefix||''},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"module",{get:function(){var t,e;return null!==(e=null===(t=this.model)||void 0===t?void 0:t.module)&&void 0!==e?e:this.collection.module},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"config",{get:function(){return this.module.config},enumerable:!1,configurable:!0}),e.prototype.preinitialize=function(t){this.className=''},e}(u.G7);const Fe=Be;var Ge=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const He=function(t){function e(e,n){void 0===e&&(e={}),void 0===n&&(n=!1);var o=t.call(this,e)||this;return o.itemsView='',o.itemType='type',o.reuseView=!1,o.viewCollection=[],n&&o.listenTo(o.collection,'add',o.addTo),o}return Ge(e,t),e.prototype.addTo=function(t){this.add(t)},e.prototype.itemViewNotFound=function(t){},e.prototype.add=function(t,e){var n,o=this.reuseView,i=this.viewCollection,r=e||null,s=t.get(this.itemType);n=t.view&&o?t.view:this.renderView(t,s),i.push(n);var a=n.render().el;r?r.appendChild(a):this.$el.append(a)},e.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.clearItems(),this.$el.empty(),this.collection.length&&this.collection.each((function(n){return t.add(n,e)})),this.$el.append(e),this.onRender(),this},e.prototype.onRender=function(){},e.prototype.onRemoveBefore=function(t,e){},e.prototype.onRemove=function(t,e){},e.prototype.remove=function(t){void 0===t&&(t={});var e=this.viewCollection;return this.onRemoveBefore(e,t),this.clearItems(),u.G7.prototype.remove.apply(this,t),this.onRemove(e,t),this},e.prototype.clearItems=function(){this.viewCollection},e}(Fe);var Ke=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Je=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;n.config=e.config||{};var o=n.model;return n.listenTo(o,'change',n.render),n.listenTo(o,'destroy remove',n.remove),n.listenTo(o.get('selectors'),'change',n.render),n}return Ke(e,t),e.prototype.tagName=function(){return'style'},e.prototype.render=function(){var t=this.model,e=this.el,n=t.get('important');return e.innerHTML=t.toCSS({important:n}),this},e}(u.G7);var tn=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const en=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tn(e,t),e.prototype._createElement=function(){return document.createTextNode('')},e.prototype.render=function(){var t=this.model,e=t.get('important');return this.el.textContent=t.getDeclaration({important:e}),this},e}(Je);var nn=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),on=function(t,e){return"".concat(t).concat(e?"-".concat(parseFloat(e)):'')},rn=function(e){function n(n){var o=e.call(this,n)||this;(0,t.bindAll)(o,'sortRules');var i=n.config||{};o.atRules={},o.config=i,o.em=i.em,o.pfx=i.stylePrefix||'',o.className=o.pfx+'rules';var r=o.collection;return o.listenTo(r,'add',o.addTo),o.listenTo(r,'reset',o.render),o}return nn(n,e),n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){if(this.renderStarted){var n,o,i=e||null,r={model:t,config:this.config};if('keyframes'===t.get('atRuleType')){var s=t.getAtRule(),a=this.atRules[s];if(!a){var l=document.createElement('style');a=document.createTextNode(''),l.appendChild(document.createTextNode("".concat(s,"{"))),l.appendChild(a),l.appendChild(document.createTextNode('}')),this.atRules[s]=a,n=l}o=new en(r),a.appendData(o.render().el.textContent)}else n=(o=new Je(r)).render().el;var c=this.className,u=t.get('mediaText'),h=on(c),p=h;if(u&&(p=on(c,this.getMediaWidth(u))),n){var d=i||this.el,f=void 0;try{f=d.querySelector("#".concat(p))}catch(t){}f||(f=d.querySelector("#".concat(h))),null==f||f.appendChild(n)}return n}},n.prototype.getMediaWidth=function(t){return t&&t.replace("(".concat(this.em.getConfig().mediaCondition,": "),'').replace(')','')},n.prototype.sortRules=function(t,e){var n=-1!==(this.em.getConfig().mediaCondition||'').indexOf('min-width');return n?(n?t:e)-(n?e:t):0},n.prototype.render=function(){var t=this;this.renderStarted=!0,this.atRules={};var e=this,n=e.em,o=e.$el,i=e.collection,r=this.className,s=document.createDocumentFragment();o.empty();var a=n.Devices.getAll().pluck('priority').sort(this.sortRules);return a.every((function(t){return t}))&&a.unshift(0),a.forEach((function(t){return s.appendChild((0,ue.ut)('div',{id:on(r,t)}))})),i.each((function(e){return t.addToCollection(e,s)})),o.append(s),o.attr('class',r),this},n}(u.G7);const sn=rn;var an=void 0&&(void 0).__assign||function(){return an=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},an.apply(this,arguments)},ln=function(){function e(e,n){var o=this;this.em=e,this.canvas=e.Canvas;var i=n||this.canvas.getFrames().map((function(t){return t.getComponent().getEl()})),r=Array.isArray(i)?i:[i];this.el=r[0],this.counter=0,(0,t.bindAll)(this,'handleDragEnter','handleDragOver','handleDrop','handleDragLeave'),r.forEach((function(t){return o.toggleEffects(t,!0)}))}return e.prototype.toggleEffects=function(t,e){var n={on:ue.on,off:ue.S1},o=e?'on':'off';n[o](t,'dragenter',this.handleDragEnter),n[o](t,'dragover',this.handleDragOver),n[o](t,'drop',this.handleDrop),n[o](t,'dragleave',this.handleDragLeave)},e.prototype.__customTglEff=function(t){var e,n=t?ue.on:ue.S1,o=this.el.ownerDocument,i=null===(e=o.defaultView)||void 0===e?void 0:e.frameElement;this.sortOpts=t?{onStart:function(t){var e=t.sorter;(0,ue.on)(i,'pointermove',e.onMove)},onEnd:function(t){var e=t.sorter;(0,ue.S1)(i,'pointermove',e.onMove)},customTarget:function(t){var e=t.event;return o.elementFromPoint(e.clientX,e.clientY)}}:null,n(i,'pointerenter',this.handleDragEnter),n(i,'pointermove',this.handleDragOver),n(document,'pointerup',this.handleDrop),n(i,'pointerout',this.handleDragLeave)},e.prototype.startCustom=function(){this.__customTglEff(!0)},e.prototype.endCustom=function(t){this.over?this.endDrop(t):this.__customTglEff(!1)},e.prototype.endDrop=function(t,e){var n=this.em,o=this.dragStop;this.counter=0,o&&o(t||!this.over),this.__customTglEff(!1),n.trigger('canvas:dragend',e)},e.prototype.handleDragLeave=function(t){this.updateCounter(-1,t)},e.prototype.updateCounter=function(t,e){this.counter+=t,0===this.counter&&this.endDrop(!0,e)},e.prototype.handleDragEnter=function(t){var e=this,n=this.em,o=this.canvas,i=t.dataTransfer,r=n.get('dragContent');if((r||o.getConfig().allowExternalDrop)&&(this.updateCounter(1,t),!this.over)){this.over=!0;var s,a,l=n.Utils,c=r||'<br>';if(n.stopDefault(),n.inAbsoluteMode()){var u=n.Components.getWrapper(),h=u.append({})[0],p=n.Commands.run('core:component-drag',{event:t,guidesInfo:1,center:1,target:h,onEnd:function(t,n,r){var s;if(!r.cancelled){s=u.append(c)[0];var a=o.getOffset(),l=h.getStyle(),p=l.top,d=l.left,f=l.position,g=(0,ue.GX)(t.target),m=parseInt("".concat(parseFloat(d)+g.x-a.left),10),v=parseInt("".concat(parseFloat(p)+g.y-a.top),10);s.addStyle({left:m+'px',top:v+'px',position:f})}e.handleDragEnd(s,i),h.remove()}});s=function(e){return p.stop(t,{cancel:e})},a=function(t){return c=t}}else{var d=new l.Sorter(an({em:n,wmargin:1,nested:1,canvasRelative:1,direction:'a',container:this.el,placer:o.getPlacerEl(),containerSel:'*',itemSel:'*',pfx:'gjs-',onEndMove:function(t){return e.handleDragEnd(t,i)},document:this.el.ownerDocument},this.sortOpts||{}));d.setDropContent(c),d.startSort(),this.sorter=d,s=function(t){t&&(d.moved=!1),d.endMove()},a=function(t){return d.setDropContent(t)}}this.dragStop=s,this.dragContent=a,n.trigger('canvas:dragenter',i,c)}},e.prototype.handleDragEnd=function(t,e){var n=this.em;this.over=!1,t&&(n.set('dragResult',t),n.trigger('canvas:drop',e,t)),n.runDefault({preserveSelected:1})},e.prototype.handleDragOver=function(t){t.preventDefault(),this.em.trigger('canvas:dragover',t)},e.prototype.handleDrop=function(t){t.preventDefault();var e=this.dragContent,n=t.dataTransfer,o=this.getContentByData(n).content;t.target.style.border='',o&&e&&e(o),this.endDrop(!o,t)},e.prototype.getContentByData=function(e){var n=this.em,o=e&&e.types,i=e&&e.files||[],r=n.get('dragContent'),s=e&&e.getData('text');if(i.length){s=[];for(var a=0;a<i.length;a++){var l=i[a],c=l.type.split('/')[0];'image'==c&&s.push({type:c,file:l,attributes:{alt:l.name}})}}else if(r)s=r;else if((0,t.indexOf)(o,'text/html')>=0)s=e&&e.getData('text/html').replace(/<\/?meta[^>]*>/g,'');else if((0,t.indexOf)(o,'text/uri-list')>=0)s={type:'link',attributes:{href:s},content:s};else if((0,t.indexOf)(o,'text/json')>=0){var u=e&&e.getData('text/json');u&&(s=JSON.parse(u))}else 1===o.length&&'text/plain'===o[0]&&(s="<div>".concat(s,"</div>"));var h={content:s};return n.trigger('canvas:dragdata',e,h),h},e}();const cn=ln;var un=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),hn=void 0&&(void 0).__assign||function(){return hn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},hn.apply(this,arguments)},pn=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},dn=function(n){function o(o,i){var r=n.call(this,{model:o})||this;r.dragging=!1,r.loaded=!1,r.lastMaxHeight=0,r.tools={},(0,t.bindAll)(r,'updateClientY','stopAutoscroll','autoscroll','_emitUpdate');var s=r.el;r.module._config=hn(hn({},r.config||{}),{frameView:r}),r.frameWrapView=i,r.showGlobalTools=(0,t.debounce)(r.showGlobalTools.bind(r),50);var a=r.getCanvasModel();return r.listenTo(o,'change:head',r.updateHead),r.listenTo(a,'change:styles',r.renderStyles),o.view=r,(0,e.setViewEl)(s,r),r}return un(o,n),Object.defineProperty(o.prototype,"tagName",{get:function(){return'iframe'},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"attributes",{get:function(){return{allowfullscreen:'allowfullscreen'}},enumerable:!1,configurable:!0}),o.prototype.getBoxRect=function(){var t=this.el,e=this.module,n=e.getCanvasView(),o=e.getCoords(),i=t.getBoundingClientRect(),r=n.getCanvasOffset(),s=n.getViewportDelta(),a=e.getZoomMultiplier();return{x:(i.x-r.left-s.x-o.x)*a,y:(i.y-r.top-s.y-o.y)*a,width:i.width*a,height:i.height*a}},o.prototype.updateHead=function(){var t=this.model,e=this.getHead(),n=[],o=[],i=t.head,r=t.previous('head'),s=function(t){return void 0===t&&(t={}),Object.keys(t).sort().map((function(e){return"[".concat(e,"=\"").concat(t[e],"\"]")})).join('')},a=function(t,e,n){t.forEach((function(t){var o=t.tag,i=t.attributes;!e.some((function(t){return t.tag===o&&s(t.attributes)===s(i)}))&&n.push(t)}))};a(i,r,o),a(r,i,n),n.forEach((function(t){var n,o=e.querySelector("".concat(t.tag).concat(s(t.attributes)));null===(n=null==o?void 0:o.parentNode)||void 0===n||n.removeChild(o)})),(0,ue.SJ)(e,o)},o.prototype.getEl=function(){return this.el},o.prototype.getCanvasModel=function(){return this.em.Canvas.getModel()},o.prototype.getWindow=function(){return this.getEl().contentWindow},o.prototype.getDoc=function(){return this.getEl().contentDocument},o.prototype.getHead=function(){return this.getDoc().querySelector('head')},o.prototype.getBody=function(){return this.getDoc().querySelector('body')},o.prototype.getWrapper=function(){return this.getBody().querySelector('[data-gjs-type=wrapper]')},o.prototype.getJsContainer=function(){return this.jsContainer||(this.jsContainer=(0,ue.ut)('div',{class:"".concat(this.ppfx,"js-cont")})),this.jsContainer},o.prototype.getToolsEl=function(){var t;return null===(t=this.frameWrapView)||void 0===t?void 0:t.elTools},o.prototype.getGlobalToolsEl=function(){return this.em.Canvas.getGlobalToolsEl()},o.prototype.getHighlighter=function(){return this._getTool('[data-hl]')},o.prototype.getBadgeEl=function(){return this._getTool('[data-badge]')},o.prototype.getOffsetViewerEl=function(){return this._getTool('[data-offset]')},o.prototype.getRect=function(){return this.rect||(this.rect=this.el.getBoundingClientRect()),this.rect},o.prototype.getOffsetRect=function(){var t=this.el,e=this.getBody(),n=e.scrollTop,o=e.scrollLeft,i=t.offsetHeight,r=t.offsetWidth;return{top:t.offsetTop,left:t.offsetLeft,height:i,width:r,scrollTop:n,scrollLeft:o,scrollBottom:n+i,scrollRight:o+r}},o.prototype._getTool=function(t){var e=this.tools,n=this.getToolsEl();return e[t]||(e[t]=n.querySelector(t)),e[t]},o.prototype.remove=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._toggleEffects(!1),this.tools={},null===(t=this.wrapper)||void 0===t||t.remove(),Fe.prototype.remove.apply(this,e),this},o.prototype.startAutoscroll=function(){var t=this;this.lastMaxHeight=this.getWrapper().offsetHeight-this.el.offsetHeight,setTimeout((function(){t._toggleAutoscrollFx(!0),requestAnimationFrame(t.autoscroll)}),0)},o.prototype.autoscroll=function(){if(this.dragging){var e=this.lastClientY,n=this.em.Canvas,o=this.getWindow(),i=o.pageYOffset,r=e||0,s=n.getConfig().autoscrollLimit,a=this.getRect().height-s,l=i;if(r<s&&(l-=s-r),r>a&&(l+=r-a),!(0,t.isUndefined)(e)&&l!==i&&l>0&&l<this.lastMaxHeight)this.getGlobalToolsEl().style.opacity='0',this.showGlobalTools(),o.scrollTo(0,l),n.spots.refreshDbn();requestAnimationFrame(this.autoscroll)}},o.prototype.updateClientY=function(t){t.preventDefault(),this.lastClientY=(0,ue.VB)(t).clientY*this.em.getZoomDecimal()},o.prototype.showGlobalTools=function(){this.getGlobalToolsEl().style.opacity=''},o.prototype.stopAutoscroll=function(){this.dragging&&this._toggleAutoscrollFx(!1)},o.prototype._toggleAutoscrollFx=function(t){this.dragging=t;var e=this.getWindow(),n=t?'on':'off',o={on:ue.on,off:ue.S1};o[n](e,'mousemove dragover',this.updateClientY),o[n](e,'mouseup',this.stopAutoscroll)},o.prototype.render=function(){var t=this,e=t.$el,n=t.ppfx,o=t.em;return e.attr({class:"".concat(n,"frame")}),this.renderScripts(),o.trigger('frame:render',this),this},o.prototype.renderScripts=function(){var e=this,n=this,o=n.el,i=n.model,r=n.em,s='frame:load',a={el:o,model:i,view:this},l=this.getCanvasModel(),c=function(n){var i;if(n.length>0){var l=n.shift(),u=(0,ue.ut)('script',hn({type:'text/javascript'},(0,t.isString)(l)?{src:l}:l));null===(i=o.contentDocument)||void 0===i||i.head.appendChild(u),u.hasAttribute('nomodule')&&'noModule'in HTMLScriptElement.prototype?c(n):u.onerror=u.onload=c.bind(null,n)}else null==r||r.trigger(qe.frameLoadHead,a),e.renderBody(),null==r||r.trigger(qe.frameLoadBody,a),null==r||r.trigger(s,a)};o.onload=function(){var t=e.config.frameContent;if(t){var n=e.getDoc();n.open(),n.write(t),n.close()}a.window=e.getWindow(),null==r||r.trigger("".concat(s,":before"),a),null==r||r.trigger(qe.frameLoad,a),c(pn([],l.get('scripts'),!0))}},o.prototype.renderStyles=function(e){void 0===e&&(e={});var n=this.getHead(),o=this.getCanvasModel(),i=function(e){return e.map((function(e){return{tag:'link',attributes:hn({rel:'stylesheet'},(0,t.isString)(e)?{href:e}:e)}}))},r=i(e.prev||o.previous('styles')),s=i(o.get('styles')),a=[],l=[],c=function(t,e,n){t.forEach((function(t){var o=t.attributes.href;!e.some((function(t){return t.attributes.href===o}))&&n.push(t)}))};c(s,r,l),c(r,s,a),a.forEach((function(t){var e,o=n.querySelector("link[href=\"".concat(t.attributes.href,"\"]"));null===(e=null==o?void 0:o.parentNode)||void 0===e||e.removeChild(o)})),(0,ue.SJ)(n,l)},o.prototype.renderBody=function(){var t,n,o=this,i=this,r=i.config,s=i.em,a=i.model,l=i.ppfx,c=this.getDoc(),u=this.getBody(),h=this.getWindow(),p=a.hasAutoHeight(),d=s.config;h._isEditor=!0,this.renderStyles({prev:[]});(0,ue.R3)(u,"<style>\n      ".concat(d.baseCss||r.frameStyle||'',"\n\n      ").concat(p?'body { overflow: hidden }':'',"\n\n      [data-gjs-type=\"wrapper\"] {\n        ").concat(p?'':'min-height: 100vh;',"\n        padding-top: 0.001em;\n      }\n\n      .").concat(l,"dashed *[data-gjs-highlightable] {\n        outline: 1px dashed rgba(170,170,170,0.7);\n        outline-offset: -2px;\n      }\n\n      .").concat(l,"selected {\n        outline: 2px solid #3b97e3 !important;\n        outline-offset: -2px;\n      }\n\n      .").concat(l,"selected-parent {\n        outline: 2px solid ").concat('#ffca6f'," !important\n      }\n\n      .").concat(l,"no-select {\n        user-select: none;\n        -webkit-user-select:none;\n        -moz-user-select: none;\n      }\n\n      .").concat(l,"freezed {\n        opacity: 0.5;\n        pointer-events: none;\n      }\n\n      .").concat(l,"no-pointer {\n        pointer-events: none;\n      }\n\n      .").concat(l,"plh-image {\n        background: #f5f5f5;\n        border: none;\n        height: 100px;\n        width: 100px;\n        display: block;\n        outline: 3px solid #ffca6f;\n        cursor: pointer;\n        outline-offset: -2px\n      }\n\n      .").concat(l,"grabbing {\n        cursor: grabbing;\n        cursor: -webkit-grabbing;\n      }\n\n      .").concat(l,"is__grabbing {\n        overflow-x: hidden;\n      }\n\n      .").concat(l,"is__grabbing,\n      .").concat(l,"is__grabbing * {\n        cursor: grabbing !important;\n      }\n\n      ").concat(d.canvasCss||'',"\n      ").concat(d.protectedCss||'',"\n    </style>"));var f=a.root,g=s.Components.getType('wrapper').view;this.wrapper=new g({model:f,config:hn(hn({},f.config),{em:s,frameView:this})}).render(),(0,ue.R3)(u,null===(t=this.wrapper)||void 0===t?void 0:t.el),(0,ue.R3)(u,new sn({collection:a.getStyles(),config:hn(hn({},s.Css.getConfig()),{frameView:this})}).render().el),(0,ue.R3)(u,this.getJsContainer()),(0,ue.on)(u,'click',(function(t){var e;return t&&'A'==(null===(e=t.target)||void 0===e?void 0:e.tagName)&&t.preventDefault()})),(0,ue.on)(u,'submit',(function(t){return t&&t.preventDefault()})),[{event:'keydown keyup keypress',class:'KeyboardEvent'},{event:'mousedown mousemove mouseup',class:'MouseEvent'},{event:'pointerdown pointermove pointerup',class:'PointerEvent'},{event:'wheel',class:'WheelEvent',opts:{passive:!r.infiniteCanvas}}].forEach((function(t){return t.event.split(' ').forEach((function(e){c.addEventListener(e,(function(e){return o.el.dispatchEvent((0,ue.t3)(e,t.class))}),t.opts)}))})),this._toggleEffects(!0),(0,e.hasDnd)(s)&&(this.droppable=new cn(s,null===(n=this.wrapper)||void 0===n?void 0:n.el)),this.loaded=!0,a.trigger('loaded')},o.prototype._toggleEffects=function(t){var e=t?ue.on:ue.S1,n=this.getWindow();n&&e(n,"".concat(ue.G1," resize"),this._emitUpdate)},o.prototype._emitUpdate=function(){this.model._emitUpdated()},o}(Fe);const fn=dn;var gn=n(250),mn=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vn=void 0&&(void 0).__assign||function(){return vn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},vn.apply(this,arguments)},yn=function(e){function n(n,o){var i=e.call(this,{model:n})||this;(0,t.bindAll)(i,'onScroll','frameLoaded','updateOffset','remove','startDrag');vn(vn({},n.config),{frameWrapView:i});return i.cv=o,i.frame=new fn(n,i),i.classAnim="".concat(i.ppfx,"frame-wrapper--anim"),i.updateOffset=(0,t.debounce)(i.updateOffset.bind(i),0),i.updateSize=(0,t.debounce)(i.updateSize.bind(i),0),i.listenTo(n,'loaded',i.frameLoaded),i.listenTo(n,'change:x change:y',i.updatePos),i.listenTo(n,'change:width change:height',i.updateSize),i.listenTo(n,'destroy remove',i.remove),i.updatePos(),i.setupDragger(),i}return mn(n,e),n.prototype.events=function(){return{'click [data-action-remove]':'remove','mousedown [data-action-move]':'startDrag'}},n.prototype.setupDragger=function(){var t,e,n,o=this,i=this.module,r=this.model,s=function(t){i.toggleFramesEvents(t)};this.dragger=new gn.Z({onStart:function(){var i=r.attributes,a=i.x,l=i.y;n=o.em.getZoomMultiplier(),t=a,e=l,s(!1)},onEnd:function(){return s(!0)},setPosition:function(o){r.set({x:t+o.x*n,y:e+o.y*n})}})},n.prototype.startDrag=function(t){var e;t&&(null===(e=this.dragger)||void 0===e||e.start(t))},n.prototype.__clear=function(t){var e=this.frame;e&&e.remove(t),(0,ue.L_)(this.elTools)},n.prototype.remove=function(t){var e=this;return this.__clear(t),Fe.prototype.remove.apply(this,t),['frame','dragger','cv','elTools'].forEach((function(t){return e[t]=0})),this},n.prototype.updateOffset=function(){var t,e=this,n=e.em,o=e.$el,i=e.frame;n&&!n.destroyed&&(n.runDefault({preserveSelected:1}),o.removeClass(this.classAnim),null===(t=null==i?void 0:i.model)||void 0===t||t._emitUpdated())},n.prototype.updatePos=function(t){var e=this.model,n=this.el,o=e.attributes,i=o.x,r=o.y,s=n.style;this.frame.rect=void 0,s.left=isNaN(i)?i:"".concat(i,"px"),s.top=isNaN(r)?r:"".concat(r,"px"),t&&this.updateOffset()},n.prototype.updateSize=function(){this.updateDim()},n.prototype.updateDim=function(){var e=this,n=e.em,o=e.el,i=e.$el,r=e.model,s=e.classAnim,a=e.frame;if(a){a.rect=void 0,i.addClass(s);var l=this.__handleSize(),c=l.noChanges,u=l.width,h=l.height;((0,t.isNull)(u)||(0,t.isNull)(h))&&r.set(vn(vn({},u?{}:{width:o.offsetWidth}),h?{}:{height:o.offsetHeight}),{silent:1}),n.stopDefault({preserveSelected:1}),c?this.updateOffset():setTimeout(this.updateOffset,350)}},n.prototype.onScroll=function(){var t=this.frame;this.em.trigger('frame:scroll',{frame:t,body:t.getBody(),target:t.getWindow()})},n.prototype.frameLoaded=function(){var t=this.frame;this.config;t.getWindow().onscroll=this.onScroll,this.updateDim()},n.prototype.__handleSize=function(){var e,n,o='px',i=this.model,r=this.el.style,s=i.attributes,a=s.width,l=s.height,c=r.width||'',u=r.height||'',h=a||'',p=l||'',d=c==h&&u==p,f=(0,t.isNumber)(h)?"".concat(h).concat(o):h,g=(0,t.isNumber)(p)?"".concat(p).concat(o):p;if(r.width=f,i.hasAutoHeight()){var m=this.frame.el;if(m.contentDocument){var v=m.contentDocument,y=new ResizeObserver((function(){r.height="".concat(v.body.scrollHeight,"px")}));y.observe(v.body),null===(e=this.sizeObserver)||void 0===e||e.disconnect(),this.sizeObserver=y}}else r.height=g,null===(n=this.sizeObserver)||void 0===n||n.disconnect(),delete this.sizeObserver;return{noChanges:d,width:a,height:l,newW:h,newH:p}},n.prototype.render=function(){var t=this,e=t.frame,n=t.$el,o=t.ppfx,i=t.cv,r=t.model,s=t.el,a=r.attributes.onRender;this.__clear(),this.__handleSize(),e.render(),n.empty().attr({class:"".concat(o,"frame-wrapper")}).append("\n      <div class=\"".concat(o,"frame-wrapper__top gjs-two-color\" data-frame-top>\n        <div class=\"").concat(o,"frame-wrapper__name\" data-action-move>\n          ").concat(r.get('name')||'',"\n        </div>\n        <div class=\"").concat(o,"frame-wrapper__top-r\">\n          <div class=\"").concat(o,"frame-wrapper__icon\" data-action-remove style=\"display: none\">\n            <svg viewBox=\"0 0 24 24\"><path d=\"M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12z\"></path></svg>\n          </div>\n        </div>\n      </div>\n      <div class=\"").concat(o,"frame-wrapper__right\" data-frame-right></div>\n      <div class=\"").concat(o,"frame-wrapper__left\" data-frame-left></div>\n      <div class=\"").concat(o,"frame-wrapper__bottom\" data-frame-bottom></div>\n      ")).append(e.el);var l=(0,ue.ut)('div',{class:"".concat(o,"tools"),style:'pointer-events:none; display: none'},"\n      <div class=\"".concat(o,"highlighter\" data-hl></div>\n      <div class=\"").concat(o,"badge\" data-badge></div>\n      <div class=\"").concat(o,"placeholder\">\n        <div class=\"").concat(o,"placeholder-int\"></div>\n      </div>\n      <div class=\"").concat(o,"ghost\"></div>\n      <div class=\"").concat(o,"toolbar\" style=\"pointer-events:all\"></div>\n      <div class=\"").concat(o,"resizer\"></div>\n      <div class=\"").concat(o,"offset-v\" data-offset>\n        <div class=\"gjs-marginName\" data-offset-m>\n          <div class=\"gjs-margin-v-el gjs-margin-v-top\" data-offset-m-t></div>\n          <div class=\"gjs-margin-v-el gjs-margin-v-bottom\" data-offset-m-b></div>\n          <div class=\"gjs-margin-v-el gjs-margin-v-left\" data-offset-m-l></div>\n          <div class=\"gjs-margin-v-el gjs-margin-v-right\" data-offset-m-r></div>\n        </div>\n        <div class=\"gjs-paddingName\" data-offset-m>\n          <div class=\"gjs-padding-v-el gjs-padding-v-top\" data-offset-p-t></div>\n          <div class=\"gjs-padding-v-el gjs-padding-v-bottom\" data-offset-p-b></div>\n          <div class=\"gjs-padding-v-el gjs-padding-v-left\" data-offset-p-l></div>\n          <div class=\"gjs-padding-v-el gjs-padding-v-right\" data-offset-p-r></div>\n        </div>\n      </div>\n      <div class=\"").concat(o,"offset-fixed-v\"></div>\n    "));this.elTools=l;var c=null==i?void 0:i.toolsWrapper;return c&&c.appendChild(l),a&&a({el:s,elTop:s.querySelector('[data-frame-top]'),elRight:s.querySelector('[data-frame-right]'),elBottom:s.querySelector('[data-frame-bottom]'),elLeft:s.querySelector('[data-frame-left]'),frame:r,frameWrapperView:this,remove:this.remove,startDrag:this.startDrag}),this},n}(Fe);const _n=yn;var On=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bn=function(t){function e(e,n){void 0===e&&(e={});var o=t.call(this,e,!0)||this;return o.listenTo(o.collection,'reset',o.render),o.canvasView=n.canvasView,o._module=n.module,o}return On(e,t),e.prototype.onRemoveBefore=function(t,e){void 0===e&&(e={}),t.forEach((function(t){return t.remove(e)}))},e.prototype.onRender=function(){var t=this.$el,e=this.ppfx;t.attr({class:"".concat(e,"frames")})},e.prototype.clearItems=function(){(this.viewCollection||[]).forEach((function(t){return t.remove()})),this.viewCollection=[]},e.prototype.renderView=function(t,e){return new _n(t,this.canvasView)},e}(He);const wn=bn;var xn=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Sn=void 0&&(void 0).__assign||function(){return Sn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Sn.apply(this,arguments)},kn=function(n){function o(e){var o=n.call(this,{model:e})||this;o.ready=!1,(0,t.bindAll)(o,'clearOff','onKeyPress','onWheel','onPointer');var i=o,r=i.em,s=i.pfx,a=i.ppfx,l=o.module.events;return o.className="".concat(s,"canvas ").concat(a,"no-touch-actions").concat(r.config.customUI?'':" ".concat(s,"canvas-bg")),o.clsUnscale="".concat(s,"unscale"),o._initFrames(),o.listenTo(r,'change:canvasOffset',o.clearOff),o.listenTo(r,'component:selected',o.checkSelected),o.listenTo(r,"".concat(l.coords," ").concat(l.zoom),o.updateFrames),o.listenTo(e,'change:frames',o._onFramesUpdate),o.toggleListeners(!0),o}return xn(o,n),o.prototype.template=function(){var t=this.pfx;return"\n      <div class=\"".concat(t,"canvas__frames\" data-frames>\n        <div class=\"").concat(t,"canvas__spots\" data-spots></div>\n      </div>\n      <div id=\"").concat(t,"tools\" class=\"").concat(t,"canvas__tools\" data-tools></div>\n      <style data-canvas-style></style>\n    ")},o.prototype._onFramesUpdate=function(){this._initFrames(),this._renderFrames()},o.prototype._initFrames=function(){var t=this,e=t.frames,n=t.model,o=t.config,i=t.em,r=n.frames;i.set('readyCanvas',0),r.once('loaded:all',(function(){return i.set('readyCanvas',1)})),null==e||e.remove(),this.frames=new wn({collection:r},Sn(Sn({},o),{canvasView:this}))},o.prototype.checkSelected=function(t,e){var n;void 0===e&&(e={});var o=e.scroll,i=this.em.getCurrentFrame();o&&(null===(n=t.views)||void 0===n||n.forEach((function(t){t.frameView===i&&t.scrollIntoView(o)})))},o.prototype.remove=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return null===(t=this.frames)||void 0===t||t.remove(),this.frames=void 0,Fe.prototype.remove.apply(this,e),this.toggleListeners(!1),this},o.prototype.preventDefault=function(t){var e;t&&(t.preventDefault(),null===(e=t._parentEvent)||void 0===e||e.preventDefault())},o.prototype.toggleListeners=function(t){var e=this.el,n=this.config,o=t?ue.on:ue.S1;o(document,'keypress',this.onKeyPress),o(window,'scroll resize',this.clearOff),o(e,'wheel',this.onWheel,{passive:!n.infiniteCanvas}),o(e,'pointermove',this.onPointer)},o.prototype.screenToWorld=function(t,e){var n=this.module,o=n.getCoords(),i=n.getZoomMultiplier(),r=this.getViewportDelta();return{x:(t-o.x-r.x)*i,y:(e-o.y-r.y)*i}},o.prototype.onPointer=function(t){if(this.config.infiniteCanvas){var e=this.getCanvasOffset(),n=(0,ue.GX)(),o={x:t.clientX-e.left+n.x,y:t.clientY-e.top+n.y};if(t._parentEvent){var i=t.target.getBoundingClientRect(),r=this.module.getZoomDecimal();o.x=i.left-e.left+n.x+t.clientX*r,o.y=i.top-e.top+n.y+t.clientY*r}this.model.set({pointerScreen:o,pointer:this.screenToWorld(o.x,o.y)})}},o.prototype.onKeyPress=function(t){var e=this.em;' '!==(0,ue.sN)(t)||1===e.getZoomDecimal()||e.Canvas.isInputFocused()||(this.preventDefault(t),e.Editor.runCommand('core:canvas-move'))},o.prototype.onWheel=function(t){var e=this.module;if(this.config.infiniteCanvas){this.preventDefault(t);var n=t.deltaX,o=t.deltaY,i=e.getZoomDecimal(),r=(0,ue.Vb)(t),s=e.getCoords();if(r){var a=i-o*i*.01;e.setZoom(100*a);var l=this.model.getPointerCoords(u.vA.Screen),c=this.getCanvasOffset(),h=l.x-c.width/2,p=l.y-c.height/2,d=a/i,f=h-(h-s.x)*d,g=p-(p-s.y)*d;e.setCoords(f,g)}else this.onPointer(t),e.setCoords(s.x-n,s.y-o)}},o.prototype.updateFrames=function(t){var e=this.em,n=this.toolsWrapper,o={preserveSelected:1};this.updateFramesArea(),this.clearOff(),n.style.display='none',e.trigger('canvas:update',t),this.timerZoom&&clearTimeout(this.timerZoom),this.timerZoom=setTimeout((function(){e.stopDefault(o),e.runDefault(o),n.style.display=''}),300)},o.prototype.updateFramesArea=function(){var t=this,e=t.framesArea,n=t.model,o=t.module,i=t.cvStyle,r=t.clsUnscale,s=o.getZoomMultiplier();if(e){var a=n.attributes,l=a.x,c=a.y,u=o.getZoomDecimal();e.style.transform="scale(".concat(u,") translate(").concat(l*s,"px, ").concat(c*s,"px)")}i&&(i.innerHTML="\n        .".concat(r," { scale: ").concat(s," }\n      "))},o.prototype.fitViewport=function(n){var o,i;void 0===n&&(n={});var r=this,s=r.em,a=r.module,l=r.model,c=this.getCanvasOffset(),u=n.el,h=u&&(null===(o=(0,e.getComponentView)(u))||void 0===o?void 0:o.frameView),p=h?h.model:n.frame||s.getCurrentFrameModel()||l.frames.at(0),d=p.attributes,f=d.x,g=d.y,m={x:null!=f?f:0,y:null!=g?g:0,width:p.width,height:p.height};if(u){var v=this.getElBoxRect(u);m.x=m.x+v.x,m.y=m.y+v.y,m.width=v.width,m.height=v.height}var y=n.ignoreHeight,_=null!==(i=n.gap)&&void 0!==i?i:0,O=(0,t.isNumber)(_),b=O?_:_.x,w=O?_:_.y,x=m.width+2*b,S=m.height+2*w,k=c.width,P=c.height,C=k/x,T=P/S,E=y?C:Math.min(C,T),Q=100*E;a.setZoom(Q);var A={x:(-m.x+(p.width>=k?k/2-x/2:-b)+b)*E,y:(-m.y+P/2-S/2+w)*E};if(y){var $=a.getZoomMultiplier(),j=(P*$-P)/2;A.y=(-m.y+w)*E-j/$}a.setCoords(A.x,A.y)},o.prototype.isElInViewport=function(t){var n=(0,e.getElement)(t),o=(0,ue.Ut)(n),i=this.getFrameOffset(n),r=o.top,s=o.left;return r>=0&&s>=0&&r<=i.height&&s<=i.width},o.prototype.offset=function(t,e){void 0===e&&(e={});var n=e.noScroll,o=(0,ue.Ut)(t),i=n?{x:0,y:0}:(0,ue.GX)(t);return{top:o.top+i.y,left:o.left+i.x,width:o.width,height:o.height}},o.prototype.getRectToScreen=function(t){var e,n,o,i,r=this.module.getZoomDecimal(),s=this.module.getCoords(),a=this.getViewportDelta();return{x:(null!==(e=t.x)&&void 0!==e?e:0)*r+s.x+a.x||0,y:(null!==(n=t.y)&&void 0!==n?n:0)*r+s.y+a.y||0,width:(null!==(o=t.width)&&void 0!==o?o:0)*r,height:(null!==(i=t.height)&&void 0!==i?i:0)*r}},o.prototype.getElBoxRect=function(t,n){var o,i,r;void 0===n&&(n={});var s=this.module,a=(0,ue.Ut)(t),l=a.width,c=a.height,u=a.left,h=a.top,p=null===(o=(0,e.getComponentView)(t))||void 0===o?void 0:o.frameView,d=null==p?void 0:p.getBoxRect(),f=s.getZoomMultiplier(),g=null!==(i=null==d?void 0:d.x)&&void 0!==i?i:0,m=null!==(r=null==d?void 0:d.y)&&void 0!==r?r:0,v=this.el,y=(0,ue.GX)(),_={x:u+g+(v.scrollLeft+y.x)*f,y:h+m+(v.scrollTop+y.y)*f,width:l,height:c};return n.local&&(_.x=u,_.y=h),n.toScreen?this.getRectToScreen(_):_},o.prototype.getViewportRect=function(t){void 0===t&&(t={});var e=this.getCanvasOffset(),n=e.top,o=e.left,i=e.width,r=e.height,s=this.module;if(t.toWorld){var a=s.getZoomMultiplier(),l=s.getCoords(),c=this.getViewportDelta();return{x:(-l.x-c.x||0)*a,y:(-l.y-c.y||0)*a,width:i*a,height:r*a}}return{x:o,y:n,width:i,height:r}},o.prototype.getViewportDelta=function(t){void 0===t&&(t={});var e=this.module.getZoomMultiplier(),n=this.getCanvasOffset(),o=n.width,i=n.height;return{x:(o*e-o)/2/e,y:(i*e-i)/2/e}},o.prototype.clearOff=function(){this.frmOff=void 0,this.cvsOff=void 0},o.prototype.getFrameOffset=function(t){var e;if(!this.frmOff||t){var n=null===(e=this.frame)||void 0===e?void 0:e.el,o=null==t?void 0:t.ownerDocument.defaultView,i=o?o.frameElement:n;this.frmOff=this.offset(i||n)}return this.frmOff},o.prototype.getCanvasOffset=function(){return this.cvsOff||(this.cvsOff=this.offset(this.el)),this.cvsOff},o.prototype.getElementPos=function(t,e){void 0===e&&(e={});var n=this.module.getZoomDecimal(),o=this.getFrameOffset(t),i=this.el,r=this.getCanvasOffset(),s=this.offset(t,e),a=e.avoidFrameOffset?0:o.top,l=e.avoidFrameOffset?0:o.left,c=e.avoidFrameZoom?s.top:s.top*n,u=e.avoidFrameZoom?s.left:s.left*n;return{top:e.avoidFrameOffset?c:c+a-r.top+i.scrollTop,left:e.avoidFrameOffset?u:u+l-r.left+i.scrollLeft,height:e.avoidFrameZoom?s.height:s.height*n,width:e.avoidFrameZoom?s.width:s.width*n,zoom:n,rect:s}},o.prototype.getElementOffsets=function(t){if(!t||(0,ue.BM)(t))return{};var e={},n=window.getComputedStyle(t),o=this.module.getZoomDecimal();return['marginTop','marginRight','marginBottom','marginLeft','paddingTop','paddingRight','paddingBottom','paddingLeft'].forEach((function(t){e[t]=parseFloat(n[t])*o})),e},o.prototype.getPosition=function(t){var e;void 0===t&&(t={});var n=null===(e=this.frame)||void 0===e?void 0:e.el.contentDocument;if(!n)return{top:0,left:0,width:0,height:0};var o=n.body,i=this.module.getZoomDecimal(),r=this.getFrameOffset(),s=this.getCanvasOffset(),a=t.noScroll;return{top:r.top+(a?0:o.scrollTop)*i-s.top,left:r.left+(a?0:o.scrollLeft)*i-s.left,width:s.width,height:s.height}},o.prototype.updateScript=function(t){var e=t.model,n=e.getId();if(!t.scriptContainer){t.scriptContainer=(0,ue.ut)('div',{'data-id':n});var o=this.getJsContainer();null==o||o.appendChild(t.scriptContainer)}t.el.id=n,t.scriptContainer.innerHTML='';var i=document.createElement('script'),r=e.getScriptString(),s=e.get('script-props')?r:"function(){\n".concat(r,"\n;}"),a=JSON.stringify(e.__getScriptProps());console.log(i),i.innerHTML="\n      setTimeout(function() {\n        var item = document.getElementById('".concat(n,"');\n        if (!item) return;\n        (").concat(s,".bind(item))(").concat(a,")\n      }, 1);"),setTimeout((function(){var e=t.scriptContainer;null==e||e.appendChild(i)}),0)},o.prototype.getJsContainer=function(t){var e=this.getFrameView(t);return null==e?void 0:e.getJsContainer()},o.prototype.getFrameView=function(t){return(null==t?void 0:t.frameView)||this.em.getCurrentFrame()},o.prototype._renderFrames=function(){if(this.ready){var t=this,e=t.model,n=t.frames,o=t.em,i=t.framesArea,r=e.frames;r.listenToLoad(),n.render();var s=r.at(0),a=null==s?void 0:s.view;o.setCurrentFrame(a),null==i||i.appendChild(n.el),this.frame=a,this.updateFramesArea()}},o.prototype.renderFrames=function(){this._renderFrames()},o.prototype.render=function(){var t=this,n=t.el,o=t.$el,i=t.ppfx,r=t.config,s=t.em;o.html(this.template());var a=o.find('[data-frames]');this.framesArea=a.get(0);var l=o.find('[data-tools]');return this.toolsWrapper=l.get(0),l.append("\n      <div class=\"".concat(i,"tools ").concat(i,"tools-gl\" style=\"pointer-events:none\">\n        <div class=\"").concat(i,"placeholder\">\n          <div class=\"").concat(i,"placeholder-int\"></div>\n        </div>\n      </div>\n      <div id=\"").concat(i,"tools\" style=\"pointer-events:none\">\n        ").concat(r.extHl?"<div class=\"".concat(i,"highlighter-sel\"></div>"):'',"\n        <div class=\"").concat(i,"badge\"></div>\n        <div class=\"").concat(i,"ghost\"></div>\n        <div class=\"").concat(i,"toolbar\" style=\"pointer-events:all\"></div>\n        <div class=\"").concat(i,"resizer\"></div>\n        <div class=\"").concat(i,"offset-v\"></div>\n        <div class=\"").concat(i,"offset-fixed-v\"></div>\n      </div>\n    ")),this.toolsEl=n.querySelector("#".concat(i,"tools")),this.hlEl=n.querySelector(".".concat(i,"highlighter")),this.badgeEl=n.querySelector(".".concat(i,"badge")),this.placerEl=n.querySelector(".".concat(i,"placeholder")),this.ghostEl=n.querySelector(".".concat(i,"ghost")),this.toolbarEl=n.querySelector(".".concat(i,"toolbar")),this.resizerEl=n.querySelector(".".concat(i,"resizer")),this.offsetEl=n.querySelector(".".concat(i,"offset-v")),this.fixedOffsetEl=n.querySelector(".".concat(i,"offset-fixed-v")),this.toolsGlobEl=n.querySelector(".".concat(i,"tools-gl")),this.spotsEl=n.querySelector('[data-spots]'),this.cvStyle=n.querySelector('[data-canvas-style]'),this.el.className=(0,e.getUiClass)(s,this.className),this.ready=!0,this._renderFrames(),this},o}(Fe);const Pn=kn;var Cn=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Tn=void 0&&(void 0).__assign||function(){return Tn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Tn.apply(this,arguments)},En=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Qn=function(n){function o(t){var e=n.call(this,t,'Canvas',b)||this;return e.events=ze,e.framesById={},e.canvas=new Ne(e),e.spots=new Ye(e),e.model=e.canvas,e.startAutoscroll=e.startAutoscroll.bind(e),e.stopAutoscroll=e.stopAutoscroll.bind(e),e}return Cn(o,n),o.prototype.getCanvasView=function(){return this.canvasView},o.prototype.postLoad=function(){this.model.init()},o.prototype.getModel=function(){return this.canvas},o.prototype.getElement=function(){return this.getCanvasView().el},o.prototype.getFrame=function(t){return this.getFrames()[t||0]},o.prototype.getFrameEl=function(){var t=(this.canvasView||{}).frame;return null==t?void 0:t.el},o.prototype.getFramesEl=function(){var t;return null===(t=this.canvasView)||void 0===t?void 0:t.framesArea},o.prototype.getWindow=function(){var t=(this.canvasView||{}).frame;return null==t?void 0:t.getWindow()},o.prototype.getDocument=function(){var t=this.getFrameEl();return null==t?void 0:t.contentDocument},o.prototype.getBody=function(){var t=this.getDocument();return null==t?void 0:t.body},o.prototype._getLocalEl=function(t,e,n){var o=t,i=null==e?void 0:e.frameView;return o=i?i[n]():o},o.prototype.getGlobalToolsEl=function(){var t;return null===(t=this.canvasView)||void 0===t?void 0:t.toolsGlobEl},o.prototype.getToolsEl=function(t){return this._getLocalEl(this.getCanvasView().toolsEl,t,'getToolsEl')},o.prototype.getHighlighter=function(t){return this._getLocalEl(this.getCanvasView().hlEl,t,'getHighlighter')},o.prototype.getBadgeEl=function(t){return this._getLocalEl(this.getCanvasView().badgeEl,t,'getBadgeEl')},o.prototype.getPlacerEl=function(){return this.getCanvasView().placerEl},o.prototype.getGhostEl=function(){return this.getCanvasView().ghostEl},o.prototype.getToolbarEl=function(){return this.getCanvasView().toolbarEl},o.prototype.getResizerEl=function(){return this.getCanvasView().resizerEl},o.prototype.getOffsetViewerEl=function(t){return this._getLocalEl(this.getCanvasView().offsetEl,t,'getOffsetViewerEl')},o.prototype.getFixedOffsetViewerEl=function(){return this.getCanvasView().fixedOffsetEl},o.prototype.getSpotsEl=function(){var t;return null===(t=this.canvasView)||void 0===t?void 0:t.spotsEl},o.prototype.render=function(){var t;return null===(t=this.canvasView)||void 0===t||t.remove(),this.canvasView=new Pn(this.canvas),this.canvasView.render().el},o.prototype.getOffset=function(){var t=this.offset(this.getFrameEl()),e=this.offset(this.getElement());return{top:t.top-e.top,left:t.left-e.left}},o.prototype.offset=function(t){return this.getCanvasView().offset(t)},o.prototype.setCustomBadgeLabel=function(t){this.config.customBadgeLabel=t},o.prototype.getElementPos=function(t,e){return this.getCanvasView().getElementPos(t,e)},o.prototype.getElementOffsets=function(t){return this.getCanvasView().getElementOffsets(t)},o.prototype.getRect=function(){var t,e=null!==(t=this.getCanvasView().getPosition())&&void 0!==t?t:{},n=e.top,o=void 0===n?0:n,i=e.left,r=void 0===i?0:i;return Tn(Tn({},this.getCanvasView().getCanvasOffset()),{topScroll:o,leftScroll:r})},o.prototype.getTargetToElementDim=function(t,e,n){void 0===n&&(n={});var o=n||{},i=this.getCanvasView().getPosition();if(i){var r=o.elPos||this.getCanvasView().getElementPos(e),s=n.toRight||0,a=o.targetHeight||t.offsetHeight,l=o.targetWidth||t.offsetWidth,c=o.event||null,u=r.top-a,h=r.left;h+=s?r.width:0;var p=(h=s?h-l:h)<i.left?i.left:h,d=u<i.top?i.top:u,f={top:d=d>r.top+r.height?r.top+r.height:d,left:p,elementTop:r.top,elementLeft:r.left,elementWidth:r.width,elementHeight:r.height,targetWidth:t.offsetWidth,targetHeight:t.offsetHeight,canvasTop:i.top,canvasLeft:i.left,canvasWidth:i.width,canvasHeight:i.height};return c&&this.em&&this.em.trigger(c,f),f}},o.prototype.canvasRectOffset=function(t,e,n){var o=this;void 0===n&&(n={});var i=function(t,e,i){void 0===e&&(e=1);var r=o.em.getZoomDecimal(),s=e?'top':'left',a=t.ownerDocument,l=n.offset?function(t){var e=t.defaultView;return null==e?void 0:e.frameElement}(a):{},c=l.offsetTop,u=void 0===c?0:c,h=l.offsetLeft,p=void 0===h?0:h,d=a.body||{},f=d.scrollTop,g=void 0===f?0:f,m=d.scrollLeft,v=e?g:void 0===m?0:m,y=e?u:p;return i[s]-(v-y)*r};return{top:i(t,1,e),left:i(t,0,e)}},o.prototype.getTargetToElementFixed=function(e,n,o){void 0===o&&(o={});var i=o.pos||this.getElementPos(e,{noScroll:!0}),r=o.canvasOff||this.canvasRectOffset(e,i),s=n.offsetHeight||0,a=n.offsetWidth||0,l=i.left+i.width,c=this.getCanvasView(),u=c.getPosition(),h=c.getFrameOffset(e),p=o.event,d=-s,f=(0,t.isUndefined)(o.left)?i.width-a:o.left;if(f=i.left<-f?-i.left:f,f=l>u.width?f-(l-u.width):f,r.top<s){var g=i.height+s;g<h.height?d+=g:d=-r.top<i.height?-r.top:i.height}var m={top:d,left:f,canvasOffsetTop:r.top,canvasOffsetLeft:r.left,elRect:i,canvasOffset:r,canvasRect:u,targetWidth:a,targetHeight:s};return p&&this.em.trigger(p,m),m},o.prototype.getMouseRelativePos=function(t,e){void 0===e&&(e={});var n=e.subWinOffset,o=t.target.ownerDocument,i=o.defaultView||o.parentWindow,r=i.frameElement,s=n?i.pageYOffset:0,a=n?i.pageXOffset:0,l=this.getZoomMultiplier(),c=0,u=0;if(r){var h=r.getBoundingClientRect();c=h.top||0,u=h.left||0}return{y:(t.clientY+c-s)*l,x:(t.clientX+u-a)*l}},o.prototype.getMouseRelativeCanvas=function(t,e){var n,o=this.getZoomDecimal(),i=null!==(n=this.getCanvasView().getPosition(e))&&void 0!==n?n:{},r=i.top,s=void 0===r?0:r,a=i.left,l=void 0===a?0:a;return{y:t.clientY*o+s,x:t.clientX*o+l}},o.prototype.hasFocus=function(){return this.getDocument().hasFocus()},o.prototype.isInputFocused=function(){var t=this.getDocument(),e=this.getFrameEl(),n=En(['body'],this.config.notTextable,!0),o=e&&document.activeElement===e?t&&t.activeElement:document.activeElement;return o&&!n.some((function(t){return o.matches(t)}))},o.prototype.scrollTo=function(t,n){void 0===n&&(n={});var o=(0,e.getElement)(t),i=o&&(0,e.getViewEl)(o);i&&i.scrollIntoView(n)},o.prototype.startAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.startAutoscroll()},o.prototype.stopAutoscroll=function(t){var e=t&&t.view||this.em.getCurrentFrame();e&&e.stopAutoscroll()},o.prototype.setZoom=function(t){return this.canvas.set('zoom','string'==typeof t?parseFloat(t):t),this},o.prototype.getZoom=function(){return parseFloat(this.canvas.get('zoom'))},o.prototype.setCoords=function(t,e,n){var o;void 0===n&&(n={});var i=t||0===t,r=e||0===e,s={x:this.canvas.get('x'),y:this.canvas.get('y')};if(i&&(s.x=parseFloat("".concat(t))),r&&(s.y=parseFloat("".concat(e))),n.toWorld){var a=null===(o=this.canvasView)||void 0===o?void 0:o.getViewportDelta();a&&(i&&(s.x=s.x-a.x),r&&(s.y=s.y-a.y))}return this.canvas.set(s),this},o.prototype.getCoords=function(){var t=this.canvas.attributes;return{x:t.x,y:t.y}},o.prototype.getPointer=function(t){var e=this.canvas.attributes,n=e.pointer,o=e.pointerScreen;return t?o:n},o.prototype.getZoomDecimal=function(){return this.getZoom()/100},o.prototype.getZoomMultiplier=function(){var t=this.getZoomDecimal();return t?1/t:1},o.prototype.fitViewport=function(t){var e;null===(e=this.canvasView)||void 0===e||e.fitViewport(t)},o.prototype.toggleFramesEvents=function(t){this.getFramesEl().style.pointerEvents=t?'':'none'},o.prototype.getFrames=function(){return this.canvas.frames.map((function(t){return t}))},o.prototype.addFrame=function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),this.canvas.frames.add(new it(this,Tn({},t)),e)},o.prototype.getLastDragResult=function(){return this.em.get('dragResult')},o.prototype.addSpot=function(t,e){var n;void 0===e&&(e={});var o=t,i=this.getSpots(o);if(i.length){var r=i[0];return r.set(o),r}var s=o.componentView||(null===(n=o.component)||void 0===n?void 0:n.view),a=new We.Z(this,Tn(Tn({},o),{id:o.id||"cs_".concat(o.type,"_").concat(null==s?void 0:s.cid),type:o.type||''}));return this.spots.add(a,e),a},o.prototype.getSpots=function(t){return void 0===t&&(t={}),this.spots.where(t.id?{id:t.id}:t)},o.prototype.removeSpots=function(e){void 0===e&&(e={});var n=(0,t.isArray)(e)?e:this.getSpots(e);return this.spots.remove(n)},o.prototype.hasCustomSpot=function(t){var e=this.config.customSpots;return!!(!0===e||e&&t&&e[t])},o.prototype.getWorldRectToScreen=function(t){var e;return null===(e=this.canvasView)||void 0===e?void 0:e.getRectToScreen(t)},o.prototype.refreshSpots=function(){this.spots.refresh()},o.prototype.destroy=function(){var t,e=this;this.canvas.stopListening(),null===(t=this.canvasView)||void 0===t||t.remove(),['model','droppable'].forEach((function(t){return e[t]={}}))},o}(_);const An=Qn,$n={stylePrefix:'comp-',components:[],draggableComponents:!0,disableTextInnerChilds:!1,processor:void 0,useFrameDoc:!1,voidElements:['area','base','br','col','embed','hr','img','input','keygen','link','menuitem','meta','param','source','track','wbr']};var jn='text/html',Rn=jn;var Zn=void 0&&(void 0).__assign||function(){return Zn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Zn.apply(this,arguments)},Mn='data-gjs-',Vn='parse:html';const Dn=function(e,n){return void 0===n&&(n={}),{compTypes:'',modelAttrStart:Mn,getPropAttribute:function(t,e){var n=t.replace(this.modelAttrStart,''),o=(null==e?void 0:e.length)||0,i=null==e?void 0:e.substring(0,1),r=null==e?void 0:e.substring(o-1),s='true'===e||'false'!==e&&e;try{s='{'==i&&'}'==r||'['==i&&']'==r?JSON.parse(s):s}catch(t){}return{name:n,value:s}},splitPropsFromAttr:function(e){var n=this;void 0===e&&(e={});var o={},i={};return(0,t.each)(e,(function(t,e){if(0===e.indexOf(n.modelAttrStart)){var r=n.getPropAttribute(e,t);o[r.name]=r.value}else i[e]=t})),{props:o,attrs:i}},parseStyle:function(e){for(var n={};e.indexOf('/*')>=0;){var o=e.indexOf('/*'),i=e.indexOf('*/')+2;e=e.replace(e.slice(o,i),'')}for(var r=e.split(';'),s=0,a=r.length;s<a;s++){var l=r[s].trim();if(l){var c=l.split(':'),u=c[0].trim(),h=c.slice(1).join(':').trim();n[u]?((0,t.isArray)(n[u])||(n[u]=[n[u]]),n[u].push(h)):n[u]=h}}return n},parseClass:function(t){for(var e=[],n=t.split(' '),o=0,i=n.length;o<i;o++){var r=n[o].trim();r&&e.push(r)}return e},parseNode:function(t,e){void 0===e&&(e={});for(var o=[],i=t.childNodes,r=0,s=i.length;r<s;r++){var a=i[r],l=a.attributes||[],c=l.length,u=o[o.length-1],h=a.childNodes.length,p=this.compTypes,d={};if(p){var f='',g=a.getAttribute&&a.getAttribute("".concat(this.modelAttrStart,"type"));if(g)d={type:g};else{for(var m=0;m<p.length;m++){var v=p[m];if(f=v.model.isComponent(a,e)){'object'!=typeof f&&(f={type:v.id});break}}d=f}}if(!d.tagName){var y=a.tagName||'',_=a.namespaceURI||'';d.tagName=y&&'http://www.w3.org/1999/xhtml'===_?y.toLowerCase():y}c&&(d.attributes={});for(var O=0;O<c;O++){var b=l[O].nodeName,w=l[O].nodeValue;if('style'==b)d.style=this.parseStyle(w);else if('class'==b)d.classes=this.parseClass(w);else{if('contenteditable'==b)continue;if(0===b.indexOf(this.modelAttrStart)){var x=this.getPropAttribute(b,w);d[x.name]=x.value}else''===w&&!0===a[b]&&(w=!0),d.attributes[b]=w}}if(h&&!d.components){var S=a.childNodes[0];1===h&&3===S.nodeType?(!d.type&&(d.type='text'),d.components={type:'textnode',content:S.nodeValue}):d.components=this.parseNode(a,Zn(Zn({},e),{inSvg:e.inSvg||'svg'===d.type}))}if('textnode'==d.type){if(u&&'textnode'==u.type){u.content+=d.content;continue}if(!e.keepEmptyTextNodes){var k=a.nodeValue;if(' '!=k&&!k.trim())continue}}h||'/>'!=="".concat(a.outerHTML).slice(-2)||(d.void=!0);var P=d.components;if(!d.type&&P){for(var C=1,T=0,E=0;E<P.length;E++){var Q=P[E],A=Q.type;if(['text','textnode'].indexOf(A)<0&&n.textTags.indexOf(Q.tagName)<0){C=0;break}'textnode'==A&&(T=1)}C&&T&&(d.type='text')}(d.tagName||'textnode'==d.type)&&o.push(d)}return o},parse:function(o,i,r){var s;void 0===r&&(r={});var a=(null==e?void 0:e.get('Config'))||{},l={html:[]},c=Zn(Zn({},n),r),u=Zn(Zn(Zn({},n.optionsHtml),{htmlType:(null===(s=n.optionsHtml)||void 0===s?void 0:s.htmlType)||n.htmlType}),r),h=(0,t.isFunction)(c.parserHtml)?c.parserHtml(o,u):function(e,n){void 0===n&&(n={});var o,i=new DOMParser,r=n.htmlType||Rn,s=r===jn,a=s?e:"<div>".concat(e,"</div>"),l=i.parseFromString(a,r);if(s){var c=l.head,u=l.body,h=c.querySelectorAll('script');(0,t.each)(h,(function(t){return u.appendChild(t)}));var p=[];(0,t.each)(c.children,(function(t){return p.push(t)})),(0,t.each)(p,(function(t,e){return u.insertBefore(t,u.children[e])})),o=u}else o=l.firstChild;return o}(o,u),p=h.querySelectorAll('script'),d=p.length;if(!((0,t.isUndefined)(a.allowScripts)?u.allowScripts:a.allowScripts))for(;d--;)p[d].parentNode.removeChild(p[d]);if(u.allowUnsafeAttr||this.__clearUnsafeAttr(h),i){for(var f=h.querySelectorAll('style'),g=f.length,m='';g--;)m=f[g].innerHTML+m,f[g].parentNode.removeChild(f[g]);m&&(l.css=i.parse(m))}e&&e.trigger("".concat(Vn,":root"),{input:o,root:h});var v=this.parseNode(h,c),y=1!==v.length||c.returnArray?v:v[0];return l.html=y,e&&e.trigger(Vn,{input:o,output:l}),l},__clearUnsafeAttr:function(e){var n=this,o=e.attributes||[],i=e.childNodes||[],r=[];(0,t.each)(o,(function(t){var e=t.nodeName||'';0===e.indexOf('on')&&r.push(e)})),r.map((function(t){return e.removeAttribute(t)})),(0,t.each)(i,(function(t){return n.__clearUnsafeAttr(t)}))}}};var In=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Nn=void 0&&(void 0).__assign||function(){return Nn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Nn.apply(this,arguments)},Wn=Dn(),Xn=function(e){return(0,t.isArray)(e)?e[e.length-1]:e},Ln=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return In(o,n),o.prototype.parseStyle=function(t){return Wn.parseStyle(t)},o.prototype.extendStyle=function(t){return Nn(Nn({},this.getStyle()),t)},o.prototype.getStyle=function(e){var n=this.get('style')||{},o=Nn({},n);return e&&(0,t.isString)(e)?o[e]:o},o.prototype.setStyle=function(n,o){var i=this;void 0===n&&(n={}),void 0===o&&(o={}),(0,t.isString)(n)&&(n=this.parseStyle(n));var r=this.getStyle(o);o.partial||o.avoidStore?(o.avoidStore=!0,n.__p=!0):delete n.__p;var s=Nn({},n),a=Nn({},s);(0,t.keys)(a).forEach((function(t){''===a[t]&&delete a[t]})),this.set('style',a,o);var l=(0,e.shallowDiff)(r,s);return delete l.__p,(0,t.keys)(l).forEach((function(t){var e=i.em;o.noEvent||(i.trigger("change:style:".concat(t)),e&&(e.trigger('styleable:change',i,t,o),e.trigger("styleable:change:".concat(t),i,t,o)))})),s},o.prototype.addStyle=function(t,e,n){var o;void 0===e&&(e=''),void 0===n&&(n={}),'string'==typeof t?((o={})[t]=e,t=o):n=e||{},n.addStyle=t,t=this.extendStyle(t),this.setStyle(t,n)},o.prototype.removeStyle=function(t){var e=this.getStyle();delete e[t],this.setStyle(e)},o.prototype.styleToString=function(e){void 0===e&&(e={});var n=[],o=this.getStyle(e),i=e.important,r=function(e){var r=(0,t.isArray)(i)?i.indexOf(e)>=0:i;if('__'===e.substring(0,2))return"continue";var s=o[e];((0,t.isArray)(s)?s:[s]).forEach((function(t){var o="".concat(t).concat(r?' !important':'');o&&n.push("".concat(e,":").concat(o,";"))}))};for(var s in o)r(s);return n.join('')},o.prototype.getSelectors=function(){return this.get('selectors')||this.get('classes')},o.prototype.getSelectorsString=function(t){return this.selectorsToString?this.selectorsToString(t):this.getSelectors().getFullString()},o}(u.Hn);const Yn=Ln;var zn=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qn=void 0&&(void 0).__assign||function(){return qn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},qn.apply(this,arguments)},Un=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},Bn=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},Fn=function(e,n){return void 0===n&&(n=[]),e?(((0,t.isArray)(e)||(0,t.isFunction)(e.map)?e:[e]).map((function(t){n.push(t.getId()),Fn(t.components().models,n)})),n):[]},Gn=function(e,n,o){void 0===n&&(n={}),void 0===o&&(o={}),o.visitedCmps=o.visitedCmps||{};var i=o.visitedCmps;return((0,t.isArray)(e)?e:[e]).map((function(e){var r=e.attributes,s=void 0===r?{}:r,a=e.components,l=e.tagName,c=e.style,u=s.id,h=(s.draggable,Un(s,["id","draggable"])),p=e;if(u)if(i[u])i[u].push(p),u=vx.getNewId(n),p.attributes.id=u;else if(i[u]=[],n[u]){var d=p=n[u];l&&d.set({tagName:l},qn(qn({},o),{silent:!0})),(0,t.keys)(h).length&&d.addAttributes(h,qn({},o)),(0,t.keys)(c).length&&d.addStyle(c,o)}if(a){var f=Gn(a,n);if((0,t.isFunction)(p.components)){var g=p.components();g.length>0&&g.reset(f,o)}else p.components=f}return p}))},Hn=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return zn(n,e),n.prototype.initialize=function(t,e){void 0===e&&(e={}),this.opt=e,this.listenTo(this,'add',this.onAdd),this.listenTo(this,'remove',this.removeChildren),this.listenTo(this,'reset',this.resetChildren);var n=e.em,o=e.config;this.config=o,this.em=n,this.domc=e.domc||(null==n?void 0:n.Components)},n.prototype.resetChildren=function(t,e){var n=this;void 0===e&&(e={});var o=this,i=e.previousModels||[],r=i.filter((function(e){return!t.get(e.cid)})),s=Fn(t),a=Fn(i).filter((function(t){return s.indexOf(t)>=0}));e.keepIds=(e.keepIds||[]).concat(a),r.forEach((function(t){return n.removeChildren(t,o,e)})),t.each((function(t){return n.onAdd(t)}))},n.prototype.resetFromString=function(t,e){var n,o;void 0===t&&(t=''),void 0===e&&(e={}),e.keepIds=Fn(this);var i=this,r=i.domc,s=i.em,a=i.parent,l=null==s?void 0:s.Css,c=(null==r?void 0:r.allById())||{},u=this.parseString(t,e),h=Gn(u,c,e),p=e.visitedCmps,d=void 0===p?{}:p;Object.keys(d).forEach((function(t){var e=d[t];if(e.length){var n=(null==l?void 0:l.getRules("#".concat(t)))||[];n.length&&e.forEach((function(t){n.forEach((function(e){var n=e.clone();n.set('selectors',["#".concat(t.attributes.id)]),l.getAll().add(n)}))}))}})),this.reset(h,e),null==s||s.trigger('component:content',a,e,t),null===(o=(n=a).__checkInnerChilds)||void 0===o||o.call(n)},n.prototype.removeChildren=function(t,e,n){var o=this;if(void 0===n&&(n={}),t){var i=this.domc,r=this.em,s=n.temporary||n.fromUndo;if(t.prevColl=this,!s){var a=t.getId(),l=r.Selectors.getAll(),c=r.Css.getAll(),u=(n.keepIds||[]).indexOf(a)<0;delete(i?i.allById():{})[a];var h=u?c.remove(c.filter((function(t){return t.getSelectors().getFullString()==="#".concat(a)})),n):[];l.remove(h.map((function(t){return t.getSelectors().at(0)}))),t.opt.temporary||(r.Commands.run('core:component-style-clear',{target:t}),t.removed(),t.trigger('removed'),r.trigger('component:remove',t)),t.components().forEach((function(t){return o.removeChildren(t,e,n)}))}var p=t.components();r.stopListening(p),r.stopListening(t),r.stopListening(t.get('classes')),t.__postRemove()}},n.prototype.model=function(t,e){var n,o=e.collection.opt,i=o.em,r=i.Components.componentTypes;e.em=i,e.config=o.config,e.componentTypes=r,e.domc=o.domc;for(var s=0;s<r.length;s++){if(r[s].id==t.type){n=r[s].model;break}}return n||(n=r[r.length-1].model,i&&t.type&&i.logWarning("Component type '".concat(t.type,"' not found"),{attrs:t,options:e})),new n(t,e)},n.prototype.parseString=function(t,e){void 0===e&&(e={});var n=this.em,o=this.domc,i=n.Css,r=n.Parser.parseHtml(t);if(vx.checkId(r.html,r.css,o.componentsById,e),r.css&&i&&!e.temporary){e.at;var s=Un(e,["at"]);i.addCollection(r.css,qn(qn({},s),{extend:1}))}return r.html},n.prototype.add=function(e,n){var o=this;void 0===n&&(n={}),n.keepIds=Bn(Bn([],n.keepIds||[],!0),Fn(n.previousModels),!0),(0,t.isString)(e)?e=this.parseString(e,n):(0,t.isArray)(e)&&(e=Bn([],e,!0)).forEach((function(i,r){if((0,t.isString)(i)){var s=o.parseString(i,n);e[r]=(0,t.isArray)(s)&&!s.length?null:s}}));var i=(0,t.isArray)(e);e=(i?e:[e]).filter(Boolean).map((function(t){return o.processDef(t)})),e=i?(0,t.flatten)(e,1):e[0];var r=u.FE.prototype.add.apply(this,[e,n]);return this.__firstAdd=r,r},n.prototype.processDef=function(e){if(e.cid&&e.ccid)return e;var n=this.em,o=this.config,i=(void 0===o?{}:o).processor,r=e;if(i){var s=i(r=qn({},r));s&&((0,t.each)(r,(function(t,e){return delete r[e]})),(0,t.extend)(r,s))}if(r.$$typeof&&'object'==typeof r.props){(r=qn({},r)).props=qn({},r.props);var a=n.Components,l=n.Parser.parserHtml;(0,t.each)(r,(function(e,n){(0,t.includes)(['props','type'],n)||delete r[n]}));var c=r.props,u=c.children;delete c.children,delete r.props;var h=l.splitPropsFromAttr(c);r.attributes=h.attrs,u&&(r.components=u),r.type?a.getType(r.type)||(r.tagName=r.type,delete r.type):r.type='textnode',(0,t.extend)(r,h.props)}return r},n.prototype.onAdd=function(e,n,o){void 0===o&&(o={});var i=this.domc,r=this.em,s=e.getStyle(),a=r&&r.getConfig().avoidInlineStyle;if(i&&i.Component.ensureInList(e),!(0,t.isEmpty)(s)&&!a&&r&&r.get&&r.getConfig().forceClass&&!o.temporary){var l=e.cid;r.Css.setClassRule(l,s),e.setStyle({}),e.addClass(l)}e.__postAdd({recursive:!0})},n}(u.FE);const Kn=Hn;var Jn=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),to=1,eo=2,no=function(e){function n(t,o){void 0===o&&(o={});var i=e.call(this,t,o)||this,r=o.config,s=void 0===r?{}:r,a=i.get('name'),l=i.get('label');a?l||i.set('label',a):i.set('name',l);var c=i.get('name'),u=s.escapeName,h=u?u(c):n.escapeName(c);return i.set('name',h),i.em=o.em,i}return Jn(n,e),n.prototype.defaults=function(){return{name:'',label:'',type:to,active:!0,private:!1,protected:!1,_undo:!0}},n.prototype.isId=function(){return this.get('type')===eo},n.prototype.isClass=function(){return this.get('type')===to},n.prototype.getFullName=function(t){void 0===t&&(t={});var e=t.escape,n=this.get('name'),o='';switch(this.get('type')){case to:o='.';break;case eo:o='#'}return o+(e?e(n):n)},n.prototype.toString=function(){return this.getFullName()},n.prototype.getName=function(){return this.get('name')||''},n.prototype.getLabel=function(){return this.get('label')||''},n.prototype.setLabel=function(t){return this.set('label',t)},n.prototype.getActive=function(){return!!this.get('active')},n.prototype.setActive=function(t){return this.set('active',t)},n.prototype.toJSON=function(e){void 0===e&&(e={});var n=this.em,o=u.Hn.prototype.toJSON.call(this,[e]),i=(0,t.result)(this,'defaults');if(n&&n.getConfig().avoidDefaults){(0,t.forEach)(i,(function(t,e){o[e]===t&&delete o[e]})),o.label===o.name&&delete o.label;var r=(0,t.keys)(o).length;1===r&&o.name&&(o=o.name),2===r&&o.name&&o.type&&(o=this.getFullName())}return o},n.escapeName=function(t){return"".concat(t).trim().replace(/([^a-z0-9\w-\\:@\\/]+)/gi,'-')},n.TYPE_CLASS=to,n.TYPE_ID=eo,n}(u.Hn);const oo=no;no.prototype.idAttribute='name';var io=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ro=function(t,e){return t.reduce((function(n,o,i){return n.concat(ro(t.slice(i+1),"".concat(e).concat(o)))}),[e])},so=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return io(n,e),n.prototype.modelId=function(t){return"".concat(t.name,"_").concat(t.type||oo.TYPE_CLASS)},n.prototype.getStyleable=function(){return(0,t.filter)(this.models,(function(t){return t.getActive()&&!t.get('private')}))},n.prototype.getValid=function(e){var n=(void 0===e?{}:e).noDisabled;return(0,t.filter)(this.models,(function(t){return!t.get('private')})).filter((function(t){return n?t.get('active'):1}))},n.prototype.getFullString=function(t,e){void 0===e&&(e={});var n=[];return(t||this).forEach((function(t){return n.push(t.getFullName(e))})),e.sort&&n.sort(),n.join('').trim()},n.prototype.getFullName=function(t){void 0===t&&(t={});var e=t.combination,n=t.array,o=[],i=this.map((function(e){return e.getFullName(t)})).sort();return e?i.forEach((function(t,e){o=o.concat(ro(i.slice(e+1),t))})):o=i,n?o:e?o.join(','):o.join('')},n}(u.FE);const ao=so;so.prototype.model=oo;var lo=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),co=void 0&&(void 0).__assign||function(){return co=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},co.apply(this,arguments)},uo=function(e){function n(t,n){var o=e.call(this,t,co({},n))||this;return o.type='list',o.templates=n.traits,o}return lo(n,e),n.prototype.events=function(){return{'click [addButton]':this.addItem,'click [removeButton]':this.removeItem,'click [data-item-title]':this.select}},n.prototype.select=function(e){var n,o=this,i=(o.model,o.ppfx),r=o.selectedEl;if(null===(n=this.itemsEl)||void 0===n||n.forEach((function(t){t.find('.data-item').get(0).style.display='none'})),(0,t.isUndefined)(e))(0,t.isUndefined)(r)||(r.get(0).style.display='');else{var s=(0,l["default"])(e.target).closest(".".concat(i,"title")).find('.data-item');this.selectedEl=s,s.get(0).style.display=''}},n.prototype.onUpdateEvent=function(t){console.log('Render'),this.render()},n.prototype.addItem=function(t){t.preventDefault(),this.target.add()},n.prototype.removeItem=function(t){var e;t.preventDefault(),this.target.remove(null===(e=this.selectedEl)||void 0===e?void 0:e.attr('item-id'))},n.prototype.renderToolbar=function(){if(!this.toolbarEl){document.createElement('div').append(document.createElement('button'));this.toolbarEl=(0,l["default"])("<div class=\"\">\n      <button addButton> Add </button>\n      <button removeButton> Remove </button>\n    </div>").get(0)}return this.toolbarEl},n.prototype.renderItem=function(t){var e=this,n=e.em,o=e.ppfx,i=(e.label,null==n?void 0:n.getConfig().icons),r=(null==i?void 0:i.caret)||'',s=nx.buildView(t,n,co(co({},t.opts),{noLabel:!0})).render(),a=document.createElement('div');a.setAttribute('data-item-title',''),a.className="".concat(o,"title"),a.innerHTML="\n        <div class=\"".concat(o,"caret\">").concat(r,"</div>\n        \n    "),console.log(a);var c=document.createElement('div');return c.className='data-item',c.setAttribute('item-id',t.name),c.append(s.el),console.log(a),(0,l["default"])(a).append(c)},n.prototype.renderItems=function(){var t=this;this.itemsEl=this.target.traits.map((function(e){return t.renderItem(e)}))},n.prototype.render=function(){var t,e=this,n=(e.$el,e.pfx),o=e.ppfx,i=(e.name,e.type);e.className;console.log('render');var r=this.hasLabel(),s="".concat(n,"trait"),a=document.createDocumentFragment();this.$el.empty(),this.renderItems(),null===(t=this.itemsEl)||void 0===t||t.forEach((function(t){return a.appendChild(t.get(0))}));var l=document.createElement('div');l.className="".concat(o,"field-").concat(i,"-items"),l.append(a);var c="<div class=\"".concat(s," ").concat(s,"--").concat(i,"\">\n    ").concat(r?"<div class=\"".concat(o,"label\" data-label></div>"):'',"\n    <div class=\"").concat(o,"field-wrp ").concat(o,"field-wrp--").concat(i," gjs-trt-trait--full\" data-input>\n\n    </div>\n  </div>");return this.$el.append(c),this.$el.find('[data-input]').append(this.renderToolbar()).append(l),console.log('render'),this.select(),this.setElement(this.el),this},n}(Vt);const ho=uo;var po=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fo=void 0&&(void 0).__assign||function(){return fo=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},fo.apply(this,arguments)},go=function(t){function e(e,n){var o,i=t.call(this,e,fo({},n))||this;return i.type='list',console.log(n),i.traits=null!==(o=n.traits)&&void 0!==o?o:[],i}return po(e,t),e.prototype.onUpdateEvent=function(t){this.render()},e.prototype.render=function(){var t=this,e=document.createDocumentFragment();return this.$el.empty(),this.traits.length&&this.traits.forEach((function(n){console.log('Building view'),console.log(n.opts);var o=nx.buildView(n,t.em,n.opts).render().el;e.appendChild(o)})),this.$el.append(e),this.setElement(this.el),this},e}(Vt);const mo=go;class vo{lineAt(t){if(t<0||t>this.length)throw new RangeError(`Invalid position ${t} in document of length ${this.length}`);return this.lineInner(t,!1,1,0)}line(t){if(t<1||t>this.lines)throw new RangeError(`Invalid line number ${t} in ${this.lines}-line document`);return this.lineInner(t,!0,1,0)}replace(t,e,n){[t,e]=Po(this,t,e);let o=[];return this.decompose(0,t,o,2),n.length&&n.decompose(0,n.length,o,1|2),this.decompose(e,this.length,o,1),_o.from(o,this.length-(e-t)+n.length)}append(t){return this.replace(this.length,this.length,t)}slice(t,e=this.length){[t,e]=Po(this,t,e);let n=[];return this.decompose(t,e,n,0),_o.from(n,e-t)}eq(t){if(t==this)return!0;if(t.length!=this.length||t.lines!=this.lines)return!1;let e=this.scanIdentical(t,1),n=this.length-this.scanIdentical(t,-1),o=new wo(this),i=new wo(t);for(let t=e,r=e;;){if(o.next(t),i.next(t),t=0,o.lineBreak!=i.lineBreak||o.done!=i.done||o.value!=i.value)return!1;if(r+=o.value.length,o.done||r>=n)return!0}}iter(t=1){return new wo(this,t)}iterRange(t,e=this.length){return new xo(this,t,e)}iterLines(t,e){let n;if(null==t)n=this.iter();else{null==e&&(e=this.lines+1);let o=this.line(t).from;n=this.iterRange(o,Math.max(o,e==this.lines+1?this.length:e<=1?0:this.line(e-1).to))}return new So(n)}toString(){return this.sliceString(0)}toJSON(){let t=[];return this.flatten(t),t}constructor(){}static of(t){if(0==t.length)throw new RangeError("A document must have at least one line");return 1!=t.length||t[0]?t.length<=32?new yo(t):_o.from(yo.split(t,[])):vo.empty}}class yo extends vo{constructor(t,e=function(t){let e=-1;for(let n of t)e+=n.length+1;return e}(t)){super(),this.text=t,this.length=e}get lines(){return this.text.length}get children(){return null}lineInner(t,e,n,o){for(let i=0;;i++){let r=this.text[i],s=o+r.length;if((e?n:s)>=t)return new ko(o,s,n,r);o=s+1,n++}}decompose(t,e,n,o){let i=t<=0&&e>=this.length?this:new yo(bo(this.text,t,e),Math.min(e,this.length)-Math.max(0,t));if(1&o){let t=n.pop(),e=Oo(i.text,t.text.slice(),0,i.length);if(e.length<=32)n.push(new yo(e,t.length+i.length));else{let t=e.length>>1;n.push(new yo(e.slice(0,t)),new yo(e.slice(t)))}}else n.push(i)}replace(t,e,n){if(!(n instanceof yo))return super.replace(t,e,n);[t,e]=Po(this,t,e);let o=Oo(this.text,Oo(n.text,bo(this.text,0,t)),e),i=this.length+n.length-(e-t);return o.length<=32?new yo(o,i):_o.from(yo.split(o,[]),i)}sliceString(t,e=this.length,n="\n"){[t,e]=Po(this,t,e);let o="";for(let i=0,r=0;i<=e&&r<this.text.length;r++){let s=this.text[r],a=i+s.length;i>t&&r&&(o+=n),t<a&&e>i&&(o+=s.slice(Math.max(0,t-i),e-i)),i=a+1}return o}flatten(t){for(let e of this.text)t.push(e)}scanIdentical(){return 0}static split(t,e){let n=[],o=-1;for(let i of t)n.push(i),o+=i.length+1,32==n.length&&(e.push(new yo(n,o)),n=[],o=-1);return o>-1&&e.push(new yo(n,o)),e}}class _o extends vo{constructor(t,e){super(),this.children=t,this.length=e,this.lines=0;for(let e of t)this.lines+=e.lines}lineInner(t,e,n,o){for(let i=0;;i++){let r=this.children[i],s=o+r.length,a=n+r.lines-1;if((e?a:s)>=t)return r.lineInner(t,e,n,o);o=s+1,n=a+1}}decompose(t,e,n,o){for(let i=0,r=0;r<=e&&i<this.children.length;i++){let s=this.children[i],a=r+s.length;if(t<=a&&e>=r){let i=o&((r<=t?1:0)|(a>=e?2:0));r>=t&&a<=e&&!i?n.push(s):s.decompose(t-r,e-r,n,i)}r=a+1}}replace(t,e,n){if([t,e]=Po(this,t,e),n.lines<this.lines)for(let o=0,i=0;o<this.children.length;o++){let r=this.children[o],s=i+r.length;if(t>=i&&e<=s){let a=r.replace(t-i,e-i,n),l=this.lines-r.lines+a.lines;if(a.lines<l>>5-1&&a.lines>l>>5+1){let i=this.children.slice();return i[o]=a,new _o(i,this.length-(e-t)+n.length)}return super.replace(i,s,a)}i=s+1}return super.replace(t,e,n)}sliceString(t,e=this.length,n="\n"){[t,e]=Po(this,t,e);let o="";for(let i=0,r=0;i<this.children.length&&r<=e;i++){let s=this.children[i],a=r+s.length;r>t&&i&&(o+=n),t<a&&e>r&&(o+=s.sliceString(t-r,e-r,n)),r=a+1}return o}flatten(t){for(let e of this.children)e.flatten(t)}scanIdentical(t,e){if(!(t instanceof _o))return 0;let n=0,[o,i,r,s]=e>0?[0,0,this.children.length,t.children.length]:[this.children.length-1,t.children.length-1,-1,-1];for(;;o+=e,i+=e){if(o==r||i==s)return n;let a=this.children[o],l=t.children[i];if(a!=l)return n+a.scanIdentical(l,e);n+=a.length+1}}static from(t,e=t.reduce(((t,e)=>t+e.length+1),-1)){let n=0;for(let e of t)n+=e.lines;if(n<32){let n=[];for(let e of t)e.flatten(n);return new yo(n,e)}let o=Math.max(32,n>>5),i=o<<1,r=o>>1,s=[],a=0,l=-1,c=[];function u(t){let e;if(t.lines>i&&t instanceof _o)for(let e of t.children)u(e);else t.lines>r&&(a>r||!a)?(h(),s.push(t)):t instanceof yo&&a&&(e=c[c.length-1])instanceof yo&&t.lines+e.lines<=32?(a+=t.lines,l+=t.length+1,c[c.length-1]=new yo(e.text.concat(t.text),e.length+1+t.length)):(a+t.lines>o&&h(),a+=t.lines,l+=t.length+1,c.push(t))}function h(){0!=a&&(s.push(1==c.length?c[0]:_o.from(c,l)),l=-1,a=c.length=0)}for(let e of t)u(e);return h(),1==s.length?s[0]:new _o(s,e)}}function Oo(t,e,n=0,o=1e9){for(let i=0,r=0,s=!0;r<t.length&&i<=o;r++){let a=t[r],l=i+a.length;l>=n&&(l>o&&(a=a.slice(0,o-i)),i<n&&(a=a.slice(n-i)),s?(e[e.length-1]+=a,s=!1):e.push(a)),i=l+1}return e}function bo(t,e,n){return Oo(t,[""],e,n)}vo.empty=new yo([""],0);class wo{constructor(t,e=1){this.dir=e,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[t],this.offsets=[e>0?1:(t instanceof yo?t.text.length:t.children.length)<<1]}nextInner(t,e){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,o=this.nodes[n],i=this.offsets[n],r=i>>1,s=o instanceof yo?o.text.length:o.children.length;if(r==(e>0?s:0)){if(0==n)return this.done=!0,this.value="",this;e>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(e>0?0:1)){if(this.offsets[n]+=e,0==t)return this.lineBreak=!0,this.value="\n",this;t--}else if(o instanceof yo){let i=o.text[r+(e<0?-1:0)];if(this.offsets[n]+=e,i.length>Math.max(0,t))return this.value=0==t?i:e>0?i.slice(t):i.slice(0,i.length-t),this;t-=i.length}else{let i=o.children[r+(e<0?-1:0)];t>i.length?(t-=i.length,this.offsets[n]+=e):(e<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(e>0?1:(i instanceof yo?i.text.length:i.children.length)<<1))}}}next(t=0){return t<0&&(this.nextInner(-t,-this.dir),t=this.value.length),this.nextInner(t,this.dir)}}class xo{constructor(t,e,n){this.value="",this.done=!1,this.cursor=new wo(t,e>n?-1:1),this.pos=e>n?t.length:0,this.from=Math.min(e,n),this.to=Math.max(e,n)}nextInner(t,e){if(e<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;t+=Math.max(0,e<0?this.pos-this.to:this.from-this.pos);let n=e<0?this.pos-this.from:this.to-this.pos;t>n&&(t=n),n-=t;let{value:o}=this.cursor.next(t);return this.pos+=(o.length+t)*e,this.value=o.length<=n?o:e<0?o.slice(o.length-n):o.slice(0,n),this.done=!this.value,this}next(t=0){return t<0?t=Math.max(t,this.from-this.pos):t>0&&(t=Math.min(t,this.to-this.pos)),this.nextInner(t,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class So{constructor(t){this.inner=t,this.afterBreak=!0,this.value="",this.done=!1}next(t=0){let{done:e,lineBreak:n,value:o}=this.inner.next(t);return e&&this.afterBreak?(this.value="",this.afterBreak=!1):e?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=o,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(vo.prototype[Symbol.iterator]=function(){return this.iter()},wo.prototype[Symbol.iterator]=xo.prototype[Symbol.iterator]=So.prototype[Symbol.iterator]=function(){return this});class ko{constructor(t,e,n,o){this.from=t,this.to=e,this.number=n,this.text=o}get length(){return this.to-this.from}}function Po(t,e,n){return[e=Math.max(0,Math.min(t.length,e)),Math.max(e,Math.min(t.length,n))]}let Co="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((t=>t?parseInt(t,36):1));for(let t=1;t<Co.length;t++)Co[t]+=Co[t-1];function To(t){for(let e=1;e<Co.length;e+=2)if(Co[e]>t)return Co[e-1]<=t;return!1}function Eo(t){return t>=127462&&t<=127487}const Qo=8205;function Ao(t,e,n=!0,o=!0){return(n?$o:jo)(t,e,o)}function $o(t,e,n){if(e==t.length)return e;e&&Ro(t.charCodeAt(e))&&Zo(t.charCodeAt(e-1))&&e--;let o=Mo(t,e);for(e+=Do(o);e<t.length;){let i=Mo(t,e);if(o==Qo||i==Qo||n&&To(i))e+=Do(i),o=i;else{if(!Eo(i))break;{let n=0,o=e-2;for(;o>=0&&Eo(Mo(t,o));)n++,o-=2;if(n%2==0)break;e+=2}}}return e}function jo(t,e,n){for(;e>0;){let o=$o(t,e-2,n);if(o<e)return o;e--}return 0}function Ro(t){return t>=56320&&t<57344}function Zo(t){return t>=55296&&t<56320}function Mo(t,e){let n=t.charCodeAt(e);if(!Zo(n)||e+1==t.length)return n;let o=t.charCodeAt(e+1);return Ro(o)?(n-55296<<10)+(o-56320)+65536:n}function Vo(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(1023&t)+56320))}function Do(t){return t<65536?1:2}const Io=/\r\n?|\n/;var No=function(t){return t[t["Simple"]=0]="Simple",t[t["TrackDel"]=1]="TrackDel",t[t["TrackBefore"]=2]="TrackBefore",t[t["TrackAfter"]=3]="TrackAfter",t}(No||(No={}));class Wo{constructor(t){this.sections=t}get length(){let t=0;for(let e=0;e<this.sections.length;e+=2)t+=this.sections[e];return t}get newLength(){let t=0;for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e+1];t+=n<0?this.sections[e]:n}return t}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(t){for(let e=0,n=0,o=0;e<this.sections.length;){let i=this.sections[e++],r=this.sections[e++];r<0?(t(n,o,i),o+=i):o+=r,n+=i}}iterChangedRanges(t,e=!1){zo(this,t,e)}get invertedDesc(){let t=[];for(let e=0;e<this.sections.length;){let n=this.sections[e++],o=this.sections[e++];o<0?t.push(n,o):t.push(o,n)}return new Wo(t)}composeDesc(t){return this.empty?t:t.empty?this:Uo(this,t)}mapDesc(t,e=!1){return t.empty?this:qo(this,t,e)}mapPos(t,e=-1,n=No.Simple){let o=0,i=0;for(let r=0;r<this.sections.length;){let s=this.sections[r++],a=this.sections[r++],l=o+s;if(a<0){if(l>t)return i+(t-o);i+=s}else{if(n!=No.Simple&&l>=t&&(n==No.TrackDel&&o<t&&l>t||n==No.TrackBefore&&o<t||n==No.TrackAfter&&l>t))return null;if(l>t||l==t&&e<0&&!s)return t==o||e<0?i:i+a;i+=a}o=l}if(t>o)throw new RangeError(`Position ${t} is out of range for changeset of length ${o}`);return i}touchesRange(t,e=t){for(let n=0,o=0;n<this.sections.length&&o<=e;){let i=o+this.sections[n++];if(this.sections[n++]>=0&&o<=e&&i>=t)return!(o<t&&i>e)||"cover";o=i}return!1}toString(){let t="";for(let e=0;e<this.sections.length;){let n=this.sections[e++],o=this.sections[e++];t+=(t?" ":"")+n+(o>=0?":"+o:"")}return t}toJSON(){return this.sections}static fromJSON(t){if(!Array.isArray(t)||t.length%2||t.some((t=>"number"!=typeof t)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Wo(t)}static create(t){return new Wo(t)}}class Xo extends Wo{constructor(t,e){super(t),this.inserted=e}apply(t){if(this.length!=t.length)throw new RangeError("Applying change set to a document with the wrong length");return zo(this,((e,n,o,i,r)=>t=t.replace(o,o+(n-e),r)),!1),t}mapDesc(t,e=!1){return qo(this,t,e,!0)}invert(t){let e=this.sections.slice(),n=[];for(let o=0,i=0;o<e.length;o+=2){let r=e[o],s=e[o+1];if(s>=0){e[o]=s,e[o+1]=r;let a=o>>1;for(;n.length<a;)n.push(vo.empty);n.push(r?t.slice(i,i+r):vo.empty)}i+=r}return new Xo(e,n)}compose(t){return this.empty?t:t.empty?this:Uo(this,t,!0)}map(t,e=!1){return t.empty?this:qo(this,t,e,!0)}iterChanges(t,e=!1){zo(this,t,e)}get desc(){return Wo.create(this.sections)}filter(t){let e=[],n=[],o=[],i=new Bo(this);t:for(let r=0,s=0;;){let a=r==t.length?1e9:t[r++];for(;s<a||s==a&&0==i.len;){if(i.done)break t;let t=Math.min(i.len,a-s);Lo(o,t,-1);let r=-1==i.ins?-1:0==i.off?i.ins:0;Lo(e,t,r),r>0&&Yo(n,e,i.text),i.forward(t),s+=t}let l=t[r++];for(;s<l;){if(i.done)break t;let t=Math.min(i.len,l-s);Lo(e,t,-1),Lo(o,t,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(t),s+=t}}return{changes:new Xo(e,n),filtered:Wo.create(o)}}toJSON(){let t=[];for(let e=0;e<this.sections.length;e+=2){let n=this.sections[e],o=this.sections[e+1];o<0?t.push(n):0==o?t.push([n]):t.push([n].concat(this.inserted[e>>1].toJSON()))}return t}static of(t,e,n){let o=[],i=[],r=0,s=null;function a(t=!1){if(!t&&!o.length)return;r<e&&Lo(o,e-r,-1);let n=new Xo(o,i);s=s?s.compose(n.map(s)):n,o=[],i=[],r=0}return function t(l){if(Array.isArray(l))for(let e of l)t(e);else if(l instanceof Xo){if(l.length!=e)throw new RangeError(`Mismatched change set length (got ${l.length}, expected ${e})`);a(),s=s?s.compose(l.map(s)):l}else{let{from:t,to:s=t,insert:c}=l;if(t>s||t<0||s>e)throw new RangeError(`Invalid change range ${t} to ${s} (in doc of length ${e})`);let u=c?"string"==typeof c?vo.of(c.split(n||Io)):c:vo.empty,h=u.length;if(t==s&&0==h)return;t<r&&a(),t>r&&Lo(o,t-r,-1),Lo(o,s-t,h),Yo(i,o,u),r=s}}(t),a(!s),s}static empty(t){return new Xo(t?[t,-1]:[],[])}static fromJSON(t){if(!Array.isArray(t))throw new RangeError("Invalid JSON representation of ChangeSet");let e=[],n=[];for(let o=0;o<t.length;o++){let i=t[o];if("number"==typeof i)e.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some(((t,e)=>e&&"string"!=typeof t)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)e.push(i[0],0);else{for(;n.length<o;)n.push(vo.empty);n[o]=vo.of(i.slice(1)),e.push(i[0],n[o].length)}}}return new Xo(e,n)}static createSet(t,e){return new Xo(t,e)}}function Lo(t,e,n,o=!1){if(0==e&&n<=0)return;let i=t.length-2;i>=0&&n<=0&&n==t[i+1]?t[i]+=e:0==e&&0==t[i]?t[i+1]+=n:o?(t[i]+=e,t[i+1]+=n):t.push(e,n)}function Yo(t,e,n){if(0==n.length)return;let o=e.length-2>>1;if(o<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<o;)t.push(vo.empty);t.push(n)}}function zo(t,e,n){let o=t.inserted;for(let i=0,r=0,s=0;s<t.sections.length;){let a=t.sections[s++],l=t.sections[s++];if(l<0)i+=a,r+=a;else{let c=i,u=r,h=vo.empty;for(;c+=a,u+=l,l&&o&&(h=h.append(o[s-2>>1])),!(n||s==t.sections.length||t.sections[s+1]<0);)a=t.sections[s++],l=t.sections[s++];e(i,c,r,u,h),i=c,r=u}}}function qo(t,e,n,o=!1){let i=[],r=o?[]:null,s=new Bo(t),a=new Bo(e);for(let t=-1;;)if(-1==s.ins&&-1==a.ins){let t=Math.min(s.len,a.len);Lo(i,t,-1),s.forward(t),a.forward(t)}else if(a.ins>=0&&(s.ins<0||t==s.i||0==s.off&&(a.len<s.len||a.len==s.len&&!n))){let e=a.len;for(Lo(i,a.ins,-1);e;){let n=Math.min(s.len,e);s.ins>=0&&t<s.i&&s.len<=n&&(Lo(i,0,s.ins),r&&Yo(r,i,s.text),t=s.i),s.forward(n),e-=n}a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return r?Xo.createSet(i,r):Wo.create(i);throw new Error("Mismatched change set lengths")}{let e=0,n=s.len;for(;n;)if(-1==a.ins){let t=Math.min(n,a.len);e+=t,n-=t,a.forward(t)}else{if(!(0==a.ins&&a.len<n))break;n-=a.len,a.next()}Lo(i,e,t<s.i?s.ins:0),r&&t<s.i&&Yo(r,i,s.text),t=s.i,s.forward(s.len-n)}}}function Uo(t,e,n=!1){let o=[],i=n?[]:null,r=new Bo(t),s=new Bo(e);for(let t=!1;;){if(r.done&&s.done)return i?Xo.createSet(o,i):Wo.create(o);if(0==r.ins)Lo(o,r.len,0,t),r.next();else if(0!=s.len||s.done){if(r.done||s.done)throw new Error("Mismatched change set lengths");{let e=Math.min(r.len2,s.len),n=o.length;if(-1==r.ins){let n=-1==s.ins?-1:s.off?0:s.ins;Lo(o,e,n,t),i&&n&&Yo(i,o,s.text)}else-1==s.ins?(Lo(o,r.off?0:r.len,e,t),i&&Yo(i,o,r.textBit(e))):(Lo(o,r.off?0:r.len,s.off?0:s.ins,t),i&&!s.off&&Yo(i,o,s.text));t=(r.ins>e||s.ins>=0&&s.len>e)&&(t||o.length>n),r.forward2(e),s.forward(e)}}else Lo(o,0,s.ins,t),i&&Yo(i,o,s.text),s.next()}}class Bo{constructor(t){this.set=t,this.i=0,this.next()}next(){let{sections:t}=this.set;this.i<t.length?(this.len=t[this.i++],this.ins=t[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:t}=this.set,e=this.i-2>>1;return e>=t.length?vo.empty:t[e]}textBit(t){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length&&!t?vo.empty:e[n].slice(this.off,null==t?void 0:this.off+t)}forward(t){t==this.len?this.next():(this.len-=t,this.off+=t)}forward2(t){-1==this.ins?this.forward(t):t==this.ins?this.next():(this.ins-=t,this.off+=t)}}class Fo{constructor(t,e,n){this.from=t,this.to=e,this.flags=n}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let t=7&this.flags;return 7==t?null:t}get goalColumn(){let t=this.flags>>6;return 16777215==t?void 0:t}map(t,e=-1){let n,o;return this.empty?n=o=t.mapPos(this.from,e):(n=t.mapPos(this.from,1),o=t.mapPos(this.to,-1)),n==this.from&&o==this.to?this:new Fo(n,o,this.flags)}extend(t,e=t){if(t<=this.anchor&&e>=this.anchor)return Go.range(t,e);let n=Math.abs(t-this.anchor)>Math.abs(e-this.anchor)?t:e;return Go.range(this.anchor,n)}eq(t){return this.anchor==t.anchor&&this.head==t.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(t){if(!t||"number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid JSON representation for SelectionRange");return Go.range(t.anchor,t.head)}static create(t,e,n){return new Fo(t,e,n)}}class Go{constructor(t,e){this.ranges=t,this.mainIndex=e}map(t,e=-1){return t.empty?this:Go.create(this.ranges.map((n=>n.map(t,e))),this.mainIndex)}eq(t){if(this.ranges.length!=t.ranges.length||this.mainIndex!=t.mainIndex)return!1;for(let e=0;e<this.ranges.length;e++)if(!this.ranges[e].eq(t.ranges[e]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new Go([this.main],0)}addRange(t,e=!0){return Go.create([t].concat(this.ranges),e?0:this.mainIndex+1)}replaceRange(t,e=this.mainIndex){let n=this.ranges.slice();return n[e]=t,Go.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((t=>t.toJSON())),main:this.mainIndex}}static fromJSON(t){if(!t||!Array.isArray(t.ranges)||"number"!=typeof t.main||t.main>=t.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Go(t.ranges.map((t=>Fo.fromJSON(t))),t.main)}static single(t,e=t){return new Go([Go.range(t,e)],0)}static create(t,e=0){if(0==t.length)throw new RangeError("A selection needs at least one range");for(let n=0,o=0;o<t.length;o++){let i=t[o];if(i.empty?i.from<=n:i.from<n)return Go.normalized(t.slice(),e);n=i.to}return new Go(t,e)}static cursor(t,e=0,n,o){return Fo.create(t,t,(0==e?0:e<0?8:16)|(null==n?7:Math.min(6,n))|(null!=o?o:16777215)<<6)}static range(t,e,n,o){let i=(null!=n?n:16777215)<<6|(null==o?7:Math.min(6,o));return e<t?Fo.create(e,t,32|16|i):Fo.create(t,e,(e>t?8:0)|i)}static normalized(t,e=0){let n=t[e];t.sort(((t,e)=>t.from-e.from)),e=t.indexOf(n);for(let n=1;n<t.length;n++){let o=t[n],i=t[n-1];if(o.empty?o.from<=i.to:o.from<i.to){let r=i.from,s=Math.max(o.to,i.to);n<=e&&e--,t.splice(--n,2,o.anchor>o.head?Go.range(s,r):Go.range(r,s))}}return new Go(t,e)}}function Ho(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let Ko=0;class Jo{constructor(t,e,n,o,i){this.combine=t,this.compareInput=e,this.compare=n,this.isStatic=o,this.id=Ko++,this.default=t([]),this.extensions="function"==typeof i?i(this):i}get reader(){return this}static define(t={}){return new Jo(t.combine||(t=>t),t.compareInput||((t,e)=>t===e),t.compare||(t.combine?(t,e)=>t===e:ti),!!t.static,t.enables)}of(t){return new ei([],this,0,t)}compute(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new ei(t,this,1,e)}computeN(t,e){if(this.isStatic)throw new Error("Can't compute a static facet");return new ei(t,this,2,e)}from(t,e){return e||(e=t=>t),this.compute([t],(n=>e(n.field(t))))}}function ti(t,e){return t==e||t.length==e.length&&t.every(((t,n)=>t===e[n]))}class ei{constructor(t,e,n,o){this.dependencies=t,this.facet=e,this.type=n,this.value=o,this.id=Ko++}dynamicSlot(t){var e;let n=this.value,o=this.facet.compareInput,i=this.id,r=t[i]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let n of this.dependencies)"doc"==n?a=!0:"selection"==n?l=!0:0==(1&(null!==(e=t[n.id])&&void 0!==e?e:1))&&c.push(t[n.id]);return{create:t=>(t.values[r]=n(t),1),update(t,e){if(a&&e.docChanged||l&&(e.docChanged||e.selection)||oi(t,c)){let e=n(t);if(s?!ni(e,t.values[r],o):!o(e,t.values[r]))return t.values[r]=e,1}return 0},reconfigure:(t,e)=>{let a,l=e.config.address[i];if(null!=l){let i=yi(e,l);if(this.dependencies.every((n=>n instanceof Jo?e.facet(n)===t.facet(n):!(n instanceof si)||e.field(n,!1)==t.field(n,!1)))||(s?ni(a=n(t),i,o):o(a=n(t),i)))return t.values[r]=i,0}else a=n(t);return t.values[r]=a,1}}}}function ni(t,e,n){if(t.length!=e.length)return!1;for(let o=0;o<t.length;o++)if(!n(t[o],e[o]))return!1;return!0}function oi(t,e){let n=!1;for(let o of e)1&vi(t,o)&&(n=!0);return n}function ii(t,e,n){let o=n.map((e=>t[e.id])),i=n.map((t=>t.type)),r=o.filter((t=>!(1&t))),s=t[e.id]>>1;function a(t){let n=[];for(let e=0;e<o.length;e++){let r=yi(t,o[e]);if(2==i[e])for(let t of r)n.push(t);else n.push(r)}return e.combine(n)}return{create(t){for(let e of o)vi(t,e);return t.values[s]=a(t),1},update(t,n){if(!oi(t,r))return 0;let o=a(t);return e.compare(o,t.values[s])?0:(t.values[s]=o,1)},reconfigure(t,i){let r=oi(t,o),l=i.config.facets[e.id],c=i.facet(e);if(l&&!r&&ti(n,l))return t.values[s]=c,0;let u=a(t);return e.compare(u,c)?(t.values[s]=c,0):(t.values[s]=u,1)}}}const ri=Jo.define({static:!0});class si{constructor(t,e,n,o,i){this.id=t,this.createF=e,this.updateF=n,this.compareF=o,this.spec=i,this.provides=void 0}static define(t){let e=new si(Ko++,t.create,t.update,t.compare||((t,e)=>t===e),t);return t.provide&&(e.provides=t.provide(e)),e}create(t){let e=t.facet(ri).find((t=>t.field==this));return((null==e?void 0:e.create)||this.createF)(t)}slot(t){let e=t[this.id]>>1;return{create:t=>(t.values[e]=this.create(t),1),update:(t,n)=>{let o=t.values[e],i=this.updateF(o,n);return this.compareF(o,i)?0:(t.values[e]=i,1)},reconfigure:(t,n)=>null!=n.config.address[this.id]?(t.values[e]=n.field(this),0):(t.values[e]=this.create(t),1)}}init(t){return[this,ri.of({field:this,create:t})]}get extension(){return this}}const ai=4,li=3,ci=2,ui=1;function hi(t){return e=>new di(e,t)}const pi={highest:hi(0),high:hi(ui),default:hi(ci),low:hi(li),lowest:hi(ai)};class di{constructor(t,e){this.inner=t,this.prec=e}}class fi{of(t){return new gi(this,t)}reconfigure(t){return fi.reconfigure.of({compartment:this,extension:t})}get(t){return t.config.compartments.get(this)}}class gi{constructor(t,e){this.compartment=t,this.inner=e}}class mi{constructor(t,e,n,o,i,r){for(this.base=t,this.compartments=e,this.dynamicSlots=n,this.address=o,this.staticValues=i,this.facets=r,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(t){let e=this.address[t.id];return null==e?t.default:this.staticValues[e>>1]}static resolve(t,e,n){let o=[],i=Object.create(null),r=new Map;for(let n of function(t,e,n){let o=[[],[],[],[],[]],i=new Map;function r(t,s){let a=i.get(t);if(null!=a){if(a<=s)return;let e=o[a].indexOf(t);e>-1&&o[a].splice(e,1),t instanceof gi&&n.delete(t.compartment)}if(i.set(t,s),Array.isArray(t))for(let e of t)r(e,s);else if(t instanceof gi){if(n.has(t.compartment))throw new RangeError(`Duplicate use of compartment in extensions`);let o=e.get(t.compartment)||t.inner;n.set(t.compartment,o),r(o,s)}else if(t instanceof di)r(t.inner,t.prec);else if(t instanceof si)o[s].push(t),t.provides&&r(t.provides,s);else if(t instanceof ei)o[s].push(t),t.facet.extensions&&r(t.facet.extensions,ci);else{let e=t.extension;if(!e)throw new Error(`Unrecognized extension value in extension set (${t}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);r(e,s)}}return r(t,ci),o.reduce(((t,e)=>t.concat(e)))}(t,e,r))n instanceof si?o.push(n):(i[n.facet.id]||(i[n.facet.id]=[])).push(n);let s=Object.create(null),a=[],l=[];for(let t of o)s[t.id]=l.length<<1,l.push((e=>t.slot(e)));let c=null==n?void 0:n.config.facets;for(let t in i){let e=i[t],o=e[0].facet,r=c&&c[t]||[];if(e.every((t=>0==t.type)))if(s[o.id]=a.length<<1|1,ti(r,e))a.push(n.facet(o));else{let t=o.combine(e.map((t=>t.value)));a.push(n&&o.compare(t,n.facet(o))?n.facet(o):t)}else{for(let t of e)0==t.type?(s[t.id]=a.length<<1|1,a.push(t.value)):(s[t.id]=l.length<<1,l.push((e=>t.dynamicSlot(e))));s[o.id]=l.length<<1,l.push((t=>ii(t,o,e)))}}let u=l.map((t=>t(s)));return new mi(t,r,u,s,a,i)}}function vi(t,e){if(1&e)return 2;let n=e>>1,o=t.status[n];if(4==o)throw new Error("Cyclic dependency between fields and/or facets");if(2&o)return o;t.status[n]=4;let i=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|i}function yi(t,e){return 1&e?t.config.staticValues[e>>1]:t.values[e>>1]}const _i=Jo.define(),Oi=Jo.define({combine:t=>t.some((t=>t)),static:!0}),bi=Jo.define({combine:t=>t.length?t[0]:void 0,static:!0}),wi=Jo.define(),xi=Jo.define(),Si=Jo.define(),ki=Jo.define({combine:t=>!!t.length&&t[0]});class Pi{constructor(t,e){this.type=t,this.value=e}static define(){return new Ci}}class Ci{of(t){return new Pi(this,t)}}class Ti{constructor(t){this.map=t}of(t){return new Ei(this,t)}}class Ei{constructor(t,e){this.type=t,this.value=e}map(t){let e=this.type.map(this.value,t);return void 0===e?void 0:e==this.value?this:new Ei(this.type,e)}is(t){return this.type==t}static define(t={}){return new Ti(t.map||(t=>t))}static mapEffects(t,e){if(!t.length)return t;let n=[];for(let o of t){let t=o.map(e);t&&n.push(t)}return n}}Ei.reconfigure=Ei.define(),Ei.appendConfig=Ei.define();class Qi{constructor(t,e,n,o,i,r){this.startState=t,this.changes=e,this.selection=n,this.effects=o,this.annotations=i,this.scrollIntoView=r,this._doc=null,this._state=null,n&&Ho(n,e.newLength),i.some((t=>t.type==Qi.time))||(this.annotations=i.concat(Qi.time.of(Date.now())))}static create(t,e,n,o,i,r){return new Qi(t,e,n,o,i,r)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(t){for(let e of this.annotations)if(e.type==t)return e.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(t){let e=this.annotation(Qi.userEvent);return!(!e||!(e==t||e.length>t.length&&e.slice(0,t.length)==t&&"."==e[t.length]))}}function Ai(t,e){let n=[];for(let o=0,i=0;;){let r,s;if(o<t.length&&(i==e.length||e[i]>=t[o]))r=t[o++],s=t[o++];else{if(!(i<e.length))return n;r=e[i++],s=e[i++]}!n.length||n[n.length-1]<r?n.push(r,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function $i(t,e,n){var o;let i,r,s;return n?(i=e.changes,r=Xo.empty(e.changes.length),s=t.changes.compose(e.changes)):(i=e.changes.map(t.changes),r=t.changes.mapDesc(e.changes,!0),s=t.changes.compose(i)),{changes:s,selection:e.selection?e.selection.map(r):null===(o=t.selection)||void 0===o?void 0:o.map(i),effects:Ei.mapEffects(t.effects,i).concat(Ei.mapEffects(e.effects,r)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function ji(t,e,n){let o=e.selection,i=Mi(e.annotations);return e.userEvent&&(i=i.concat(Qi.userEvent.of(e.userEvent))),{changes:e.changes instanceof Xo?e.changes:Xo.of(e.changes||[],n,t.facet(bi)),selection:o&&(o instanceof Go?o:Go.single(o.anchor,o.head)),effects:Mi(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function Ri(t,e,n){let o=ji(t,e.length?e[0]:{},t.doc.length);e.length&&!1===e[0].filter&&(n=!1);for(let i=1;i<e.length;i++){!1===e[i].filter&&(n=!1);let r=!!e[i].sequential;o=$i(o,ji(t,e[i],r?o.changes.newLength:t.doc.length),r)}let i=Qi.create(t,o.changes,o.selection,o.effects,o.annotations,o.scrollIntoView);return function(t){let e=t.startState,n=e.facet(Si),o=t;for(let i=n.length-1;i>=0;i--){let r=n[i](t);r&&Object.keys(r).length&&(o=$i(o,ji(e,r,t.changes.newLength),!0))}return o==t?t:Qi.create(e,t.changes,t.selection,o.effects,o.annotations,o.scrollIntoView)}(n?function(t){let e=t.startState,n=!0;for(let o of e.facet(wi)){let e=o(t);if(!1===e){n=!1;break}Array.isArray(e)&&(n=!0===n?e:Ai(n,e))}if(!0!==n){let o,i;if(!1===n)i=t.changes.invertedDesc,o=Xo.empty(e.doc.length);else{let e=t.changes.filter(n);o=e.changes,i=e.filtered.mapDesc(e.changes).invertedDesc}t=Qi.create(e,o,t.selection&&t.selection.map(i),Ei.mapEffects(t.effects,i),t.annotations,t.scrollIntoView)}let o=e.facet(xi);for(let n=o.length-1;n>=0;n--){let i=o[n](t);t=i instanceof Qi?i:Array.isArray(i)&&1==i.length&&i[0]instanceof Qi?i[0]:Ri(e,Mi(i),!1)}return t}(i):i)}Qi.time=Pi.define(),Qi.userEvent=Pi.define(),Qi.addToHistory=Pi.define(),Qi.remote=Pi.define();const Zi=[];function Mi(t){return null==t?Zi:Array.isArray(t)?t:[t]}var Vi=function(t){return t[t["Word"]=0]="Word",t[t["Space"]=1]="Space",t[t["Other"]=2]="Other",t}(Vi||(Vi={}));const Di=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Ii;try{Ii=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(t){}function Ni(t){return e=>{if(!/\S/.test(e))return Vi.Space;if(function(t){if(Ii)return Ii.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Di.test(n)))return!0}return!1}(e))return Vi.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return Vi.Word;return Vi.Other}}class Wi{constructor(t,e,n,o,i,r){this.config=t,this.doc=e,this.selection=n,this.values=o,this.status=t.statusTemplate.slice(),this.computeSlot=i,r&&(r._state=this);for(let t=0;t<this.config.dynamicSlots.length;t++)vi(this,t<<1);this.computeSlot=null}field(t,e=!0){let n=this.config.address[t.id];if(null!=n)return vi(this,n),yi(this,n);if(e)throw new RangeError("Field is not present in this state")}update(...t){return Ri(this,t,!0)}applyTransaction(t){let e,n=this.config,{base:o,compartments:i}=n;for(let e of t.effects)e.is(fi.reconfigure)?(n&&(i=new Map,n.compartments.forEach(((t,e)=>i.set(e,t))),n=null),i.set(e.value.compartment,e.value.extension)):e.is(Ei.reconfigure)?(n=null,o=e.value):e.is(Ei.appendConfig)&&(n=null,o=Mi(o).concat(e.value));if(n)e=t.startState.values.slice();else{n=mi.resolve(o,i,this),e=new Wi(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((t,e)=>e.reconfigure(t,this)),null).values}let r=t.startState.facet(Oi)?t.newSelection:t.newSelection.asSingle();new Wi(n,t.newDoc,r,e,((e,n)=>n.update(e,t)),t)}replaceSelection(t){return"string"==typeof t&&(t=this.toText(t)),this.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:t},range:Go.cursor(e.from+t.length)})))}changeByRange(t){let e=this.selection,n=t(e.ranges[0]),o=this.changes(n.changes),i=[n.range],r=Mi(n.effects);for(let n=1;n<e.ranges.length;n++){let s=t(e.ranges[n]),a=this.changes(s.changes),l=a.map(o);for(let t=0;t<n;t++)i[t]=i[t].map(l);let c=o.mapDesc(a,!0);i.push(s.range.map(c)),o=o.compose(l),r=Ei.mapEffects(r,l).concat(Ei.mapEffects(Mi(s.effects),c))}return{changes:o,selection:Go.create(i,e.mainIndex),effects:r}}changes(t=[]){return t instanceof Xo?t:Xo.of(t,this.doc.length,this.facet(Wi.lineSeparator))}toText(t){return vo.of(t.split(this.facet(Wi.lineSeparator)||Io))}sliceDoc(t=0,e=this.doc.length){return this.doc.sliceString(t,e,this.lineBreak)}facet(t){let e=this.config.address[t.id];return null==e?t.default:(vi(this,e),yi(this,e))}toJSON(t){let e={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(t)for(let n in t){let o=t[n];o instanceof si&&null!=this.config.address[o.id]&&(e[n]=o.spec.toJSON(this.field(t[n]),this))}return e}static fromJSON(t,e={},n){if(!t||"string"!=typeof t.doc)throw new RangeError("Invalid JSON representation for EditorState");let o=[];if(n)for(let e in n)if(Object.prototype.hasOwnProperty.call(t,e)){let i=n[e],r=t[e];o.push(i.init((t=>i.spec.fromJSON(r,t))))}return Wi.create({doc:t.doc,selection:Go.fromJSON(t.selection),extensions:e.extensions?o.concat([e.extensions]):o})}static create(t={}){let e=mi.resolve(t.extensions||[],new Map),n=t.doc instanceof vo?t.doc:vo.of((t.doc||"").split(e.staticFacet(Wi.lineSeparator)||Io)),o=t.selection?t.selection instanceof Go?t.selection:Go.single(t.selection.anchor,t.selection.head):Go.single(0);return Ho(o,n.length),e.staticFacet(Oi)||(o=o.asSingle()),new Wi(e,n,o,e.dynamicSlots.map((()=>null)),((t,e)=>e.create(t)),null)}get tabSize(){return this.facet(Wi.tabSize)}get lineBreak(){return this.facet(Wi.lineSeparator)||"\n"}get readOnly(){return this.facet(ki)}phrase(t,...e){for(let e of this.facet(Wi.phrases))if(Object.prototype.hasOwnProperty.call(e,t)){t=e[t];break}return e.length&&(t=t.replace(/\$(\$|\d*)/g,((t,n)=>{if("$"==n)return"$";let o=+(n||1);return!o||o>e.length?t:e[o-1]}))),t}languageDataAt(t,e,n=-1){let o=[];for(let i of this.facet(_i))for(let r of i(this,e,n))Object.prototype.hasOwnProperty.call(r,t)&&o.push(r[t]);return o}charCategorizer(t){return Ni(this.languageDataAt("wordChars",t).join(""))}wordAt(t){let{text:e,from:n,length:o}=this.doc.lineAt(t),i=this.charCategorizer(t),r=t-n,s=t-n;for(;r>0;){let t=Ao(e,r,!1);if(i(e.slice(t,r))!=Vi.Word)break;r=t}for(;s<o;){let t=Ao(e,s);if(i(e.slice(s,t))!=Vi.Word)break;s=t}return r==s?null:Go.range(r+n,s+n)}}function Xi(t,e,n={}){let o={};for(let e of t)for(let t of Object.keys(e)){let i=e[t],r=o[t];if(void 0===r)o[t]=i;else if(r===i||void 0===i);else{if(!Object.hasOwnProperty.call(n,t))throw new Error("Config merge conflict for field "+t);o[t]=n[t](r,i)}}for(let t in e)void 0===o[t]&&(o[t]=e[t]);return o}Wi.allowMultipleSelections=Oi,Wi.tabSize=Jo.define({combine:t=>t.length?t[0]:4}),Wi.lineSeparator=bi,Wi.readOnly=ki,Wi.phrases=Jo.define({compare(t,e){let n=Object.keys(t),o=Object.keys(e);return n.length==o.length&&n.every((n=>t[n]==e[n]))}}),Wi.languageData=_i,Wi.changeFilter=wi,Wi.transactionFilter=xi,Wi.transactionExtender=Si,fi.reconfigure=Ei.define();class Li{eq(t){return this==t}range(t,e=t){return Yi.create(t,e,this)}}Li.prototype.startSide=Li.prototype.endSide=0,Li.prototype.point=!1,Li.prototype.mapMode=No.TrackDel;class Yi{constructor(t,e,n){this.from=t,this.to=e,this.value=n}static create(t,e,n){return new Yi(t,e,n)}}function zi(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class qi{constructor(t,e,n,o){this.from=t,this.to=e,this.value=n,this.maxPoint=o}get length(){return this.to[this.to.length-1]}findIndex(t,e,n,o=0){let i=n?this.to:this.from;for(let r=o,s=i.length;;){if(r==s)return r;let o=r+s>>1,a=i[o]-t||(n?this.value[o].endSide:this.value[o].startSide)-e;if(o==r)return a>=0?r:s;a>=0?s=o:r=o+1}}between(t,e,n,o){for(let i=this.findIndex(e,-1e9,!0),r=this.findIndex(n,1e9,!1,i);i<r;i++)if(!1===o(this.from[i]+t,this.to[i]+t,this.value[i]))return!1}map(t,e){let n=[],o=[],i=[],r=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,u=this.value[a],h=this.from[a]+t,p=this.to[a]+t;if(h==p){let t=e.mapPos(h,u.startSide,u.mapMode);if(null==t)continue;if(l=c=t,u.startSide!=u.endSide&&(c=e.mapPos(h,u.endSide),c<l))continue}else if(l=e.mapPos(h,u.startSide),c=e.mapPos(p,u.endSide),l>c||l==c&&u.startSide>0&&u.endSide<=0)continue;(c-l||u.endSide-u.startSide)<0||(r<0&&(r=l),u.point&&(s=Math.max(s,c-l)),n.push(u),o.push(l-r),i.push(c-r))}return{mapped:n.length?new qi(o,i,n,s):null,pos:r}}}class Ui{constructor(t,e,n,o){this.chunkPos=t,this.chunk=e,this.nextLayer=n,this.maxPoint=o}static create(t,e,n,o){return new Ui(t,e,n,o)}get length(){let t=this.chunk.length-1;return t<0?0:Math.max(this.chunkEnd(t),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let t=this.nextLayer.size;for(let e of this.chunk)t+=e.value.length;return t}chunkEnd(t){return this.chunkPos[t]+this.chunk[t].length}update(t){let{add:e=[],sort:n=!1,filterFrom:o=0,filterTo:i=this.length}=t,r=t.filter;if(0==e.length&&!r)return this;if(n&&(e=e.slice().sort(zi)),this.isEmpty)return e.length?Ui.of(e):this;let s=new Gi(this,null,-1).goto(0),a=0,l=[],c=new Bi;for(;s.value||a<e.length;)if(a<e.length&&(s.from-e[a].from||s.startSide-e[a].value.startSide)>=0){let t=e[a++];c.addInner(t.from,t.to,t.value)||l.push(t)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==e.length||this.chunkEnd(s.chunkIndex)<e[a].from)&&(!r||o>this.chunkEnd(s.chunkIndex)||i<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!r||o>s.to||i<s.from||r(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(Yi.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?Ui.empty:this.nextLayer.update({add:l,filter:r,filterFrom:o,filterTo:i}))}map(t){if(t.empty||this.isEmpty)return this;let e=[],n=[],o=-1;for(let i=0;i<this.chunk.length;i++){let r=this.chunkPos[i],s=this.chunk[i],a=t.touchesRange(r,r+s.length);if(!1===a)o=Math.max(o,s.maxPoint),e.push(s),n.push(t.mapPos(r));else if(!0===a){let{mapped:i,pos:a}=s.map(r,t);i&&(o=Math.max(o,i.maxPoint),e.push(i),n.push(a))}}let i=this.nextLayer.map(t);return 0==e.length?i:new Ui(n,e,i||Ui.empty,o)}between(t,e,n){if(!this.isEmpty){for(let o=0;o<this.chunk.length;o++){let i=this.chunkPos[o],r=this.chunk[o];if(e>=i&&t<=i+r.length&&!1===r.between(i,t-i,e-i,n))return}this.nextLayer.between(t,e,n)}}iter(t=0){return Hi.from([this]).goto(t)}get isEmpty(){return this.nextLayer==this}static iter(t,e=0){return Hi.from(t).goto(e)}static compare(t,e,n,o,i=-1){let r=t.filter((t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=i)),s=e.filter((t=>t.maxPoint>0||!t.isEmpty&&t.maxPoint>=i)),a=Fi(r,s,n),l=new Ji(r,a,i),c=new Ji(s,a,i);n.iterGaps(((t,e,n)=>tr(l,t,c,e,n,o))),n.empty&&0==n.length&&tr(l,0,c,0,0,o)}static eq(t,e,n=0,o){null==o&&(o=1e9-1);let i=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0)),r=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0));if(i.length!=r.length)return!1;if(!i.length)return!0;let s=Fi(i,r),a=new Ji(i,s,0).goto(n),l=new Ji(r,s,0).goto(n);for(;;){if(a.to!=l.to||!er(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>o)return!0;a.next(),l.next()}}static spans(t,e,n,o,i=-1){let r=new Ji(t,null,i).goto(e),s=e,a=r.openStart;for(;;){let t=Math.min(r.to,n);if(r.point){let n=r.activeForPoint(r.to),i=r.pointFrom<e?n.length+1:Math.min(n.length,a);o.point(s,t,r.point,n,i,r.pointRank),a=Math.min(r.openEnd(t),n.length)}else t>s&&(o.span(s,t,r.active,a),a=r.openEnd(t));if(r.to>n)return a+(r.point&&r.to>n?1:0);s=r.to,r.next()}}static of(t,e=!1){let n=new Bi;for(let o of t instanceof Yi?[t]:e?function(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let o=t[n];if(zi(e,o)>0)return t.slice().sort(zi);e=o}return t}(t):t)n.add(o.from,o.to,o.value);return n.finish()}}Ui.empty=new Ui([],[],null,-1),Ui.empty.nextLayer=Ui.empty;class Bi{finishChunk(t){this.chunks.push(new qi(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,t&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(t,e,n){this.addInner(t,e,n)||(this.nextLayer||(this.nextLayer=new Bi)).add(t,e,n)}addInner(t,e,n){let o=t-this.lastTo||n.startSide-this.last.endSide;if(o<=0&&(t-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(o<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=t),this.from.push(t-this.chunkStart),this.to.push(e-this.chunkStart),this.last=n,this.lastFrom=t,this.lastTo=e,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,e-t)),!0)}addChunk(t,e){if((t-this.lastTo||e.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,e.maxPoint),this.chunks.push(e),this.chunkPos.push(t);let n=e.value.length-1;return this.last=e.value[n],this.lastFrom=e.from[n]+t,this.lastTo=e.to[n]+t,!0}finish(){return this.finishInner(Ui.empty)}finishInner(t){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return t;let e=Ui.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(t):t,this.setMaxPoint);return this.from=null,e}}function Fi(t,e,n){let o=new Map;for(let e of t)for(let t=0;t<e.chunk.length;t++)e.chunk[t].maxPoint<=0&&o.set(e.chunk[t],e.chunkPos[t]);let i=new Set;for(let t of e)for(let e=0;e<t.chunk.length;e++){let r=o.get(t.chunk[e]);null==r||(n?n.mapPos(r):r)!=t.chunkPos[e]||(null==n?void 0:n.touchesRange(r,r+t.chunk[e].length))||i.add(t.chunk[e])}return i}class Gi{constructor(t,e,n,o=0){this.layer=t,this.skip=e,this.minPoint=n,this.rank=o}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(t,e=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(t,e,!1),this}gotoInner(t,e,n){for(;this.chunkIndex<this.layer.chunk.length;){let e=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(e)||this.layer.chunkEnd(this.chunkIndex)<t||e.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let o=this.layer.chunk[this.chunkIndex].findIndex(t-this.layer.chunkPos[this.chunkIndex],e,!0);(!n||this.rangeIndex<o)&&this.setRangeIndex(o)}this.next()}forward(t,e){(this.to-t||this.endSide-e)<0&&this.gotoInner(t,e,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let t=this.layer.chunkPos[this.chunkIndex],e=this.layer.chunk[this.chunkIndex],n=t+e.from[this.rangeIndex];if(this.from=n,this.to=t+e.to[this.rangeIndex],this.value=e.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(t){if(t==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=t}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(t){return this.from-t.from||this.startSide-t.startSide||this.rank-t.rank||this.to-t.to||this.endSide-t.endSide}}class Hi{constructor(t){this.heap=t}static from(t,e=null,n=-1){let o=[];for(let i=0;i<t.length;i++)for(let r=t[i];!r.isEmpty;r=r.nextLayer)r.maxPoint>=n&&o.push(new Gi(r,e,n,i));return 1==o.length?o[0]:new Hi(o)}get startSide(){return this.value?this.value.startSide:0}goto(t,e=-1e9){for(let n of this.heap)n.goto(t,e);for(let t=this.heap.length>>1;t>=0;t--)Ki(this.heap,t);return this.next(),this}forward(t,e){for(let n of this.heap)n.forward(t,e);for(let t=this.heap.length>>1;t>=0;t--)Ki(this.heap,t);(this.to-t||this.value.endSide-e)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let t=this.heap[0];this.from=t.from,this.to=t.to,this.value=t.value,this.rank=t.rank,t.value&&t.next(),Ki(this.heap,0)}}}function Ki(t,e){for(let n=t[e];;){let o=(e<<1)+1;if(o>=t.length)break;let i=t[o];if(o+1<t.length&&i.compare(t[o+1])>=0&&(i=t[o+1],o++),n.compare(i)<0)break;t[o]=n,t[e]=i,e=o}}class Ji{constructor(t,e,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Hi.from(t,e,n)}goto(t,e=-1e9){return this.cursor.goto(t,e),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=t,this.endSide=e,this.openStart=-1,this.next(),this}forward(t,e){for(;this.minActive>-1&&(this.activeTo[this.minActive]-t||this.active[this.minActive].endSide-e)<0;)this.removeActive(this.minActive);this.cursor.forward(t,e)}removeActive(t){nr(this.active,t),nr(this.activeTo,t),nr(this.activeRank,t),this.minActive=ir(this.active,this.activeTo)}addActive(t){let e=0,{value:n,to:o,rank:i}=this.cursor;for(;e<this.activeRank.length&&this.activeRank[e]<=i;)e++;or(this.active,e,n),or(this.activeTo,e,o),or(this.activeRank,e,i),t&&or(t,e,this.cursor.from),this.minActive=ir(this.active,this.activeTo)}next(){let t=this.to,e=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let o=this.minActive;if(o>-1&&(this.activeTo[o]-this.cursor.from||this.active[o].endSide-this.cursor.startSide)<0){if(this.activeTo[o]>t){this.to=this.activeTo[o],this.endSide=this.active[o].endSide;break}this.removeActive(o),n&&nr(n,o)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>t){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let t=this.cursor.value;if(t.point){if(!(e&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=t,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=t.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let e=n.length-1;e>=0&&n[e]<t;e--)this.openStart++}}activeForPoint(t){if(!this.active.length)return this.active;let e=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>t||this.activeTo[n]==t&&this.active[n].endSide>=this.point.endSide)&&e.push(this.active[n]);return e.reverse()}openEnd(t){let e=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>t;n--)e++;return e}}function tr(t,e,n,o,i,r){t.goto(e),n.goto(o);let s=o+i,a=o,l=o-e;for(;;){let e=t.to+l-n.to||t.endSide-n.endSide,o=e<0?t.to+l:n.to,i=Math.min(o,s);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&er(t.activeForPoint(t.to),n.activeForPoint(n.to))||r.comparePoint(a,i,t.point,n.point):i>a&&!er(t.active,n.active)&&r.compareRange(a,i,t.active,n.active),o>s)break;a=o,e<=0&&t.next(),e>=0&&n.next()}}function er(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function nr(t,e){for(let n=e,o=t.length-1;n<o;n++)t[n]=t[n+1];t.pop()}function or(t,e,n){for(let n=t.length-1;n>=e;n--)t[n+1]=t[n];t[e]=n}function ir(t,e){let n=-1,o=1e9;for(let i=0;i<e.length;i++)(e[i]-o||t[i].endSide-t[n].endSide)<0&&(n=i,o=e[i]);return n}function rr(t,e,n=t.length){let o=0;for(let i=0;i<n;)9==t.charCodeAt(i)?(o+=e-o%e,i++):(o++,i=Ao(t,i));return o}function sr(t,e,n,o){for(let o=0,i=0;;){if(i>=e)return o;if(o==t.length)break;i+=9==t.charCodeAt(o)?n-i%n:1,o=Ao(t,o)}return!0===o?-1:t.length}function ar(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function lr(t){return function(t){if(Array.isArray(t))return ar(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ar(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ar(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cr(t){return cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cr(t)}function ur(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hr(t){var e=function(t,e){if("object"!==cr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,e||"default");if("object"!==cr(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===cr(e)?e:String(e)}function pr(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,hr(o.key),o)}}function dr(t,e,n){return e&&pr(t.prototype,e),n&&pr(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}for(var fr="ͼ",gr="undefined"==typeof Symbol?"__"+fr:Symbol.for(fr),mr="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),vr="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{},yr=function(){function t(e,n){ur(this,t),this.rules=[];var o=(n||{}).finish;function i(t){return/^@/.test(t)?[t]:t.split(/,\s*/)}function r(t,e,n,s){var a=[],l=/^@(\w+)\b/.exec(t[0]),c=l&&"keyframes"==l[1];if(l&&null==e)return n.push(t[0]+";");for(var u in e){var h=e[u];if(/&/.test(u))r(u.split(/,\s*/).map((function(e){return t.map((function(t){return e.replace(/&/,t)}))})).reduce((function(t,e){return t.concat(e)})),h,n);else if(h&&"object"==cr(h)){if(!l)throw new RangeError("The value of a property ("+u+") should be a primitive value.");r(i(u),h,a,c)}else null!=h&&a.push(u.replace(/_.*/,"").replace(/[A-Z]/g,(function(t){return"-"+t.toLowerCase()}))+": "+h+";")}(a.length||c)&&n.push((!o||l||s?t:t.map(o)).join(", ")+" {"+a.join(" ")+"}")}for(var s in e)r(i(s),e[s],this.rules)}return dr(t,[{key:"getRules",value:function(){return this.rules.join("\n")}}],[{key:"newName",value:function(){var t=vr[gr]||1;return vr[gr]=t+1,fr+t.toString(36)}},{key:"mount",value:function(t,e,n){var o=t[mr],i=n&&n.nonce;o?i&&o.setNonce(i):o=new Or(t,i),o.mount(Array.isArray(e)?e:[e])}}]),t}(),_r=new Map,Or=function(){function t(e,n){ur(this,t);var o=e.ownerDocument||e,i=o.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){var r=_r.get(o);if(r)return e.adoptedStyleSheets=[r.sheet].concat(lr(e.adoptedStyleSheets)),e[mr]=r;this.sheet=new i.CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(lr(e.adoptedStyleSheets)),_r.set(o,this)}else{this.styleTag=o.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);var s=e.head||e;s.insertBefore(this.styleTag,s.firstChild)}this.modules=[],e[mr]=this}return dr(t,[{key:"mount",value:function(t){for(var e=this.sheet,n=0,o=0,i=0;i<t.length;i++){var r=t[i],s=this.modules.indexOf(r);if(s<o&&s>-1&&(this.modules.splice(s,1),o--,s=-1),-1==s){if(this.modules.splice(o++,0,r),e)for(var a=0;a<r.rules.length;a++)e.insertRule(r.rules[a],n++)}else{for(;o<s;)n+=this.modules[o++].rules.length;n+=r.rules.length,o++}}if(!e){for(var l="",c=0;c<this.modules.length;c++)l+=this.modules[c].getRules()+"\n";this.styleTag.textContent=l}}},{key:"setNonce",value:function(t){this.styleTag&&this.styleTag.getAttribute("nonce")!=t&&this.styleTag.setAttribute("nonce",t)}}]),t}(),br={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},wr={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:"\""},xr="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),Sr="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),kr=0;kr<10;kr++)br[48+kr]=br[96+kr]=String(kr);for(kr=1;kr<=24;kr++)br[kr+111]="F"+kr;for(kr=65;kr<=90;kr++)br[kr]=String.fromCharCode(kr+32),wr[kr]=String.fromCharCode(kr);for(var Pr in br)wr.hasOwnProperty(Pr)||(wr[Pr]=br[Pr]);function Cr(t){let e;return e=11==t.nodeType?t.getSelection?t:t.ownerDocument:t,e.getSelection()}function Tr(t,e){return!!e&&(t==e||t.contains(1!=e.nodeType?e.parentNode:e))}function Er(t,e){if(!e.anchorNode)return!1;try{return Tr(t,e.anchorNode)}catch(t){return!1}}function Qr(t){return 3==t.nodeType?Xr(t,0,t.nodeValue.length).getClientRects():1==t.nodeType?t.getClientRects():[]}function Ar(t,e,n,o){return!!n&&(jr(t,e,n,o,-1)||jr(t,e,n,o,1))}function $r(t){for(var e=0;;e++)if(!(t=t.previousSibling))return e}function jr(t,e,n,o,i){for(;;){if(t==n&&e==o)return!0;if(e==(i<0?0:Rr(t))){if("DIV"==t.nodeName)return!1;let n=t.parentNode;if(!n||1!=n.nodeType)return!1;e=$r(t)+(i<0?0:1),t=n}else{if(1!=t.nodeType)return!1;if(1==(t=t.childNodes[e+(i<0?-1:0)]).nodeType&&"false"==t.contentEditable)return!1;e=i<0?Rr(t):0}}}function Rr(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Zr(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Mr(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Vr(t,e){let n=e.width/t.offsetWidth,o=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(o>.995&&o<1.005||!isFinite(o)||Math.abs(e.height-t.offsetHeight)<1)&&(o=1),{scaleX:n,scaleY:o}}class Dr{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(t){return this.anchorNode==t.anchorNode&&this.anchorOffset==t.anchorOffset&&this.focusNode==t.focusNode&&this.focusOffset==t.focusOffset}setRange(t){let{anchorNode:e,focusNode:n}=t;this.set(e,Math.min(t.anchorOffset,e?Rr(e):0),n,Math.min(t.focusOffset,n?Rr(n):0))}set(t,e,n,o){this.anchorNode=t,this.anchorOffset=e,this.focusNode=n,this.focusOffset=o}}let Ir,Nr=null;function Wr(t){if(t.setActive)return t.setActive();if(Nr)return t.focus(Nr);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(null==Nr?{get preventScroll(){return Nr={preventScroll:!0},!0}}:void 0),!Nr){Nr=!1;for(let t=0;t<e.length;){let n=e[t++],o=e[t++],i=e[t++];n.scrollTop!=o&&(n.scrollTop=o),n.scrollLeft!=i&&(n.scrollLeft=i)}}}function Xr(t,e,n=e){let o=Ir||(Ir=document.createRange());return o.setEnd(t,n),o.setStart(t,e),o}function Lr(t,e,n){let o={key:e,code:e,keyCode:n,which:n,cancelable:!0},i=new KeyboardEvent("keydown",o);i.synthetic=!0,t.dispatchEvent(i);let r=new KeyboardEvent("keyup",o);return r.synthetic=!0,t.dispatchEvent(r),i.defaultPrevented||r.defaultPrevented}function Yr(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function zr(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}class qr{constructor(t,e,n=!0){this.node=t,this.offset=e,this.precise=n}static before(t,e){return new qr(t.parentNode,$r(t),e)}static after(t,e){return new qr(t.parentNode,$r(t)+1,e)}}const Ur=[];class Br{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(t){let e=this.posAtStart;for(let n of this.children){if(n==t)return e;e+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(t){return this.posBefore(t)+t.length}sync(t,e){if(2&this.flags){let n,o=this.dom,i=null;for(let r of this.children){if(7&r.flags){if(!r.dom&&(n=i?i.nextSibling:o.firstChild)){let t=Br.get(n);(!t||!t.parent&&t.canReuseDOM(r))&&r.reuseDOM(n)}r.sync(t,e),r.flags&=~7}if(n=i?i.nextSibling:o.firstChild,e&&!e.written&&e.node==o&&n!=r.dom&&(e.written=!0),r.dom.parentNode==o)for(;n&&n!=r.dom;)n=Fr(n);else o.insertBefore(r.dom,n);i=r.dom}for(n=i?i.nextSibling:o.firstChild,n&&e&&e.node==o&&(e.written=!0);n;)n=Fr(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(t,e),n.flags&=~7)}reuseDOM(t){}localPosFromDOM(t,e){let n;if(t==this.dom)n=this.dom.childNodes[e];else{let o=0==Rr(t)?0:0==e?-1:1;for(;;){let e=t.parentNode;if(e==this.dom)break;0==o&&e.firstChild!=e.lastChild&&(o=t==e.firstChild?-1:1),t=e}n=o<0?t:t.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!Br.get(n);)n=n.nextSibling;if(!n)return this.length;for(let t=0,e=0;;t++){let o=this.children[t];if(o.dom==n)return e;e+=o.length+o.breakAfter}}domBoundsAround(t,e,n=0){let o=-1,i=-1,r=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],u=l+n.length;if(l<t&&u>e)return n.domBoundsAround(t,e,l);if(u>=t&&-1==o&&(o=a,i=l),l>e&&n.dom.parentNode==this.dom){r=a,s=c;break}c=u,l=u+n.breakAfter}return{from:i,to:s<0?n+this.length:s,startDOM:(o?this.children[o-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:r<this.children.length&&r>=0?this.children[r].dom:null}}markDirty(t=!1){this.flags|=2,this.markParentsDirty(t)}markParentsDirty(t){for(let e=this.parent;e;e=e.parent){if(t&&(e.flags|=2),1&e.flags)return;e.flags|=1,t=!1}}setParent(t){this.parent!=t&&(this.parent=t,7&this.flags&&this.markParentsDirty(!0))}setDOM(t){this.dom!=t&&(this.dom&&(this.dom.cmView=null),this.dom=t,t.cmView=this)}get rootView(){for(let t=this;;){let e=t.parent;if(!e)return t;t=e}}replaceChildren(t,e,n=Ur){this.markDirty();for(let o=t;o<e;o++){let t=this.children[o];t.parent==this&&n.indexOf(t)<0&&t.destroy()}this.children.splice(t,e-t,...n);for(let t=0;t<n.length;t++)n[t].setParent(this)}ignoreMutation(t){return!1}ignoreEvent(t){return!1}childCursor(t=this.length){return new Gr(this.children,t,this.children.length)}childPos(t,e=1){return this.childCursor().findPos(t,e)}toString(){let t=this.constructor.name.replace("View","");return t+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==t?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(t){return t.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(t,e,n,o,i,r){return!1}become(t){return!1}canReuseDOM(t){return t.constructor==this.constructor&&!(8&(this.flags|t.flags))}getSide(){return 0}destroy(){for(let t of this.children)t.parent==this&&t.destroy();this.parent=null}}function Fr(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}Br.prototype.breakAfter=0;class Gr{constructor(t,e,n){this.children=t,this.pos=e,this.i=n,this.off=0}findPos(t,e=1){for(;;){if(t>this.pos||t==this.pos&&(e>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=t-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function Hr(t,e,n,o,i,r,s,a,l){let{children:c}=t,u=c.length?c[e]:null,h=r.length?r[r.length-1]:null,p=h?h.breakAfter:s;if(!(e==o&&u&&!s&&!p&&r.length<2&&u.merge(n,i,r.length?h:null,0==n,a,l))){if(o<c.length){let t=c[o];t&&(i<t.length||t.breakAfter&&(null==h?void 0:h.breakAfter))?(e==o&&(t=t.split(i),i=0),!p&&h&&t.merge(0,i,h,!0,0,l)?r[r.length-1]=t:((i||t.children.length&&!t.children[0].length)&&t.merge(0,i,null,!1,0,l),r.push(t))):(null==t?void 0:t.breakAfter)&&(h?h.breakAfter=1:s=1),o++}for(u&&(u.breakAfter=s,n>0&&(!s&&r.length&&u.merge(n,u.length,r[0],!1,a,0)?u.breakAfter=r.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,a,0),e++));e<o&&r.length;)if(c[o-1].become(r[r.length-1]))o--,r.pop(),l=r.length?0:a;else{if(!c[e].become(r[0]))break;e++,r.shift(),a=r.length?0:l}!r.length&&e&&o<c.length&&!c[e-1].breakAfter&&c[o].merge(0,0,c[e-1],!1,a,l)&&e--,(e<o||r.length)&&t.replaceChildren(e,o,r)}}function Kr(t,e,n,o,i,r){let s=t.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:u}=s.findPos(e,-1),h=e-n;for(let t of o)h+=t.length;t.length+=h,Hr(t,c,u,a,l,o,0,i,r)}let Jr="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},ts="undefined"!=typeof document?document:{documentElement:{style:{}}};const es=/Edge\/(\d+)/.exec(Jr.userAgent),ns=/MSIE \d/.test(Jr.userAgent),os=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Jr.userAgent),is=!!(ns||os||es),rs=!is&&/gecko\/(\d+)/i.test(Jr.userAgent),ss=!is&&/Chrome\/(\d+)/.exec(Jr.userAgent),as="webkitFontSmoothing"in ts.documentElement.style,ls=!is&&/Apple Computer/.test(Jr.vendor),cs=ls&&(/Mobile\/\w+/.test(Jr.userAgent)||Jr.maxTouchPoints>2);var us={mac:cs||/Mac/.test(Jr.platform),windows:/Win/.test(Jr.platform),linux:/Linux|X11/.test(Jr.platform),ie:is,ie_version:ns?ts.documentMode||6:os?+os[1]:es?+es[1]:0,gecko:rs,gecko_version:rs?+(/Firefox\/(\d+)/.exec(Jr.userAgent)||[0,0])[1]:0,chrome:!!ss,chrome_version:ss?+ss[1]:0,ios:cs,android:/Android\b/.test(Jr.userAgent),webkit:as,safari:ls,webkit_version:as?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=ts.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};const hs=256;class ps extends Br{constructor(t){super(),this.text=t}get length(){return this.text.length}createDOM(t){this.setDOM(t||document.createTextNode(this.text))}sync(t,e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(t){3==t.nodeType&&this.createDOM(t)}merge(t,e,n){return!(8&this.flags||n&&(!(n instanceof ps)||this.length-(e-t)+n.length>hs||8&n.flags))&&(this.text=this.text.slice(0,t)+(n?n.text:"")+this.text.slice(e),this.markDirty(),!0)}split(t){let e=new ps(this.text.slice(t));return this.text=this.text.slice(0,t),this.markDirty(),e.flags|=8&this.flags,e}localPosFromDOM(t,e){return t==this.dom?e:e?this.text.length:0}domAtPos(t){return new qr(this.dom,t)}domBoundsAround(t,e,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(t,e){return function(t,e,n){let o=t.nodeValue.length;e>o&&(e=o);let i=e,r=e,s=0;0==e&&n<0||e==o&&n>=0?us.chrome||us.gecko||(e?(i--,s=1):r<o&&(r++,s=-1)):n<0?i--:r<o&&r++;let a=Xr(t,i,r).getClientRects();if(!a.length)return null;let l=a[(s?s<0:n>=0)?0:a.length-1];us.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(t=>t.width))||l);return s?Zr(l,s<0):l||null}(this.dom,t,e)}}class ds extends Br{constructor(t,e=[],n=0){super(),this.mark=t,this.children=e,this.length=n;for(let t of e)t.setParent(this)}setAttrs(t){if(Yr(t),this.mark.class&&(t.className=this.mark.class),this.mark.attrs)for(let e in this.mark.attrs)t.setAttribute(e,this.mark.attrs[e]);return t}canReuseDOM(t){return super.canReuseDOM(t)&&!(8&(this.flags|t.flags))}reuseDOM(t){t.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(t),this.flags|=4|2)}sync(t,e){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(t,e)}merge(t,e,n,o,i,r){return(!n||!(!(n instanceof ds&&n.mark.eq(this.mark))||t&&i<=0||e<this.length&&r<=0))&&(Kr(this,t,e,n?n.children.slice():[],i-1,r-1),this.markDirty(),!0)}split(t){let e=[],n=0,o=-1,i=0;for(let r of this.children){let s=n+r.length;s>t&&e.push(n<t?r.split(t-n):r),o<0&&n>=t&&(o=i),n=s,i++}let r=this.length-t;return this.length=t,o>-1&&(this.children.length=o,this.markDirty()),new ds(this.mark,e,r)}domAtPos(t){return ms(this,t)}coordsAt(t,e){return ys(this,t,e)}}class fs extends Br{static create(t,e,n){return new fs(t,e,n)}constructor(t,e,n){super(),this.widget=t,this.length=e,this.side=n,this.prevWidget=null}split(t){let e=fs.create(this.widget,this.length-t,this.side);return this.length-=t,e}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.dom.contentEditable="false")}getSide(){return this.side}merge(t,e,n,o,i,r){return!(n&&(!(n instanceof fs&&this.widget.compare(n.widget))||t>0&&i<=0||e<this.length&&r<=0))&&(this.length=t+(n?n.length:0)+(this.length-e),!0)}become(t){return t instanceof fs&&t.side==this.side&&this.widget.constructor==t.widget.constructor&&(this.widget.compare(t.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get overrideDOMText(){if(0==this.length)return vo.empty;let t=this;for(;t.parent;)t=t.parent;let{view:e}=t,n=e&&e.state.doc,o=this.posAtStart;return n?n.slice(o,o+this.length):vo.empty}domAtPos(t){return(this.length?0==t:this.side>0)?qr.before(this.dom):qr.after(this.dom,t==this.length)}domBoundsAround(){return null}coordsAt(t,e){let n=this.widget.coordsAt(this.dom,t,e);if(n)return n;let o=this.dom.getClientRects(),i=null;if(!o.length)return null;let r=this.side?this.side<0:t>0;for(let e=r?o.length-1:0;i=o[e],!(t>0?0==e:e==o.length-1||i.top<i.bottom);e+=r?-1:1);return Zr(i,!r)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class gs extends Br{constructor(t){super(),this.side=t}get length(){return 0}merge(){return!1}become(t){return t instanceof gs&&t.side==this.side}split(){return new gs(this.side)}sync(){if(!this.dom){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),this.setDOM(t)}}getSide(){return this.side}domAtPos(t){return this.side>0?qr.before(this.dom):qr.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(t){return this.dom.getBoundingClientRect()}get overrideDOMText(){return vo.empty}get isHidden(){return!0}}function ms(t,e){let n=t.dom,{children:o}=t,i=0;for(let t=0;i<o.length;i++){let r=o[i],s=t+r.length;if(!(s==t&&r.getSide()<=0)){if(e>t&&e<s&&r.dom.parentNode==n)return r.domAtPos(e-t);if(e<=t)break;t=s}}for(let t=i;t>0;t--){let e=o[t-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let t=i;t<o.length;t++){let e=o[t];if(e.dom.parentNode==n)return e.domAtPos(0)}return new qr(n,0)}function vs(t,e,n){let o,{children:i}=t;n>0&&e instanceof ds&&i.length&&(o=i[i.length-1])instanceof ds&&o.mark.eq(e.mark)?vs(o,e.children[0],n-1):(i.push(e),e.setParent(t)),t.length+=e.length}function ys(t,e,n){let o=null,i=-1,r=null,s=-1;!function t(e,a){for(let l=0,c=0;l<e.children.length&&c<=a;l++){let u=e.children[l],h=c+u.length;h>=a&&(u.children.length?t(u,a-c):(!r||r.isHidden&&n>0)&&(h>a||c==h&&u.getSide()>0)?(r=u,s=a-c):(c<a||c==h&&u.getSide()<0&&!u.isHidden)&&(o=u,i=a-c)),c=h}}(t,e);let a=(n<0?o:r)||o||r;return a?a.coordsAt(Math.max(0,a==o?i:s),n):function(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Qr(e);return n[n.length-1]||null}(t)}function _s(t,e){for(let n in t)"class"==n&&e.class?e.class+=" "+t.class:"style"==n&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}ps.prototype.children=fs.prototype.children=gs.prototype.children=Ur;const Os=Object.create(null);function bs(t,e,n){if(t==e)return!0;t||(t=Os),e||(e=Os);let o=Object.keys(t),i=Object.keys(e);if(o.length-(n&&o.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let r of o)if(r!=n&&(-1==i.indexOf(r)||t[r]!==e[r]))return!1;return!0}function ws(t,e,n){let o=!1;if(e)for(let i in e)n&&i in n||(o=!0,"style"==i?t.style.cssText="":t.removeAttribute(i));if(n)for(let i in n)e&&e[i]==n[i]||(o=!0,"style"==i?t.style.cssText=n[i]:t.setAttribute(i,n[i]));return o}function xs(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let o=t.attributes[n];e[o.name]=o.value}return e}class Ss extends Br{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(t,e,n,o,i,r){if(n){if(!(n instanceof Ss))return!1;this.dom||n.transferDOM(this)}return o&&this.setDeco(n?n.attrs:null),Kr(this,t,e,n?n.children.slice():[],i,r),!0}split(t){let e=new Ss;if(e.breakAfter=this.breakAfter,0==this.length)return e;let{i:n,off:o}=this.childPos(t);o&&(e.append(this.children[n].split(o),0),this.children[n].merge(o,this.children[n].length,null,!1,0,0),n++);for(let t=n;t<this.children.length;t++)e.append(this.children[t],0);for(;n>0&&0==this.children[n-1].length;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=t,e}transferDOM(t){this.dom&&(this.markDirty(),t.setDOM(this.dom),t.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(t){bs(this.attrs,t)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=t)}append(t,e){vs(this,t,e)}addLineDeco(t){let e=t.spec.attributes,n=t.spec.class;e&&(this.attrs=_s(e,this.attrs||{})),n&&(this.attrs=_s({class:n},this.attrs||{}))}domAtPos(t){return ms(this,t)}reuseDOM(t){"DIV"==t.nodeName&&(this.setDOM(t),this.flags|=4|2)}sync(t,e){var n;this.dom?4&this.flags&&(Yr(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(ws(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(t,e);let o=this.dom.lastChild;for(;o&&Br.get(o)instanceof ds;)o=o.lastChild;if(!(o&&this.length&&("BR"==o.nodeName||0!=(null===(n=Br.get(o))||void 0===n?void 0:n.isEditable)||us.ios&&this.children.some((t=>t instanceof ps))))){let t=document.createElement("BR");t.cmIgnore=!0,this.dom.appendChild(t)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let t,e=0;for(let n of this.children){if(!(n instanceof ps)||/[^ -~]/.test(n.text))return null;let o=Qr(n.dom);if(1!=o.length)return null;e+=o[0].width,t=o[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(t,e){let n=ys(this,t,e);if(!this.children.length&&n&&this.parent){let{heightOracle:t}=this.parent.view.viewState,e=n.bottom-n.top;if(Math.abs(e-t.lineHeight)<2&&t.textHeight<e){let o=(e-t.textHeight)/2;return{top:n.top+o,bottom:n.bottom-o,left:n.left,right:n.left}}}return n}become(t){return!1}covers(){return!0}static find(t,e){for(let n=0,o=0;n<t.children.length;n++){let i=t.children[n],r=o+i.length;if(r>=e){if(i instanceof Ss)return i;if(r>e)break}o=r+i.breakAfter}return null}}class ks extends Br{constructor(t,e,n){super(),this.widget=t,this.length=e,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(t,e,n,o,i,r){return!(n&&(!(n instanceof ks&&this.widget.compare(n.widget))||t>0&&i<=0||e<this.length&&r<=0))&&(this.length=t+(n?n.length:0)+(this.length-e),!0)}domAtPos(t){return 0==t?qr.before(this.dom):qr.after(this.dom,t==this.length)}split(t){let e=this.length-t;this.length=t;let n=new ks(this.widget,e,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return Ur}sync(t){this.dom&&this.widget.updateDOM(this.dom,t)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(t)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):vo.empty}domBoundsAround(){return null}become(t){return t instanceof ks&&t.widget.constructor==this.widget.constructor&&(t.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=t.widget,this.length=t.length,this.deco=t.deco,this.breakAfter=t.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(t){return this.widget.ignoreEvent(t)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(t,e){return this.widget.coordsAt(this.dom,t,e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(t){let{startSide:e,endSide:n}=this.deco;return e!=n&&(t<0?e<0:n>0)}}class Ps{eq(t){return!1}updateDOM(t,e){return!1}compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(t){return!0}coordsAt(t,e,n){return null}get isHidden(){return!1}destroy(t){}}var Cs=function(t){return t[t["Text"]=0]="Text",t[t["WidgetBefore"]=1]="WidgetBefore",t[t["WidgetAfter"]=2]="WidgetAfter",t[t["WidgetRange"]=3]="WidgetRange",t}(Cs||(Cs={}));class Ts extends Li{constructor(t,e,n,o){super(),this.startSide=t,this.endSide=e,this.widget=n,this.spec=o}get heightRelevant(){return!1}static mark(t){return new Es(t)}static widget(t){let e=Math.max(-1e4,Math.min(1e4,t.side||0)),n=!!t.block;return e+=n&&!t.inlineOrder?e>0?3e8:-4e8:e>0?1e8:-1e8,new As(t,e,e,n,t.widget||null,!1)}static replace(t){let e,n,o=!!t.block;if(t.isBlockGap)e=-5e8,n=4e8;else{let{start:i,end:r}=$s(t,o);e=(i?o?-3e8:-1:5e8)-1,n=(r?o?2e8:1:-6e8)+1}return new As(t,e,n,o,t.widget||null,!0)}static line(t){return new Qs(t)}static set(t,e=!1){return Ui.of(t,e)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Ts.none=Ui.empty;class Es extends Ts{constructor(t){let{start:e,end:n}=$s(t);super(e?-1:5e8,n?1:-6e8,null,t),this.tagName=t.tagName||"span",this.class=t.class||"",this.attrs=t.attributes||null}eq(t){var e,n;return this==t||t instanceof Es&&this.tagName==t.tagName&&(this.class||(null===(e=this.attrs)||void 0===e?void 0:e.class))==(t.class||(null===(n=t.attrs)||void 0===n?void 0:n.class))&&bs(this.attrs,t.attrs,"class")}range(t,e=t){if(t>=e)throw new RangeError("Mark decorations may not be empty");return super.range(t,e)}}Es.prototype.point=!1;class Qs extends Ts{constructor(t){super(-2e8,-2e8,null,t)}eq(t){return t instanceof Qs&&this.spec.class==t.spec.class&&bs(this.spec.attributes,t.spec.attributes)}range(t,e=t){if(e!=t)throw new RangeError("Line decoration ranges must be zero-length");return super.range(t,e)}}Qs.prototype.mapMode=No.TrackBefore,Qs.prototype.point=!0;class As extends Ts{constructor(t,e,n,o,i,r){super(e,n,i,t),this.block=o,this.isReplace=r,this.mapMode=o?e<=0?No.TrackBefore:No.TrackAfter:No.TrackDel}get type(){return this.startSide!=this.endSide?Cs.WidgetRange:this.startSide<=0?Cs.WidgetBefore:Cs.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(t){return t instanceof As&&function(t,e){return t==e||!!(t&&e&&t.compare(e))}(this.widget,t.widget)&&this.block==t.block&&this.startSide==t.startSide&&this.endSide==t.endSide}range(t,e=t){if(this.isReplace&&(t>e||t==e&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&e!=t)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(t,e)}}function $s(t,e=!1){let{inclusiveStart:n,inclusiveEnd:o}=t;return null==n&&(n=t.inclusive),null==o&&(o=t.inclusive),{start:null!=n?n:e,end:null!=o?o:e}}function js(t,e,n,o=0){let i=n.length-1;i>=0&&n[i]+o>=t?n[i]=Math.max(n[i],e):n.push(t,e)}As.prototype.point=!0;class Rs{constructor(t,e,n,o){this.doc=t,this.pos=e,this.end=n,this.disallowBlockEffectsFor=o,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=t.iter(),this.skip=e}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let t=this.content[this.content.length-1];return!(t.breakAfter||t instanceof ks&&t.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new Ss),this.atCursorPos=!0),this.curLine}flushBuffer(t=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Zs(new gs(-1),t),t.length),this.pendingBuffer=0)}addBlockWidget(t){this.flushBuffer(),this.curLine=null,this.content.push(t)}finish(t){this.pendingBuffer&&t<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||t&&this.content.length&&this.content[this.content.length-1]instanceof ks||this.getLine()}buildText(t,e,n){for(;t>0;){if(this.textOff==this.text.length){let{value:e,lineBreak:n,done:o}=this.cursor.next(this.skip);if(this.skip=0,o)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,t--;continue}this.text=e,this.textOff=0}let o=Math.min(this.text.length-this.textOff,t,512);this.flushBuffer(e.slice(e.length-n)),this.getLine().append(Zs(new ps(this.text.slice(this.textOff,this.textOff+o)),e),n),this.atCursorPos=!0,this.textOff+=o,t-=o,n=0}}span(t,e,n,o){this.buildText(e-t,n,o),this.pos=e,this.openStart<0&&(this.openStart=o)}point(t,e,n,o,i,r){if(this.disallowBlockEffectsFor[r]&&n instanceof As){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(e>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=e-t;if(n instanceof As)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new ks(n.widget||new Ms("div"),s,n));else{let r=fs.create(n.widget||new Ms("span"),s,s?0:n.startSide),a=this.atCursorPos&&!r.isEditable&&i<=o.length&&(t<e||n.startSide>0),l=!r.isEditable&&(t<e||i>o.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||r.isEditable||(this.pendingBuffer=0),this.flushBuffer(o),a&&(c.append(Zs(new gs(1),o),i),i=o.length+Math.max(0,i-o.length)),c.append(Zs(r,o),i),this.atCursorPos=l,this.pendingBuffer=l?t<e||i>o.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=o.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=e),this.openStart<0&&(this.openStart=i)}static build(t,e,n,o,i){let r=new Rs(t,e,n,i);return r.openEnd=Ui.spans(o,e,n,r),r.openStart<0&&(r.openStart=r.openEnd),r.finish(r.openEnd),r}}function Zs(t,e){for(let n of e)t=new ds(n,[t],t.length);return t}class Ms extends Ps{constructor(t){super(),this.tag=t}eq(t){return t.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(t){return t.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}const Vs=Jo.define(),Ds=Jo.define(),Is=Jo.define(),Ns=Jo.define(),Ws=Jo.define(),Xs=Jo.define(),Ls=Jo.define(),Ys=Jo.define({combine:t=>t.some((t=>t))}),zs=Jo.define({combine:t=>t.some((t=>t))});class qs{constructor(t,e="nearest",n="nearest",o=5,i=5,r=!1){this.range=t,this.y=e,this.x=n,this.yMargin=o,this.xMargin=i,this.isSnapshot=r}map(t){return t.empty?this:new qs(this.range.map(t),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(t){return this.range.to<=t.doc.length?this:new qs(Go.cursor(t.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Us=Ei.define({map:(t,e)=>t.map(e)});function Bs(t,e,n){let o=t.facet(Ns);o.length?o[0](e):window.onerror?window.onerror(String(e),n,void 0,void 0,e):n?console.error(n+":",e):console.error(e)}const Fs=Jo.define({combine:t=>!t.length||t[0]});let Gs=0;const Hs=Jo.define();class Ks{constructor(t,e,n,o,i){this.id=t,this.create=e,this.domEventHandlers=n,this.domEventObservers=o,this.extension=i(this)}static define(t,e){const{eventHandlers:n,eventObservers:o,provide:i,decorations:r}=e||{};return new Ks(Gs++,t,n,o,(t=>{let e=[Hs.of(t)];return r&&e.push(na.of((e=>{let n=e.plugin(t);return n?r(n):Ts.none}))),i&&e.push(i(t)),e}))}static fromClass(t,e){return Ks.define((e=>new t(e)),e)}}class Js{constructor(t){this.spec=t,this.mustUpdate=null,this.value=null}update(t){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(e){if(Bs(t.state,e,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(t){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(t)}catch(e){Bs(t.state,e,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(t){var e;if(null===(e=this.value)||void 0===e?void 0:e.destroy)try{this.value.destroy()}catch(e){Bs(t.state,e,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ta=Jo.define(),ea=Jo.define(),na=Jo.define(),oa=Jo.define(),ia=Jo.define();function ra(t,e,n){let o=t.state.facet(ia);if(!o.length)return o;let i=o.map((e=>e instanceof Function?e(t):e)),r=[];return Ui.spans(i,e,n,{point(){},span(t,e,n,o){let i=r;for(let r=n.length-1;r>=0;r--,o--){let s,a=n[r].spec.bidiIsolate;if(null!=a)if(o>0&&i.length&&(s=i[i.length-1]).to==t&&s.direction==a)s.to=e,i=s.inner;else{let n={from:t,to:e,direction:a,inner:[]};i.push(n),i=n.inner}}}}),r}const sa=Jo.define();function aa(t){let e=0,n=0,o=0,i=0;for(let r of t.state.facet(sa)){let s=r(t);s&&(null!=s.left&&(e=Math.max(e,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(o=Math.max(o,s.top)),null!=s.bottom&&(i=Math.max(i,s.bottom)))}return{left:e,right:n,top:o,bottom:i}}const la=Jo.define();class ca{constructor(t,e,n,o){this.fromA=t,this.toA=e,this.fromB=n,this.toB=o}join(t){return new ca(Math.min(this.fromA,t.fromA),Math.max(this.toA,t.toA),Math.min(this.fromB,t.fromB),Math.max(this.toB,t.toB))}addToSet(t){let e=t.length,n=this;for(;e>0;e--){let o=t[e-1];if(!(o.fromA>n.toA)){if(o.toA<n.fromA)break;n=n.join(o),t.splice(e-1,1)}}return t.splice(e,0,n),t}static extendWithRanges(t,e){if(0==e.length)return t;let n=[];for(let o=0,i=0,r=0,s=0;;o++){let a=o==t.length?null:t[o],l=r-s,c=a?a.fromB:1e9;for(;i<e.length&&e[i]<c;){let t=e[i],o=e[i+1],r=Math.max(s,t),a=Math.min(c,o);if(r<=a&&new ca(r+l,a+l,r,a).addToSet(n),o>c)break;i+=2}if(!a)return n;new ca(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),r=a.toA,s=a.toB}}}class ua{constructor(t,e,n){this.view=t,this.state=e,this.transactions=n,this.flags=0,this.startState=t.state,this.changes=Xo.empty(this.startState.doc.length);for(let t of n)this.changes=this.changes.compose(t.changes);let o=[];this.changes.iterChangedRanges(((t,e,n,i)=>o.push(new ca(t,e,n,i)))),this.changedRanges=o}static create(t,e,n){return new ua(t,e,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(this.flags&(8|2))>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((t=>t.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}var ha=function(t){return t[t["LTR"]=0]="LTR",t[t["RTL"]=1]="RTL",t}(ha||(ha={}));const pa=ha.LTR,da=ha.RTL;function fa(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const ga=fa("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),ma=fa("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),va=Object.create(null),ya=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);va[e]=n,va[n]=-e}const _a=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Oa{get dir(){return this.level%2?da:pa}constructor(t,e,n){this.from=t,this.to=e,this.level=n}side(t,e){return this.dir==e==t?this.to:this.from}static find(t,e,n,o){let i=-1;for(let r=0;r<t.length;r++){let s=t[r];if(s.from<=e&&s.to>=e){if(s.level==n)return r;(i<0||(0!=o?o<0?s.from<e:s.to>e:t[i].level>s.level))&&(i=r)}}if(i<0)throw new RangeError("Index out of range");return i}}function ba(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let o=t[n],i=e[n];if(o.from!=i.from||o.to!=i.to||o.direction!=i.direction||!ba(o.inner,i.inner))return!1}return!0}const wa=[];function xa(t,e,n,o,i,r,s){let a=o%2?2:1;if(o%2==i%2)for(let l=e,c=0;l<n;){let e=!0,u=!1;if(c==r.length||l<r[c].from){let t=wa[l];t!=a&&(e=!1,u=16==t)}let h=e||1!=a?null:[],p=e?o:o+1,d=l;t:for(;;)if(c<r.length&&d==r[c].from){if(u)break t;let f=r[c];if(!e)for(let t=f.to,e=c+1;;){if(t==n)break t;if(!(e<r.length&&r[e].from==t)){if(wa[t]==a)break t;break}t=r[e++].to}if(c++,h)h.push(f);else{f.from>l&&s.push(new Oa(l,f.from,p)),Sa(t,f.direction==pa!=!(p%2)?o+1:o,i,f.inner,f.from,f.to,s),l=f.to}d=f.to}else{if(d==n||(e?wa[d]!=a:wa[d]==a))break;d++}h?xa(t,l,d,o+1,i,h,s):l<d&&s.push(new Oa(l,d,p)),l=d}else for(let l=n,c=r.length;l>e;){let n=!0,u=!1;if(!c||l>r[c-1].to){let t=wa[l-1];t!=a&&(n=!1,u=16==t)}let h=n||1!=a?null:[],p=n?o:o+1,d=l;t:for(;;)if(c&&d==r[c-1].to){if(u)break t;let f=r[--c];if(!n)for(let t=f.from,n=c;;){if(t==e)break t;if(!n||r[n-1].to!=t){if(wa[t-1]==a)break t;break}t=r[--n].from}if(h)h.push(f);else{f.to<l&&s.push(new Oa(f.to,l,p)),Sa(t,f.direction==pa!=!(p%2)?o+1:o,i,f.inner,f.from,f.to,s),l=f.from}d=f.from}else{if(d==e||(n?wa[d-1]!=a:wa[d-1]==a))break;d--}h?xa(t,d,l,o+1,i,h,s):d<l&&s.push(new Oa(d,l,p)),l=d}}function Sa(t,e,n,o,i,r,s){let a=e%2?2:1;!function(t,e,n,o,i){for(let s=0;s<=o.length;s++){let a=s?o[s-1].to:e,l=s<o.length?o[s].from:n,c=s?256:i;for(let e=a,n=c,o=c;e<l;e++){let i=(r=t.charCodeAt(e))<=247?ga[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?ma[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8204?256:64336<=r&&r<=65023?4:1;512==i?i=n:8==i&&4==o&&(i=16),wa[e]=4==i?2:i,7&i&&(o=i),n=i}for(let t=a,e=c,o=c;t<l;t++){let i=wa[t];if(128==i)t<l-1&&e==wa[t+1]&&24&e?i=wa[t]=e:wa[t]=256;else if(64==i){let i=t+1;for(;i<l&&64==wa[i];)i++;let r=t&&8==e||i<n&&8==wa[i]?1==o?1:8:256;for(let e=t;e<i;e++)wa[e]=r;t=i-1}else 8==i&&1==o&&(wa[t]=1);e=i,7&i&&(o=i)}}var r}(t,i,r,o,a),function(t,e,n,o,i){let r=1==i?2:1;for(let s=0,a=0,l=0;s<=o.length;s++){let c=s?o[s-1].to:e,u=s<o.length?o[s].from:n;for(let e,n,o,s=c;s<u;s++)if(n=va[e=t.charCodeAt(s)])if(n<0){for(let t=a-3;t>=0;t-=3)if(ya[t+1]==-n){let e=ya[t+2],n=2&e?i:4&e?1&e?r:i:0;n&&(wa[s]=wa[ya[t]]=n),a=t;break}}else{if(189==ya.length)break;ya[a++]=s,ya[a++]=e,ya[a++]=l}else if(2==(o=wa[s])||1==o){let t=o==i;l=t?0:1;for(let e=a-3;e>=0;e-=3){let n=ya[e+2];if(2&n)break;if(t)ya[e+2]|=2;else{if(4&n)break;ya[e+2]|=4}}}}}(t,i,r,o,a),function(t,e,n,o){for(let i=0,r=o;i<=n.length;i++){let s=i?n[i-1].to:t,a=i<n.length?n[i].from:e;for(let l=s;l<a;){let s=wa[l];if(256==s){let s=l+1;for(;;)if(s==a){if(i==n.length)break;s=n[i++].to,a=i<n.length?n[i].from:e}else{if(256!=wa[s])break;s++}let c=1==r,u=c==(1==(s<e?wa[s]:o))?c?1:2:o;for(let e=s,o=i,r=o?n[o-1].to:t;e>l;)e==r&&(e=n[--o].from,r=o?n[o-1].to:t),wa[--e]=u;l=s}else r=s,l++}}}(i,r,o,a),xa(t,i,r,e,n,o,s)}function ka(t,e,n){if(!t)return[new Oa(0,0,e==da?1:0)];if(e==pa&&!n.length&&!_a.test(t))return Pa(t.length);if(n.length)for(;t.length>wa.length;)wa[wa.length]=256;let o=[],i=e==pa?0:1;return Sa(t,i,i,n,0,t.length,o),o}function Pa(t){return[new Oa(0,t,0)]}let Ca="";function Ta(t,e,n,o,i){var r;let s=o.head-t.from,a=-1;if(0==s){if(!i||!t.length)return null;e[0].level!=n&&(s=e[0].side(!1,n),a=0)}else if(s==t.length){if(i)return null;let t=e[e.length-1];t.level!=n&&(s=t.side(!0,n),a=e.length-1)}a<0&&(a=Oa.find(e,s,null!==(r=o.bidiLevel)&&void 0!==r?r:-1,o.assoc));let l=e[a];s==l.side(i,n)&&(l=e[a+=i?1:-1],s=l.side(!i,n));let c=i==(l.dir==n),u=Ao(t.text,s,c);if(Ca=t.text.slice(Math.min(s,u),Math.max(s,u)),u>l.from&&u<l.to)return Go.cursor(u+t.from,c?-1:1,l.level);let h=a==(i?e.length-1:0)?null:e[a+(i?1:-1)];return h||l.level==n?h&&h.level<l.level?Go.cursor(h.side(!i,n)+t.from,i?1:-1,h.level):Go.cursor(u+t.from,i?-1:1,l.level):Go.cursor(i?t.to:t.from,i?-1:1,n)}class Ea extends Br{get length(){return this.view.state.doc.length}constructor(t){super(),this.view=t,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(t.contentDOM),this.children=[new Ss],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ca(0,0,0,t.state.doc.length)],0,null)}update(t){var e;let n=t.changedRanges;this.minWidth>0&&n.length&&(n.every((({fromA:t,toA:e})=>e<this.minWidthFrom||t>this.minWidthTo))?(this.minWidthFrom=t.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=t.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let o=-1;this.view.inputState.composing>=0&&((null===(e=this.domChanged)||void 0===e?void 0:e.newSel)?o=this.domChanged.newSel.head:function(t,e){let n=!1;e&&t.iterChangedRanges(((t,o)=>{t<e.to&&o>e.from&&(n=!0)}));return n}(t.changes,this.hasComposition)||t.selectionSet||(o=t.state.selection.main.head));let i=o>-1?function(t,e,n){let o=Aa(t,n);if(!o)return null;let{node:i,from:r,to:s}=o,a=i.nodeValue;if(/[\n\r]/.test(a))return null;if(t.state.doc.sliceString(o.from,o.to)!=a)return null;let l=e.invertedDesc,c=new ca(l.mapPos(r),l.mapPos(s),r,s),u=[];for(let e=i.parentNode;;e=e.parentNode){let n=Br.get(e);if(n instanceof ds)u.push({node:e,deco:n.mark});else{if(n instanceof Ss||"DIV"==e.nodeName&&e.parentNode==t.contentDOM)return{range:c,text:i,marks:u,line:e};if(e==t.contentDOM)return null;u.push({node:e,deco:new Es({inclusive:!0,attributes:xs(e),tagName:e.tagName.toLowerCase()})})}}}(this.view,t.changes,o):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:e,to:o}=this.hasComposition;n=new ca(e,o,t.changes.mapPos(e,-1),t.changes.mapPos(o,1)).addToSet(n.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(us.ie||us.chrome)&&!i&&t&&t.state.doc.lines!=t.startState.doc.lines&&(this.forceSelection=!0);let r=function(t,e,n){let o=new ja;return Ui.compare(t,e,n,o),o.changes}(this.decorations,this.updateDeco(),t.changes);return n=ca.extendWithRanges(n,r),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,t.startState.doc.length,i),t.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(t,e,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(t,e,n);let{observer:o}=this.view;o.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let t=us.chrome||us.ios?{node:o.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,t),this.flags&=~7,t&&(t.written||o.selectionRange.focusNode!=t.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((t=>t.flags&=~8));let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let t of this.children)t instanceof ks&&t.widget instanceof Qa&&i.push(t.dom);o.updateGaps(i)}updateChildren(t,e,n){let o=n?n.range.addToSet(t.slice()):t,i=this.childCursor(e);for(let t=o.length-1;;t--){let e=t>=0?o[t]:null;if(!e)break;let r,s,a,l,{fromA:c,toA:u,fromB:h,toB:p}=e;if(n&&n.range.fromB<p&&n.range.toB>h){let t=Rs.build(this.view.state.doc,h,n.range.fromB,this.decorations,this.dynamicDecorationMap),e=Rs.build(this.view.state.doc,n.range.toB,p,this.decorations,this.dynamicDecorationMap);s=t.breakAtStart,a=t.openStart,l=e.openEnd;let o=this.compositionView(n);e.breakAtStart?o.breakAfter=1:e.content.length&&o.merge(o.length,o.length,e.content[0],!1,e.openStart,0)&&(o.breakAfter=e.content[0].breakAfter,e.content.shift()),t.content.length&&o.merge(0,0,t.content[t.content.length-1],!0,0,t.openEnd)&&t.content.pop(),r=t.content.concat(o).concat(e.content)}else({content:r,breakAtStart:s,openStart:a,openEnd:l}=Rs.build(this.view.state.doc,h,p,this.decorations,this.dynamicDecorationMap));let{i:d,off:f}=i.findPos(u,1),{i:g,off:m}=i.findPos(c,-1);Hr(this,g,m,d,f,r,s,a,l)}n&&this.fixCompositionDOM(n)}compositionView(t){let e=new ps(t.text.nodeValue);e.flags|=8;for(let{deco:n}of t.marks)e=new ds(n,[e],e.length);let n=new Ss;return n.append(e,0),n}fixCompositionDOM(t){let e=(t,e)=>{e.flags|=8|(e.children.some((t=>7&t.flags))?1:0),this.markedForComposition.add(e);let n=Br.get(t);n&&n!=e&&(n.dom=null),e.setDOM(t)},n=this.childPos(t.range.fromB,1),o=this.children[n.i];e(t.line,o);for(let i=t.marks.length-1;i>=-1;i--)n=o.childPos(n.off,1),o=o.children[n.i],e(i>=0?t.marks[i].node:t.text,o)}updateSelection(t=!1,e=!1){!t&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,o=n==this.dom,i=!o&&Er(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(o||e||i))return;let r=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(s.anchor)),l=s.empty?a:this.moveToLine(this.domAtPos(s.head));if(us.gecko&&s.empty&&!this.hasComposition&&(1==(c=a).node.nodeType&&c.node.firstChild&&(0==c.offset||"false"==c.node.childNodes[c.offset-1].contentEditable)&&(c.offset==c.node.childNodes.length||"false"==c.node.childNodes[c.offset].contentEditable))){let t=document.createTextNode("");this.view.observer.ignore((()=>a.node.insertBefore(t,a.node.childNodes[a.offset]||null))),a=l=new qr(t,0),r=!0}var c;let u=this.view.observer.selectionRange;!r&&u.focusNode&&Ar(a.node,a.offset,u.anchorNode,u.anchorOffset)&&Ar(l.node,l.offset,u.focusNode,u.focusOffset)||(this.view.observer.ignore((()=>{us.android&&us.chrome&&this.dom.contains(u.focusNode)&&function(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&'false'==n.contentEditable)return!0;return!1}(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let t=Cr(this.view.root);if(t)if(s.empty){if(us.gecko){let t=(e=a.node,o=a.offset,1!=e.nodeType?0:(o&&"false"==e.childNodes[o-1].contentEditable?1:0)|(o<e.childNodes.length&&"false"==e.childNodes[o].contentEditable?2:0));if(t&&t!=(1|2)){let e=$a(a.node,a.offset,1==t?1:-1);e&&(a=new qr(e.node,e.offset))}}t.collapse(a.node,a.offset),null!=s.bidiLevel&&void 0!==t.caretBidiLevel&&(t.caretBidiLevel=s.bidiLevel)}else if(t.extend){t.collapse(a.node,a.offset);try{t.extend(l.node,l.offset)}catch(t){}}else{let e=document.createRange();s.anchor>s.head&&([a,l]=[l,a]),e.setEnd(l.node,l.offset),e.setStart(a.node,a.offset),t.removeAllRanges(),t.addRange(e)}else;var e,o;i&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())})),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new qr(u.anchorNode,u.anchorOffset),this.impreciseHead=l.precise?null:new qr(u.focusNode,u.focusOffset)}enforceCursorAssoc(){if(this.hasComposition)return;let{view:t}=this,e=t.state.selection.main,n=Cr(t.root),{anchorNode:o,anchorOffset:i}=t.observer.selectionRange;if(!(n&&e.empty&&e.assoc&&n.modify))return;let r=Ss.find(this,e.head);if(!r)return;let s=r.posAtStart;if(e.head==s||e.head==s+r.length)return;let a=this.coordsAt(e.head,-1),l=this.coordsAt(e.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(e.head+e.assoc);n.collapse(c.node,c.offset),n.modify("move",e.assoc<0?"forward":"backward","lineboundary"),t.observer.readSelectionRange();let u=t.observer.selectionRange;t.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=e.from&&n.collapse(o,i)}moveToLine(t){let e,n=this.dom;if(t.node!=n)return t;for(let o=t.offset;!e&&o<n.childNodes.length;o++){let t=Br.get(n.childNodes[o]);t instanceof Ss&&(e=t.domAtPos(0))}for(let o=t.offset-1;!e&&o>=0;o--){let t=Br.get(n.childNodes[o]);t instanceof Ss&&(e=t.domAtPos(t.length))}return e?new qr(e.node,e.offset,!0):t}nearest(t){for(let e=t;e;){let t=Br.get(e);if(t&&t.rootView==this)return t;e=e.parentNode}return null}posFromDOM(t,e){let n=this.nearest(t);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(t,e)+n.posAtStart}domAtPos(t){let{i:e,off:n}=this.childCursor().findPos(t,-1);for(;e<this.children.length-1;){let t=this.children[e];if(n<t.length||t instanceof Ss)break;e++,n=0}return this.children[e].domAtPos(n)}coordsAt(t,e){let n=null,o=0;for(let i=this.length,r=this.children.length-1;r>=0;r--){let s=this.children[r],a=i-s.breakAfter,l=a-s.length;if(a<t)break;l<=t&&(l<t||s.covers(-1))&&(a>t||s.covers(1))&&(!n||s instanceof Ss&&!(n instanceof Ss&&e>=0))&&(n=s,o=l),i=l}return n?n.coordsAt(t-o,e):null}coordsForChar(t){let{i:e,off:n}=this.childPos(t,1),o=this.children[e];if(!(o instanceof Ss))return null;for(;o.children.length;){let{i:t,off:e}=o.childPos(n,1);for(;;t++){if(t==o.children.length)return null;if((o=o.children[t]).length)break}n=e}if(!(o instanceof ps))return null;let i=Ao(o.text,n);if(i==n)return null;let r=Xr(o.dom,n,i).getClientRects();for(let t=0;t<r.length;t++){let e=r[t];if(t==r.length-1||e.top<e.bottom&&e.left<e.right)return e}return null}measureVisibleLineHeights(t){let e=[],{from:n,to:o}=t,i=this.view.contentDOM.clientWidth,r=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==ha.LTR;for(let t=0,l=0;l<this.children.length;l++){let c=this.children[l],u=t+c.length;if(u>o)break;if(t>=n){let n=c.dom.getBoundingClientRect();if(e.push(n.height),r){let e=c.dom.lastChild,o=e?Qr(e):[];if(o.length){let e=o[o.length-1],r=a?e.right-n.left:n.right-e.left;r>s&&(s=r,this.minWidth=i,this.minWidthFrom=t,this.minWidthTo=u)}}}t=u+c.breakAfter}return e}textDirectionAt(t){let{i:e}=this.childPos(t,1);return"rtl"==getComputedStyle(this.children[e].dom).direction?ha.RTL:ha.LTR}measureTextSize(){for(let t of this.children)if(t instanceof Ss){let e=t.measureTextSize();if(e)return e}let t,e,n,o=document.createElement("div");return o.className="cm-line",o.style.width="99999px",o.style.position="absolute",o.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(o);let i=Qr(o.firstChild)[0];t=o.getBoundingClientRect().height,e=i?i.width/27:7,n=i?i.height:t,o.remove()})),{lineHeight:t,charWidth:e,textHeight:n}}childCursor(t=this.length){let e=this.children.length;return e&&(t-=this.children[--e].length),new Gr(this.children,t,e)}computeBlockGapDeco(){let t=[],e=this.view.viewState;for(let n=0,o=0;;o++){let i=o==e.viewports.length?null:e.viewports[o],r=i?i.from-1:this.length;if(r>n){let o=(e.lineBlockAt(r).bottom-e.lineBlockAt(n).top)/this.view.scaleY;t.push(Ts.replace({widget:new Qa(o),block:!0,inclusive:!0,isBlockGap:!0}).range(n,r))}if(!i)break;n=i.to+1}return Ts.set(t)}updateDeco(){let t=this.view.state.facet(na).map(((t,e)=>(this.dynamicDecorationMap[e]="function"==typeof t)?t(this.view):t));for(let e=t.length;e<t.length+3;e++)this.dynamicDecorationMap[e]=!1;return this.decorations=[...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(t){if(t.isSnapshot){let e=this.view.viewState.lineBlockAt(t.range.head);return this.view.scrollDOM.scrollTop=e.top-t.yMargin,void(this.view.scrollDOM.scrollLeft=t.xMargin)}let e,{range:n}=t,o=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!o)return;!n.empty&&(e=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(o={left:Math.min(o.left,e.left),top:Math.min(o.top,e.top),right:Math.max(o.right,e.right),bottom:Math.max(o.bottom,e.bottom)});let i=aa(this.view),r={left:o.left-i.left,top:o.top-i.top,right:o.right+i.right,bottom:o.bottom+i.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;!function(t,e,n,o,i,r,s,a){let l=t.ownerDocument,c=l.defaultView||window;for(let u=t,h=!1;u&&!h;)if(1==u.nodeType){let t,p=u==l.body,d=1,f=1;if(p)t=Mr(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(h=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let e=u.getBoundingClientRect();({scaleX:d,scaleY:f}=Vr(u,e)),t={left:e.left,right:e.left+u.clientWidth*d,top:e.top,bottom:e.top+u.clientHeight*f}}let g=0,m=0;if("nearest"==i)e.top<t.top?(m=-(t.top-e.top+s),n>0&&e.bottom>t.bottom+m&&(m=e.bottom-t.bottom+m+s)):e.bottom>t.bottom&&(m=e.bottom-t.bottom+s,n<0&&e.top-m<t.top&&(m=-(t.top+m-e.top+s)));else{let o=e.bottom-e.top,r=t.bottom-t.top;m=("center"==i&&o<=r?e.top+o/2-r/2:"start"==i||"center"==i&&n<0?e.top-s:e.bottom-r+s)-t.top}if("nearest"==o?e.left<t.left?(g=-(t.left-e.left+r),n>0&&e.right>t.right+g&&(g=e.right-t.right+g+r)):e.right>t.right&&(g=e.right-t.right+r,n<0&&e.left<t.left+g&&(g=-(t.left+g-e.left+r))):g=("center"==o?e.left+(e.right-e.left)/2-(t.right-t.left)/2:"start"==o==a?e.left-r:e.right-(t.right-t.left)+r)-t.left,g||m)if(p)c.scrollBy(g,m);else{let t=0,n=0;if(m){let t=u.scrollTop;u.scrollTop+=m/f,n=(u.scrollTop-t)*f}if(g){let e=u.scrollLeft;u.scrollLeft+=g/d,t=(u.scrollLeft-e)*d}e={left:e.left-t,top:e.top-n,right:e.right-t,bottom:e.bottom-n},t&&Math.abs(t-g)<1&&(o="nearest"),n&&Math.abs(n-m)<1&&(i="nearest")}if(p)break;u=u.assignedSlot||u.parentNode}else{if(11!=u.nodeType)break;u=u.host}}(this.view.scrollDOM,r,n.head<n.anchor?-1:1,t.x,t.y,Math.max(Math.min(t.xMargin,s),-s),Math.max(Math.min(t.yMargin,a),-a),this.view.textDirection==ha.LTR)}}class Qa extends Ps{constructor(t){super(),this.height=t}toDOM(){let t=document.createElement("div");return this.updateDOM(t),t}eq(t){return t.height==this.height}updateDOM(t){return t.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function Aa(t,e){let n=t.observer.selectionRange,o=n.focusNode&&$a(n.focusNode,n.focusOffset,0);if(!o)return null;let i=e-o.offset;return{from:i,to:i+o.node.nodeValue.length,node:o.node}}function $a(t,e,n){if(n<=0)for(let n=t,o=e;;){if(3==n.nodeType)return{node:n,offset:o};if(!(1==n.nodeType&&o>0))break;n=n.childNodes[o-1],o=Rr(n)}if(n>=0)for(let o=t,i=e;;){if(3==o.nodeType)return{node:o,offset:i};if(!(1==o.nodeType&&i<o.childNodes.length&&n>=0))break;o=o.childNodes[i],i=0}return null}let ja=class{constructor(){this.changes=[]}compareRange(t,e){js(t,e,this.changes)}comparePoint(t,e){js(t,e,this.changes)}};function Ra(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function Za(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function Ma(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function Va(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function Da(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function Ia(t,e,n){let o,i,r,s,a,l,c,u,h=!1;for(let p=t.firstChild;p;p=p.nextSibling){let t=Qr(p);for(let d=0;d<t.length;d++){let f=t[d];i&&Ma(i,f)&&(f=Va(Da(f,i.bottom),i.top));let g=Ra(e,f),m=Za(n,f);if(0==g&&0==m)return 3==p.nodeType?Na(p,e,n):Ia(p,e,n);if(!o||s>m||s==m&&r>g){o=p,i=f,r=g,s=m;let a=m?n<f.top?-1:1:g?e<f.left?-1:1:0;h=!a||(a>0?d<t.length-1:d>0)}0==g?n>f.bottom&&(!c||c.bottom<f.bottom)?(a=p,c=f):n<f.top&&(!u||u.top>f.top)&&(l=p,u=f):c&&Ma(c,f)?c=Da(c,f.bottom):u&&Ma(u,f)&&(u=Va(u,f.top))}}if(c&&c.bottom>=n?(o=a,i=c):u&&u.top<=n&&(o=l,i=u),!o)return{node:t,offset:0};let p=Math.max(i.left,Math.min(i.right,e));return 3==o.nodeType?Na(o,p,n):h&&"false"!=o.contentEditable?Ia(o,p,n):{node:t,offset:Array.prototype.indexOf.call(t.childNodes,o)+(e>=(i.left+i.right)/2?1:0)}}function Na(t,e,n){let o=t.nodeValue.length,i=-1,r=1e9,s=0;for(let a=0;a<o;a++){let o=Xr(t,a,a+1).getClientRects();for(let l=0;l<o.length;l++){let c=o[l];if(c.top==c.bottom)continue;s||(s=e-c.left);let u=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&u<r){let n=e>=(c.left+c.right)/2,o=n;if(us.chrome||us.gecko){Xr(t,a).getBoundingClientRect().left==c.right&&(o=!n)}if(u<=0)return{node:t,offset:a+(o?1:0)};i=a+(o?1:0),r=u}}}return{node:t,offset:i>-1?i:s>0?t.nodeValue.length:0}}function Wa(t,e,n,o=-1){var i,r;let s,a=t.contentDOM.getBoundingClientRect(),l=a.top+t.viewState.paddingTop,{docHeight:c}=t.viewState,{x:u,y:h}=e,p=h-l;if(p<0)return 0;if(p>c)return t.state.doc.length;for(let e=t.viewState.heightOracle.textHeight/2,i=!1;s=t.elementAtHeight(p),s.type!=Cs.Text;)for(;p=o>0?s.bottom+e:s.top-e,!(p>=0&&p<=c);){if(i)return n?null:0;i=!0,o=-o}h=l+p;let d=s.from;if(d<t.viewport.from)return 0==t.viewport.from?0:n?null:Xa(t,a,s,u,h);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:Xa(t,a,s,u,h);let f=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:f,m=g.elementFromPoint(u,h);m&&!t.contentDOM.contains(m)&&(m=null),m||(u=Math.max(a.left+1,Math.min(a.right-1,u)),m=g.elementFromPoint(u,h),m&&!t.contentDOM.contains(m)&&(m=null));let v,y=-1;if(m&&0!=(null===(i=t.docView.nearest(m))||void 0===i?void 0:i.isEditable))if(f.caretPositionFromPoint){let t=f.caretPositionFromPoint(u,h);t&&({offsetNode:v,offset:y}=t)}else if(f.caretRangeFromPoint){let e=f.caretRangeFromPoint(u,h);e&&(({startContainer:v,startOffset:y}=e),(!t.contentDOM.contains(v)||us.safari&&function(t,e,n){let o;if(3!=t.nodeType||e!=(o=t.nodeValue.length))return!1;for(let e=t.nextSibling;e;e=e.nextSibling)if(1!=e.nodeType||"BR"!=e.nodeName)return!1;return Xr(t,o-1,o).getBoundingClientRect().left>n}(v,y,u)||us.chrome&&function(t,e,n){if(0!=e)return!1;for(let e=t;;){let t=e.parentNode;if(!t||1!=t.nodeType||t.firstChild!=e)return!1;if(t.classList.contains("cm-line"))break;e=t}let o=1==t.nodeType?t.getBoundingClientRect():Xr(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-o.left>5}(v,y,u))&&(v=void 0))}if(!v||!t.docView.dom.contains(v)){let e=Ss.find(t.docView,d);if(!e)return p>s.top+s.height/2?s.to:s.from;({node:v,offset:y}=Ia(e.dom,u,h))}let _=t.docView.nearest(v);if(!_)return null;if(_.isWidget&&1==(null===(r=_.dom)||void 0===r?void 0:r.nodeType)){let t=_.dom.getBoundingClientRect();return e.y<t.top||e.y<=t.bottom&&e.x<=(t.left+t.right)/2?_.posAtStart:_.posAtEnd}return _.localPosFromDOM(v,y)+_.posAtStart}function Xa(t,e,n,o,i){let r=Math.round((o-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>1.5*t.defaultLineHeight){let e=t.viewState.heightOracle.textHeight;r+=Math.floor((i-n.top-.5*(t.defaultLineHeight-e))/e)*t.viewState.heightOracle.lineLength}let s=t.state.sliceDoc(n.from,n.to);return n.from+sr(s,r,t.state.tabSize)}function La(t,e){let n=t.lineBlockAt(e);if(Array.isArray(n.type))for(let t of n.type)if(t.to>e||t.to==e&&(t.to==n.to||t.type==Cs.Text))return t;return n}function Ya(t,e,n,o){let i=t.state.doc.lineAt(e.head),r=t.bidiSpans(i),s=t.textDirectionAt(i.from);for(let a=e,l=null;;){let e=Ta(i,r,s,a,n),c=Ca;if(!e){if(i.number==(n?t.state.doc.lines:1))return a;c="\n",i=t.state.doc.line(i.number+(n?1:-1)),r=t.bidiSpans(i),e=Go.cursor(n?i.from:i.to)}if(l){if(!l(c))return a}else{if(!o)return e;l=o(c)}a=e}}function za(t,e,n){for(;;){let o=0;for(let i of t)i.between(e-1,e+1,((t,i,r)=>{if(e>t&&e<i){let r=o||n||(e-t<i-e?-1:1);e=r<0?t:i,o=r}}));if(!o)return e}}function qa(t,e,n){let o=za(t.state.facet(oa).map((e=>e(t))),n.from,e.head>n.from?-1:1);return o==n.from?n:Go.cursor(o,o<n.from?1:-1)}class Ua{setSelectionOrigin(t){this.lastSelectionOrigin=t,this.lastSelectionTime=Date.now()}constructor(t){this.view=t,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=t.hasFocus,us.safari&&t.contentDOM.addEventListener("input",(()=>null)),us.gecko&&function(t){bl.has(t)||(bl.add(t),t.addEventListener("copy",(()=>{})),t.addEventListener("cut",(()=>{})))}(t.contentDOM.ownerDocument)}handleEvent(t){(function(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n,o=e.target;o!=t.contentDOM;o=o.parentNode)if(!o||11==o.nodeType||(n=Br.get(o))&&n.ignoreEvent(e))return!1;return!0})(this.view,t)&&!this.ignoreDuringComposition(t)&&("keydown"==t.type&&this.keydown(t)||this.runHandlers(t.type,t))}runHandlers(t,e){let n=this.handlers[t];if(n){for(let t of n.observers)t(this.view,e);for(let t of n.handlers){if(e.defaultPrevented)break;if(t(this.view,e)){e.preventDefault();break}}}}ensureHandlers(t){let e=Fa(t),n=this.handlers,o=this.view.contentDOM;for(let t in e)if("scroll"!=t){let i=!e[t].handlers.length,r=n[t];r&&i!=!r.handlers.length&&(o.removeEventListener(t,this.handleEvent),r=null),r||o.addEventListener(t,this.handleEvent,{passive:i})}for(let t in n)"scroll"==t||e[t]||o.removeEventListener(t,this.handleEvent);this.handlers=e}keydown(t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),9==t.keyCode&&Date.now()<this.lastEscPress+2e3)return!0;if(27!=t.keyCode&&Ka.indexOf(t.keyCode)<0&&(this.view.inputState.lastEscPress=0),us.android&&us.chrome&&!t.synthetic&&(13==t.keyCode||8==t.keyCode))return this.view.observer.delayAndroidKey(t.key,t.keyCode),!0;let e;return!us.ios||t.synthetic||t.altKey||t.metaKey||!((e=Ga.find((e=>e.keyCode==t.keyCode)))&&!t.ctrlKey||Ha.indexOf(t.key)>-1&&t.ctrlKey&&!t.shiftKey)?(229!=t.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=e||t,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(){let t=this.pendingIOSKey;return!!t&&(this.pendingIOSKey=void 0,Lr(this.view.contentDOM,t.key,t.keyCode))}ignoreDuringComposition(t){return!!/^key/.test(t.type)&&(this.composing>0||!!(us.safari&&!us.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(t){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=t}update(t){this.mouseSelection&&this.mouseSelection.update(t),this.draggedContent&&t.docChanged&&(this.draggedContent=this.draggedContent.map(t.changes)),t.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Ba(t,e){return(n,o)=>{try{return e.call(t,o,n)}catch(t){Bs(n.state,t)}}}function Fa(t){let e=Object.create(null);function n(t){return e[t]||(e[t]={observers:[],handlers:[]})}for(let e of t){let t=e.spec;if(t&&t.domEventHandlers)for(let o in t.domEventHandlers){let i=t.domEventHandlers[o];i&&n(o).handlers.push(Ba(e.value,i))}if(t&&t.domEventObservers)for(let o in t.domEventObservers){let i=t.domEventObservers[o];i&&n(o).observers.push(Ba(e.value,i))}}for(let t in nl)n(t).handlers.push(nl[t]);for(let t in ol)n(t).observers.push(ol[t]);return e}const Ga=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Ha="dthko",Ka=[16,17,18,20,91,92,224,225],Ja=6;function tl(t){return.7*Math.max(0,t)+8}class el{constructor(t,e,n,o){this.view=t,this.startEvent=e,this.style=n,this.mustSelect=o,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=e,this.scrollParent=function(t){let e=t.ownerDocument;for(let n=t.parentNode;n&&n!=e.body;)if(1==n.nodeType){if(n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)return n;n=n.assignedSlot||n.parentNode}else{if(11!=n.nodeType)break;n=n.host}return null}(t.contentDOM),this.atoms=t.state.facet(oa).map((e=>e(t)));let i=t.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=e.shiftKey,this.multiple=t.state.facet(Wi.allowMultipleSelections)&&function(t,e){let n=t.state.facet(Vs);return n.length?n[0](e):us.mac?e.metaKey:e.ctrlKey}(t,e),this.dragging=!(!function(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let o=Cr(t.root);if(!o||0==o.rangeCount)return!0;let i=o.getRangeAt(0).getClientRects();for(let t=0;t<i.length;t++){let n=i[t];if(n.left<=e.clientX&&n.right>=e.clientX&&n.top<=e.clientY&&n.bottom>=e.clientY)return!0}return!1}(t,e)||1!=gl(e))&&null}start(t){!1===this.dragging&&this.select(t)}move(t){var e;if(0==t.buttons)return this.destroy();if(this.dragging||null==this.dragging&&function(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}(this.startEvent,t)<10)return;this.select(this.lastEvent=t);let n=0,o=0,i=(null===(e=this.scrollParent)||void 0===e?void 0:e.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},r=aa(this.view);t.clientX-r.left<=i.left+Ja?n=-tl(i.left-t.clientX):t.clientX+r.right>=i.right-Ja&&(n=tl(t.clientX-i.right)),t.clientY-r.top<=i.top+Ja?o=-tl(i.top-t.clientY):t.clientY+r.bottom>=i.bottom-Ja&&(o=tl(t.clientY-i.bottom)),this.setScrollSpeed(n,o)}up(t){null==this.dragging&&this.select(this.lastEvent),this.dragging||t.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let t=this.view.contentDOM.ownerDocument;t.removeEventListener("mousemove",this.move),t.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(t,e){this.scrollSpeed={x:t,y:e},t||e?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(t){let e=null;for(let n=0;n<t.ranges.length;n++){let o=t.ranges[n],i=null;if(o.empty){let t=za(this.atoms,o.from,0);t!=o.from&&(i=Go.cursor(t,-1))}else{let t=za(this.atoms,o.from,-1),e=za(this.atoms,o.to,1);t==o.from&&e==o.to||(i=Go.range(o.from==o.anchor?t:e,o.from==o.head?t:e))}i&&(e||(e=t.ranges.slice()),e[n]=i)}return e?Go.create(e,t.mainIndex):t}select(t){let{view:e}=this,n=this.skipAtoms(this.style.get(t,this.extend,this.multiple));(this.mustSelect||!n.eq(e.state.selection)||n.main.assoc!=e.state.selection.main.assoc&&!1===this.dragging)&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(t){this.style.update(t)&&setTimeout((()=>this.select(this.lastEvent)),20)}}const nl=Object.create(null),ol=Object.create(null),il=us.ie&&us.ie_version<15||us.ios&&us.webkit_version<604;function rl(t,e){let n,{state:o}=t,i=1,r=o.toText(e),s=r.lines==o.selection.ranges.length;if(null!=vl&&o.selection.ranges.every((t=>t.empty))&&vl==r.toString()){let t=-1;n=o.changeByRange((n=>{let a=o.doc.lineAt(n.from);if(a.from==t)return{range:n};t=a.from;let l=o.toText((s?r.line(i++).text:e)+o.lineBreak);return{changes:{from:a.from,insert:l},range:Go.cursor(n.from+l.length)}}))}else n=s?o.changeByRange((t=>{let e=r.line(i++);return{changes:{from:t.from,to:t.to,insert:e.text},range:Go.cursor(t.from+e.length)}})):o.replaceSelection(r);t.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function sl(t,e,n,o){if(1==o)return Go.cursor(e,n);if(2==o)return function(t,e,n=1){let o=t.charCategorizer(e),i=t.doc.lineAt(e),r=e-i.from;if(0==i.length)return Go.cursor(e);0==r?n=1:r==i.length&&(n=-1);let s=r,a=r;n<0?s=Ao(i.text,r,!1):a=Ao(i.text,r);let l=o(i.text.slice(s,a));for(;s>0;){let t=Ao(i.text,s,!1);if(o(i.text.slice(t,s))!=l)break;s=t}for(;a<i.length;){let t=Ao(i.text,a);if(o(i.text.slice(a,t))!=l)break;a=t}return Go.range(s+i.from,a+i.from)}(t.state,e,n);{let n=Ss.find(t.docView,e),o=t.state.doc.lineAt(n?n.posAtEnd:e),i=n?n.posAtStart:o.from,r=n?n.posAtEnd:o.to;return r<t.state.doc.length&&r==o.to&&r++,Go.range(i,r)}}ol.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft},nl.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),27==e.keyCode&&(t.inputState.lastEscPress=Date.now()),!1),ol.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")},ol.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")},nl.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let o of t.state.facet(Is))if(n=o(t,e),n)break;if(n||0!=e.button||(n=function(t,e){let n=ul(t,e),o=gl(e),i=t.state.selection;return{update(t){t.docChanged&&(n.pos=t.changes.mapPos(n.pos),i=i.map(t.changes))},get(e,r,s){let a,l=ul(t,e),c=sl(t,l.pos,l.bias,o);if(n.pos!=l.pos&&!r){let e=sl(t,n.pos,n.bias,o),i=Math.min(e.from,c.from),r=Math.max(e.to,c.to);c=i<c.from?Go.range(i,r):Go.range(r,i)}return r?i.replaceRange(i.main.extend(c.from,c.to)):s&&1==o&&i.ranges.length>1&&(a=function(t,e){for(let n=0;n<t.ranges.length;n++){let{from:o,to:i}=t.ranges[n];if(o<=e&&i>=e)return Go.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}(i,l.pos))?a:s?i.addRange(c):Go.create([c])}}}(t,e)),n){let o=!t.hasFocus;t.inputState.startMouseSelection(new el(t,e,n,o)),o&&t.observer.ignore((()=>Wr(t.contentDOM)));let i=t.inputState.mouseSelection;if(i)return i.start(e),!1===i.dragging}return!1};let al=(t,e)=>t>=e.top&&t<=e.bottom,ll=(t,e,n)=>al(e,n)&&t>=n.left&&t<=n.right;function cl(t,e,n,o){let i=Ss.find(t.docView,e);if(!i)return 1;let r=e-i.posAtStart;if(0==r)return 1;if(r==i.length)return-1;let s=i.coordsAt(r,-1);if(s&&ll(n,o,s))return-1;let a=i.coordsAt(r,1);return a&&ll(n,o,a)?1:s&&al(o,s)?-1:1}function ul(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:cl(t,n,e.clientX,e.clientY)}}const hl=us.ie&&us.ie_version<=11;let pl=null,dl=0,fl=0;function gl(t){if(!hl)return t.detail;let e=pl,n=fl;return pl=t,fl=Date.now(),dl=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(dl+1)%3:1}function ml(t,e,n,o){if(!n)return;let i=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:r}=t.inputState,s=o&&r&&function(t,e){let n=t.state.facet(Ds);return n.length?n[0](e):us.mac?!e.altKey:!e.ctrlKey}(t,e)?{from:r.from,to:r.to}:null,a={from:i,insert:n},l=t.state.changes(s?[s,a]:a);t.focus(),t.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"}),t.inputState.draggedContent=null}nl.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let o=t.docView.nearest(e.target);if(o&&o.isWidget){let t=o.posAtStart,e=t+o.length;(t>=n.to||e<=n.from)&&(n=Go.range(t,e))}}let{inputState:o}=t;return o.mouseSelection&&(o.mouseSelection.dragging=!0),o.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",t.state.sliceDoc(n.from,n.to)),e.dataTransfer.effectAllowed="copyMove"),!1},nl.dragend=t=>(t.inputState.draggedContent=null,!1),nl.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let o=Array(n.length),i=0,r=()=>{++i==n.length&&ml(t,e,o.filter((t=>null!=t)).join(t.state.lineBreak),!1)};for(let t=0;t<n.length;t++){let e=new FileReader;e.onerror=r,e.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(e.result)||(o[t]=e.result),r()},e.readAsText(n[t])}return!0}{let n=e.dataTransfer.getData("Text");if(n)return ml(t,e,n,!0),!0}return!1},nl.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=il?null:e.clipboardData;return n?(rl(t,n.getData("text/plain")||n.getData("text/uri-text")),!0):(function(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{t.focus(),n.remove(),rl(t,n.value)}),50)}(t),!1)};let vl=null;nl.copy=nl.cut=(t,e)=>{let{text:n,ranges:o,linewise:i}=function(t){let e=[],n=[],o=!1;for(let o of t.selection.ranges)o.empty||(e.push(t.sliceDoc(o.from,o.to)),n.push(o));if(!e.length){let i=-1;for(let{from:o}of t.selection.ranges){let r=t.doc.lineAt(o);r.number>i&&(e.push(r.text),n.push({from:r.from,to:Math.min(t.doc.length,r.to+1)})),i=r.number}o=!0}return{text:e.join(t.lineBreak),ranges:n,linewise:o}}(t.state);if(!n&&!i)return!1;vl=i?n:null,"cut"!=e.type||t.state.readOnly||t.dispatch({changes:o,scrollIntoView:!0,userEvent:"delete.cut"});let r=il?null:e.clipboardData;return r?(r.clearData(),r.setData("text/plain",n),!0):(function(t,e){let n=t.dom.parentNode;if(!n)return;let o=n.appendChild(document.createElement("textarea"));o.style.cssText="position: fixed; left: -10000px; top: 10px",o.value=e,o.focus(),o.selectionEnd=e.length,o.selectionStart=0,setTimeout((()=>{o.remove(),t.focus()}),50)}(t,n),!1)};const yl=Pi.define();function _l(t,e){let n=[];for(let o of t.facet(Ls)){let i=o(t,e);i&&n.push(i)}return n?t.update({effects:n,annotations:yl.of(!0)}):null}function Ol(t){setTimeout((()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=_l(t.state,e);n?t.dispatch(n):t.update([])}}),10)}ol.focus=t=>{t.inputState.lastFocusTime=Date.now(),t.scrollDOM.scrollTop||!t.inputState.lastScrollTop&&!t.inputState.lastScrollLeft||(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),Ol(t)},ol.blur=t=>{t.observer.clearSelectionRange(),Ol(t)},ol.compositionstart=ol.compositionupdate=t=>{null==t.inputState.compositionFirstChange&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0)},ol.compositionend=t=>{t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,us.chrome&&us.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then((()=>t.observer.flush())):setTimeout((()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])}),50)},ol.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()},nl.beforeinput=(t,e)=>{var n;let o;if(us.chrome&&us.android&&(o=Ga.find((t=>t.inputType==e.inputType)))&&(t.observer.delayAndroidKey(o.key,o.keyCode),"Backspace"==o.key||"Delete"==o.key)){let e=(null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>e+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())}),100)}return!1};const bl=new Set;const wl=["pre-wrap","normal","pre-line","break-spaces"];class xl{constructor(t){this.lineWrapping=t,this.doc=vo.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(t,e){let n=this.doc.lineAt(e).number-this.doc.lineAt(t).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((e-t-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(t){if(!this.lineWrapping)return this.lineHeight;return(1+Math.max(0,Math.ceil((t-this.lineLength)/(this.lineLength-5))))*this.lineHeight}setDoc(t){return this.doc=t,this}mustRefreshForWrapping(t){return wl.indexOf(t)>-1!=this.lineWrapping}mustRefreshForHeights(t){let e=!1;for(let n=0;n<t.length;n++){let o=t[n];o<0?n++:this.heightSamples[Math.floor(10*o)]||(e=!0,this.heightSamples[Math.floor(10*o)]=!0)}return e}refresh(t,e,n,o,i,r){let s=wl.indexOf(t)>-1,a=Math.round(e)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=e,this.charWidth=n,this.textHeight=o,this.lineLength=i,a){this.heightSamples={};for(let t=0;t<r.length;t++){let e=r[t];e<0?t++:this.heightSamples[Math.floor(10*e)]=!0}}return a}}class Sl{constructor(t,e){this.from=t,this.heights=e,this.index=0}get more(){return this.index<this.heights.length}}class kl{constructor(t,e,n,o,i){this.from=t,this.length=e,this.top=n,this.height=o,this._content=i}get type(){return"number"==typeof this._content?Cs.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof As?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(t){let e=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(t._content)?t._content:[t]);return new kl(this.from,this.length+t.length,this.top,this.height+t.height,e)}}var Pl=function(t){return t[t["ByPos"]=0]="ByPos",t[t["ByHeight"]=1]="ByHeight",t[t["ByPosNoHeight"]=2]="ByPosNoHeight",t}(Pl||(Pl={}));const Cl=.001;class Tl{constructor(t,e,n=2){this.length=t,this.height=e,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(t){this.flags=(t?2:0)|~2&this.flags}setHeight(t,e){this.height!=e&&(Math.abs(this.height-e)>Cl&&(t.heightChanged=!0),this.height=e)}replace(t,e,n){return Tl.of(n)}decomposeLeft(t,e){e.push(this)}decomposeRight(t,e){e.push(this)}applyChanges(t,e,n,o){let i=this,r=n.doc;for(let s=o.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:u}=o[s],h=i.lineAt(a,Pl.ByPosNoHeight,n.setDoc(e),0,0),p=h.to>=l?h:i.lineAt(l,Pl.ByPosNoHeight,n,0,0);for(u+=p.to-l,l=p.to;s>0&&h.from<=o[s-1].toA;)a=o[s-1].fromA,c=o[s-1].fromB,s--,a<h.from&&(h=i.lineAt(a,Pl.ByPosNoHeight,n,0,0));c+=h.from-a,a=h.from;let d=Zl.build(n.setDoc(r),t,c,u);i=i.replace(a,l,d)}return i.updateHeight(n,0)}static empty(){return new Ql(0,0)}static of(t){if(1==t.length)return t[0];let e=0,n=t.length,o=0,i=0;for(;;)if(e==n)if(o>2*i){let i=t[e-1];i.break?t.splice(--e,1,i.left,null,i.right):t.splice(--e,1,i.left,i.right),n+=1+i.break,o-=i.size}else{if(!(i>2*o))break;{let e=t[n];e.break?t.splice(n,1,e.left,null,e.right):t.splice(n,1,e.left,e.right),n+=2+e.break,i-=e.size}}else if(o<i){let n=t[e++];n&&(o+=n.size)}else{let e=t[--n];e&&(i+=e.size)}let r=0;return null==t[e-1]?(r=1,e--):null==t[e]&&(r=1,n++),new $l(Tl.of(t.slice(0,e)),r,Tl.of(t.slice(n)))}}Tl.prototype.size=1;class El extends Tl{constructor(t,e,n){super(t,e),this.deco=n}blockAt(t,e,n,o){return new kl(o,this.length,n,this.height,this.deco||0)}lineAt(t,e,n,o,i){return this.blockAt(0,n,o,i)}forEachLine(t,e,n,o,i,r){t<=i+this.length&&e>=i&&r(this.blockAt(0,n,o,i))}updateHeight(t,e=0,n=!1,o){return o&&o.from<=e&&o.more&&this.setHeight(t,o.heights[o.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ql extends El{constructor(t,e){super(t,e,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(t,e,n,o){return new kl(o,this.length,n,this.height,this.breaks)}replace(t,e,n){let o=n[0];return 1==n.length&&(o instanceof Ql||o instanceof Al&&4&o.flags)&&Math.abs(this.length-o.length)<10?(o instanceof Al?o=new Ql(o.length,this.height):o.height=this.height,this.outdated||(o.outdated=!1),o):Tl.of(n)}updateHeight(t,e=0,n=!1,o){return o&&o.from<=e&&o.more?this.setHeight(t,o.heights[o.index++]):(n||this.outdated)&&this.setHeight(t,Math.max(this.widgetHeight,t.heightForLine(this.length-this.collapsed))+this.breaks*t.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Al extends Tl{constructor(t){super(t,0)}heightMetrics(t,e){let n,o=t.doc.lineAt(e).number,i=t.doc.lineAt(e+this.length).number,r=i-o+1,s=0;if(t.lineWrapping){let e=Math.min(this.height,t.lineHeight*r);n=e/r,this.length>r+1&&(s=(this.height-e)/(this.length-r-1))}else n=this.height/r;return{firstLine:o,lastLine:i,perLine:n,perChar:s}}blockAt(t,e,n,o){let{firstLine:i,lastLine:r,perLine:s,perChar:a}=this.heightMetrics(e,o);if(e.lineWrapping){let i=o+Math.round(Math.max(0,Math.min(1,(t-n)/this.height))*this.length),r=e.doc.lineAt(i),l=s+r.length*a,c=Math.max(n,t-l/2);return new kl(r.from,r.length,c,l,0)}{let o=Math.max(0,Math.min(r-i,Math.floor((t-n)/s))),{from:a,length:l}=e.doc.line(i+o);return new kl(a,l,n+s*o,s,0)}}lineAt(t,e,n,o,i){if(e==Pl.ByHeight)return this.blockAt(t,n,o,i);if(e==Pl.ByPosNoHeight){let{from:e,to:o}=n.doc.lineAt(t);return new kl(e,o-e,0,0,0)}let{firstLine:r,perLine:s,perChar:a}=this.heightMetrics(n,i),l=n.doc.lineAt(t),c=s+l.length*a,u=l.number-r,h=o+s*u+a*(l.from-i-u);return new kl(l.from,l.length,Math.max(o,Math.min(h,o+this.height-c)),c,0)}forEachLine(t,e,n,o,i,r){t=Math.max(t,i),e=Math.min(e,i+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,i);for(let c=t,u=o;c<=e;){let e=n.doc.lineAt(c);if(c==t){let n=e.number-s;u+=a*n+l*(t-i-n)}let o=a+l*e.length;r(new kl(e.from,e.length,u,o,0)),u+=o,c=e.to+1}}replace(t,e,n){let o=this.length-e;if(o>0){let t=n[n.length-1];t instanceof Al?n[n.length-1]=new Al(t.length+o):n.push(null,new Al(o-1))}if(t>0){let e=n[0];e instanceof Al?n[0]=new Al(t+e.length):n.unshift(new Al(t-1),null)}return Tl.of(n)}decomposeLeft(t,e){e.push(new Al(t-1),null)}decomposeRight(t,e){e.push(null,new Al(this.length-t-1))}updateHeight(t,e=0,n=!1,o){let i=e+this.length;if(o&&o.from<=e+this.length&&o.more){let n=[],r=Math.max(e,o.from),s=-1;for(o.from>e&&n.push(new Al(o.from-e-1).updateHeight(t,e));r<=i&&o.more;){let e=t.doc.lineAt(r).length;n.length&&n.push(null);let i=o.heights[o.index++];-1==s?s=i:Math.abs(i-s)>=Cl&&(s=-2);let a=new Ql(e,i);a.outdated=!1,n.push(a),r+=e+1}r<=i&&n.push(null,new Al(i-r).updateHeight(t,r));let a=Tl.of(n);return(s<0||Math.abs(a.height-this.height)>=Cl||Math.abs(s-this.heightMetrics(t,e).perLine)>=Cl)&&(t.heightChanged=!0),a}return(n||this.outdated)&&(this.setHeight(t,t.heightForGap(e,e+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class $l extends Tl{constructor(t,e,n){super(t.length+e+n.length,t.height+n.height,e|(t.outdated||n.outdated?2:0)),this.left=t,this.right=n,this.size=t.size+n.size}get break(){return 1&this.flags}blockAt(t,e,n,o){let i=n+this.left.height;return t<i?this.left.blockAt(t,e,n,o):this.right.blockAt(t,e,i,o+this.left.length+this.break)}lineAt(t,e,n,o,i){let r=o+this.left.height,s=i+this.left.length+this.break,a=e==Pl.ByHeight?t<r:t<s,l=a?this.left.lineAt(t,e,n,o,i):this.right.lineAt(t,e,n,r,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=e==Pl.ByPosNoHeight?Pl.ByPosNoHeight:Pl.ByPos;return a?l.join(this.right.lineAt(s,c,n,r,s)):this.left.lineAt(s,c,n,o,i).join(l)}forEachLine(t,e,n,o,i,r){let s=o+this.left.height,a=i+this.left.length+this.break;if(this.break)t<a&&this.left.forEachLine(t,e,n,o,i,r),e>=a&&this.right.forEachLine(t,e,n,s,a,r);else{let l=this.lineAt(a,Pl.ByPos,n,o,i);t<l.from&&this.left.forEachLine(t,l.from-1,n,o,i,r),l.to>=t&&l.from<=e&&r(l),e>l.to&&this.right.forEachLine(l.to+1,e,n,s,a,r)}}replace(t,e,n){let o=this.left.length+this.break;if(e<o)return this.balanced(this.left.replace(t,e,n),this.right);if(t>this.left.length)return this.balanced(this.left,this.right.replace(t-o,e-o,n));let i=[];t>0&&this.decomposeLeft(t,i);let r=i.length;for(let t of n)i.push(t);if(t>0&&jl(i,r-1),e<this.length){let t=i.length;this.decomposeRight(e,i),jl(i,t)}return Tl.of(i)}decomposeLeft(t,e){let n=this.left.length;if(t<=n)return this.left.decomposeLeft(t,e);e.push(this.left),this.break&&(n++,t>=n&&e.push(null)),t>n&&this.right.decomposeLeft(t-n,e)}decomposeRight(t,e){let n=this.left.length,o=n+this.break;if(t>=o)return this.right.decomposeRight(t-o,e);t<n&&this.left.decomposeRight(t,e),this.break&&t<o&&e.push(null),e.push(this.right)}balanced(t,e){return t.size>2*e.size||e.size>2*t.size?Tl.of(this.break?[t,null,e]:[t,e]):(this.left=t,this.right=e,this.height=t.height+e.height,this.outdated=t.outdated||e.outdated,this.size=t.size+e.size,this.length=t.length+this.break+e.length,this)}updateHeight(t,e=0,n=!1,o){let{left:i,right:r}=this,s=e+i.length+this.break,a=null;return o&&o.from<=e+i.length&&o.more?a=i=i.updateHeight(t,e,n,o):i.updateHeight(t,e,n),o&&o.from<=s+r.length&&o.more?a=r=r.updateHeight(t,s,n,o):r.updateHeight(t,s,n),a?this.balanced(i,r):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function jl(t,e){let n,o;null==t[e]&&(n=t[e-1])instanceof Al&&(o=t[e+1])instanceof Al&&t.splice(e-1,3,new Al(n.length+1+o.length))}const Rl=5;class Zl{constructor(t,e){this.pos=t,this.oracle=e,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=t}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(t,e){if(this.lineStart>-1){let t=Math.min(e,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Ql?n.length+=t-this.pos:(t>this.pos||!this.isCovered)&&this.nodes.push(new Ql(t-this.pos,-1)),this.writtenTo=t,e>t&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=e}point(t,e,n){if(t<e||n.heightRelevant){let o=n.widget?n.widget.estimatedHeight:0,i=n.widget?n.widget.lineBreaks:0;o<0&&(o=this.oracle.lineHeight);let r=e-t;n.block?this.addBlock(new El(r,o,n)):(r||i||o>=Rl)&&this.addLineDeco(o,i,r)}else e>t&&this.span(t,e);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:t,to:e}=this.oracle.doc.lineAt(this.pos);this.lineStart=t,this.lineEnd=e,this.writtenTo<t&&((this.writtenTo<t-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,t-1)),this.nodes.push(null)),this.pos>t&&this.nodes.push(new Ql(this.pos-t,-1)),this.writtenTo=this.pos}blankContent(t,e){let n=new Al(e-t);return this.oracle.doc.lineAt(t).to==e&&(n.flags|=4),n}ensureLine(){this.enterLine();let t=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(t instanceof Ql)return t;let e=new Ql(0,-1);return this.nodes.push(e),e}addBlock(t){this.enterLine();let e=t.deco;e&&e.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(t),this.writtenTo=this.pos=this.pos+t.length,e&&e.endSide>0&&(this.covering=t)}addLineDeco(t,e,n){let o=this.ensureLine();o.length+=n,o.collapsed+=n,o.widgetHeight=Math.max(o.widgetHeight,t),o.breaks+=e,this.writtenTo=this.pos=this.pos+n}finish(t){let e=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||e instanceof Ql||this.isCovered?(this.writtenTo<this.pos||null==e)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Ql(0,-1));let n=t;for(let t of this.nodes)t instanceof Ql&&t.updateHeight(this.oracle,n),n+=t?t.length:1;return this.nodes}static build(t,e,n,o){let i=new Zl(n,t);return Ui.spans(e,n,o,i,0),i.finish(n)}}class Ml{constructor(){this.changes=[]}compareRange(){}comparePoint(t,e,n,o){(t<e||n&&n.heightRelevant||o&&o.heightRelevant)&&js(t,e,this.changes,5)}}function Vl(t,e){let n=t.getBoundingClientRect(),o=t.ownerDocument,i=o.defaultView||window,r=Math.max(0,n.left),s=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let e=t.parentNode;e&&e!=o.body;)if(1==e.nodeType){let n=e,o=window.getComputedStyle(n);if((n.scrollHeight>n.clientHeight||n.scrollWidth>n.clientWidth)&&"visible"!=o.overflow){let o=n.getBoundingClientRect();r=Math.max(r,o.left),s=Math.min(s,o.right),a=Math.max(a,o.top),l=e==t.parentNode?o.bottom:Math.min(l,o.bottom)}e="absolute"==o.position||"fixed"==o.position?n.offsetParent:n.parentNode}else{if(11!=e.nodeType)break;e=e.host}return{left:r-n.left,right:Math.max(r,s)-n.left,top:a-(n.top+e),bottom:Math.max(a,l)-(n.top+e)}}function Dl(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Il{constructor(t,e,n){this.from=t,this.to=e,this.size=n}static same(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let o=t[n],i=e[n];if(o.from!=i.from||o.to!=i.to||o.size!=i.size)return!1}return!0}draw(t,e){return Ts.replace({widget:new Nl(this.size*(e?t.scaleY:t.scaleX),e)}).range(this.from,this.to)}}class Nl extends Ps{constructor(t,e){super(),this.size=t,this.vertical=e}eq(t){return t.size==this.size&&t.vertical==this.vertical}toDOM(){let t=document.createElement("div");return this.vertical?t.style.height=this.size+"px":(t.style.width=this.size+"px",t.style.height="2px",t.style.display="inline-block"),t}get estimatedHeight(){return this.vertical?this.size:-1}}class Wl{constructor(t){this.state=t,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=ql,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=ha.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let e=t.facet(ea).some((t=>"function"!=typeof t&&"cm-lineWrapping"==t.class));this.heightOracle=new xl(e),this.stateDeco=t.facet(na).filter((t=>"function"!=typeof t)),this.heightMap=Tl.empty().applyChanges(this.stateDeco,vo.empty,this.heightOracle.setDoc(t.doc),[new ca(0,0,0,t.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ts.set(this.lineGaps.map((t=>t.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let t=[this.viewport],{main:e}=this.state.selection;for(let n=0;n<=1;n++){let o=n?e.head:e.anchor;if(!t.some((({from:t,to:e})=>o>=t&&o<=e))){let{from:e,to:n}=this.lineBlockAt(o);t.push(new Xl(e,n))}}this.viewports=t.sort(((t,e)=>t.from-e.from)),this.scaler=this.heightMap.height<=7e6?ql:new Ul(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(t=>{this.viewportLines.push(1==this.scaler.scale?t:Bl(t,this.scaler))}))}update(t,e=null){this.state=t.state;let n=this.stateDeco;this.stateDeco=this.state.facet(na).filter((t=>"function"!=typeof t));let o=t.changedRanges,i=ca.extendWithRanges(o,function(t,e,n){let o=new Ml;return Ui.compare(t,e,n,o,0),o.changes}(n,this.stateDeco,t?t.changes:Xo.empty(this.state.doc.length))),r=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,t.startState.doc,this.heightOracle.setDoc(this.state.doc),i),this.heightMap.height!=r&&(t.flags|=2),s?(this.scrollAnchorPos=t.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=i.length?this.mapViewport(this.viewport,t.changes):this.viewport;(e&&(e.range.head<a.from||e.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,e));let l=!t.changes.empty||2&t.flags||a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,this.updateForViewport(),l&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,t.changes))),t.flags|=this.computeVisibleRanges(),e&&(this.scrollTarget=e),!this.mustEnforceCursorAssoc&&t.selectionSet&&t.view.lineWrapping&&t.state.selection.main.empty&&t.state.selection.main.assoc&&!t.state.facet(zs)&&(this.mustEnforceCursorAssoc=!0)}measure(t){let e=t.contentDOM,n=window.getComputedStyle(e),o=this.heightOracle,i=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?ha.RTL:ha.LTR;let r=this.heightOracle.mustRefreshForWrapping(i),s=e.getBoundingClientRect(),a=r||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let l=0,c=0;if(s.width&&s.height){let{scaleX:t,scaleY:n}=Vr(e,s);this.scaleX==t&&this.scaleY==n||(this.scaleX=t,this.scaleY=n,l|=8,r=a=!0)}let u=(parseInt(n.paddingTop)||0)*this.scaleY,h=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==u&&this.paddingBottom==h||(this.paddingTop=u,this.paddingBottom=h,l|=8|2),this.editorWidth!=t.scrollDOM.clientWidth&&(o.lineWrapping&&(a=!0),this.editorWidth=t.scrollDOM.clientWidth,l|=8);let p=t.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=p&&(this.scrollAnchorHeight=-1,this.scrollTop=p),this.scrolledToBottom=zr(t.scrollDOM);let d=(this.printing?Dl:Vl)(e,this.paddingTop),f=d.top-this.pixelViewport.top,g=d.bottom-this.pixelViewport.bottom;this.pixelViewport=d;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let v=s.width;if(this.contentDOMWidth==v&&this.editorHeight==t.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=t.scrollDOM.clientHeight,l|=8),a){let e=t.docView.measureVisibleLineHeights(this.viewport);if(o.mustRefreshForHeights(e)&&(r=!0),r||o.lineWrapping&&Math.abs(v-this.contentDOMWidth)>o.charWidth){let{lineHeight:n,charWidth:s,textHeight:a}=t.docView.measureTextSize();r=n>0&&o.refresh(i,n,s,a,v/s,e),r&&(t.docView.minWidth=0,l|=8)}f>0&&g>0?c=Math.max(f,g):f<0&&g<0&&(c=Math.min(f,g)),o.heightChanged=!1;for(let n of this.viewports){let i=n.from==this.viewport.from?e:t.docView.measureVisibleLineHeights(n);this.heightMap=(r?Tl.empty().applyChanges(this.stateDeco,vo.empty,this.heightOracle,[new ca(0,0,0,t.state.doc.length)]):this.heightMap).updateHeight(o,0,r,new Sl(n.from,i))}o.heightChanged&&(l|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(this.viewport=this.getViewport(c,this.scrollTarget)),this.updateForViewport(),(2&l||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>2e3<<1)&&this.updateLineGaps(this.ensureLineGaps(r?[]:this.lineGaps,t)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,t.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(t,e){let n=.5-Math.max(-.5,Math.min(.5,t/1e3/2)),o=this.heightMap,i=this.heightOracle,{visibleTop:r,visibleBottom:s}=this,a=new Xl(o.lineAt(r-1e3*n,Pl.ByHeight,i,0,0).from,o.lineAt(s+1e3*(1-n),Pl.ByHeight,i,0,0).to);if(e){let{head:t}=e.range;if(t<a.from||t>a.to){let n,r=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=o.lineAt(t,Pl.ByPos,i,0,0);n="center"==e.y?(s.top+s.bottom)/2-r/2:"start"==e.y||"nearest"==e.y&&t<a.from?s.top:s.bottom-r,a=new Xl(o.lineAt(n-1e3/2,Pl.ByHeight,i,0,0).from,o.lineAt(n+r+1e3/2,Pl.ByHeight,i,0,0).to)}}return a}mapViewport(t,e){let n=e.mapPos(t.from,-1),o=e.mapPos(t.to,1);return new Xl(this.heightMap.lineAt(n,Pl.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(o,Pl.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:t,to:e},n=0){if(!this.inView)return!0;let{top:o}=this.heightMap.lineAt(t,Pl.ByPos,this.heightOracle,0,0),{bottom:i}=this.heightMap.lineAt(e,Pl.ByPos,this.heightOracle,0,0),{visibleTop:r,visibleBottom:s}=this;return(0==t||o<=r-Math.max(10,Math.min(-n,250)))&&(e==this.state.doc.length||i>=s+Math.max(10,Math.min(n,250)))&&o>r-2*1e3&&i<s+2*1e3}mapLineGaps(t,e){if(!t.length||e.empty)return t;let n=[];for(let o of t)e.touchesRange(o.from,o.to)||n.push(new Il(e.mapPos(o.from),e.mapPos(o.to),o.size));return n}ensureLineGaps(t,e){let n=this.heightOracle.lineWrapping,o=n?1e4:2e3,i=o>>1,r=o<<1;if(this.defaultTextDirection!=ha.LTR&&!n)return[];let s=[],a=(o,r,l,c)=>{if(r-o<i)return;let u=this.state.selection.main,h=[u.from];u.empty||h.push(u.to);for(let t of h)if(t>o&&t<r)return a(o,t-10,l,c),void a(t+10,r,l,c);let p=function(t,e){for(let n of t)if(e(n))return n;return}(t,(t=>t.from>=l.from&&t.to<=l.to&&Math.abs(t.from-o)<i&&Math.abs(t.to-r)<i&&!h.some((e=>t.from<e&&t.to>e))));if(!p){if(r<l.to&&e&&n&&e.visibleRanges.some((t=>t.from<=r&&t.to>=r))){let t=e.moveToLineBoundary(Go.cursor(r),!1,!0).head;t>o&&(r=t)}p=new Il(o,r,this.gapSize(l,o,r,c))}s.push(p)};for(let t of this.viewportLines){if(t.length<r)continue;let e=Ll(t.from,t.to,this.stateDeco);if(e.total<r)continue;let i,s,l=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let n,r,a=o/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=l){let o=zl(e,l),i=((this.visibleBottom-this.visibleTop)/2+a)/t.height;n=o-i,r=o+i}else n=(this.visibleTop-t.top-a)/t.height,r=(this.visibleBottom-t.top+a)/t.height;i=Yl(e,n),s=Yl(e,r)}else{let t,n,r=e.total*this.heightOracle.charWidth,a=o*this.heightOracle.charWidth;if(null!=l){let o=zl(e,l),i=((this.pixelViewport.right-this.pixelViewport.left)/2+a)/r;t=o-i,n=o+i}else t=(this.pixelViewport.left-a)/r,n=(this.pixelViewport.right+a)/r;i=Yl(e,t),s=Yl(e,n)}i>t.from&&a(t.from,i,t,e),s<t.to&&a(s,t.to,t,e)}return s}gapSize(t,e,n,o){let i=zl(o,n)-zl(o,e);return this.heightOracle.lineWrapping?t.height*i:o.total*this.heightOracle.charWidth*i}updateLineGaps(t){Il.same(t,this.lineGaps)||(this.lineGaps=t,this.lineGapDeco=Ts.set(t.map((t=>t.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let e=[];Ui.spans(t,this.viewport.from,this.viewport.to,{span(t,n){e.push({from:t,to:n})},point(){}},20);let n=e.length!=this.visibleRanges.length||this.visibleRanges.some(((t,n)=>t.from!=e[n].from||t.to!=e[n].to));return this.visibleRanges=e,n?4:0}lineBlockAt(t){return t>=this.viewport.from&&t<=this.viewport.to&&this.viewportLines.find((e=>e.from<=t&&e.to>=t))||Bl(this.heightMap.lineAt(t,Pl.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(t){return Bl(this.heightMap.lineAt(this.scaler.fromDOM(t),Pl.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(t){let e=this.lineBlockAtHeight(t+8);return e.from>=this.viewport.from||this.viewportLines[0].top-t>200?e:this.viewportLines[0]}elementAtHeight(t){return Bl(this.heightMap.blockAt(this.scaler.fromDOM(t),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Xl{constructor(t,e){this.from=t,this.to=e}}function Ll(t,e,n){let o=[],i=t,r=0;return Ui.spans(n,t,e,{span(){},point(t,e){t>i&&(o.push({from:i,to:t}),r+=t-i),i=e}},20),i<e&&(o.push({from:i,to:e}),r+=e-i),{total:r,ranges:o}}function Yl({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let o=Math.floor(t*n);for(let t=0;;t++){let{from:n,to:i}=e[t],r=i-n;if(o<=r)return n+o;o-=r}}function zl(t,e){let n=0;for(let{from:o,to:i}of t.ranges){if(e<=i){n+=e-o;break}n+=i-o}return n/t.total}const ql={toDOM:t=>t,fromDOM:t=>t,scale:1};class Ul{constructor(t,e,n){let o=0,i=0,r=0;this.viewports=n.map((({from:n,to:i})=>{let r=e.lineAt(n,Pl.ByPos,t,0,0).top,s=e.lineAt(i,Pl.ByPos,t,0,0).bottom;return o+=s-r,{from:n,to:i,top:r,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-o)/(e.height-o);for(let t of this.viewports)t.domTop=r+(t.top-i)*this.scale,r=t.domBottom=t.domTop+(t.bottom-t.top),i=t.bottom}toDOM(t){for(let e=0,n=0,o=0;;e++){let i=e<this.viewports.length?this.viewports[e]:null;if(!i||t<i.top)return o+(t-n)*this.scale;if(t<=i.bottom)return i.domTop+(t-i.top);n=i.bottom,o=i.domBottom}}fromDOM(t){for(let e=0,n=0,o=0;;e++){let i=e<this.viewports.length?this.viewports[e]:null;if(!i||t<i.domTop)return n+(t-o)/this.scale;if(t<=i.domBottom)return i.top+(t-i.domTop);n=i.bottom,o=i.domBottom}}}function Bl(t,e){if(1==e.scale)return t;let n=e.toDOM(t.top),o=e.toDOM(t.bottom);return new kl(t.from,t.length,n,o-n,Array.isArray(t._content)?t._content.map((t=>Bl(t,e))):t._content)}const Fl=Jo.define({combine:t=>t.join(" ")}),Gl=Jo.define({combine:t=>t.indexOf(!0)>-1}),Hl=yr.newName(),Kl=yr.newName(),Jl=yr.newName(),tc={"&light":"."+Kl,"&dark":"."+Jl};function ec(t,e,n){return new yr(e,{finish:e=>/&/.test(e)?e.replace(/&\w*/,(e=>{if("&"==e)return t;if(!n||!n[e])throw new RangeError(`Unsupported selector: ${e}`);return n[e]})):t+" "+e})}const nc=ec("."+Hl,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},tc),oc="￿";class ic{constructor(t,e){this.points=t,this.text="",this.lineSeparator=e.facet(Wi.lineSeparator)}append(t){this.text+=t}lineBreak(){this.text+=oc}readRange(t,e){if(!t)return this;let n=t.parentNode;for(let o=t;;){this.findPointBefore(n,o);let t=this.text.length;this.readNode(o);let i=o.nextSibling;if(i==e)break;let r=Br.get(o),s=Br.get(i);(r&&s?r.breakAfter:(r?r.breakAfter:sc(o))||sc(i)&&("BR"!=o.nodeName||o.cmIgnore)&&this.text.length>t)&&this.lineBreak(),o=i}return this.findPointBefore(n,e),this}readTextNode(t){let e=t.nodeValue;for(let n of this.points)n.node==t&&(n.pos=this.text.length+Math.min(n.offset,e.length));for(let n=0,o=this.lineSeparator?null:/\r\n?|\n/g;;){let i,r=-1,s=1;if(this.lineSeparator?(r=e.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(i=o.exec(e))&&(r=i.index,s=i[0].length),this.append(e.slice(n,r<0?e.length:r)),r<0)break;if(this.lineBreak(),s>1)for(let e of this.points)e.node==t&&e.pos>this.text.length&&(e.pos-=s-1);n=r+s}}readNode(t){if(t.cmIgnore)return;let e=Br.get(t),n=e&&e.overrideDOMText;if(null!=n){this.findPointInside(t,n.length);for(let t=n.iter();!t.next().done;)t.lineBreak?this.lineBreak():this.append(t.value)}else 3==t.nodeType?this.readTextNode(t):"BR"==t.nodeName?t.nextSibling&&this.lineBreak():1==t.nodeType&&this.readRange(t.firstChild,null)}findPointBefore(t,e){for(let n of this.points)n.node==t&&t.childNodes[n.offset]==e&&(n.pos=this.text.length)}findPointInside(t,e){for(let n of this.points)(3==t.nodeType?n.node==t:t.contains(n.node))&&(n.pos=this.text.length+(rc(t,n.node,n.offset)?e:0))}}function rc(t,e,n){for(;;){if(!e||n<Rr(e))return!1;if(e==t)return!0;n=$r(e)+1,e=e.parentNode}}function sc(t){return 1==t.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}class ac{constructor(t,e){this.node=t,this.offset=e,this.pos=-1}}class lc{constructor(t,e,n,o){this.typeOver=o,this.bounds=null,this.text="";let{impreciseHead:i,impreciseAnchor:r}=t.docView;if(t.state.readOnly&&e>-1)this.newSel=null;else if(e>-1&&(this.bounds=t.docView.domBoundsAround(e,n,0))){let e=i||r?[]:function(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:o,focusNode:i,focusOffset:r}=t.observer.selectionRange;n&&(e.push(new ac(n,o)),i==n&&r==o||e.push(new ac(i,r)));return e}(t),n=new ic(e,t.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=function(t,e){if(0==t.length)return null;let n=t[0].pos,o=2==t.length?t[1].pos:n;return n>-1&&o>-1?Go.single(n+e,o+e):null}(e,this.bounds.from)}else{let e=t.observer.selectionRange,n=i&&i.node==e.focusNode&&i.offset==e.focusOffset||!Tr(t.contentDOM,e.focusNode)?t.state.selection.main.head:t.docView.posFromDOM(e.focusNode,e.focusOffset),o=r&&r.node==e.anchorNode&&r.offset==e.anchorOffset||!Tr(t.contentDOM,e.anchorNode)?t.state.selection.main.anchor:t.docView.posFromDOM(e.anchorNode,e.anchorOffset);this.newSel=Go.single(o,n)}}}function cc(t,e){let n,{newSel:o}=e,i=t.state.selection.main,r=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:s}=e.bounds,a=i.from,l=null;(8===r||us.android&&e.text.length<s-o)&&(a=i.to,l="end");let c=function(t,e,n,o){let i=Math.min(t.length,e.length),r=0;for(;r<i&&t.charCodeAt(r)==e.charCodeAt(r);)r++;if(r==i&&t.length==e.length)return null;let s=t.length,a=e.length;for(;s>0&&a>0&&t.charCodeAt(s-1)==e.charCodeAt(a-1);)s--,a--;if("end"==o){n-=s+Math.max(0,r-Math.min(s,a))-r}if(s<r&&t.length<e.length){r-=n<=r&&n>=s?r-n:0,a=r+(a-s),s=r}else if(a<r){r-=n<=r&&n>=a?r-n:0,s=r+(s-a),a=r}return{from:r,toA:s,toB:a}}(t.state.doc.sliceString(o,s,oc),e.text,a-o,l);c&&(us.chrome&&13==r&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==oc+oc&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:vo.of(e.text.slice(c.from,c.toB).split(oc))})}else o&&(!t.hasFocus&&t.state.facet(Fs)||o.main.eq(i))&&(o=null);if(!n&&!o)return!1;if(!n&&e.typeOver&&!i.empty&&o&&o.main.empty?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:t.state.doc.slice(i.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,i.to))}:(us.mac||us.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==t.contentDOM.getAttribute("autocorrect")?(o&&2==n.insert.length&&(o=Go.single(o.main.anchor-1,o.main.head-1)),n={from:i.from,to:i.to,insert:vo.of([" "])}):us.chrome&&n&&n.from==n.to&&n.from==i.head&&"\n "==n.insert.toString()&&t.lineWrapping&&(o&&(o=Go.single(o.main.anchor-1,o.main.head-1)),n={from:i.from,to:i.to,insert:vo.of([" "])}),n){if(us.ios&&t.inputState.flushIOSKey())return!0;if(us.android&&(n.from==i.from&&n.to==i.to&&1==n.insert.length&&2==n.insert.lines&&Lr(t.contentDOM,"Enter",13)||(n.from==i.from-1&&n.to==i.to&&0==n.insert.length||8==r&&n.insert.length<n.to-n.from&&n.to>i.head)&&Lr(t.contentDOM,"Backspace",8)||n.from==i.from&&n.to==i.to+1&&0==n.insert.length&&Lr(t.contentDOM,"Delete",46)))return!0;let e,s=n.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let a=()=>e||(e=function(t,e,n){let o,i=t.state,r=i.selection.main;if(e.from>=r.from&&e.to<=r.to&&e.to-e.from>=(r.to-r.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let n=r.from<e.from?i.sliceDoc(r.from,e.from):"",s=r.to>e.to?i.sliceDoc(e.to,r.to):"";o=i.replaceSelection(t.state.toText(n+e.insert.sliceString(0,void 0,t.state.lineBreak)+s))}else{let s=i.changes(e),a=n&&n.main.to<=s.newLength?n.main:void 0;if(i.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=r.to&&e.to>=r.to-10){let l,c=t.state.sliceDoc(e.from,e.to),u=n&&Aa(t,n.main.head);if(u){let t=e.insert.length-(e.to-e.from);l={from:u.from,to:u.to-t}}else l=t.state.doc.lineAt(r.head);let h=r.to-e.to,p=r.to-r.from;o=i.changeByRange((n=>{if(n.from==r.from&&n.to==r.to)return{changes:s,range:a||n.map(s)};let o=n.to-h,u=o-c.length;if(n.to-n.from!=p||t.state.sliceDoc(u,o)!=c||n.to>=l.from&&n.from<=l.to)return{range:n};let d=i.changes({from:u,to:o,insert:e.insert}),f=n.to-r.to;return{changes:d,range:a?Go.range(Math.max(0,a.anchor+f),Math.max(0,a.head+f)):n.map(d)}}))}else o={changes:s,selection:a&&i.selection.replaceRange(a)}}let s="input.type";(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,s+=".compose",t.inputState.compositionFirstChange&&(s+=".start",t.inputState.compositionFirstChange=!1));return i.update(o,{userEvent:s,scrollIntoView:!0})}(t,n,o));return t.state.facet(Xs).some((e=>e(t,n.from,n.to,s,a)))||t.dispatch(a()),!0}if(o&&!o.main.eq(i)){let e=!1,n="select";return t.inputState.lastSelectionTime>Date.now()-50&&("select"==t.inputState.lastSelectionOrigin&&(e=!0),n=t.inputState.lastSelectionOrigin),t.dispatch({selection:o,scrollIntoView:e,userEvent:n}),!0}return!1}const uc={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},hc=us.ie&&us.ie_version<=11;class pc{constructor(t){this.view=t,this.active=!1,this.selectionRange=new Dr,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=t.contentDOM,this.observer=new MutationObserver((e=>{for(let t of e)this.queue.push(t);(us.ie&&us.ie_version<=11||us.ios&&t.composing)&&e.some((t=>"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length))?this.flushSoon():this.flush()})),hc&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var t;(null===(t=this.view.docView)||void 0===t?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(t.scrollDOM)),this.addWindowListeners(this.win=t.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(t){this.view.inputState.runHandlers("scroll",t),this.intersecting&&this.view.measure()}onScroll(t){this.intersecting&&this.flush(!1),this.onScrollChanged(t)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500)}updateGaps(t){if(this.gapIntersection&&(t.length!=this.gaps.length||this.gaps.some(((e,n)=>e!=t[n])))){this.gapIntersection.disconnect();for(let e of t)this.gapIntersection.observe(e);this.gaps=t}}onSelectionChange(t){let e=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,o=this.selectionRange;if(n.state.facet(Fs)?n.root.activeElement!=this.dom:!Er(n.dom,o))return;let i=o.anchorNode&&n.docView.nearest(o.anchorNode);i&&i.ignoreEvent(t)?e||(this.selectionChanged=!1):(us.ie&&us.ie_version<=11||us.android&&us.chrome)&&!n.state.selection.main.empty&&o.focusNode&&Ar(o.focusNode,o.focusOffset,o.anchorNode,o.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:t}=this,e=us.safari&&11==t.root.nodeType&&function(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}(this.dom.ownerDocument)==this.dom&&function(t){let e=null;function n(t){t.preventDefault(),t.stopImmediatePropagation(),e=t.getTargetRanges()[0]}if(t.contentDOM.addEventListener("beforeinput",n,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",n,!0),!e)return null;let o=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,a=t.docView.domAtPos(t.state.selection.main.anchor);Ar(a.node,a.offset,r,s)&&([o,i,r,s]=[r,s,o,i]);return{anchorNode:o,anchorOffset:i,focusNode:r,focusOffset:s}}(this.view)||Cr(t.root);if(!e||this.selectionRange.eq(e))return!1;let n=Er(this.dom,e);return n&&!this.selectionChanged&&t.inputState.lastFocusTime>Date.now()-200&&t.inputState.lastTouchTime<Date.now()-300&&function(t,e){let n=e.focusNode,o=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=o)return!1;for(o=Math.min(o,Rr(n));;)if(o){if(1!=n.nodeType)return!1;let t=n.childNodes[o-1];"false"==t.contentEditable?o--:(n=t,o=Rr(n))}else{if(n==t)return!0;o=$r(n),n=n.parentNode}}(this.dom,e)?(this.view.inputState.lastFocusTime=0,t.docView.updateSelection(),!1):(this.selectionRange.setRange(e),n&&(this.selectionChanged=!0),!0)}setSelectionRange(t,e){this.selectionRange.set(t.node,t.offset,e.node,e.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let t=0,e=null;for(let n=this.dom;n;)if(1==n.nodeType)!e&&t<this.scrollTargets.length&&this.scrollTargets[t]==n?t++:e||(e=this.scrollTargets.slice(0,t)),e&&e.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(t<this.scrollTargets.length&&!e&&(e=this.scrollTargets.slice(0,t)),e){for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);for(let t of this.scrollTargets=e)t.addEventListener("scroll",this.onScroll)}}ignore(t){if(!this.active)return t();try{return this.stop(),t()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,uc),hc&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),hc&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(t,e){var n;if(!this.delayedAndroidKey){let t=()=>{let t=this.delayedAndroidKey;if(t){this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=t.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&t.force&&Lr(this.dom,t.key,t.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(t)}this.delayedAndroidKey&&"Enter"!=t||(this.delayedAndroidKey={key:t,keyCode:e,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}processRecords(){let t=this.pendingRecords();t.length&&(this.queue=[]);let e=-1,n=-1,o=!1;for(let i of t){let t=this.readMutation(i);t&&(t.typeOver&&(o=!0),-1==e?({from:e,to:n}=t):(e=Math.min(t.from,e),n=Math.max(t.to,n)))}return{from:e,to:n,typeOver:o}}readChange(){let{from:t,to:e,typeOver:n}=this.processRecords(),o=this.selectionChanged&&Er(this.dom,this.selectionRange);if(t<0&&!o)return null;t>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let i=new lc(this.view,t,e,n);return this.view.docView.domChanged={newSel:i.newSel?i.newSel.main:null},i}flush(t=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;t&&this.readSelectionRange();let e=this.readChange();if(!e)return this.view.requestMeasure(),!1;let n=this.view.state,o=cc(this.view,e);return this.view.state==n&&this.view.update([]),o}readMutation(t){let e=this.view.docView.nearest(t.target);if(!e||e.ignoreMutation(t))return null;if(e.markDirty("attributes"==t.type),"attributes"==t.type&&(e.flags|=4),"childList"==t.type){let n=dc(e,t.previousSibling||t.target.previousSibling,-1),o=dc(e,t.nextSibling||t.target.nextSibling,1);return{from:n?e.posAfter(n):e.posAtStart,to:o?e.posBefore(o):e.posAtEnd,typeOver:!1}}return"characterData"==t.type?{from:e.posAtStart,to:e.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}:null}setWindow(t){t!=this.win&&(this.removeWindowListeners(this.win),this.win=t,this.addWindowListeners(this.win))}addWindowListeners(t){t.addEventListener("resize",this.onResize),t.addEventListener("beforeprint",this.onPrint),t.addEventListener("scroll",this.onScroll),t.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(t){t.removeEventListener("scroll",this.onScroll),t.removeEventListener("resize",this.onResize),t.removeEventListener("beforeprint",this.onPrint),t.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var t,e,n;this.stop(),null===(t=this.intersection)||void 0===t||t.disconnect(),null===(e=this.gapIntersection)||void 0===e||e.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let t of this.scrollTargets)t.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}}function dc(t,e,n){for(;e;){let o=Br.get(e);if(o&&o.parent==t)return o;let i=e.parentNode;e=i!=t.dom?i:n>0?e.nextSibling:e.previousSibling}return null}class fc{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(t={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),t.parent&&t.parent.appendChild(this.dom);let{dispatch:e}=t;this.dispatchTransactions=t.dispatchTransactions||e&&(t=>t.forEach((t=>e(t,this))))||(t=>this.update(t)),this.dispatch=this.dispatch.bind(this),this._root=t.root||function(t){for(;t;){if(t&&(9==t.nodeType||11==t.nodeType&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}(t.parent)||document,this.viewState=new Wl(t.state||Wi.create(t)),t.scrollTo&&t.scrollTo.is(Us)&&(this.viewState.scrollTarget=t.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Hs).map((t=>new Js(t)));for(let t of this.plugins)t.update(this);this.observer=new pc(this),this.inputState=new Ua(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Ea(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...t){let e=1==t.length&&t[0]instanceof Qi?t:1==t.length&&Array.isArray(t[0])?t[0]:[this.state.update(...t)];this.dispatchTransactions(e,this)}update(t){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let e,n=!1,o=!1,i=this.state;for(let e of t){if(e.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=e.state}if(this.destroyed)return void(this.viewState.state=i);let r=this.hasFocus,s=0,a=null;t.some((t=>t.annotation(yl)))?(this.inputState.notifiedFocused=r,s=1):r!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=r,a=_l(i,r),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(c=null)):this.observer.clear(),i.facet(Wi.phrases)!=this.state.facet(Wi.phrases))return this.setState(i);e=ua.create(this,i,t),e.flags|=s;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let e of t){if(u&&(u=u.map(e.changes)),e.scrollIntoView){let{main:t}=e.state.selection;u=new qs(t.empty?t:Go.cursor(t.head,t.head>t.anchor?-1:1))}for(let t of e.effects)t.is(Us)&&(u=t.value.clip(this.state))}this.viewState.update(e,u),this.bidiCache=vc.update(this.bidiCache,e.changes),e.empty||(this.updatePlugins(e),this.inputState.update(e)),n=this.docView.update(e),this.state.facet(la)!=this.styleModules&&this.mountStyles(),o=this.updateAttrs(),this.showAnnouncements(t),this.docView.updateSelection(n,t.some((t=>t.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(e.startState.facet(Fl)!=e.state.facet(Fl)&&(this.viewState.mustMeasureContent=!0),(n||o||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!e.empty)for(let t of this.state.facet(Ws))try{t(e)}catch(t){Bs(this.state,t,"update listener")}(a||c)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!cc(this,c)&&l.force&&Lr(this.contentDOM,l.key,l.keyCode)}))}setState(t){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=t);this.updateState=2;let e=this.hasFocus;try{for(let t of this.plugins)t.destroy(this);this.viewState=new Wl(t),this.plugins=t.facet(Hs).map((t=>new Js(t))),this.pluginMap.clear();for(let t of this.plugins)t.update(this);this.docView.destroy(),this.docView=new Ea(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}e&&this.focus(),this.requestMeasure()}updatePlugins(t){let e=t.startState.facet(Hs),n=t.state.facet(Hs);if(e!=n){let o=[];for(let i of n){let n=e.indexOf(i);if(n<0)o.push(new Js(i));else{let e=this.plugins[n];e.mustUpdate=t,o.push(e)}}for(let e of this.plugins)e.mustUpdate!=t&&e.destroy(this);this.plugins=o,this.pluginMap.clear()}else for(let e of this.plugins)e.mustUpdate=t;for(let t=0;t<this.plugins.length;t++)this.plugins[t].update(this);e!=n&&this.inputState.ensureHandlers(this.plugins)}measure(t=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,t&&this.observer.forceFlush();let e=null,n=this.scrollDOM,o=n.scrollTop*this.scaleY,{scrollAnchorPos:i,scrollAnchorHeight:r}=this.viewState;Math.abs(o-this.viewState.scrollTop)>1&&(r=-1),this.viewState.scrollAnchorHeight=-1;try{for(let t=0;;t++){if(r<0)if(zr(n))i=-1,r=this.viewState.heightMap.height;else{let t=this.viewState.scrollAnchorAt(o);i=t.from,r=t.top}this.updateState=1;let s=this.viewState.measure(this);if(!s&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(t>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let a=[];4&s||([this.measureRequests,a]=[a,this.measureRequests]);let l=a.map((t=>{try{return t.read(this)}catch(t){return Bs(this.state,t),mc}})),c=ua.create(this,this.state,[]),u=!1;c.flags|=s,e?e.flags|=s:e=c,this.updateState=2,c.empty||(this.updatePlugins(c),this.inputState.update(c),this.updateAttrs(),u=this.docView.update(c));for(let t=0;t<a.length;t++)if(l[t]!=mc)try{let e=a[t];e.write&&e.write(l[t],this)}catch(t){Bs(this.state,t)}if(u&&this.docView.updateSelection(!0),!c.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,r=-1;continue}{let t=(i<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(i).top)-r;if(t>1||t<-1){o+=t,n.scrollTop=o/this.scaleY,r=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(e&&!e.empty)for(let t of this.state.facet(Ws))t(e)}get themeClasses(){return Hl+" "+(this.state.facet(Gl)?Jl:Kl)+" "+this.state.facet(Fl)}updateAttrs(){let t=yc(this,ta,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),e={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Fs)?"true":"false",class:"cm-content",style:`${us.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(e["aria-readonly"]="true"),yc(this,ea,e);let n=this.observer.ignore((()=>{let n=ws(this.contentDOM,this.contentAttrs,e),o=ws(this.dom,this.editorAttrs,t);return n||o}));return this.editorAttrs=t,this.contentAttrs=e,n}showAnnouncements(t){let e=!0;for(let n of t)for(let t of n.effects)if(t.is(fc.announce)){e&&(this.announceDOM.textContent=""),e=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=t.value}}mountStyles(){this.styleModules=this.state.facet(la);let t=this.state.facet(fc.cspNonce);yr.mount(this.root,this.styleModules.concat(nc).reverse(),t?{nonce:t}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(t){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),t){if(this.measureRequests.indexOf(t)>-1)return;if(null!=t.key)for(let e=0;e<this.measureRequests.length;e++)if(this.measureRequests[e].key===t.key)return void(this.measureRequests[e]=t);this.measureRequests.push(t)}}plugin(t){let e=this.pluginMap.get(t);return(void 0===e||e&&e.spec!=t)&&this.pluginMap.set(t,e=this.plugins.find((e=>e.spec==t))||null),e&&e.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(t){return this.readMeasured(),this.viewState.elementAtHeight(t)}lineBlockAtHeight(t){return this.readMeasured(),this.viewState.lineBlockAtHeight(t)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(t){return this.viewState.lineBlockAt(t)}get contentHeight(){return this.viewState.contentHeight}moveByChar(t,e,n){return qa(this,t,Ya(this,t,e,n))}moveByGroup(t,e){return qa(this,t,Ya(this,t,e,(e=>function(t,e,n){let o=t.state.charCategorizer(e),i=o(n);return t=>{let e=o(t);return i==Vi.Space&&(i=e),i==e}}(this,t.head,e))))}moveToLineBoundary(t,e,n=!0){return function(t,e,n,o){let i=La(t,e.head),r=o&&i.type==Cs.Text&&(t.lineWrapping||i.widgetLineBreaks)?t.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head):null;if(r){let e=t.dom.getBoundingClientRect(),o=t.textDirectionAt(i.from),s=t.posAtCoords({x:n==(o==ha.LTR)?e.right-1:e.left+1,y:(r.top+r.bottom)/2});if(null!=s)return Go.cursor(s,n?-1:1)}return Go.cursor(n?i.to:i.from,n?-1:1)}(this,t,e,n)}moveVertically(t,e,n){return qa(this,t,function(t,e,n,o){let i=e.head,r=n?1:-1;if(i==(n?t.state.doc.length:0))return Go.cursor(i,e.assoc);let s,a=e.goalColumn,l=t.contentDOM.getBoundingClientRect(),c=t.coordsAtPos(i,e.assoc||-1),u=t.documentTop;if(c)null==a&&(a=c.left-l.left),s=r<0?c.top:c.bottom;else{let e=t.viewState.lineBlockAt(i);null==a&&(a=Math.min(l.right-l.left,t.defaultCharacterWidth*(i-e.from))),s=(r<0?e.top:e.bottom)+u}let h=l.left+a,p=null!=o?o:t.viewState.heightOracle.textHeight>>1;for(let e=0;;e+=10){let n=s+(p+e)*r,o=Wa(t,{x:h,y:n},!1,r);if(n<l.top||n>l.bottom||(r<0?o<i:o>i)){let e=t.docView.coordsForChar(o),i=!e||n<e.top?-1:1;return Go.cursor(o,i,void 0,a)}}}(this,t,e,n))}domAtPos(t){return this.docView.domAtPos(t)}posAtDOM(t,e=0){return this.docView.posFromDOM(t,e)}posAtCoords(t,e=!0){return this.readMeasured(),Wa(this,t,e)}coordsAtPos(t,e=1){this.readMeasured();let n=this.docView.coordsAt(t,e);if(!n||n.left==n.right)return n;let o=this.state.doc.lineAt(t),i=this.bidiSpans(o);return Zr(n,i[Oa.find(i,t-o.from,-1,e)].dir==ha.LTR==e>0)}coordsForChar(t){return this.readMeasured(),this.docView.coordsForChar(t)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(t){return!this.state.facet(Ys)||t<this.viewport.from||t>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(t))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(t){if(t.length>gc)return Pa(t.length);let e,n=this.textDirectionAt(t.from);for(let o of this.bidiCache)if(o.from==t.from&&o.dir==n&&(o.fresh||ba(o.isolates,e=ra(this,t.from,t.to))))return o.order;e||(e=ra(this,t.from,t.to));let o=ka(t.text,n,e);return this.bidiCache.push(new vc(t.from,t.to,n,e,!0,o)),o}get hasFocus(){var t;return(this.dom.ownerDocument.hasFocus()||us.safari&&(null===(t=this.inputState)||void 0===t?void 0:t.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{Wr(this.contentDOM),this.docView.updateSelection()}))}setRoot(t){this._root!=t&&(this._root=t,this.observer.setWindow((9==t.nodeType?t:t.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let t of this.plugins)t.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(t,e={}){return Us.of(new qs("number"==typeof t?Go.cursor(t):t,e.y,e.x,e.yMargin,e.xMargin))}scrollSnapshot(){let{scrollTop:t,scrollLeft:e}=this.scrollDOM,n=this.viewState.scrollAnchorAt(t);return Us.of(new qs(Go.cursor(n.from),"start","start",n.top-t,e,!0))}static domEventHandlers(t){return Ks.define((()=>({})),{eventHandlers:t})}static domEventObservers(t){return Ks.define((()=>({})),{eventObservers:t})}static theme(t,e){let n=yr.newName(),o=[Fl.of(n),la.of(ec(`.${n}`,t))];return e&&e.dark&&o.push(Gl.of(!0)),o}static baseTheme(t){return pi.lowest(la.of(ec("."+Hl,t,tc)))}static findFromDOM(t){var e;let n=t.querySelector(".cm-content"),o=n&&Br.get(n)||Br.get(t);return(null===(e=null==o?void 0:o.rootView)||void 0===e?void 0:e.view)||null}}fc.styleModule=la,fc.inputHandler=Xs,fc.focusChangeEffect=Ls,fc.perLineTextDirection=Ys,fc.exceptionSink=Ns,fc.updateListener=Ws,fc.editable=Fs,fc.mouseSelectionStyle=Is,fc.dragMovesSelection=Ds,fc.clickAddsSelectionRange=Vs,fc.decorations=na,fc.atomicRanges=oa,fc.bidiIsolatedRanges=ia,fc.scrollMargins=sa,fc.darkTheme=Gl,fc.cspNonce=Jo.define({combine:t=>t.length?t[0]:""}),fc.contentAttributes=ea,fc.editorAttributes=ta,fc.lineWrapping=fc.contentAttributes.of({class:"cm-lineWrapping"}),fc.announce=Ei.define();const gc=4096,mc={};class vc{constructor(t,e,n,o,i,r){this.from=t,this.to=e,this.dir=n,this.isolates=o,this.fresh=i,this.order=r}static update(t,e){if(e.empty&&!t.some((t=>t.fresh)))return t;let n=[],o=t.length?t[t.length-1].dir:ha.LTR;for(let i=Math.max(0,t.length-10);i<t.length;i++){let r=t[i];r.dir!=o||e.touchesRange(r.from,r.to)||n.push(new vc(e.mapPos(r.from,1),e.mapPos(r.to,-1),r.dir,r.isolates,!1,r.order))}return n}}function yc(t,e,n){for(let o=t.state.facet(e),i=o.length-1;i>=0;i--){let e=o[i],r="function"==typeof e?e(t):e;r&&_s(r,n)}return n}const _c=us.mac?"mac":us.windows?"win":us.linux?"linux":"key";function Oc(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}const bc=pi.default(fc.domEventHandlers({keydown:(t,e)=>Cc(Sc(e.state),t,e,"editor")})),wc=Jo.define({enables:bc}),xc=new WeakMap;function Sc(t){let e=t.facet(wc),n=xc.get(e);return n||xc.set(e,n=function(t,e=_c){let n=Object.create(null),o=Object.create(null),i=(t,e)=>{let n=o[t];if(null==n)o[t]=e;else if(n!=e)throw new Error("Key binding "+t+" is used both as a regular binding and as a multi-stroke prefix")},r=(t,o,r,s,a)=>{var l,c;let u=n[t]||(n[t]=Object.create(null)),h=o.split(/ (?!$)/).map((t=>function(t,e){const n=t.split(/-(?!$)/);let o,i,r,s,a=n[n.length-1];"Space"==a&&(a=" ");for(let t=0;t<n.length-1;++t){const a=n[t];if(/^(cmd|meta|m)$/i.test(a))s=!0;else if(/^a(lt)?$/i.test(a))o=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))r=!0;else{if(!/^mod$/i.test(a))throw new Error("Unrecognized modifier name: "+a);"mac"==e?s=!0:i=!0}}return o&&(a="Alt-"+a),i&&(a="Ctrl-"+a),s&&(a="Meta-"+a),r&&(a="Shift-"+a),a}(t,e)));for(let e=1;e<h.length;e++){let n=h.slice(0,e).join(" ");i(n,!0),u[n]||(u[n]={preventDefault:!0,stopPropagation:!1,run:[e=>{let o=kc={view:e,prefix:n,scope:t};return setTimeout((()=>{kc==o&&(kc=null)}),Pc),!0}]})}let p=h.join(" ");i(p,!1);let d=u[p]||(u[p]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(l=u._any)||void 0===l?void 0:l.run)||void 0===c?void 0:c.slice())||[]});r&&d.run.push(r),s&&(d.preventDefault=!0),a&&(d.stopPropagation=!0)};for(let o of t){let t=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let e of t){let t=n[e]||(n[e]=Object.create(null));t._any||(t._any={preventDefault:!1,stopPropagation:!1,run:[]});for(let e in t)t[e].run.push(o.any)}let i=o[e]||o.key;if(i)for(let e of t)r(e,i,o.run,o.preventDefault,o.stopPropagation),o.shift&&r(e,"Shift-"+i,o.shift,o.preventDefault,o.stopPropagation)}return n}(e.reduce(((t,e)=>t.concat(e)),[]))),n}let kc=null;const Pc=4e3;function Cc(t,e,n,o){let i=function(t){var e=!(xr&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Sr&&t.shiftKey&&t.key&&1==t.key.length||"Unidentified"==t.key)&&t.key||(t.shiftKey?wr:br)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}(e),r=Do(Mo(i,0))==i.length&&" "!=i,s="",a=!1,l=!1,c=!1;kc&&kc.view==n&&kc.scope==o&&(s=kc.prefix+" ",Ka.indexOf(e.keyCode)<0&&(l=!0,kc=null));let u,h,p=new Set,d=t=>{if(t){for(let o of t.run)if(!p.has(o)&&(p.add(o),o(n,e)))return t.stopPropagation&&(c=!0),!0;t.preventDefault&&(t.stopPropagation&&(c=!0),l=!0)}return!1},f=t[o];return f&&(d(f[s+Oc(i,e,!r)])?a=!0:r&&(e.altKey||e.metaKey||e.ctrlKey)&&!(us.windows&&e.ctrlKey&&e.altKey)&&(u=br[e.keyCode])&&u!=i?(d(f[s+Oc(u,e,!0)])||e.shiftKey&&(h=wr[e.keyCode])!=i&&h!=u&&d(f[s+Oc(h,e,!1)]))&&(a=!0):r&&e.shiftKey&&d(f[s+Oc(i,e,!0)])&&(a=!0),!a&&d(f._any)&&(a=!0)),l&&(a=!0),a&&c&&e.stopPropagation(),a}class Tc{constructor(t,e,n,o,i){this.className=t,this.left=e,this.top=n,this.width=o,this.height=i}draw(){let t=document.createElement("div");return t.className=this.className,this.adjust(t),t}update(t,e){return e.className==this.className&&(this.adjust(t),!0)}adjust(t){t.style.left=this.left+"px",t.style.top=this.top+"px",null!=this.width&&(t.style.width=this.width+"px"),t.style.height=this.height+"px"}eq(t){return this.left==t.left&&this.top==t.top&&this.width==t.width&&this.height==t.height&&this.className==t.className}static forRange(t,e,n){if(n.empty){let o=t.coordsAtPos(n.head,n.assoc||1);if(!o)return[];let i=Ec(t);return[new Tc(e,o.left-i.left,o.top-i.top,null,o.bottom-o.top)]}return function(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let o=Math.max(n.from,t.viewport.from),i=Math.min(n.to,t.viewport.to),r=t.textDirection==ha.LTR,s=t.contentDOM,a=s.getBoundingClientRect(),l=Ec(t),c=s.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),h=a.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),p=a.right-(u?parseInt(u.paddingRight):0),d=La(t,o),f=La(t,i),g=d.type==Cs.Text?d:null,m=f.type==Cs.Text?f:null;g&&(t.lineWrapping||d.widgetLineBreaks)&&(g=Qc(t,o,g));m&&(t.lineWrapping||f.widgetLineBreaks)&&(m=Qc(t,i,m));if(g&&m&&g.from==m.from)return y(_(n.from,n.to,g));{let e=g?_(n.from,null,g):O(d,!1),o=m?_(null,n.to,m):O(f,!0),i=[];return(g||d).to<(m||f).from-(g&&m?1:0)||d.widgetLineBreaks>1&&e.bottom+t.defaultLineHeight/2<o.top?i.push(v(h,e.bottom,p,o.top)):e.bottom<o.top&&t.elementAtHeight((e.bottom+o.top)/2).type==Cs.Text&&(e.bottom=o.top=(e.bottom+o.top)/2),y(e).concat(i).concat(y(o))}function v(t,n,o,i){return new Tc(e,t-l.left,n-l.top-.01,o-t,i-n+.01)}function y({top:t,bottom:e,horizontal:n}){let o=[];for(let i=0;i<n.length;i+=2)o.push(v(n[i],t,n[i+1],e));return o}function _(e,n,o){let i=1e9,s=-1e9,a=[];function l(e,n,l,c,u){let d=t.coordsAtPos(e,e==o.to?-2:2),f=t.coordsAtPos(l,l==o.from?2:-2);d&&f&&(i=Math.min(d.top,f.top,i),s=Math.max(d.bottom,f.bottom,s),u==ha.LTR?a.push(r&&n?h:d.left,r&&c?p:f.right):a.push(!r&&c?h:f.left,!r&&n?p:d.right))}let c=null!=e?e:o.from,u=null!=n?n:o.to;for(let o of t.visibleRanges)if(o.to>c&&o.from<u)for(let i=Math.max(o.from,c),r=Math.min(o.to,u);;){let o=t.state.doc.lineAt(i);for(let s of t.bidiSpans(o)){let t=s.from+o.from,a=s.to+o.from;if(t>=r)break;a>i&&l(Math.max(t,i),null==e&&t<=c,Math.min(a,r),null==n&&a>=u,s.dir)}if(i=o.to+1,i>=r)break}return 0==a.length&&l(c,null==e,u,null==n,t.textDirection),{top:i,bottom:s,horizontal:a}}function O(t,e){let n=a.top+(e?t.top:t.bottom);return{top:n,bottom:n,horizontal:[]}}}(t,e,n)}}function Ec(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==ha.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function Qc(t,e,n){let o=Go.cursor(e);return{from:Math.max(n.from,t.moveToLineBoundary(o,!1,!0).from),to:Math.min(n.to,t.moveToLineBoundary(o,!0,!0).from),type:Cs.Text}}class Ac{constructor(t,e){this.view=t,this.layer=e,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=t.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),e.above&&this.dom.classList.add("cm-layer-above"),e.class&&this.dom.classList.add(e.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(t.state),t.requestMeasure(this.measureReq),e.mount&&e.mount(this.dom,t)}update(t){t.startState.facet($c)!=t.state.facet($c)&&this.setOrder(t.state),(this.layer.update(t,this.dom)||t.geometryChanged)&&(this.scale(),t.view.requestMeasure(this.measureReq))}setOrder(t){let e=0,n=t.facet($c);for(;e<n.length&&n[e]!=this.layer;)e++;this.dom.style.zIndex=String((this.layer.above?150:-1)-e)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:t,scaleY:e}=this.view;t==this.scaleX&&e==this.scaleY||(this.scaleX=t,this.scaleY=e,this.dom.style.transform=`scale(${1/t}, ${1/e})`)}draw(t){if(t.length!=this.drawn.length||t.some(((t,e)=>!function(t,e){return t.constructor==e.constructor&&t.eq(e)}(t,this.drawn[e])))){let e=this.dom.firstChild,n=0;for(let o of t)o.update&&e&&o.constructor&&this.drawn[n].constructor&&o.update(e,this.drawn[n])?(e=e.nextSibling,n++):this.dom.insertBefore(o.draw(),e);for(;e;){let t=e.nextSibling;e.remove(),e=t}this.drawn=t}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const $c=Jo.define();function jc(t){return[Ks.define((e=>new Ac(e,t))),$c.of(t)]}const Rc=!us.ios,Zc=Jo.define({combine:t=>Xi(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(t,e)=>Math.min(t,e),drawRangeCursor:(t,e)=>t||e})});function Mc(t={}){return[Zc.of(t),Dc,Nc,Xc,zs.of(!0)]}function Vc(t){return t.startState.facet(Zc)!=t.state.facet(Zc)}const Dc=jc({above:!0,markers(t){let{state:e}=t,n=e.facet(Zc),o=[];for(let i of e.selection.ranges){let r=i==e.selection.main;if(i.empty?!r||Rc:n.drawRangeCursor){let e=r?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",n=i.empty?i:Go.cursor(i.head,i.head>i.anchor?-1:1);for(let i of Tc.forRange(t,e,n))o.push(i)}}return o},update(t,e){t.transactions.some((t=>t.selection))&&(e.style.animationName="cm-blink"==e.style.animationName?"cm-blink2":"cm-blink");let n=Vc(t);return n&&Ic(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){Ic(e.state,t)},class:"cm-cursorLayer"});function Ic(t,e){e.style.animationDuration=t.facet(Zc).cursorBlinkRate+"ms"}const Nc=jc({above:!1,markers:t=>t.state.selection.ranges.map((e=>e.empty?[]:Tc.forRange(t,"cm-selectionBackground",e))).reduce(((t,e)=>t.concat(e))),update:(t,e)=>t.docChanged||t.selectionSet||t.viewportChanged||Vc(t),class:"cm-selectionLayer"}),Wc={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Rc&&(Wc[".cm-line"].caretColor="transparent !important",Wc[".cm-content"]={caretColor:"transparent !important"});const Xc=pi.highest(fc.theme(Wc)),Lc=Ei.define({map:(t,e)=>null==t?null:e.mapPos(t)}),Yc=si.define({create:()=>null,update:(t,e)=>(null!=t&&(t=e.changes.mapPos(t)),e.effects.reduce(((t,e)=>e.is(Lc)?e.value:t),t))}),zc=Ks.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Yc);null==n?null!=this.cursor&&(null===(e=this.cursor)||void 0===e||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Yc)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Yc),n=null!=e&&t.coordsAtPos(e);if(!n)return null;let o=t.scrollDOM.getBoundingClientRect();return{left:n.left-o.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-o.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Yc)!=t&&this.view.dispatch({effects:Lc.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){t.target!=this.view.contentDOM&&this.view.contentDOM.contains(t.relatedTarget)||this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function qc(t,e,n,o,i){e.lastIndex=0;for(let r,s=t.iterRange(n,o),a=n;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;r=e.exec(s.value);)i(a+r.index,r)}class Uc{constructor(t){const{regexp:e,decoration:n,decorate:o,boundary:i,maxLength:r=1e3}=t;if(!e.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=e,o)this.addMatch=(t,e,n,i)=>o(i,n,n+t[0].length,t,e);else if("function"==typeof n)this.addMatch=(t,e,o,i)=>{let r=n(t,e,o);r&&i(o,o+t[0].length,r)};else{if(!n)throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.addMatch=(t,e,o,i)=>i(o,o+t[0].length,n)}this.boundary=i,this.maxLength=r}createDeco(t){let e=new Bi,n=e.add.bind(e);for(let{from:e,to:o}of function(t,e){let n=t.visibleRanges;if(1==n.length&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let o=[];for(let{from:i,to:r}of n)i=Math.max(t.state.doc.lineAt(i).from,i-e),r=Math.min(t.state.doc.lineAt(r).to,r+e),o.length&&o[o.length-1].to>=i?o[o.length-1].to=r:o.push({from:i,to:r});return o}(t,this.maxLength))qc(t.state.doc,this.regexp,e,o,((e,o)=>this.addMatch(o,t,e,n)));return e.finish()}updateDeco(t,e){let n=1e9,o=-1;return t.docChanged&&t.changes.iterChanges(((e,i,r,s)=>{s>t.view.viewport.from&&r<t.view.viewport.to&&(n=Math.min(r,n),o=Math.max(s,o))})),t.viewportChanged||o-n>1e3?this.createDeco(t.view):o>-1?this.updateRange(t.view,e.map(t.changes),n,o):e}updateRange(t,e,n,o){for(let i of t.visibleRanges){let r=Math.max(i.from,n),s=Math.min(i.to,o);if(s>r){let n=t.state.doc.lineAt(r),o=n.to<s?t.state.doc.lineAt(s):n,a=Math.max(i.from,n.from),l=Math.min(i.to,o.to);if(this.boundary){for(;r>n.from;r--)if(this.boundary.test(n.text[r-1-n.from])){a=r;break}for(;s<o.to;s++)if(this.boundary.test(o.text[s-o.from])){l=s;break}}let c,u=[],h=(t,e,n)=>u.push(n.range(t,e));if(n==o)for(this.regexp.lastIndex=a-n.from;(c=this.regexp.exec(n.text))&&c.index<l-n.from;)this.addMatch(c,t,c.index+n.from,h);else qc(t.state.doc,this.regexp,a,l,((e,n)=>this.addMatch(n,t,e,h)));e=e.update({filterFrom:a,filterTo:l,filter:(t,e)=>t<a||e>l,add:u})}}return e}}const Bc=null!=/x/.unicode?"gu":"g",Fc=new RegExp("[\0-\b\n--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\ufeff￹-￼]",Bc),Gc={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Hc=null;const Kc=Jo.define({combine(t){let e=Xi(t,{render:null,specialChars:Fc,addSpecialChars:null});return(e.replaceTabs=!function(){var t;if(null==Hc&&"undefined"!=typeof document&&document.body){let e=document.body.style;Hc=null!=(null!==(t=e.tabSize)&&void 0!==t?t:e.MozTabSize)}return Hc||!1}())&&(e.specialChars=new RegExp("\t|"+e.specialChars.source,Bc)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,Bc)),e}});function Jc(t={}){return[Kc.of(t),tu||(tu=Ks.fromClass(class{constructor(t){this.view=t,this.decorations=Ts.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(Kc)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new Uc({regexp:t.specialChars,decoration:(e,n,o)=>{let{doc:i}=n.state,r=Mo(e[0],0);if(9==r){let t=i.lineAt(o),e=n.state.tabSize,r=rr(t.text,e,o-t.from);return Ts.replace({widget:new ou((e-r%e)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[r]||(this.decorationCache[r]=Ts.replace({widget:new nu(t,r)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(Kc);t.startState.facet(Kc)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))]}let tu=null;const eu="•";class nu extends Ps{constructor(t,e){super(),this.options=t,this.code=e}eq(t){return t.code==this.code}toDOM(t){let e=function(t){return t>=32?eu:10==t?"␤":String.fromCharCode(9216+t)}(this.code),n=t.state.phrase("Control character")+" "+(Gc[this.code]||"0x"+this.code.toString(16)),o=this.options.render&&this.options.render(this.code,n,e);if(o)return o;let i=document.createElement("span");return i.textContent=e,i.title=n,i.setAttribute("aria-label",n),i.className="cm-specialChar",i}ignoreEvent(){return!1}}class ou extends Ps{constructor(t){super(),this.width=t}eq(t){return t.width==this.width}toDOM(){let t=document.createElement("span");return t.textContent="\t",t.className="cm-tab",t.style.width=this.width+"px",t}ignoreEvent(){return!1}}null&&Ks.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(t){let{view:e}=t,n=e.viewState.editorHeight*e.scaleY-e.defaultLineHeight-e.documentPadding.top-.5;n>=0&&n!=this.height&&(this.height=n,this.attrs={style:`padding-bottom: ${n}px`})}});const iu=Ts.line({class:"cm-activeLine"}),ru=Ks.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let o of t.state.selection.ranges){let i=t.lineBlockAt(o.head);i.from>e&&(n.push(iu.range(i.from)),e=i.from)}return Ts.set(n)}},{decorations:t=>t.decorations});const su=2e3;function au(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),o=t.state.doc.lineAt(n),i=n-o.from,r=i>su?-1:i==o.length?function(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}(t,e.clientX):rr(o.text,t.state.tabSize,n-o.from);return{line:o.number,col:r,off:i}}function lu(t,e){let n=au(t,e),o=t.state.selection;return n?{update(t){if(t.docChanged){let e=t.changes.mapPos(t.startState.doc.line(n.line).from),i=t.state.doc.lineAt(e);n={line:i.number,col:n.col,off:Math.min(n.off,i.length)},o=o.map(t.changes)}},get(e,i,r){let s=au(t,e);if(!s)return o;let a=function(t,e,n){let o=Math.min(e.line,n.line),i=Math.max(e.line,n.line),r=[];if(e.off>su||n.off>su||e.col<0||n.col<0){let s=Math.min(e.off,n.off),a=Math.max(e.off,n.off);for(let e=o;e<=i;e++){let n=t.doc.line(e);n.length<=a&&r.push(Go.range(n.from+s,n.to+a))}}else{let s=Math.min(e.col,n.col),a=Math.max(e.col,n.col);for(let e=o;e<=i;e++){let n=t.doc.line(e),o=sr(n.text,s,t.tabSize,!0);if(o<0)r.push(Go.cursor(n.to));else{let e=sr(n.text,a,t.tabSize);r.push(Go.range(n.from+o,n.from+e))}}}return r}(t.state,n,s);return a.length?r?Go.create(a.concat(o.ranges)):Go.create(a):o}}:null}function cu(t){let e=(null==t?void 0:t.eventFilter)||(t=>t.altKey&&0==t.button);return fc.mouseSelectionStyle.of(((t,n)=>e(n)?lu(t,n):null))}const uu={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},hu={style:"cursor: crosshair"};function pu(t={}){let[e,n]=uu[t.key||"Alt"],o=Ks.fromClass(class{constructor(t){this.view=t,this.isDown=!1}set(t){this.isDown!=t&&(this.isDown=t,this.view.update([]))}},{eventObservers:{keydown(t){this.set(t.keyCode==e||n(t))},keyup(t){t.keyCode!=e&&n(t)||this.set(!1)},mousemove(t){this.set(n(t))}}});return[o,fc.contentAttributes.of((t=>{var e;return(null===(e=t.plugin(o))||void 0===e?void 0:e.isDown)?hu:null}))]}const du="-10000px";class fu{constructor(t,e,n){this.facet=e,this.createTooltipView=n,this.input=t.state.facet(e),this.tooltips=this.input.filter((t=>t)),this.tooltipViews=this.tooltips.map(n)}update(t,e){var n;let o=t.state.facet(this.facet),i=o.filter((t=>t));if(o===this.input){for(let e of this.tooltipViews)e.update&&e.update(t);return!1}let r=[],s=e?[]:null;for(let n=0;n<i.length;n++){let o=i[n],a=-1;if(o){for(let t=0;t<this.tooltips.length;t++){let e=this.tooltips[t];e&&e.create==o.create&&(a=t)}if(a<0)r[n]=this.createTooltipView(o),s&&(s[n]=!!o.above);else{let o=r[n]=this.tooltipViews[a];s&&(s[n]=e[a]),o.update&&o.update(t)}}}for(let t of this.tooltipViews)r.indexOf(t)<0&&(t.dom.remove(),null===(n=t.destroy)||void 0===n||n.call(t));return e&&(s.forEach(((t,n)=>e[n]=t)),e.length=s.length),this.input=o,this.tooltips=i,this.tooltipViews=r,!0}}function gu(t){let{win:e}=t;return{top:0,left:0,bottom:e.innerHeight,right:e.innerWidth}}const mu=Jo.define({combine:t=>{var e,n,o;return{position:us.ios?"absolute":(null===(e=t.find((t=>t.position)))||void 0===e?void 0:e.position)||"fixed",parent:(null===(n=t.find((t=>t.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(o=t.find((t=>t.tooltipSpace)))||void 0===o?void 0:o.tooltipSpace)||gu}}}),vu=new WeakMap,yu=Ks.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(mu);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new fu(t,bu,(t=>this.createTooltip(t))),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,o=t.state.facet(mu);if(o.position!=this.position&&!this.madeAbsolute){this.position=o.position;for(let t of this.manager.tooltipViews)t.dom.style.position=this.position;n=!0}if(o.parent!=this.parent){this.parent&&this.container.remove(),this.parent=o.parent,this.createContainer();for(let t of this.manager.tooltipViews)this.container.appendChild(t.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t){let e=t.create(this.view);if(e.dom.classList.add("cm-tooltip"),t.arrow&&!e.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let t=document.createElement("div");t.className="cm-tooltip-arrow",e.dom.appendChild(t)}return e.dom.style.position=this.position,e.dom.style.top=du,e.dom.style.left="0px",this.container.appendChild(e.dom),e.mount&&e.mount(this.view),e}destroy(){var t,e;this.view.win.removeEventListener("resize",this.measureSoon);for(let e of this.manager.tooltipViews)e.dom.remove(),null===(t=e.destroy)||void 0===t||t.call(e);this.parent&&this.container.remove(),null===(e=this.intersectionObserver)||void 0===e||e.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=this.view.dom.getBoundingClientRect(),e=1,n=1,o=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:t}=this.manager.tooltipViews[0];if(us.gecko)o=t.offsetParent!=this.container.ownerDocument.body;else if(t.style.top==du&&"0px"==t.style.left){let e=t.getBoundingClientRect();o=Math.abs(e.top+1e4)>1||Math.abs(e.left)>1}}if(o||"absolute"==this.position)if(this.parent){let t=this.parent.getBoundingClientRect();t.width&&t.height&&(e=t.width/this.parent.offsetWidth,n=t.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:n}=this.view.viewState);return{editor:t,parent:this.parent?this.container.getBoundingClientRect():t,pos:this.manager.tooltips.map(((t,e)=>{let n=this.manager.tooltipViews[e];return n.getCoords?n.getCoords(t.pos):this.view.coordsAtPos(t.pos)})),size:this.manager.tooltipViews.map((({dom:t})=>t.getBoundingClientRect())),space:this.view.state.facet(mu).tooltipSpace(this.view),scaleX:e,scaleY:n,makeAbsolute:o}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let t of this.manager.tooltipViews)t.dom.style.position="absolute"}let{editor:n,space:o,scaleX:i,scaleY:r}=t,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,h=t.pos[a],p=t.size[a];if(!h||h.bottom<=Math.max(n.top,o.top)||h.top>=Math.min(n.bottom,o.bottom)||h.right<Math.max(n.left,o.left)-.1||h.left>Math.min(n.right,o.right)+.1){u.style.top=du;continue}let d=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,f=d?7:0,g=p.right-p.left,m=null!==(e=vu.get(c))&&void 0!==e?e:p.bottom-p.top,v=c.offset||Ou,y=this.view.textDirection==ha.LTR,_=p.width>o.right-o.left?y?o.left:o.right-p.width:y?Math.min(h.left-(d?14:0)+v.x,o.right-g):Math.max(o.left,h.left-g+(d?14:0)-v.x),O=this.above[a];!l.strictSide&&(O?h.top-(p.bottom-p.top)-v.y<o.top:h.bottom+(p.bottom-p.top)+v.y>o.bottom)&&O==o.bottom-h.bottom>h.top-o.top&&(O=this.above[a]=!O);let b=(O?h.top-o.top:o.bottom-h.bottom)-f;if(b<m&&!1!==c.resize){if(b<this.view.defaultLineHeight){u.style.top=du;continue}vu.set(c,m),u.style.height=(m=b)/r+"px"}else u.style.height&&(u.style.height="");let w=O?h.top-m-f-v.y:h.bottom+f+v.y,x=_+g;if(!0!==c.overlap)for(let t of s)t.left<x&&t.right>_&&t.top<w+m&&t.bottom>w&&(w=O?t.top-m-2-f:t.bottom+f+2);if("absolute"==this.position?(u.style.top=(w-t.parent.top)/r+"px",u.style.left=(_-t.parent.left)/i+"px"):(u.style.top=w/r+"px",u.style.left=_/i+"px"),d){let t=h.left+(y?v.x:-v.x)-(_+14-7);d.style.left=t/i+"px"}!0!==c.overlap&&s.push({left:_,top:w,right:x,bottom:w+m}),u.classList.toggle("cm-tooltip-above",O),u.classList.toggle("cm-tooltip-below",!O),c.positioned&&c.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=du}},{eventObservers:{scroll(){this.maybeMeasure()}}}),_u=fc.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:`${7}px`,width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:`${7}px solid transparent`,borderRight:`${7}px solid transparent`},".cm-tooltip-above &":{bottom:`-${7}px`,"&:before":{borderTop:`${7}px solid #bbb`},"&:after":{borderTop:`${7}px solid #f5f5f5`,bottom:"1px"}},".cm-tooltip-below &":{top:`-${7}px`,"&:before":{borderBottom:`${7}px solid #bbb`},"&:after":{borderBottom:`${7}px solid #f5f5f5`,top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),Ou={x:0,y:0},bu=Jo.define({enables:[yu,_u]}),wu=Jo.define();class xu{static create(t){return new xu(t)}constructor(t){this.view=t,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new fu(t,wu,(t=>this.createHostedView(t)))}createHostedView(t){let e=t.create(this.view);return e.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(e.dom),this.mounted&&e.mount&&e.mount(this.view),e}mount(t){for(let e of this.manager.tooltipViews)e.mount&&e.mount(t);this.mounted=!0}positioned(t){for(let e of this.manager.tooltipViews)e.positioned&&e.positioned(t)}update(t){this.manager.update(t)}destroy(){var t;for(let e of this.manager.tooltipViews)null===(t=e.destroy)||void 0===t||t.call(e)}passProp(t){let e;for(let n of this.manager.tooltipViews){let o=n[t];if(void 0!==o)if(void 0===e)e=o;else if(e!==o)return}return e}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Su=bu.compute([wu],(t=>{let e=t.facet(wu).filter((t=>t));return 0===e.length?null:{pos:Math.min(...e.map((t=>t.pos))),end:Math.max(...e.map((t=>{var e;return null!==(e=t.end)&&void 0!==e?e:t.pos}))),create:xu.create,above:e[0].above,arrow:e.some((t=>t.arrow))}}));class ku{constructor(t,e,n,o,i){this.view=t,this.source=e,this.field=n,this.setHover=o,this.hoverTime=i,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:t.dom,time:0},this.checkHover=this.checkHover.bind(this),t.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),t.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let t=Date.now()-this.lastMove.time;t<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-t):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:t,lastMove:e}=this,n=t.docView.nearest(e.target);if(!n)return;let o,i=1;if(n instanceof fs)o=n.posAtStart;else{if(o=t.posAtCoords(e),null==o)return;let n=t.coordsAtPos(o);if(!n||e.y<n.top||e.y>n.bottom||e.x<n.left-t.defaultCharacterWidth||e.x>n.right+t.defaultCharacterWidth)return;let r=t.bidiSpans(t.state.doc.lineAt(o)).find((t=>t.from<=o&&t.to>=o)),s=r&&r.dir==ha.RTL?-1:1;i=e.x<n.left?-s:s}let r=this.source(t,o,i);if(null==r?void 0:r.then){let e=this.pending={pos:o};r.then((n=>{this.pending==e&&(this.pending=null,n&&t.dispatch({effects:this.setHover.of(n)}))}),(e=>Bs(t.state,e,"hover tooltip")))}else r&&t.dispatch({effects:this.setHover.of(r)})}get tooltip(){let t=this.view.plugin(yu),e=t?t.manager.tooltips.findIndex((t=>t.create==xu.create)):-1;return e>-1?t.manager.tooltipViews[e]:null}mousemove(t){var e;this.lastMove={x:t.clientX,y:t.clientY,target:t.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:n,tooltip:o}=this;if(n&&o&&!function(t,e){let n=t.getBoundingClientRect();return e.clientX>=n.left-Pu&&e.clientX<=n.right+Pu&&e.clientY>=n.top-Pu&&e.clientY<=n.bottom+Pu}(o.dom,t)||this.pending){let{pos:o}=n||this.pending,i=null!==(e=null==n?void 0:n.end)&&void 0!==e?e:o;(o==i?this.view.posAtCoords(this.lastMove)==o:function(t,e,n,o,i,r){let s=t.scrollDOM.getBoundingClientRect(),a=t.documentTop+t.documentPadding.top+t.contentHeight;if(s.left>o||s.right<o||s.top>i||Math.min(s.bottom,a)<i)return!1;let l=t.posAtCoords({x:o,y:i},!1);return l>=e&&l<=n}(this.view,o,i,t.clientX,t.clientY))||(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(t){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:e}=this;if(e){let{tooltip:e}=this;e&&e.dom.contains(t.relatedTarget)?this.watchTooltipLeave(e.dom):this.view.dispatch({effects:this.setHover.of(null)})}}watchTooltipLeave(t){let e=n=>{t.removeEventListener("mouseleave",e),this.active&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of(null)})};t.addEventListener("mouseleave",e)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Pu=4;function Cu(t,e={}){let n=Ei.define(),o=si.define({create:()=>null,update(t,o){if(t&&(e.hideOnChange&&(o.docChanged||o.selection)||e.hideOn&&e.hideOn(o,t)))return null;if(t&&o.docChanged){let e=o.changes.mapPos(t.pos,-1,No.TrackDel);if(null==e)return null;let n=Object.assign(Object.create(null),t);n.pos=e,null!=t.end&&(n.end=o.changes.mapPos(t.end)),t=n}for(let e of o.effects)e.is(n)&&(t=e.value),e.is(Eu)&&(t=null);return t},provide:t=>wu.from(t)});return[o,Ks.define((i=>new ku(i,t,o,n,e.hoverTime||300))),Su]}function Tu(t,e){let n=t.plugin(yu);if(!n)return null;let o=n.manager.tooltips.indexOf(e);return o<0?null:n.manager.tooltipViews[o]}const Eu=Ei.define();null&&Eu.of(null);const Qu=Jo.define({combine(t){let e,n;for(let o of t)e=e||o.topContainer,n=n||o.bottomContainer;return{topContainer:e,bottomContainer:n}}});function Au(t,e){let n=t.plugin($u),o=n?n.specs.indexOf(e):-1;return o>-1?n.panels[o]:null}const $u=Ks.fromClass(class{constructor(t){this.input=t.state.facet(Zu),this.specs=this.input.filter((t=>t)),this.panels=this.specs.map((e=>e(t)));let e=t.state.facet(Qu);this.top=new ju(t,!0,e.topContainer),this.bottom=new ju(t,!1,e.bottomContainer),this.top.sync(this.panels.filter((t=>t.top))),this.bottom.sync(this.panels.filter((t=>!t.top)));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(t){let e=t.state.facet(Qu);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new ju(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new ju(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Zu);if(n!=this.input){let e=n.filter((t=>t)),o=[],i=[],r=[],s=[];for(let n of e){let e,a=this.specs.indexOf(n);a<0?(e=n(t.view),s.push(e)):(e=this.panels[a],e.update&&e.update(t)),o.push(e),(e.top?i:r).push(e)}this.specs=e,this.panels=o,this.top.sync(i),this.bottom.sync(r);for(let t of s)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}else for(let e of this.panels)e.update&&e.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>fc.scrollMargins.of((e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class ju{constructor(t,e,n){this.view=t,this.top=e,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(t){for(let e of this.panels)e.destroy&&t.indexOf(e)<0&&e.destroy();this.panels=t,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let t=this.dom.firstChild;for(let e of this.panels)if(e.dom.parentNode==this.dom){for(;t!=e.dom;)t=Ru(t);t=t.nextSibling}else this.dom.insertBefore(e.dom,t);for(;t;)t=Ru(t)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let t of this.classes.split(" "))t&&this.container.classList.remove(t);for(let t of(this.classes=this.view.themeClasses).split(" "))t&&this.container.classList.add(t)}}}function Ru(t){let e=t.nextSibling;return t.remove(),e}const Zu=Jo.define({enables:$u});class Mu extends Li{compare(t){return this==t||this.constructor==t.constructor&&this.eq(t)}eq(t){return!1}destroy(t){}}Mu.prototype.elementClass="",Mu.prototype.toDOM=void 0,Mu.prototype.mapMode=No.TrackBefore,Mu.prototype.startSide=Mu.prototype.endSide=-1,Mu.prototype.point=!0;const Vu=Jo.define(),Du={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Ui.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Iu=Jo.define();function Nu(t){return[Xu(),Iu.of(Object.assign(Object.assign({},Du),t))]}const Wu=Jo.define({combine:t=>t.some((t=>t))});function Xu(t){let e=[Lu];return t&&!1===t.fixed&&e.push(Wu.of(!0)),e}const Lu=Ks.fromClass(class{constructor(t){this.view=t,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(Iu).map((e=>new Uu(t,e)));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!t.state.facet(Wu),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,o=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(o<.8*(n.to-n.from))}t.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(Wu)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&this.dom.remove();let n=Ui.iter(this.view.state.facet(Vu),this.view.viewport.from),o=[],i=this.gutters.map((t=>new qu(t,this.view.viewport,-this.view.documentPadding.top)));for(let t of this.view.viewportLineBlocks)if(o.length&&(o=[]),Array.isArray(t.type)){let e=!0;for(let r of t.type)if(r.type==Cs.Text&&e){zu(n,o,r.from);for(let t of i)t.line(this.view,r,o);e=!1}else if(r.widget)for(let t of i)t.widget(this.view,r)}else if(t.type==Cs.Text){zu(n,o,t.from);for(let e of i)e.line(this.view,t,o)}else if(t.widget)for(let e of i)e.widget(this.view,t);for(let t of i)t.finish();t&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(t){let e=t.startState.facet(Iu),n=t.state.facet(Iu),o=t.docChanged||t.heightChanged||t.viewportChanged||!Ui.eq(t.startState.facet(Vu),t.state.facet(Vu),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let e of this.gutters)e.update(t)&&(o=!0);else{o=!0;let i=[];for(let o of n){let n=e.indexOf(o);n<0?i.push(new Uu(this.view,o)):(this.gutters[n].update(t),i.push(this.gutters[n]))}for(let t of this.gutters)t.dom.remove(),i.indexOf(t)<0&&t.destroy();for(let t of i)this.dom.appendChild(t.dom);this.gutters=i}return o}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove()}},{provide:t=>fc.scrollMargins.of((e=>{let n=e.plugin(t);return n&&0!=n.gutters.length&&n.fixed?e.textDirection==ha.LTR?{left:n.dom.offsetWidth*e.scaleX}:{right:n.dom.offsetWidth*e.scaleX}:null}))});function Yu(t){return Array.isArray(t)?t:[t]}function zu(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class qu{constructor(t,e,n){this.gutter=t,this.height=n,this.i=0,this.cursor=Ui.iter(t.markers,e.from)}addElement(t,e,n){let{gutter:o}=this,i=(e.top-this.height)/t.scaleY,r=e.height/t.scaleY;if(this.i==o.elements.length){let e=new Bu(t,r,i,n);o.elements.push(e),o.dom.appendChild(e.dom)}else o.elements[this.i].update(t,r,i,n);this.height=e.bottom,this.i++}line(t,e,n){let o=[];zu(this.cursor,o,e.from),n.length&&(o=o.concat(n));let i=this.gutter.config.lineMarker(t,e,o);i&&o.unshift(i);let r=this.gutter;(0!=o.length||r.config.renderEmptyElements)&&this.addElement(t,e,o)}widget(t,e){let n=this.gutter.config.widgetMarker(t,e.widget,e);n&&this.addElement(t,e,[n])}finish(){let t=this.gutter;for(;t.elements.length>this.i;){let e=t.elements.pop();t.dom.removeChild(e.dom),e.destroy()}}}class Uu{constructor(t,e){this.view=t,this.config=e,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in e.domEventHandlers)this.dom.addEventListener(n,(o=>{let i,r=o.target;if(r!=this.dom&&this.dom.contains(r)){for(;r.parentNode!=this.dom;)r=r.parentNode;let t=r.getBoundingClientRect();i=(t.top+t.bottom)/2}else i=o.clientY;let s=t.lineBlockAtHeight(i-t.documentTop);e.domEventHandlers[n](t,s,o)&&o.preventDefault()}));this.markers=Yu(e.markers(t)),e.initialSpacer&&(this.spacer=new Bu(t,0,0,[e.initialSpacer(t)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(t){let e=this.markers;if(this.markers=Yu(this.config.markers(t.view)),this.spacer&&this.config.updateSpacer){let e=this.config.updateSpacer(this.spacer.markers[0],t);e!=this.spacer.markers[0]&&this.spacer.update(t.view,0,0,[e])}let n=t.view.viewport;return!Ui.eq(this.markers,e,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(t)}destroy(){for(let t of this.elements)t.destroy()}}class Bu{constructor(t,e,n,o){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(t,e,n,o)}update(t,e,n,o){this.height!=e&&(this.height=e,this.dom.style.height=e+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),function(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}(this.markers,o)||this.setMarkers(t,o)}setMarkers(t,e){let n="cm-gutterElement",o=this.dom.firstChild;for(let i=0,r=0;;){let s=r,a=i<e.length?e[i++]:null,l=!1;if(a){let t=a.elementClass;t&&(n+=" "+t);for(let t=r;t<this.markers.length;t++)if(this.markers[t].compare(a)){s=t,l=!0;break}}else s=this.markers.length;for(;r<s;){let t=this.markers[r++];if(t.toDOM){t.destroy(o);let e=o.nextSibling;o.remove(),o=e}}if(!a)break;a.toDOM&&(l?o=o.nextSibling:this.dom.insertBefore(a.toDOM(t),o)),l&&r++}this.dom.className=n,this.markers=e}destroy(){this.setMarkers(null,[])}}const Fu=Jo.define(),Gu=Jo.define({combine:t=>Xi(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(t,e){let n=Object.assign({},t);for(let t in e){let o=n[t],i=e[t];n[t]=o?(t,e,n)=>o(t,e,n)||i(t,e,n):i}return n}})});class Hu extends Mu{constructor(t){super(),this.number=t}eq(t){return this.number==t.number}toDOM(){return document.createTextNode(this.number)}}function Ku(t,e){return t.state.facet(Gu).formatNumber(e,t.state)}const Ju=Iu.compute([Gu],(t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:t=>t.state.facet(Fu),lineMarker:(t,e,n)=>n.some((t=>t.toDOM))?null:new Hu(Ku(t,t.state.doc.lineAt(e.from).number)),widgetMarker:()=>null,lineMarkerChange:t=>t.startState.facet(Gu)!=t.state.facet(Gu),initialSpacer:t=>new Hu(Ku(t,eh(t.state.doc.lines))),updateSpacer(t,e){let n=Ku(e.view,eh(e.view.state.doc.lines));return n==t.number?t:new Hu(n)},domEventHandlers:t.facet(Gu).domEventHandlers})));function th(t={}){return[Gu.of(t),Xu(),Ju]}function eh(t){let e=9;for(;e<t;)e=10*e+9;return e}const nh=new class extends Mu{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},oh=Vu.compute(["selection"],(t=>{let e=[],n=-1;for(let o of t.selection.ranges){let i=t.doc.lineAt(o.head).from;i>n&&(n=i,e.push(nh.range(i)))}return Ui.of(e)}));var ih=function(){return ih=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ih.apply(this,arguments)};function rh(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}var sh=function(t){return/^-?\d+$/.test(t)},ah=function(t,e,n){void 0===n&&(n={from:void 0,to:void 0});var o=t.map((function(t){if(t.from=sh(t.from)?t.from:void 0,t.to=sh(t.to)?t.to:void 0,sh(t.from)&&sh(t.to)){var e=ih({},t);t.from=Math.min(e.from,e.to),t.to=Math.max(e.from,e.to)}return t})),i={from:sh(null==e?void 0:e.from)?null==e?void 0:e.from:void 0,to:sh(null==e?void 0:e.to)?null==e?void 0:e.to:void 0};if(sh(i.from)&&sh(i.to)){var r=ih({},i);i.from=Math.min(r.from,r.to),i.to=Math.max(r.from,r.to)}var s={from:sh(null==n?void 0:n.from)?null==n?void 0:n.from:void 0,to:sh(null==n?void 0:n.to)?null==n?void 0:n.to:void 0};if(sh(s.from)&&sh(s.to)){var a=ih({},s);s.from=Math.min(a.from,a.to),s.to=Math.max(a.from,a.to)}var l=rh(rh([],o.map((function(t){return t.from})),!0),[null==i?void 0:i.from,null==s?void 0:s.from],!1).filter((function(t){return void 0!==t})),c=rh(rh([],o.map((function(t){return t.to})),!0),[null==i?void 0:i.to,null==s?void 0:s.to],!1).filter((function(t){return void 0!==t})),u=rh(rh([],l,!0),c,!0),h=0,p=0;u.length>0&&(h=Math.max.apply(Math,u),p=Math.min.apply(Math,u));var d=Math.abs(h),f=Math.abs(p),g=Math.max(d,f)+1,m=-g;return o=o.map((function(t){return t.from=sh(t.from)?t.from:m,t.to=sh(t.to)?t.to:g,t})),i={from:sh(i.from)?i.from:m,to:sh(i.to)?i.to:g},s={from:sh(s.from)?s.from:m,to:sh(s.to)?s.to:g},o=o.slice().sort((function(t,e){var n=t.to-t.from,o=e.to-e.from;if(t.from>e.from)return 1;if(t.from===e.from){if(t.from+n>e.from+o)return-1;if(t.from+n===e.from+o)return 0;if(t.from+n<e.from+o)return 1}return-1})),lh(o,i,[],s).map((function(t){return{from:t.from===m?void 0:t.from,to:t.to===g?void 0:t.to}}))},lh=function(t,e,n,o){var i=n;if(null===e||0===t.length)return null===e||n.some((function(t){return t.from===(null==e?void 0:e.from)&&t.to===(null==e?void 0:e.to)}))||i.push(e),(i=i.filter((function(t){return t.from<=o.to&&t.to>=o.from}))).map((function(t){return function(t,e){return{from:t.from<e.from?e.from:t.from,to:t.to>e.to?e.to:t.to}}(t,o)}));var r=e.to-e.from;if(e.from>=t[0].from&&e.from<=t[0].to)e.from+r<=t[0].to?e=null:e.from=t[0].to+1;else if(e.from<t[0].from&&e.from+r>=t[0].from){var s=e.to,a={from:e.from,to:t[0].from-1};n.push(a),s>t[0].to?e.from=t[0].to+1:e=null}return t.shift(),lh(t,e,n,o)},ch=function(t){return fc.domEventHandlers({paste:function(e,n){var o=(e.clipboardData||window.clipboardData).getData("Text"),i=n.state.selection.ranges.map((function(t){return{from:t.from,to:t.to}}));if(i.length>0){var r=t(n.state),s=ah(r,i[0],{from:0,to:n.state.doc.line(n.state.doc.lines).to});s.length>0&&n.dispatch({changes:{from:s[0].from,to:s[0].to,insert:o},annotations:Qi.userEvent.of("input.paste.smart")})}return!0}})};const uh=1024;let hh=0;class ph{constructor(t,e){this.from=t,this.to=e}}class dh{constructor(t={}){this.id=hh++,this.perNode=!!t.perNode,this.deserialize=t.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(t){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof t&&(t=mh.match(t)),e=>{let n=t(e);return void 0===n?null:[this,n]}}}dh.closedBy=new dh({deserialize:t=>t.split(" ")}),dh.openedBy=new dh({deserialize:t=>t.split(" ")}),dh.group=new dh({deserialize:t=>t.split(" ")}),dh.contextHash=new dh({perNode:!0}),dh.lookAhead=new dh({perNode:!0}),dh.mounted=new dh({perNode:!0});class fh{constructor(t,e,n){this.tree=t,this.overlay=e,this.parser=n}static get(t){return t&&t.props&&t.props[dh.mounted.id]}}const gh=Object.create(null);class mh{constructor(t,e,n,o=0){this.name=t,this.props=e,this.id=n,this.flags=o}static define(t){let e=t.props&&t.props.length?Object.create(null):gh,n=(t.top?1:0)|(t.skipped?2:0)|(t.error?4:0)|(null==t.name?8:0),o=new mh(t.name||"",e,t.id,n);if(t.props)for(let n of t.props)if(Array.isArray(n)||(n=n(o)),n){if(n[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");e[n[0].id]=n[1]}return o}prop(t){return this.props[t.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(t){if('string'==typeof t){if(this.name==t)return!0;let e=this.prop(dh.group);return!!e&&e.indexOf(t)>-1}return this.id==t}static match(t){let e=Object.create(null);for(let n in t)for(let o of n.split(" "))e[o]=t[n];return t=>{for(let n=t.prop(dh.group),o=-1;o<(n?n.length:0);o++){let i=e[o<0?t.name:n[o]];if(i)return i}}}}mh.none=new mh("",Object.create(null),0,8);class vh{constructor(t){this.types=t;for(let e=0;e<t.length;e++)if(t[e].id!=e)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...t){let e=[];for(let n of this.types){let o=null;for(let e of t){let t=e(n);t&&(o||(o=Object.assign({},n.props)),o[t[0].id]=t[1])}e.push(o?new mh(n.name,o,n.id,n.flags):n)}return new vh(e)}}const yh=new WeakMap,_h=new WeakMap;var Oh;!function(t){t[t["ExcludeBuffers"]=1]="ExcludeBuffers",t[t["IncludeAnonymous"]=2]="IncludeAnonymous",t[t["IgnoreMounts"]=4]="IgnoreMounts",t[t["IgnoreOverlays"]=8]="IgnoreOverlays"}(Oh||(Oh={}));class bh{constructor(t,e,n,o,i){if(this.type=t,this.children=e,this.positions=n,this.length=o,this.props=null,i&&i.length){this.props=Object.create(null);for(let[t,e]of i)this.props["number"==typeof t?t:t.id]=e}}toString(){let t=fh.get(this);if(t&&!t.overlay)return t.tree.toString();let e="";for(let t of this.children){let n=t.toString();n&&(e&&(e+=","),e+=n)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(t=0){return new Rh(this.topNode,t)}cursorAt(t,e=0,n=0){let o=yh.get(this)||this.topNode,i=new Rh(o);return i.moveTo(t,e),yh.set(this,i._tree),i}get topNode(){return new Ch(this,0,0,null)}resolve(t,e=0){let n=kh(yh.get(this)||this.topNode,t,e,!1);return yh.set(this,n),n}resolveInner(t,e=0){let n=kh(_h.get(this)||this.topNode,t,e,!0);return _h.set(this,n),n}resolveStack(t,e=0){return function(t,e,n){let o=t.resolveInner(e,n),i=null;for(let t=o instanceof Ch?o:o.context.parent;t;t=t.parent)if(t.index<0){let r=t.parent;(i||(i=[o])).push(r.resolve(e,n)),t=r}else{let r=fh.get(t.tree);if(r&&r.overlay&&r.overlay[0].from<=e&&r.overlay[r.overlay.length-1].to>=e){let s=new Ch(r.tree,r.overlay[0].from+t.from,-1,t);(i||(i=[o])).push(kh(s,e,n,!1))}}return i?$h(i):o}(this,t,e)}iterate(t){let{enter:e,leave:n,from:o=0,to:i=this.length}=t,r=t.mode||0,s=(r&Oh.IncludeAnonymous)>0;for(let t=this.cursor(r|Oh.IncludeAnonymous);;){let r=!1;if(t.from<=i&&t.to>=o&&(!s&&t.type.isAnonymous||!1!==e(t))){if(t.firstChild())continue;r=!0}for(;r&&n&&(s||!t.type.isAnonymous)&&n(t),!t.nextSibling();){if(!t.parent())return;r=!0}}}prop(t){return t.perNode?this.props?this.props[t.id]:void 0:this.type.prop(t)}get propValues(){let t=[];if(this.props)for(let e in this.props)t.push([+e,this.props[e]]);return t}balance(t={}){return this.children.length<=8?this:Dh(mh.none,this.children,this.positions,0,this.children.length,0,this.length,((t,e,n)=>new bh(this.type,t,e,n,this.propValues)),t.makeTree||((t,e,n)=>new bh(mh.none,t,e,n)))}static build(t){return function(t){var e;let{buffer:n,nodeSet:o,maxBufferLength:i=uh,reused:r=[],minRepeatType:s=o.types.length}=t,a=Array.isArray(n)?new wh(n,n.length):n,l=o.types,c=0,u=0;function h(t,e,n,y,_,O){let{id:b,start:w,end:x,size:S}=a,k=u;for(;S<0;){if(a.next(),-1==S){let e=r[b];return n.push(e),void y.push(w-t)}if(-3==S)return void(c=b);if(-4==S)return void(u=b);throw new RangeError(`Unrecognized record size: ${S}`)}let P,C,T=l[b],E=w-t;if(x-w<=i&&(C=m(a.pos-e,_))){let e=new Uint16Array(C.size-C.skip),n=a.pos-C.size,i=e.length;for(;a.pos>n;)i=v(C.start,e,i);P=new xh(e,x-C.start,o),E=C.start-t}else{let t=a.pos-S;a.next();let e=[],n=[],o=b>=s?b:-1,r=0,l=x;for(;a.pos>t;)o>=0&&a.id==o&&a.size>=0?(a.end<=l-i&&(f(e,n,w,r,a.end,l,o,k),r=e.length,l=a.end),a.next()):O>2500?p(w,t,e,n):h(w,t,e,n,o,O+1);if(o>=0&&r>0&&r<e.length&&f(e,n,w,r,w,l,o,k),e.reverse(),n.reverse(),o>-1&&r>0){let t=d(T);P=Dh(T,e,n,0,e.length,0,x-w,t,t)}else P=g(T,e,n,x-w,k-x)}n.push(P),y.push(E)}function p(t,e,n,r){let s=[],l=0,c=-1;for(;a.pos>e;){let{id:t,start:e,end:n,size:o}=a;if(o>4)a.next();else{if(c>-1&&e<c)break;c<0&&(c=n-i),s.push(t,e,n),l++,a.next()}}if(l){let e=new Uint16Array(4*l),i=s[s.length-2];for(let t=s.length-3,n=0;t>=0;t-=3)e[n++]=s[t],e[n++]=s[t+1]-i,e[n++]=s[t+2]-i,e[n++]=n;n.push(new xh(e,s[2]-i,o)),r.push(i-t)}}function d(t){return(e,n,o)=>{let i,r,s=0,a=e.length-1;if(a>=0&&(i=e[a])instanceof bh){if(!a&&i.type==t&&i.length==o)return i;(r=i.prop(dh.lookAhead))&&(s=n[a]+i.length+r)}return g(t,e,n,o,s)}}function f(t,e,n,i,r,s,a,l){let c=[],u=[];for(;t.length>i;)c.push(t.pop()),u.push(e.pop()+n-r);t.push(g(o.types[a],c,u,s-r,l-s)),e.push(r-n)}function g(t,e,n,o,i=0,r){if(c){let t=[dh.contextHash,c];r=r?[t].concat(r):[t]}if(i>25){let t=[dh.lookAhead,i];r=r?[t].concat(r):[t]}return new bh(t,e,n,o,r)}function m(t,e){let n=a.fork(),o=0,r=0,l=0,c=n.end-i,u={size:0,start:0,skip:0};t:for(let i=n.pos-t;n.pos>i;){let t=n.size;if(n.id==e&&t>=0){u.size=o,u.start=r,u.skip=l,l+=4,o+=4,n.next();continue}let a=n.pos-t;if(t<0||a<i||n.start<c)break;let h=n.id>=s?4:0,p=n.start;for(n.next();n.pos>a;){if(n.size<0){if(-3!=n.size)break t;h+=4}else n.id>=s&&(h+=4);n.next()}r=p,o+=t,l+=h}return(e<0||o==t)&&(u.size=o,u.start=r,u.skip=l),u.size>4?u:void 0}function v(t,e,n){let{id:o,start:i,end:r,size:l}=a;if(a.next(),l>=0&&o<s){let s=n;if(l>4){let o=a.pos-(l-4);for(;a.pos>o;)n=v(t,e,n)}e[--n]=s,e[--n]=r-t,e[--n]=i-t,e[--n]=o}else-3==l?c=o:-4==l&&(u=o);return n}let y=[],_=[];for(;a.pos>0;)h(t.start||0,t.bufferStart||0,y,_,-1,0);let O=null!==(e=t.length)&&void 0!==e?e:y.length?_[0]+y[0].length:0;return new bh(l[t.topID],y.reverse(),_.reverse(),O)}(t)}}bh.empty=new bh(mh.none,[],[],0);class wh{constructor(t,e){this.buffer=t,this.index=e}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new wh(this.buffer,this.index)}}class xh{constructor(t,e,n){this.buffer=t,this.length=e,this.set=n}get type(){return mh.none}toString(){let t=[];for(let e=0;e<this.buffer.length;)t.push(this.childString(e)),e=this.buffer[e+3];return t.join(",")}childString(t){let e=this.buffer[t],n=this.buffer[t+3],o=this.set.types[e],i=o.name;if(/\W/.test(i)&&!o.isError&&(i=JSON.stringify(i)),n==(t+=4))return i;let r=[];for(;t<n;)r.push(this.childString(t)),t=this.buffer[t+3];return i+"("+r.join(",")+")"}findChild(t,e,n,o,i){let{buffer:r}=this,s=-1;for(let a=t;a!=e&&!(Sh(i,o,r[a+1],r[a+2])&&(s=a,n>0));a=r[a+3]);return s}slice(t,e,n){let o=this.buffer,i=new Uint16Array(e-t),r=0;for(let s=t,a=0;s<e;){i[a++]=o[s++],i[a++]=o[s++]-n;let e=i[a++]=o[s++]-n;i[a++]=o[s++]-t,r=Math.max(r,e)}return new xh(i,r,this.set)}}function Sh(t,e,n,o){switch(t){case-2:return n<e;case-1:return o>=e&&n<e;case 0:return n<e&&o>e;case 1:return n<=e&&o>e;case 2:return o>e;case 4:return!0}}function kh(t,e,n,o){for(var i;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let e=!o&&t instanceof Ch&&t.index<0?null:t.parent;if(!e)return t;t=e}let r=o?0:Oh.IgnoreOverlays;if(o)for(let o=t,s=o.parent;s;o=s,s=o.parent)o instanceof Ch&&o.index<0&&(null===(i=s.enter(e,n,r))||void 0===i?void 0:i.from)!=o.from&&(t=s);for(;;){let o=t.enter(e,n,r);if(!o)return t;t=o}}class Ph{cursor(t=0){return new Rh(this,t)}getChild(t,e=null,n=null){let o=Th(this,t,e,n);return o.length?o[0]:null}getChildren(t,e=null,n=null){return Th(this,t,e,n)}resolve(t,e=0){return kh(this,t,e,!1)}resolveInner(t,e=0){return kh(this,t,e,!0)}matchContext(t){return Eh(this,t)}enterUnfinishedNodesBefore(t){let e=this.childBefore(t),n=this;for(;e;){let t=e.lastChild;if(!t||t.to!=e.to)break;t.type.isError&&t.from==t.to?(n=e,e=t.prevSibling):e=t}return n}get node(){return this}get next(){return this.parent}}class Ch extends Ph{constructor(t,e,n,o){super(),this._tree=t,this.from=e,this.index=n,this._parent=o}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(t,e,n,o,i=0){for(let r=this;;){for(let{children:s,positions:a}=r._tree,l=e>0?s.length:-1;t!=l;t+=e){let l=s[t],c=a[t]+r.from;if(Sh(o,n,c,c+l.length))if(l instanceof xh){if(i&Oh.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,e,n-c,o);if(s>-1)return new Ah(new Qh(r,l,t,c),null,s)}else if(i&Oh.IncludeAnonymous||!l.type.isAnonymous||Zh(l)){let s;if(!(i&Oh.IgnoreMounts)&&(s=fh.get(l))&&!s.overlay)return new Ch(s.tree,c,t,r);let a=new Ch(l,c,t,r);return i&Oh.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(e<0?l.children.length-1:0,e,n,o)}}if(i&Oh.IncludeAnonymous||!r.type.isAnonymous)return null;if(t=r.index>=0?r.index+e:e<0?-1:r._parent._tree.children.length,r=r._parent,!r)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(t){return this.nextChild(0,1,t,2)}childBefore(t){return this.nextChild(this._tree.children.length-1,-1,t,-2)}enter(t,e,n=0){let o;if(!(n&Oh.IgnoreOverlays)&&(o=fh.get(this._tree))&&o.overlay){let n=t-this.from;for(let{from:t,to:i}of o.overlay)if((e>0?t<=n:t<n)&&(e<0?i>=n:i>n))return new Ch(o.tree,o.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,t,e,n)}nextSignificantParent(){let t=this;for(;t.type.isAnonymous&&t._parent;)t=t._parent;return t}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Th(t,e,n,o){let i=t.cursor(),r=[];if(!i.firstChild())return r;if(null!=n)for(;!i.type.is(n);)if(!i.nextSibling())return r;for(;;){if(null!=o&&i.type.is(o))return r;if(i.type.is(e)&&r.push(i.node),!i.nextSibling())return null==o?r:[]}}function Eh(t,e,n=e.length-1){for(let o=t.parent;n>=0;o=o.parent){if(!o)return!1;if(!o.type.isAnonymous){if(e[n]&&e[n]!=o.name)return!1;n--}}return!0}class Qh{constructor(t,e,n,o){this.parent=t,this.buffer=e,this.index=n,this.start=o}}class Ah extends Ph{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(t,e,n){super(),this.context=t,this._parent=e,this.index=n,this.type=t.buffer.set.types[t.buffer.buffer[n]]}child(t,e,n){let{buffer:o}=this.context,i=o.findChild(this.index+4,o.buffer[this.index+3],t,e-this.context.start,n);return i<0?null:new Ah(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(t){return this.child(1,t,2)}childBefore(t){return this.child(-1,t,-2)}enter(t,e,n=0){if(n&Oh.ExcludeBuffers)return null;let{buffer:o}=this.context,i=o.findChild(this.index+4,o.buffer[this.index+3],e>0?1:-1,t-this.context.start,e);return i<0?null:new Ah(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(t){return this._parent?null:this.context.parent.nextChild(this.context.index+t,t,0,4)}get nextSibling(){let{buffer:t}=this.context,e=t.buffer[this.index+3];return e<(this._parent?t.buffer[this._parent.index+3]:t.buffer.length)?new Ah(this.context,this._parent,e):this.externalSibling(1)}get prevSibling(){let{buffer:t}=this.context,e=this._parent?this._parent.index+4:0;return this.index==e?this.externalSibling(-1):new Ah(this.context,this._parent,t.findChild(e,this.index,-1,0,4))}get tree(){return null}toTree(){let t=[],e=[],{buffer:n}=this.context,o=this.index+4,i=n.buffer[this.index+3];if(i>o){let r=n.buffer[this.index+1];t.push(n.slice(o,i,r)),e.push(0)}return new bh(this.type,t,e,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function $h(t){if(!t.length)return null;let e=0,n=t[0];for(let o=1;o<t.length;o++){let i=t[o];(i.from>n.from||i.to<n.to)&&(n=i,e=o)}let o=n instanceof Ch&&n.index<0?null:n.parent,i=t.slice();return o?i[e]=o:i.splice(e,1),new jh(i,n)}class jh{constructor(t,e){this.heads=t,this.node=e}get next(){return $h(this.heads)}}class Rh{get name(){return this.type.name}constructor(t,e=0){if(this.mode=e,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,t instanceof Ch)this.yieldNode(t);else{this._tree=t.context.parent,this.buffer=t.context;for(let e=t._parent;e;e=e._parent)this.stack.unshift(e.index);this.bufferNode=t,this.yieldBuf(t.index)}}yieldNode(t){return!!t&&(this._tree=t,this.type=t.type,this.from=t.from,this.to=t.to,!0)}yieldBuf(t,e){this.index=t;let{start:n,buffer:o}=this.buffer;return this.type=e||o.set.types[o.buffer[t]],this.from=n+o.buffer[t+1],this.to=n+o.buffer[t+2],!0}yield(t){return!!t&&(t instanceof Ch?(this.buffer=null,this.yieldNode(t)):(this.buffer=t.context,this.yieldBuf(t.index,t.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(t,e,n){if(!this.buffer)return this.yield(this._tree.nextChild(t<0?this._tree._tree.children.length-1:0,t,e,n,this.mode));let{buffer:o}=this.buffer,i=o.findChild(this.index+4,o.buffer[this.index+3],t,e-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(t){return this.enterChild(1,t,2)}childBefore(t){return this.enterChild(-1,t,-2)}enter(t,e,n=this.mode){return this.buffer?!(n&Oh.ExcludeBuffers)&&this.enterChild(1,t,e):this.yield(this._tree.enter(t,e,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Oh.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let t=this.mode&Oh.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(t)}sibling(t){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+t,t,0,4,this.mode));let{buffer:e}=this.buffer,n=this.stack.length-1;if(t<0){let t=n<0?0:this.stack[n]+4;if(this.index!=t)return this.yieldBuf(e.findChild(t,this.index,-1,0,4))}else{let t=e.buffer[this.index+3];if(t<(n<0?e.buffer.length:e.buffer[this.stack[n]+3]))return this.yieldBuf(t)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+t,t,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(t){let e,n,{buffer:o}=this;if(o){if(t>0){if(this.index<o.buffer.buffer.length)return!1}else for(let t=0;t<this.index;t++)if(o.buffer.buffer[t+3]<this.index)return!1;({index:e,parent:n}=o)}else({index:e,_parent:n}=this._tree);for(;n;({index:e,_parent:n}=n))if(e>-1)for(let o=e+t,i=t<0?-1:n._tree.children.length;o!=i;o+=t){let t=n._tree.children[o];if(this.mode&Oh.IncludeAnonymous||t instanceof xh||!t.type.isAnonymous||Zh(t))return!1}return!0}move(t,e){if(e&&this.enterChild(t,0,4))return!0;for(;;){if(this.sibling(t))return!0;if(this.atLastNode(t)||!this.parent())return!1}}next(t=!0){return this.move(1,t)}prev(t=!0){return this.move(-1,t)}moveTo(t,e=0){for(;(this.from==this.to||(e<1?this.from>=t:this.from>t)||(e>-1?this.to<=t:this.to<t))&&this.parent(););for(;this.enterChild(1,t,e););return this}get node(){if(!this.buffer)return this._tree;let t=this.bufferNode,e=null,n=0;if(t&&t.context==this.buffer)t:for(let o=this.index,i=this.stack.length;i>=0;){for(let r=t;r;r=r._parent)if(r.index==o){if(o==this.index)return r;e=r,n=i+1;break t}o=this.stack[--i]}for(let t=n;t<this.stack.length;t++)e=new Ah(this.buffer,e,this.stack[t]);return this.bufferNode=new Ah(this.buffer,e,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(t,e){for(let n=0;;){let o=!1;if(this.type.isAnonymous||!1!==t(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(o=!0)}for(;o&&e&&e(this),o=this.type.isAnonymous,!this.nextSibling();){if(!n)return;this.parent(),n--,o=!0}}}matchContext(t){if(!this.buffer)return Eh(this.node,t);let{buffer:e}=this.buffer,{types:n}=e.set;for(let o=t.length-1,i=this.stack.length-1;o>=0;i--){if(i<0)return Eh(this.node,t,o);let r=n[e.buffer[this.stack[i]]];if(!r.isAnonymous){if(t[o]&&t[o]!=r.name)return!1;o--}}return!0}}function Zh(t){return t.children.some((t=>t instanceof xh||!t.type.isAnonymous||Zh(t)))}const Mh=new WeakMap;function Vh(t,e){if(!t.isAnonymous||e instanceof xh||e.type!=t)return 1;let n=Mh.get(e);if(null==n){n=1;for(let o of e.children){if(o.type!=t||!(o instanceof bh)){n=1;break}n+=Vh(t,o)}Mh.set(e,n)}return n}function Dh(t,e,n,o,i,r,s,a,l){let c=0;for(let n=o;n<i;n++)c+=Vh(t,e[n]);let u=Math.ceil(1.5*c/8),h=[],p=[];return function e(n,o,i,s,a){for(let c=i;c<s;){let i=c,d=o[c],f=Vh(t,n[c]);for(c++;c<s;c++){let e=Vh(t,n[c]);if(f+e>=u)break;f+=e}if(c==i+1){if(f>u){let t=n[i];e(t.children,t.positions,0,t.children.length,o[i]+a);continue}h.push(n[i])}else{let e=o[c-1]+n[c-1].length-d;h.push(Dh(t,n,o,i,c,d,e,null,l))}p.push(d+a-r)}}(e,n,o,i,0),(a||l)(h,p,s)}class Ih{constructor(){this.map=new WeakMap}setBuffer(t,e,n){let o=this.map.get(t);o||this.map.set(t,o=new Map),o.set(e,n)}getBuffer(t,e){let n=this.map.get(t);return n&&n.get(e)}set(t,e){t instanceof Ah?this.setBuffer(t.context.buffer,t.index,e):t instanceof Ch&&this.map.set(t.tree,e)}get(t){return t instanceof Ah?this.getBuffer(t.context.buffer,t.index):t instanceof Ch?this.map.get(t.tree):void 0}cursorSet(t,e){t.buffer?this.setBuffer(t.buffer.buffer,t.index,e):this.map.set(t.tree,e)}cursorGet(t){return t.buffer?this.getBuffer(t.buffer.buffer,t.index):this.map.get(t.tree)}}class Nh{constructor(t,e,n,o,i=!1,r=!1){this.from=t,this.to=e,this.tree=n,this.offset=o,this.open=(i?1:0)|(r?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(t,e=[],n=!1){let o=[new Nh(0,t.length,t,0,!1,n)];for(let n of e)n.to>t.length&&o.push(n);return o}static applyChanges(t,e,n=128){if(!e.length)return t;let o=[],i=1,r=t.length?t[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<e.length?e[s]:null,u=c?c.fromA:1e9;if(u-a>=n)for(;r&&r.from<u;){let e=r;if(a>=e.from||u<=e.to||l){let t=Math.max(e.from,a)-l,n=Math.min(e.to,u)-l;e=t>=n?null:new Nh(t,n,e.tree,e.offset+l,s>0,!!c)}if(e&&o.push(e),r.to>u)break;r=i<t.length?t[i++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return o}}class Wh{startParse(t,e,n){return"string"==typeof t&&(t=new Xh(t)),n=n?n.length?n.map((t=>new ph(t.from,t.to))):[new ph(0,0)]:[new ph(0,t.length)],this.createParse(t,e||[],n)}parse(t,e,n){let o=this.startParse(t,e,n);for(;;){let t=o.advance();if(t)return t}}}class Xh{constructor(t){this.string=t}get length(){return this.string.length}chunk(t){return this.string.slice(t)}get lineChunks(){return!1}read(t,e){return this.string.slice(t,e)}}class Lh{constructor(t,e,n,o,i){this.parser=t,this.parse=e,this.overlay=n,this.target=o,this.from=i}}function Yh(t){if(!t.length||t.some((t=>t.from>=t.to)))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(t))}class zh{constructor(t,e,n,o,i,r,s){this.parser=t,this.predicate=e,this.mounts=n,this.index=o,this.start=i,this.target=r,this.prev=s,this.depth=0,this.ranges=[]}}const qh=new dh({perNode:!0});class Uh{constructor(t,e,n,o,i){this.nest=e,this.input=n,this.fragments=o,this.ranges=i,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=t}advance(){if(this.baseParse){let t=this.baseParse.advance();if(!t)return null;if(this.baseParse=null,this.baseTree=t,this.startInner(),null!=this.stoppedAt)for(let t of this.inner)t.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let t=this.baseTree;return null!=this.stoppedAt&&(t=new bh(t.type,t.children,t.positions,t.length,t.propValues.concat([[qh,this.stoppedAt]]))),t}let t=this.inner[this.innerDone],e=t.parse.advance();if(e){this.innerDone++;let n=Object.assign(Object.create(null),t.target.props);n[dh.mounted.id]=new fh(e,t.overlay,t.parser),t.target.props=n}return null}get parsedPos(){if(this.baseParse)return 0;let t=this.input.length;for(let e=this.innerDone;e<this.inner.length;e++)this.inner[e].from<t&&(t=Math.min(t,this.inner[e].parse.parsedPos));return t}stopAt(t){if(this.stoppedAt=t,this.baseParse)this.baseParse.stopAt(t);else for(let e=this.innerDone;e<this.inner.length;e++)this.inner[e].parse.stopAt(t)}startInner(){let t=new Kh(this.fragments),e=null,n=null,o=new Rh(new Ch(this.baseTree,this.ranges[0].from,0,null),Oh.IncludeAnonymous|Oh.IgnoreMounts);t:for(let i,r;;){let s,a=!0;if(null!=this.stoppedAt&&o.from>=this.stoppedAt)a=!1;else if(t.hasNode(o)){if(e){let t=e.mounts.find((t=>t.frag.from<=o.from&&t.frag.to>=o.to&&t.mount.overlay));if(t)for(let n of t.mount.overlay){let i=n.from+t.pos,r=n.to+t.pos;i>=o.from&&r<=o.to&&!e.ranges.some((t=>t.from<r&&t.to>i))&&e.ranges.push({from:i,to:r})}}a=!1}else if(n&&(r=Bh(n.ranges,o.from,o.to)))a=2!=r;else if(!o.type.isAnonymous&&(i=this.nest(o,this.input))&&(o.from<o.to||!i.overlay)){o.tree||Gh(o);let r=t.findMounts(o.from,i.parser);if("function"==typeof i.overlay)e=new zh(i.parser,i.overlay,r,this.inner.length,o.from,o.tree,e);else{let t=Jh(this.ranges,i.overlay||(o.from<o.to?[new ph(o.from,o.to)]:[]));t.length&&Yh(t),!t.length&&i.overlay||this.inner.push(new Lh(i.parser,t.length?i.parser.startParse(this.input,ep(r,t),t):i.parser.startParse(""),i.overlay?i.overlay.map((t=>new ph(t.from-o.from,t.to-o.from))):null,o.tree,t.length?t[0].from:o.from)),i.overlay?t.length&&(n={ranges:t,depth:0,prev:n}):a=!1}}else e&&(s=e.predicate(o))&&(!0===s&&(s=new ph(o.from,o.to)),s.from<s.to&&e.ranges.push(s));if(a&&o.firstChild())e&&e.depth++,n&&n.depth++;else for(;!o.nextSibling();){if(!o.parent())break t;if(e&&! --e.depth){let t=Jh(this.ranges,e.ranges);t.length&&(Yh(t),this.inner.splice(e.index,0,new Lh(e.parser,e.parser.startParse(this.input,ep(e.mounts,t),t),e.ranges.map((t=>new ph(t.from-e.start,t.to-e.start))),e.target,t[0].from))),e=e.prev}n&&! --n.depth&&(n=n.prev)}}}}function Bh(t,e,n){for(let o of t){if(o.from>=n)break;if(o.to>e)return o.from<=e&&o.to>=n?2:1}return 0}function Fh(t,e,n,o,i,r){if(e<n){let s=t.buffer[e+1];o.push(t.slice(e,n,s)),i.push(s-r)}}function Gh(t){let{node:e}=t,n=[],o=e.context.buffer;do{n.push(t.index),t.parent()}while(!t.tree);let i=t.tree,r=i.children.indexOf(o),s=i.children[r],a=s.buffer,l=[r];i.children[r]=function t(o,i,r,c,u,h){let p=n[h],d=[],f=[];Fh(s,o,p,d,f,c);let g=a[p+1],m=a[p+2];l.push(d.length);let v=h?t(p+4,a[p+3],s.set.types[a[p]],g,m-g,h-1):e.toTree();return d.push(v),f.push(g-c),Fh(s,a[p+3],i,d,f,c),new bh(r,d,f,u)}(0,a.length,mh.none,0,s.length,n.length-1);for(let e of l){let n=t.tree.children[e],o=t.tree.positions[e];t.yield(new Ch(n,o+t.from,e,t._tree))}}class Hh{constructor(t,e){this.offset=e,this.done=!1,this.cursor=t.cursor(Oh.IncludeAnonymous|Oh.IgnoreMounts)}moveTo(t){let{cursor:e}=this,n=t-this.offset;for(;!this.done&&e.from<n;)e.to>=t&&e.enter(n,1,Oh.IgnoreOverlays|Oh.ExcludeBuffers)||e.next(!1)||(this.done=!0)}hasNode(t){if(this.moveTo(t.from),!this.done&&this.cursor.from+this.offset==t.from&&this.cursor.tree)for(let e=this.cursor.tree;;){if(e==t.tree)return!0;if(!(e.children.length&&0==e.positions[0]&&e.children[0]instanceof bh))break;e=e.children[0]}return!1}}class Kh{constructor(t){var e;if(this.fragments=t,this.curTo=0,this.fragI=0,t.length){let n=this.curFrag=t[0];this.curTo=null!==(e=n.tree.prop(qh))&&void 0!==e?e:n.to,this.inner=new Hh(n.tree,-n.offset)}else this.curFrag=this.inner=null}hasNode(t){for(;this.curFrag&&t.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=t.from&&this.curTo>=t.to&&this.inner.hasNode(t)}nextFrag(){var t;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let e=this.curFrag=this.fragments[this.fragI];this.curTo=null!==(t=e.tree.prop(qh))&&void 0!==t?t:e.to,this.inner=new Hh(e.tree,-e.offset)}}findMounts(t,e){var n;let o=[];if(this.inner){this.inner.cursor.moveTo(t,1);for(let t=this.inner.cursor.node;t;t=t.parent){let i=null===(n=t.tree)||void 0===n?void 0:n.prop(dh.mounted);if(i&&i.parser==e)for(let e=this.fragI;e<this.fragments.length;e++){let n=this.fragments[e];if(n.from>=t.to)break;n.tree==this.curFrag.tree&&o.push({frag:n,pos:t.from-n.offset,mount:i})}}}return o}}function Jh(t,e){let n=null,o=e;for(let i=1,r=0;i<t.length;i++){let s=t[i-1].to,a=t[i].from;for(;r<o.length;r++){let t=o[r];if(t.from>=a)break;t.to<=s||(n||(o=n=e.slice()),t.from<s?(n[r]=new ph(t.from,s),t.to>a&&n.splice(r+1,0,new ph(a,t.to))):t.to>a?n[r--]=new ph(a,t.to):n.splice(r--,1))}}return o}function tp(t,e,n,o){let i=0,r=0,s=!1,a=!1,l=-1e9,c=[];for(;;){let u=i==t.length?1e9:s?t[i].to:t[i].from,h=r==e.length?1e9:a?e[r].to:e[r].from;if(s!=a){let t=Math.max(l,n),e=Math.min(u,h,o);t<e&&c.push(new ph(t,e))}if(l=Math.min(u,h),1e9==l)break;u==l&&(s?(s=!1,i++):s=!0),h==l&&(a?(a=!1,r++):a=!0)}return c}function ep(t,e){let n=[];for(let{pos:o,mount:i,frag:r}of t){let t=o+(i.overlay?i.overlay[0].from:0),s=t+i.tree.length,a=Math.max(r.from,t),l=Math.min(r.to,s);if(i.overlay){let s=tp(e,i.overlay.map((t=>new ph(t.from+o,t.to+o))),a,l);for(let e=0,o=a;;e++){let a=e==s.length,c=a?l:s[e].from;if(c>o&&n.push(new Nh(o,c,i.tree,-t,r.from>=o||r.openStart,r.to<=c||r.openEnd)),a)break;o=s[e].to}}else n.push(new Nh(a,l,i.tree,-t,r.from>=t||r.openStart,r.to<=s||r.openEnd))}return n}let np=0;class op{constructor(t,e,n){this.set=t,this.base=e,this.modified=n,this.id=np++}static define(t){if(null==t?void 0:t.base)throw new Error("Can not derive from a modified tag");let e=new op([],null,[]);if(e.set.push(e),t)for(let n of t.set)e.set.push(n);return e}static defineModifier(){let t=new rp;return e=>e.modified.indexOf(t)>-1?e:rp.get(e.base||e,e.modified.concat(t).sort(((t,e)=>t.id-e.id)))}}let ip=0;class rp{constructor(){this.instances=[],this.id=ip++}static get(t,e){if(!e.length)return t;let n=e[0].instances.find((n=>n.base==t&&function(t,e){return t.length==e.length&&t.every(((t,n)=>t==e[n]))}(e,n.modified)));if(n)return n;let o=[],i=new op(o,t,e);for(let t of e)t.instances.push(i);let r=function(t){let e=[[]];for(let n=0;n<t.length;n++)for(let o=0,i=e.length;o<i;o++)e.push(e[o].concat(t[n]));return e.sort(((t,e)=>e.length-t.length))}(e);for(let e of t.set)if(!e.modified.length)for(let t of r)o.push(rp.get(e,t));return i}}function sp(t){let e=Object.create(null);for(let n in t){let o=t[n];Array.isArray(o)||(o=[o]);for(let t of n.split(" "))if(t){let n=[],i=2,r=t;for(let e=0;;){if("..."==r&&e>0&&e+3==t.length){i=1;break}let o=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(r);if(!o)throw new RangeError("Invalid path: "+t);if(n.push("*"==o[0]?"":'"'==o[0][0]?JSON.parse(o[0]):o[0]),e+=o[0].length,e==t.length)break;let s=t[e++];if(e==t.length&&"!"==s){i=0;break}if("/"!=s)throw new RangeError("Invalid path: "+t);r=t.slice(e)}let s=n.length-1,a=n[s];if(!a)throw new RangeError("Invalid path: "+t);let l=new lp(o,i,s>0?n.slice(0,s):null);e[a]=l.sort(e[a])}}return ap.add(e)}const ap=new dh;class lp{constructor(t,e,n,o){this.tags=t,this.mode=e,this.context=n,this.next=o}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(t){return!t||t.depth<this.depth?(this.next=t,this):(t.next=this.sort(t.next),t)}get depth(){return this.context?this.context.length:0}}function cp(t,e){let n=Object.create(null);for(let e of t)if(Array.isArray(e.tag))for(let t of e.tag)n[t.id]=e.class;else n[e.tag.id]=e.class;let{scope:o,all:i=null}=e||{};return{style:t=>{let e=i;for(let o of t)for(let t of o.set){let o=n[t.id];if(o){e=e?e+" "+o:o;break}}return e},scope:o}}function up(t,e,n,o=0,i=t.length){let r=new hp(o,Array.isArray(e)?e:[e],n);r.highlightRange(t.cursor(),o,i,"",r.highlighters),r.flush(i)}lp.empty=new lp([],2,null);class hp{constructor(t,e,n){this.at=t,this.highlighters=e,this.span=n,this.class=""}startSpan(t,e){e!=this.class&&(this.flush(t),t>this.at&&(this.at=t),this.class=e)}flush(t){t>this.at&&this.class&&this.span(this.at,t,this.class)}highlightRange(t,e,n,o,i){let{type:r,from:s,to:a}=t;if(s>=n||a<=e)return;r.isTop&&(i=this.highlighters.filter((t=>!t.scope||t.scope(r))));let l=o,c=function(t){let e=t.type.prop(ap);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}(t)||lp.empty,u=function(t,e){let n=null;for(let o of t){let t=o.style(e);t&&(n=n?n+" "+t:t)}return n}(i,c.tags);if(u&&(l&&(l+=" "),l+=u,1==c.mode&&(o+=(o?" ":"")+u)),this.startSpan(Math.max(e,s),l),c.opaque)return;let h=t.tree&&t.tree.prop(dh.mounted);if(h&&h.overlay){let r=t.node.enter(h.overlay[0].from+s,1),c=this.highlighters.filter((t=>!t.scope||t.scope(h.tree.type))),u=t.firstChild();for(let p=0,d=s;;p++){let f=p<h.overlay.length?h.overlay[p]:null,g=f?f.from+s:a,m=Math.max(e,d),v=Math.min(n,g);if(m<v&&u)for(;t.from<v&&(this.highlightRange(t,m,v,o,i),this.startSpan(Math.min(v,t.to),l),!(t.to>=g)&&t.nextSibling()););if(!f||g>n)break;d=f.to+s,d>e&&(this.highlightRange(r.cursor(),Math.max(e,f.from+s),Math.min(n,d),"",c),this.startSpan(Math.min(n,d),l))}u&&t.parent()}else if(t.firstChild()){h&&(o="");do{if(!(t.to<=e)){if(t.from>=n)break;this.highlightRange(t,e,n,o,i),this.startSpan(Math.min(n,t.to),l)}}while(t.nextSibling());t.parent()}}}const pp=op.define,dp=pp(),fp=pp(),gp=pp(fp),mp=pp(fp),vp=pp(),yp=pp(vp),_p=pp(vp),Op=pp(),bp=pp(Op),wp=pp(),xp=pp(),Sp=pp(),kp=pp(Sp),Pp=pp(),Cp={comment:dp,lineComment:pp(dp),blockComment:pp(dp),docComment:pp(dp),name:fp,variableName:pp(fp),typeName:gp,tagName:pp(gp),propertyName:mp,attributeName:pp(mp),className:pp(fp),labelName:pp(fp),namespace:pp(fp),macroName:pp(fp),literal:vp,string:yp,docString:pp(yp),character:pp(yp),attributeValue:pp(yp),number:_p,integer:pp(_p),float:pp(_p),bool:pp(vp),regexp:pp(vp),escape:pp(vp),color:pp(vp),url:pp(vp),keyword:wp,self:pp(wp),null:pp(wp),atom:pp(wp),unit:pp(wp),modifier:pp(wp),operatorKeyword:pp(wp),controlKeyword:pp(wp),definitionKeyword:pp(wp),moduleKeyword:pp(wp),operator:xp,derefOperator:pp(xp),arithmeticOperator:pp(xp),logicOperator:pp(xp),bitwiseOperator:pp(xp),compareOperator:pp(xp),updateOperator:pp(xp),definitionOperator:pp(xp),typeOperator:pp(xp),controlOperator:pp(xp),punctuation:Sp,separator:pp(Sp),bracket:kp,angleBracket:pp(kp),squareBracket:pp(kp),paren:pp(kp),brace:pp(kp),content:Op,heading:bp,heading1:pp(bp),heading2:pp(bp),heading3:pp(bp),heading4:pp(bp),heading5:pp(bp),heading6:pp(bp),contentSeparator:pp(Op),list:pp(Op),quote:pp(Op),emphasis:pp(Op),strong:pp(Op),link:pp(Op),monospace:pp(Op),strikethrough:pp(Op),inserted:pp(),deleted:pp(),changed:pp(),invalid:pp(),meta:Pp,documentMeta:pp(Pp),annotation:pp(Pp),processingInstruction:pp(Pp),definition:op.defineModifier(),constant:op.defineModifier(),function:op.defineModifier(),standard:op.defineModifier(),local:op.defineModifier(),special:op.defineModifier()};cp([{tag:Cp.link,class:"tok-link"},{tag:Cp.heading,class:"tok-heading"},{tag:Cp.emphasis,class:"tok-emphasis"},{tag:Cp.strong,class:"tok-strong"},{tag:Cp.keyword,class:"tok-keyword"},{tag:Cp.atom,class:"tok-atom"},{tag:Cp.bool,class:"tok-bool"},{tag:Cp.url,class:"tok-url"},{tag:Cp.labelName,class:"tok-labelName"},{tag:Cp.inserted,class:"tok-inserted"},{tag:Cp.deleted,class:"tok-deleted"},{tag:Cp.literal,class:"tok-literal"},{tag:Cp.string,class:"tok-string"},{tag:Cp.number,class:"tok-number"},{tag:[Cp.regexp,Cp.escape,Cp.special(Cp.string)],class:"tok-string2"},{tag:Cp.variableName,class:"tok-variableName"},{tag:Cp.local(Cp.variableName),class:"tok-variableName tok-local"},{tag:Cp.definition(Cp.variableName),class:"tok-variableName tok-definition"},{tag:Cp.special(Cp.variableName),class:"tok-variableName2"},{tag:Cp.definition(Cp.propertyName),class:"tok-propertyName tok-definition"},{tag:Cp.typeName,class:"tok-typeName"},{tag:Cp.namespace,class:"tok-namespace"},{tag:Cp.className,class:"tok-className"},{tag:Cp.macroName,class:"tok-macroName"},{tag:Cp.propertyName,class:"tok-propertyName"},{tag:Cp.operator,class:"tok-operator"},{tag:Cp.comment,class:"tok-comment"},{tag:Cp.meta,class:"tok-meta"},{tag:Cp.invalid,class:"tok-invalid"},{tag:Cp.punctuation,class:"tok-punctuation"}]);var Tp;const Ep=new dh;function Qp(t){return Jo.define({combine:t?e=>e.concat(t):void 0})}const Ap=new dh;class $p{constructor(t,e,n=[],o=""){this.data=t,this.name=o,Wi.prototype.hasOwnProperty("tree")||Object.defineProperty(Wi.prototype,"tree",{get(){return Zp(this)}}),this.parser=e,this.extension=[Yp.of(this),Wi.languageData.of(((t,e,n)=>{let o=jp(t,e,n),i=o.type.prop(Ep);if(!i)return[];let r=t.facet(i),s=o.type.prop(Ap);if(s){let i=o.resolve(e-o.from,n);for(let e of s)if(e.test(i,t)){let n=t.facet(e.facet);return"replace"==e.type?n:n.concat(r)}}return r}))].concat(n)}isActiveAt(t,e,n=-1){return jp(t,e,n).type.prop(Ep)==this.data}findRegions(t){let e=t.facet(Yp);if((null==e?void 0:e.data)==this.data)return[{from:0,to:t.doc.length}];if(!e||!e.allowsNesting)return[];let n=[],o=(t,e)=>{if(t.prop(Ep)==this.data)return void n.push({from:e,to:e+t.length});let i=t.prop(dh.mounted);if(i){if(i.tree.prop(Ep)==this.data){if(i.overlay)for(let t of i.overlay)n.push({from:t.from+e,to:t.to+e});else n.push({from:e,to:e+t.length});return}if(i.overlay){let t=n.length;if(o(i.tree,i.overlay[0].from+e),n.length>t)return}}for(let n=0;n<t.children.length;n++){let i=t.children[n];i instanceof bh&&o(i,t.positions[n]+e)}};return o(Zp(t),0),n}get allowsNesting(){return!0}}function jp(t,e,n){let o=t.facet(Yp),i=Zp(t).topNode;if(!o||o.allowsNesting)for(let t=i;t;t=t.enter(e,n,Oh.ExcludeBuffers))t.type.isTop&&(i=t);return i}$p.setState=Ei.define();class Rp extends $p{constructor(t,e,n){super(t,e,[],n),this.parser=e}static define(t){let e=Qp(t.languageData);return new Rp(e,t.parser.configure({props:[Ep.add((t=>t.isTop?e:void 0))]}),t.name)}configure(t,e){return new Rp(this.data,this.parser.configure(t),e||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Zp(t){let e=t.field($p.state,!1);return e?e.tree:bh.empty}class Mp{constructor(t){this.doc=t,this.cursorPos=0,this.string="",this.cursor=t.iter()}get length(){return this.doc.length}syncTo(t){return this.string=this.cursor.next(t-this.cursorPos).value,this.cursorPos=t+this.string.length,this.cursorPos-this.string.length}chunk(t){return this.syncTo(t),this.string}get lineChunks(){return!0}read(t,e){let n=this.cursorPos-this.string.length;return t<n||e>=this.cursorPos?this.doc.sliceString(t,e):this.string.slice(t-n,e-n)}}let Vp=null;class Dp{constructor(t,e,n=[],o,i,r,s,a){this.parser=t,this.state=e,this.fragments=n,this.tree=o,this.treeLen=i,this.viewport=r,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(t,e,n){return new Dp(t,e,[],bh.empty,0,n,[],null)}startParse(){return this.parser.startParse(new Mp(this.state.doc),this.fragments)}work(t,e){return null!=e&&e>=this.state.doc.length&&(e=void 0),this.tree!=bh.empty&&this.isDone(null!=e?e:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof t){let e=Date.now()+t;t=()=>Date.now()>e}for(this.parse||(this.parse=this.startParse()),null!=e&&(null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&e<this.state.doc.length&&this.parse.stopAt(e);;){let o=this.parse.advance();if(o){if(this.fragments=this.withoutTempSkipped(Nh.addTree(o,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=o,this.parse=null,!(this.treeLen<(null!=e?e:this.state.doc.length)))return!0;this.parse=this.startParse()}if(t())return!1}}))}takeTree(){let t,e;this.parse&&(t=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&this.parse.stopAt(t),this.withContext((()=>{for(;!(e=this.parse.advance()););})),this.treeLen=t,this.tree=e,this.fragments=this.withoutTempSkipped(Nh.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(t){let e=Vp;Vp=this;try{return t()}finally{Vp=e}}withoutTempSkipped(t){for(let e;e=this.tempSkipped.pop();)t=Ip(t,e.from,e.to);return t}changes(t,e){let{fragments:n,tree:o,treeLen:i,viewport:r,skipped:s}=this;if(this.takeTree(),!t.empty){let e=[];if(t.iterChangedRanges(((t,n,o,i)=>e.push({fromA:t,toA:n,fromB:o,toB:i}))),n=Nh.applyChanges(n,e),o=bh.empty,i=0,r={from:t.mapPos(r.from,-1),to:t.mapPos(r.to,1)},this.skipped.length){s=[];for(let e of this.skipped){let n=t.mapPos(e.from,1),o=t.mapPos(e.to,-1);n<o&&s.push({from:n,to:o})}}}return new Dp(this.parser,e,n,o,i,r,s,this.scheduleOn)}updateViewport(t){if(this.viewport.from==t.from&&this.viewport.to==t.to)return!1;this.viewport=t;let e=this.skipped.length;for(let e=0;e<this.skipped.length;e++){let{from:n,to:o}=this.skipped[e];n<t.to&&o>t.from&&(this.fragments=Ip(this.fragments,n,o),this.skipped.splice(e--,1))}return!(this.skipped.length>=e)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(t,e){this.skipped.push({from:t,to:e})}static getSkippingParser(t){return new class extends Wh{createParse(e,n,o){let i=o[0].from,r=o[o.length-1].to;return{parsedPos:i,advance(){let e=Vp;if(e){for(let t of o)e.tempSkipped.push(t);t&&(e.scheduleOn=e.scheduleOn?Promise.all([e.scheduleOn,t]):t)}return this.parsedPos=r,new bh(mh.none,[],[],r-i)},stoppedAt:null,stopAt(){}}}}}isDone(t){t=Math.min(t,this.state.doc.length);let e=this.fragments;return this.treeLen>=t&&e.length&&0==e[0].from&&e[0].to>=t}static get(){return Vp}}function Ip(t,e,n){return Nh.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Np{constructor(t){this.context=t,this.tree=t.tree}apply(t){if(!t.docChanged&&this.tree==this.context.tree)return this;let e=this.context.changes(t.changes,t.state),n=this.context.treeLen==t.startState.doc.length?void 0:Math.max(t.changes.mapPos(this.context.treeLen),e.viewport.to);return e.work(20,n)||e.takeTree(),new Np(e)}static init(t){let e=Math.min(3e3,t.doc.length),n=Dp.create(t.facet(Yp).parser,t,{from:0,to:e});return n.work(20,e)||n.takeTree(),new Np(n)}}$p.state=si.define({create:Np.init,update(t,e){for(let t of e.effects)if(t.is($p.setState))return t.value;return e.startState.facet(Yp)!=e.state.facet(Yp)?Np.init(e.state):t.apply(e)}});let Wp=t=>{let e=setTimeout((()=>t()),500);return()=>clearTimeout(e)};"undefined"!=typeof requestIdleCallback&&(Wp=t=>{let e=-1,n=setTimeout((()=>{e=requestIdleCallback(t,{timeout:500-100})}),100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const Xp="undefined"!=typeof navigator&&(null===(Tp=navigator.scheduling)||void 0===Tp?void 0:Tp.isInputPending)?()=>navigator.scheduling.isInputPending():null,Lp=Ks.fromClass(class{constructor(t){this.view=t,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(t){let e=this.view.state.field($p.state).context;(e.updateViewport(t.view.viewport)||this.view.viewport.to>e.treeLen)&&this.scheduleWork(),(t.docChanged||t.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(e)}scheduleWork(){if(this.working)return;let{state:t}=this.view,e=t.field($p.state);e.tree==e.context.tree&&e.context.isDone(t.doc.length)||(this.working=Wp(this.work))}work(t){this.working=null;let e=Date.now();if(this.chunkEnd<e&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=e+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:o}}=this.view,i=n.field($p.state);if(i.tree==i.context.tree&&i.context.isDone(o+1e5))return;let r=Date.now()+Math.min(this.chunkBudget,100,t&&!Xp?Math.max(25,t.timeRemaining()-5):1e9),s=i.context.treeLen<o&&n.doc.length>o+1e3,a=i.context.work((()=>Xp&&Xp()||Date.now()>r),o+(s?0:1e5));this.chunkBudget-=Date.now()-e,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:$p.setState.of(new Np(i.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(t){t.scheduleOn&&(this.workScheduled++,t.scheduleOn.then((()=>this.scheduleWork())).catch((t=>Bs(this.view.state,t))).then((()=>this.workScheduled--)),t.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Yp=Jo.define({combine:t=>t.length?t[0]:null,enables:t=>[$p.state,Lp,fc.contentAttributes.compute([t],(e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}}))]});class zp{constructor(t,e=[]){this.language=t,this.support=e,this.extension=[t,e]}}const qp=Jo.define(),Up=Jo.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some((t=>t!=e[0])))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Bp(t){let e=t.facet(Up);return 9==e.charCodeAt(0)?t.tabSize*e.length:e.length}function Fp(t,e){let n="",o=t.tabSize,i=t.facet(Up)[0];if("\t"==i){for(;e>=o;)n+="\t",e-=o;i=" "}for(let t=0;t<e;t++)n+=i;return n}function Gp(t,e){t instanceof Wi&&(t=new Hp(t));for(let n of t.state.facet(qp)){let o=n(t,e);if(void 0!==o)return o}let n=Zp(t.state);return n.length>=e?function(t,e,n){let o=e.resolveStack(n),i=o.node.enterUnfinishedNodesBefore(n);if(i!=o.node){let t=[];for(let e=i;e!=o.node;e=e.parent)t.push(e);for(let e=t.length-1;e>=0;e--)o={node:t[e],next:o}}return Jp(o,t,n)}(t,n,e):null}class Hp{constructor(t,e={}){this.state=t,this.options=e,this.unit=Bp(t)}lineAt(t,e=1){let n=this.state.doc.lineAt(t),{simulateBreak:o,simulateDoubleBreak:i}=this.options;return null!=o&&o>=n.from&&o<=n.to?i&&o==t?{text:"",from:t}:(e<0?o<t:o<=t)?{text:n.text.slice(o-n.from),from:o}:{text:n.text.slice(0,o-n.from),from:n.from}:n}textAfterPos(t,e=1){if(this.options.simulateDoubleBreak&&t==this.options.simulateBreak)return"";let{text:n,from:o}=this.lineAt(t,e);return n.slice(t-o,Math.min(n.length,t+100-o))}column(t,e=1){let{text:n,from:o}=this.lineAt(t,e),i=this.countColumn(n,t-o),r=this.options.overrideIndentation?this.options.overrideIndentation(o):-1;return r>-1&&(i+=r-this.countColumn(n,n.search(/\S|$/))),i}countColumn(t,e=t.length){return rr(t,this.state.tabSize,e)}lineIndent(t,e=1){let{text:n,from:o}=this.lineAt(t,e),i=this.options.overrideIndentation;if(i){let t=i(o);if(t>-1)return t}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Kp=new dh;function Jp(t,e,n){for(let o=t;o;o=o.next){let t=td(o.node);if(t)return t(nd.create(e,n,o))}return 0}function td(t){let e=t.type.prop(Kp);if(e)return e;let n,o=t.firstChild;if(o&&(n=o.type.prop(dh.closedBy))){let e=t.lastChild,o=e&&n.indexOf(e.name)>-1;return t=>rd(t,!0,1,void 0,o&&!function(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}(t)?e.from:void 0)}return null==t.parent?ed:null}function ed(){return 0}class nd extends Hp{constructor(t,e,n){super(t.state,t.options),this.base=t,this.pos=e,this.context=n}get node(){return this.context.node}static create(t,e,n){return new nd(t,e,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(t){let e=this.state.doc.lineAt(t.from);for(;;){let n=t.resolve(e.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(od(n,t))break;e=this.state.doc.lineAt(n.from)}return this.lineIndent(e.from)}continue(){return Jp(this.context.next,this.base,this.pos)}}function od(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function id({closing:t,align:e=!0,units:n=1}){return o=>rd(o,e,n,t)}function rd(t,e,n,o,i){let r=t.textAfter,s=r.match(/^\s*/)[0].length,a=o&&r.slice(s,s+o.length)==o||i==t.pos+s,l=e?function(t){let e=t.node,n=e.childAfter(e.from),o=e.lastChild;if(!n)return null;let i=t.options.simulateBreak,r=t.state.doc.lineAt(n.from),s=null==i||i<=r.from?r.to:Math.min(r.to,i);for(let t=n.to;;){let i=e.childAfter(t);if(!i||i==o)return null;if(!i.type.isSkipped)return i.from<s?n:null;t=i.to}}(t):null;return l?a?t.column(l.from):t.column(l.to):t.baseIndent+(a?0:t.unit*n)}function sd({except:t,units:e=1}={}){return n=>{let o=t&&t.test(n.textAfter);return n.baseIndent+(o?0:e*n.unit)}}const ad=200;const ld=Jo.define(),cd=new dh;function ud(t){let e=t.firstChild,n=t.lastChild;return e&&e.to<n.from?{from:e.to,to:n.type.isError?t.to:n.from}:null}function hd(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function pd(t,e,n){for(let o of t.facet(ld)){let i=o(t,e,n);if(i)return i}return function(t,e,n){let o=Zp(t);if(o.length<n)return null;let i=null;for(let r=o.resolveStack(n,1);r;r=r.next){let s=r.node;if(s.to<=n||s.from>n)continue;if(i&&s.from<e)break;let a=s.type.prop(cd);if(a&&(s.to<o.length-50||o.length==t.doc.length||!hd(s))){let o=a(s,t);o&&o.from<=n&&o.from>=e&&o.to>n&&(i=o)}}return i}(t,e,n)}function dd(t,e){let n=e.mapPos(t.from,1),o=e.mapPos(t.to,-1);return n>=o?void 0:{from:n,to:o}}const fd=Ei.define({map:dd}),gd=Ei.define({map:dd});function md(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some((t=>t.from<=n&&t.to>=n))||e.push(t.lineBlockAt(n));return e}const vd=si.define({create:()=>Ts.none,update(t,e){t=t.map(e.changes);for(let n of e.effects)if(n.is(fd)&&!_d(t,n.value.from,n.value.to)){let{preparePlaceholder:o}=e.state.facet(Sd),i=o?Ts.replace({widget:new Td(o(e.state,n.value))}):Cd;t=t.update({add:[i.range(n.value.from,n.value.to)]})}else n.is(gd)&&(t=t.update({filter:(t,e)=>n.value.from!=t||n.value.to!=e,filterFrom:n.value.from,filterTo:n.value.to}));if(e.selection){let n=!1,{head:o}=e.selection.main;t.between(o,o,((t,e)=>{t<o&&e>o&&(n=!0)})),n&&(t=t.update({filterFrom:o,filterTo:o,filter:(t,e)=>e<=o||t>=o}))}return t},provide:t=>fc.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,((t,e)=>{n.push(t,e)})),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let o=t[n++],i=t[n++];if("number"!=typeof o||"number"!=typeof i)throw new RangeError("Invalid JSON for fold state");e.push(Cd.range(o,i))}return Ts.set(e,!0)}});function yd(t,e,n){var o;let i=null;return null===(o=t.field(vd,!1))||void 0===o||o.between(e,n,((t,e)=>{(!i||i.from>t)&&(i={from:t,to:e})})),i}function _d(t,e,n){let o=!1;return t.between(e,e,((t,i)=>{t==e&&i==n&&(o=!0)})),o}function Od(t,e){return t.field(vd,!1)?e:e.concat(Ei.appendConfig.of(kd()))}function bd(t,e,n=!0){let o=t.state.doc.lineAt(e.from).number,i=t.state.doc.lineAt(e.to).number;return fc.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${o} ${t.state.phrase("to")} ${i}.`)}const wd=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:t=>{for(let e of md(t)){let n=pd(t.state,e.from,e.to);if(n)return t.dispatch({effects:Od(t.state,[fd.of(n),bd(t,n)])}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:t=>{if(!t.state.field(vd,!1))return!1;let e=[];for(let n of md(t)){let o=yd(t.state,n.from,n.to);o&&e.push(gd.of(o),bd(t,o,!1))}return e.length&&t.dispatch({effects:e}),e.length>0}},{key:"Ctrl-Alt-[",run:t=>{let{state:e}=t,n=[];for(let o=0;o<e.doc.length;){let i=t.lineBlockAt(o),r=pd(e,i.from,i.to);r&&n.push(fd.of(r)),o=(r?t.lineBlockAt(r.to):i).to+1}return n.length&&t.dispatch({effects:Od(t.state,n)}),!!n.length}},{key:"Ctrl-Alt-]",run:t=>{let e=t.state.field(vd,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,((t,e)=>{n.push(gd.of({from:t,to:e}))})),t.dispatch({effects:n}),!0}}],xd={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},Sd=Jo.define({combine:t=>Xi(t,xd)});function kd(t){let e=[vd,$d];return t&&e.push(Sd.of(t)),e}function Pd(t,e){let{state:n}=t,o=n.facet(Sd),i=e=>{let n=t.lineBlockAt(t.posAtDOM(e.target)),o=yd(t.state,n.from,n.to);o&&t.dispatch({effects:gd.of(o)}),e.preventDefault()};if(o.placeholderDOM)return o.placeholderDOM(t,i,e);let r=document.createElement("span");return r.textContent=o.placeholderText,r.setAttribute("aria-label",n.phrase("folded code")),r.title=n.phrase("unfold"),r.className="cm-foldPlaceholder",r.onclick=i,r}const Cd=Ts.replace({widget:new class extends Ps{toDOM(t){return Pd(t,null)}}});class Td extends Ps{constructor(t){super(),this.value=t}eq(t){return this.value==t.value}toDOM(t){return Pd(t,this.value)}}const Ed={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class Qd extends Mu{constructor(t,e){super(),this.config=t,this.open=e}eq(t){return this.config==t.config&&this.open==t.open}toDOM(t){if(this.config.markerDOM)return this.config.markerDOM(this.open);let e=document.createElement("span");return e.textContent=this.open?this.config.openText:this.config.closedText,e.title=t.state.phrase(this.open?"Fold line":"Unfold line"),e}}function Ad(t={}){let e=Object.assign(Object.assign({},Ed),t),n=new Qd(e,!0),o=new Qd(e,!1),i=Ks.fromClass(class{constructor(t){this.from=t.viewport.from,this.markers=this.buildMarkers(t)}update(t){(t.docChanged||t.viewportChanged||t.startState.facet(Yp)!=t.state.facet(Yp)||t.startState.field(vd,!1)!=t.state.field(vd,!1)||Zp(t.startState)!=Zp(t.state)||e.foldingChanged(t))&&(this.markers=this.buildMarkers(t.view))}buildMarkers(t){let e=new Bi;for(let i of t.viewportLineBlocks){let r=yd(t.state,i.from,i.to)?o:pd(t.state,i.from,i.to)?n:null;r&&e.add(i.from,i.from,r)}return e.finish()}}),{domEventHandlers:r}=e;return[i,Nu({class:"cm-foldGutter",markers(t){var e;return(null===(e=t.plugin(i))||void 0===e?void 0:e.markers)||Ui.empty},initialSpacer:()=>new Qd(e,!1),domEventHandlers:Object.assign(Object.assign({},r),{click:(t,e,n)=>{if(r.click&&r.click(t,e,n))return!0;let o=yd(t.state,e.from,e.to);if(o)return t.dispatch({effects:gd.of(o)}),!0;let i=pd(t.state,e.from,e.to);return!!i&&(t.dispatch({effects:fd.of(i)}),!0)}})}),kd()]}const $d=fc.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class jd{constructor(t,e){let n;function o(t){let e=yr.newName();return(n||(n=Object.create(null)))["."+e]=t,e}this.specs=t;const i="string"==typeof e.all?e.all:e.all?o(e.all):void 0,r=e.scope;this.scope=r instanceof $p?t=>t.prop(Ep)==r.data:r?t=>t==r:void 0,this.style=cp(t.map((t=>({tag:t.tag,class:t.class||o(Object.assign({},t,{tag:null}))}))),{all:i}).style,this.module=n?new yr(n):null,this.themeType=e.themeType}static define(t,e){return new jd(t,e||{})}}const Rd=Jo.define(),Zd=Jo.define({combine:t=>t.length?[t[0]]:null});function Md(t){let e=t.facet(Rd);return e.length?e:t.facet(Zd)}function Vd(t,e){let n,o=[Id];return t instanceof jd&&(t.module&&o.push(fc.styleModule.of(t.module)),n=t.themeType),(null==e?void 0:e.fallback)?o.push(Zd.of(t)):n?o.push(Rd.computeN([fc.darkTheme],(e=>e.facet(fc.darkTheme)==("dark"==n)?[t]:[]))):o.push(Rd.of(t)),o}class Dd{constructor(t){this.markCache=Object.create(null),this.tree=Zp(t.state),this.decorations=this.buildDeco(t,Md(t.state))}update(t){let e=Zp(t.state),n=Md(t.state),o=n!=Md(t.startState);e.length<t.view.viewport.to&&!o&&e.type==this.tree.type?this.decorations=this.decorations.map(t.changes):(e!=this.tree||t.viewportChanged||o)&&(this.tree=e,this.decorations=this.buildDeco(t.view,n))}buildDeco(t,e){if(!e||!this.tree.length)return Ts.none;let n=new Bi;for(let{from:o,to:i}of t.visibleRanges)up(this.tree,e,((t,e,o)=>{n.add(t,e,this.markCache[o]||(this.markCache[o]=Ts.mark({class:o})))}),o,i);return n.finish()}}const Id=pi.high(Ks.fromClass(Dd,{decorations:t=>t.decorations})),Nd=jd.define([{tag:Cp.meta,color:"#404740"},{tag:Cp.link,textDecoration:"underline"},{tag:Cp.heading,textDecoration:"underline",fontWeight:"bold"},{tag:Cp.emphasis,fontStyle:"italic"},{tag:Cp.strong,fontWeight:"bold"},{tag:Cp.strikethrough,textDecoration:"line-through"},{tag:Cp.keyword,color:"#708"},{tag:[Cp.atom,Cp.bool,Cp.url,Cp.contentSeparator,Cp.labelName],color:"#219"},{tag:[Cp.literal,Cp.inserted],color:"#164"},{tag:[Cp.string,Cp.deleted],color:"#a11"},{tag:[Cp.regexp,Cp.escape,Cp.special(Cp.string)],color:"#e40"},{tag:Cp.definition(Cp.variableName),color:"#00f"},{tag:Cp.local(Cp.variableName),color:"#30a"},{tag:[Cp.typeName,Cp.namespace],color:"#085"},{tag:Cp.className,color:"#167"},{tag:[Cp.special(Cp.variableName),Cp.macroName],color:"#256"},{tag:Cp.definition(Cp.propertyName),color:"#00c"},{tag:Cp.comment,color:"#940"},{tag:Cp.invalid,color:"#f00"}]),Wd=fc.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),Xd=1e4,Ld="()[]{}",Yd=Jo.define({combine:t=>Xi(t,{afterCursor:!0,brackets:Ld,maxScanDistance:Xd,renderMatch:Ud})}),zd=Ts.mark({class:"cm-matchingBracket"}),qd=Ts.mark({class:"cm-nonmatchingBracket"});function Ud(t){let e=[],n=t.matched?zd:qd;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const Bd=si.define({create:()=>Ts.none,update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],o=e.state.facet(Yd);for(let t of e.state.selection.ranges){if(!t.empty)continue;let i=tf(e.state,t.head,-1,o)||t.head>0&&tf(e.state,t.head-1,1,o)||o.afterCursor&&(tf(e.state,t.head,1,o)||t.head<e.state.doc.length&&tf(e.state,t.head+1,-1,o));i&&(n=n.concat(o.renderMatch(i,e.state)))}return Ts.set(n,!0)},provide:t=>fc.decorations.from(t)}),Fd=[Bd,Wd];function Gd(t={}){return[Yd.of(t),Fd]}const Hd=new dh;function Kd(t,e,n){let o=t.prop(e<0?dh.openedBy:dh.closedBy);if(o)return o;if(1==t.name.length){let o=n.indexOf(t.name);if(o>-1&&o%2==(e<0?1:0))return[n[o+e]]}return null}function Jd(t){let e=t.type.prop(Hd);return e?e(t.node):t}function tf(t,e,n,o={}){let i=o.maxScanDistance||Xd,r=o.brackets||Ld,s=Zp(t),a=s.resolveInner(e,n);for(let o=a;o;o=o.parent){let i=Kd(o.type,n,r);if(i&&o.from<o.to){let s=Jd(o);if(s&&(n>0?e>=s.from&&e<s.to:e>s.from&&e<=s.to))return ef(t,e,n,o,s,i,r)}}return function(t,e,n,o,i,r,s){let a=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?e-1:e,to:n>0?e+1:e},u=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let t=0;!u.next().done&&t<=r;){let r=u.value;n<0&&(t+=r.length);let a=e+t*n;for(let t=n>0?0:r.length-1,e=n>0?r.length:-1;t!=e;t+=n){let e=s.indexOf(r[t]);if(!(e<0||o.resolveInner(a+t,1).type!=i))if(e%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:a+t,to:a+t+1},matched:e>>1==l>>1};h--}}n>0&&(t+=r.length)}return u.done?{start:c,matched:!1}:null}(t,e,n,s,a.type,i,r)}function ef(t,e,n,o,i,r,s){let a=o.parent,l={from:i.from,to:i.to},c=0,u=null==a?void 0:a.cursor();if(u&&(n<0?u.childBefore(o.from):u.childAfter(o.to)))do{if(n<0?u.to<=o.from:u.from>=o.to){if(0==c&&r.indexOf(u.type.name)>-1&&u.from<u.to){let t=Jd(u);return{start:l,end:t?{from:t.from,to:t.to}:void 0,matched:!0}}if(Kd(u.type,n,s))c++;else if(Kd(u.type,-n,s)){if(0==c){let t=Jd(u);return{start:l,end:t&&t.from<t.to?{from:t.from,to:t.to}:void 0,matched:!1}}c--}}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}const nf=Object.create(null),of=[mh.none],rf=[],sf=Object.create(null),af=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])af[t]=cf(nf,e);function lf(t,e){rf.indexOf(t)>-1||(rf.push(t),console.warn(e))}function cf(t,e){let n=[];for(let o of e.split(" ")){let e=[];for(let n of o.split(".")){let o=t[n]||Cp[n];o?"function"==typeof o?e.length?e=e.map(o):lf(n,`Modifier ${n} used at start of tag`):e.length?lf(n,`Tag ${n} used as modifier`):e=Array.isArray(o)?o:[o]:lf(n,`Unknown highlighting tag ${n}`)}for(let t of e)n.push(t)}if(!n.length)return 0;let o=e.replace(/ /g,"_"),i=o+" "+n.map((t=>t.id)),r=sf[i];if(r)return r.id;let s=sf[i]=mh.define({id:of.length,name:o,props:[sp({[o]:n})]});return of.push(s),s.id}function uf(t,e){return({state:n,dispatch:o})=>{if(n.readOnly)return!1;let i=t(e,n);return!!i&&(o(n.update(i)),!0)}}const hf=uf(vf,0),pf=(null&&uf(vf,1),null&&uf(vf,2),uf(mf,0)),df=(null&&uf(mf,1),null&&uf(mf,2),uf(((t,e)=>mf(t,e,function(t){let e=[];for(let n of t.selection.ranges){let o=t.doc.lineAt(n.from),i=n.to<=o.to?o:t.doc.lineAt(n.to),r=e.length-1;r>=0&&e[r].to>o.from?e[r].to=i.to:e.push({from:o.from+/^\s*/.exec(o.text)[0].length,to:i.to})}return e}(e))),0));function ff(t,e){let n=t.languageDataAt("commentTokens",e);return n.length?n[0]:{}}const gf=50;function mf(t,e,n=e.selection.ranges){let o=n.map((t=>ff(e,t.from).block));if(!o.every((t=>t)))return null;let i=n.map(((t,n)=>function(t,{open:e,close:n},o,i){let r,s,a=t.sliceDoc(o-gf,o),l=t.sliceDoc(i,i+gf),c=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(l)[0].length,h=a.length-c;if(a.slice(h-e.length,h)==e&&l.slice(u,u+n.length)==n)return{open:{pos:o-c,margin:c&&1},close:{pos:i+u,margin:u&&1}};i-o<=2*gf?r=s=t.sliceDoc(o,i):(r=t.sliceDoc(o,o+gf),s=t.sliceDoc(i-gf,i));let p=/^\s*/.exec(r)[0].length,d=/\s*$/.exec(s)[0].length,f=s.length-d-n.length;return r.slice(p,p+e.length)==e&&s.slice(f,f+n.length)==n?{open:{pos:o+p+e.length,margin:/\s/.test(r.charAt(p+e.length))?1:0},close:{pos:i-d-n.length,margin:/\s/.test(s.charAt(f-1))?1:0}}:null}(e,o[n],t.from,t.to)));if(2!=t&&!i.every((t=>t)))return{changes:e.changes(n.map(((t,e)=>i[e]?[]:[{from:t.from,insert:o[e].open+" "},{from:t.to,insert:" "+o[e].close}])))};if(1!=t&&i.some((t=>t))){let t=[];for(let e,n=0;n<i.length;n++)if(e=i[n]){let i=o[n],{open:r,close:s}=e;t.push({from:r.pos-i.open.length,to:r.pos+r.margin},{from:s.pos-s.margin,to:s.pos+i.close.length})}return{changes:t}}return null}function vf(t,e,n=e.selection.ranges){let o=[],i=-1;for(let{from:t,to:r}of n){let n=o.length,s=1e9,a=ff(e,t).line;if(a){for(let n=t;n<=r;){let l=e.doc.lineAt(n);if(l.from>i&&(t==r||r>l.from)){i=l.from;let t=/^\s*/.exec(l.text)[0].length,e=t==l.length,n=l.text.slice(t,t+a.length)==a?t:-1;t<l.text.length&&t<s&&(s=t),o.push({line:l,comment:n,token:a,indent:t,empty:e,single:!1})}n=l.to+1}if(s<1e9)for(let t=n;t<o.length;t++)o[t].indent<o[t].line.text.length&&(o[t].indent=s);o.length==n+1&&(o[n].single=!0)}}if(2!=t&&o.some((t=>t.comment<0&&(!t.empty||t.single)))){let t=[];for(let{line:e,token:n,indent:i,empty:r,single:s}of o)!s&&r||t.push({from:e.from+i,insert:n+" "});let n=e.changes(t);return{changes:n,selection:e.selection.map(n,1)}}if(1!=t&&o.some((t=>t.comment>=0))){let t=[];for(let{line:e,comment:n,token:i}of o)if(n>=0){let o=e.from+n,r=o+i.length;" "==e.text[r-e.from]&&r++,t.push({from:o,to:r})}return{changes:t}}return null}const yf=Pi.define(),_f=Pi.define(),Of=Jo.define(),bf=Jo.define({combine:t=>Xi(t,{minDepth:100,newGroupDelay:500,joinToEvent:(t,e)=>e},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(t,e)=>(n,o)=>t(n,o)||e(n,o)})}),wf=si.define({create:()=>Nf.empty,update(t,e){let n=e.state.facet(bf),o=e.annotation(yf);if(o){let i=Qf.fromTransaction(e,o.selection),r=o.side,s=0==r?t.undone:t.done;return s=i?Af(s,s.length,n.minDepth,i):Zf(s,e.startState.selection),new Nf(0==r?o.rest:s,0==r?s:o.rest)}let i=e.annotation(_f);if("full"!=i&&"before"!=i||(t=t.isolate()),!1===e.annotation(Qi.addToHistory))return e.changes.empty?t:t.addMapping(e.changes.desc);let r=Qf.fromTransaction(e),s=e.annotation(Qi.time),a=e.annotation(Qi.userEvent);return r?t=t.addChanges(r,s,a,n,e):e.selection&&(t=t.addSelection(e.startState.selection,s,a,n.newGroupDelay)),"full"!=i&&"after"!=i||(t=t.isolate()),t},toJSON:t=>({done:t.done.map((t=>t.toJSON())),undone:t.undone.map((t=>t.toJSON()))}),fromJSON:t=>new Nf(t.done.map(Qf.fromJSON),t.undone.map(Qf.fromJSON))});function xf(t={}){return[wf,bf.of(t),fc.domEventHandlers({beforeinput(t,e){let n="historyUndo"==t.inputType?kf:"historyRedo"==t.inputType?Pf:null;return!!n&&(t.preventDefault(),n(e))}})]}function Sf(t,e){return function({state:n,dispatch:o}){if(!e&&n.readOnly)return!1;let i=n.field(wf,!1);if(!i)return!1;let r=i.pop(t,n,e);return!!r&&(o(r),!0)}}const kf=Sf(0,!1),Pf=Sf(1,!1),Cf=Sf(0,!0),Tf=Sf(1,!0);function Ef(t){return function(e){let n=e.field(wf,!1);if(!n)return 0;let o=0==t?n.done:n.undone;return o.length-(o.length&&!o[0].changes?1:0)}}null&&Ef(0),null&&Ef(1);class Qf{constructor(t,e,n,o,i){this.changes=t,this.effects=e,this.mapped=n,this.startSelection=o,this.selectionsAfter=i}setSelAfter(t){return new Qf(this.changes,this.effects,this.mapped,this.startSelection,t)}toJSON(){var t,e,n;return{changes:null===(t=this.changes)||void 0===t?void 0:t.toJSON(),mapped:null===(e=this.mapped)||void 0===e?void 0:e.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((t=>t.toJSON()))}}static fromJSON(t){return new Qf(t.changes&&Xo.fromJSON(t.changes),[],t.mapped&&Wo.fromJSON(t.mapped),t.startSelection&&Go.fromJSON(t.startSelection),t.selectionsAfter.map(Go.fromJSON))}static fromTransaction(t,e){let n=jf;for(let e of t.startState.facet(Of)){let o=e(t);o.length&&(n=n.concat(o))}return!n.length&&t.changes.empty?null:new Qf(t.changes.invert(t.startState.doc),n,void 0,e||t.startState.selection,jf)}static selection(t){return new Qf(void 0,jf,void 0,void 0,t)}}function Af(t,e,n,o){let i=e+1>n+20?e-n-1:0,r=t.slice(i,e);return r.push(o),r}function $f(t,e){return t.length?e.length?t.concat(e):t:e}const jf=[],Rf=200;function Zf(t,e){if(t.length){let n=t[t.length-1],o=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Rf));return o.length&&o[o.length-1].eq(e)?t:(o.push(e),Af(t,t.length-1,1e9,n.setSelAfter(o)))}return[Qf.selection([e])]}function Mf(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function Vf(t,e){if(!t.length)return t;let n=t.length,o=jf;for(;n;){let i=Df(t[n-1],e,o);if(i.changes&&!i.changes.empty||i.effects.length){let e=t.slice(0,n);return e[n-1]=i,e}e=i.mapped,n--,o=i.selectionsAfter}return o.length?[Qf.selection(o)]:jf}function Df(t,e,n){let o=$f(t.selectionsAfter.length?t.selectionsAfter.map((t=>t.map(e))):jf,n);if(!t.changes)return Qf.selection(o);let i=t.changes.map(e),r=e.mapDesc(t.changes,!0),s=t.mapped?t.mapped.composeDesc(r):r;return new Qf(i,Ei.mapEffects(t.effects,e),s,t.startSelection.map(r),o)}const If=/^(input\.type|delete)($|\.)/;class Nf{constructor(t,e,n=0,o=void 0){this.done=t,this.undone=e,this.prevTime=n,this.prevUserEvent=o}isolate(){return this.prevTime?new Nf(this.done,this.undone):this}addChanges(t,e,n,o,i){let r=this.done,s=r[r.length-1];return r=s&&s.changes&&!s.changes.empty&&t.changes&&(!n||If.test(n))&&(!s.selectionsAfter.length&&e-this.prevTime<o.newGroupDelay&&o.joinToEvent(i,function(t,e){let n=[],o=!1;return t.iterChangedRanges(((t,e)=>n.push(t,e))),e.iterChangedRanges(((t,e,i,r)=>{for(let t=0;t<n.length;){let e=n[t++],s=n[t++];r>=e&&i<=s&&(o=!0)}})),o}(s.changes,t.changes))||"input.type.compose"==n)?Af(r,r.length-1,o.minDepth,new Qf(t.changes.compose(s.changes),$f(t.effects,s.effects),s.mapped,s.startSelection,jf)):Af(r,r.length,o.minDepth,t),new Nf(r,jf,e,n)}addSelection(t,e,n,o){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:jf;return i.length>0&&e-this.prevTime<o&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&function(t,e){return t.ranges.length==e.ranges.length&&0===t.ranges.filter(((t,n)=>t.empty!=e.ranges[n].empty)).length}(i[i.length-1],t)?this:new Nf(Zf(this.done,t),this.undone,e,n)}addMapping(t){return new Nf(Vf(this.done,t),Vf(this.undone,t),this.prevTime,this.prevUserEvent)}pop(t,e,n){let o=0==t?this.done:this.undone;if(0==o.length)return null;let i=o[o.length-1],r=i.selectionsAfter[0]||e.selection;if(n&&i.selectionsAfter.length)return e.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:yf.of({side:t,rest:Mf(o),selection:r}),userEvent:0==t?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let n=1==o.length?jf:o.slice(0,o.length-1);return i.mapped&&(n=Vf(n,i.mapped)),e.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:yf.of({side:t,rest:n,selection:r}),filter:!1,userEvent:0==t?"undo":"redo",scrollIntoView:!0})}return null}}Nf.empty=new Nf(jf,jf);const Wf=[{key:"Mod-z",run:kf,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Pf,preventDefault:!0},{linux:"Ctrl-Shift-z",run:Pf,preventDefault:!0},{key:"Mod-u",run:Cf,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Tf,preventDefault:!0}];function Xf(t,e){return Go.create(t.ranges.map(e),t.mainIndex)}function Lf(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Yf({state:t,dispatch:e},n){let o=Xf(t.selection,n);return!o.eq(t.selection)&&(e(Lf(t,o)),!0)}function zf(t,e){return Go.cursor(e?t.to:t.from)}function qf(t,e){return Yf(t,(n=>n.empty?t.moveByChar(n,e):zf(n,e)))}function Uf(t){return t.textDirectionAt(t.state.selection.main.head)==ha.LTR}const Bf=t=>qf(t,!Uf(t)),Ff=t=>qf(t,Uf(t));function Gf(t,e){return Yf(t,(n=>n.empty?t.moveByGroup(n,e):zf(n,e)))}"undefined"!=typeof Intl&&Intl.Segmenter;function Hf(t,e,n){if(e.type.prop(n))return!0;let o=e.to-e.from;return o&&(o>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Kf(t,e,n){let o,i,r=Zp(t).resolveInner(e.head),s=n?dh.closedBy:dh.openedBy;for(let o=e.head;;){let e=n?r.childAfter(o):r.childBefore(o);if(!e)break;Hf(t,e,s)?r=e:o=n?e.to:e.from}return i=r.type.prop(s)&&(o=n?tf(t,r.from,1):tf(t,r.to,-1))&&o.matched?n?o.end.to:o.end.from:n?r.to:r.from,Go.cursor(i,n?-1:1)}function Jf(t,e){return Yf(t,(n=>{if(!n.empty)return zf(n,e);let o=t.moveVertically(n,e);return o.head!=n.head?o:t.moveToLineBoundary(n,e)}))}const tg=t=>Jf(t,!1),eg=t=>Jf(t,!0);function ng(t){let e,n=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,o=0,i=0;if(n){for(let e of t.state.facet(fc.scrollMargins)){let n=e(t);(null==n?void 0:n.top)&&(o=Math.max(null==n?void 0:n.top,o)),(null==n?void 0:n.bottom)&&(i=Math.max(null==n?void 0:n.bottom,i))}e=t.scrollDOM.clientHeight-o-i}else e=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:o,marginBottom:i,selfScroll:n,height:Math.max(t.defaultLineHeight,e-5)}}function og(t,e){let n,o=ng(t),{state:i}=t,r=Xf(i.selection,(n=>n.empty?t.moveVertically(n,e,o.height):zf(n,e)));if(r.eq(i.selection))return!1;if(o.selfScroll){let e=t.coordsAtPos(i.selection.main.head),s=t.scrollDOM.getBoundingClientRect(),a=s.top+o.marginTop,l=s.bottom-o.marginBottom;e&&e.top>a&&e.bottom<l&&(n=fc.scrollIntoView(r.main.head,{y:"start",yMargin:e.top-a}))}return t.dispatch(Lf(i,r),{effects:n}),!0}const ig=t=>og(t,!1),rg=t=>og(t,!0);function sg(t,e,n){let o=t.lineBlockAt(e.head),i=t.moveToLineBoundary(e,n);if(i.head==e.head&&i.head!=(n?o.to:o.from)&&(i=t.moveToLineBoundary(e,n,!1)),!n&&i.head==o.from&&o.length){let n=/^\s*/.exec(t.state.sliceDoc(o.from,Math.min(o.from+100,o.to)))[0].length;n&&e.head!=o.from+n&&(i=Go.cursor(o.from+n))}return i}function ag(t,e,n){let o=!1,i=Xf(t.selection,(e=>{let i=tf(t,e.head,-1)||tf(t,e.head,1)||e.head>0&&tf(t,e.head-1,1)||e.head<t.doc.length&&tf(t,e.head+1,-1);if(!i||!i.end)return e;o=!0;let r=i.start.from==e.head?i.end.to:i.end.from;return n?Go.range(e.anchor,r):Go.cursor(r)}));return!!o&&(e(Lf(t,i)),!0)}function lg(t,e){let n=Xf(t.state.selection,(t=>{let n=e(t);return Go.range(t.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)}));return!n.eq(t.state.selection)&&(t.dispatch(Lf(t.state,n)),!0)}function cg(t,e){return lg(t,(n=>t.moveByChar(n,e)))}const ug=t=>cg(t,!Uf(t)),hg=t=>cg(t,Uf(t));function pg(t,e){return lg(t,(n=>t.moveByGroup(n,e)))}function dg(t,e){return lg(t,(n=>t.moveVertically(n,e)))}const fg=t=>dg(t,!1),gg=t=>dg(t,!0);function mg(t,e){return lg(t,(n=>t.moveVertically(n,e,ng(t).height)))}const vg=t=>mg(t,!1),yg=t=>mg(t,!0),_g=({state:t,dispatch:e})=>(e(Lf(t,{anchor:0})),!0),Og=({state:t,dispatch:e})=>(e(Lf(t,{anchor:t.doc.length})),!0),bg=({state:t,dispatch:e})=>(e(Lf(t,{anchor:t.selection.main.anchor,head:0})),!0),wg=({state:t,dispatch:e})=>(e(Lf(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0);function xg(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:o}=t,i=o.changeByRange((o=>{let{from:i,to:r}=o;if(i==r){let s=e(o);s<i?(n="delete.backward",s=Sg(t,s,!1)):s>i&&(n="delete.forward",s=Sg(t,s,!0)),i=Math.min(i,s),r=Math.max(r,s)}else i=Sg(t,i,!1),r=Sg(t,r,!0);return i==r?{range:o}:{changes:{from:i,to:r},range:Go.cursor(i,i<o.head?-1:1)}}));return!i.changes.empty&&(t.dispatch(o.update(i,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?fc.announce.of(o.phrase("Selection deleted")):void 0})),!0)}function Sg(t,e,n){if(t instanceof fc)for(let o of t.state.facet(fc.atomicRanges).map((e=>e(t))))o.between(e,e,((t,o)=>{t<e&&o>e&&(e=n?o:t)}));return e}const kg=(t,e)=>xg(t,(n=>{let o,i,r=n.from,{state:s}=t,a=s.doc.lineAt(r);if(!e&&r>a.from&&r<a.from+200&&!/[^ \t]/.test(o=a.text.slice(0,r-a.from))){if("\t"==o[o.length-1])return r-1;let t=rr(o,s.tabSize)%Bp(s)||Bp(s);for(let e=0;e<t&&" "==o[o.length-1-e];e++)r--;i=r}else i=Ao(a.text,r-a.from,e,e)+a.from,i==r&&a.number!=(e?s.doc.lines:1)?i+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(i-a.from,r-a.from))&&(i=Ao(a.text,i-a.from,!1,!1)+a.from);return i})),Pg=t=>kg(t,!1),Cg=t=>kg(t,!0),Tg=(t,e)=>xg(t,(n=>{let o=n.head,{state:i}=t,r=i.doc.lineAt(o),s=i.charCategorizer(o);for(let t=null;;){if(o==(e?r.to:r.from)){o==n.head&&r.number!=(e?i.doc.lines:1)&&(o+=e?1:-1);break}let a=Ao(r.text,o-r.from,e)+r.from,l=r.text.slice(Math.min(o,a)-r.from,Math.max(o,a)-r.from),c=s(l);if(null!=t&&c!=t)break;" "==l&&o==n.head||(t=c),o=a}return o})),Eg=t=>Tg(t,!1);function Qg(t){let e=[],n=-1;for(let o of t.selection.ranges){let i=t.doc.lineAt(o.from),r=t.doc.lineAt(o.to);if(o.empty||o.to!=r.from||(r=t.doc.lineAt(o.to-1)),n>=i.number){let t=e[e.length-1];t.to=r.to,t.ranges.push(o)}else e.push({from:i.from,to:r.to,ranges:[o]});n=r.number+1}return e}function Ag(t,e,n){if(t.readOnly)return!1;let o=[],i=[];for(let e of Qg(t)){if(n?e.to==t.doc.length:0==e.from)continue;let r=t.doc.lineAt(n?e.to+1:e.from-1),s=r.length+1;if(n){o.push({from:e.to,to:r.to},{from:e.from,insert:r.text+t.lineBreak});for(let n of e.ranges)i.push(Go.range(Math.min(t.doc.length,n.anchor+s),Math.min(t.doc.length,n.head+s)))}else{o.push({from:r.from,to:e.from},{from:e.to,insert:t.lineBreak+r.text});for(let t of e.ranges)i.push(Go.range(t.anchor-s,t.head-s))}}return!!o.length&&(e(t.update({changes:o,scrollIntoView:!0,selection:Go.create(i,t.selection.mainIndex),userEvent:"move.line"})),!0)}function $g(t,e,n){if(t.readOnly)return!1;let o=[];for(let e of Qg(t))n?o.push({from:e.from,insert:t.doc.slice(e.from,e.to)+t.lineBreak}):o.push({from:e.to,insert:t.lineBreak+t.doc.slice(e.from,e.to)});return e(t.update({changes:o,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const jg=Zg(!1),Rg=Zg(!0);function Zg(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let o=e.changeByRange((n=>{let{from:o,to:i}=n,r=e.doc.lineAt(o),s=!t&&o==i&&function(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n,o=Zp(t).resolveInner(e),i=o.childBefore(e),r=o.childAfter(e);return i&&r&&i.to<=e&&r.from>=e&&(n=i.type.prop(dh.closedBy))&&n.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}(e,o);t&&(o=i=(i<=r.to?r:e.doc.lineAt(i)).to);let a=new Hp(e,{simulateBreak:o,simulateDoubleBreak:!!s}),l=Gp(a,o);for(null==l&&(l=rr(/^\s*/.exec(e.doc.lineAt(o).text)[0],e.tabSize));i<r.to&&/\s/.test(r.text[i-r.from]);)i++;s?({from:o,to:i}=s):o>r.from&&o<r.from+100&&!/\S/.test(r.text.slice(0,o))&&(o=r.from);let c=["",Fp(e,l)];return s&&c.push(Fp(e,a.lineIndent(r.from,-1))),{changes:{from:o,to:i,insert:vo.of(c)},range:Go.cursor(o+1+c[1].length)}}));return n(e.update(o,{scrollIntoView:!0,userEvent:"input"})),!0}}function Mg(t,e){let n=-1;return t.changeByRange((o=>{let i=[];for(let r=o.from;r<=o.to;){let s=t.doc.lineAt(r);s.number>n&&(o.empty||o.to>s.from)&&(e(s,i,o),n=s.number),r=s.to+1}let r=t.changes(i);return{changes:i,range:Go.range(r.mapPos(o.anchor,1),r.mapPos(o.head,1))}}))}const Vg=({state:t,dispatch:e})=>!t.readOnly&&(e(t.update(Mg(t,((e,n)=>{n.push({from:e.from,insert:t.facet(Up)})})),{userEvent:"input.indent"})),!0),Dg=({state:t,dispatch:e})=>!t.readOnly&&(e(t.update(Mg(t,((e,n)=>{let o=/^\s*/.exec(e.text)[0];if(!o)return;let i=rr(o,t.tabSize),r=0,s=Fp(t,Math.max(0,i-Bp(t)));for(;r<o.length&&r<s.length&&o.charCodeAt(r)==s.charCodeAt(r);)r++;n.push({from:e.from+r,to:e.from+o.length,insert:s.slice(r)})})),{userEvent:"delete.dedent"})),!0),Ig=[{key:"Ctrl-b",run:Bf,shift:ug,preventDefault:!0},{key:"Ctrl-f",run:Ff,shift:hg},{key:"Ctrl-p",run:tg,shift:fg},{key:"Ctrl-n",run:eg,shift:gg},{key:"Ctrl-a",run:t=>Yf(t,(e=>Go.cursor(t.lineBlockAt(e.head).from,1))),shift:t=>lg(t,(e=>Go.cursor(t.lineBlockAt(e.head).from)))},{key:"Ctrl-e",run:t=>Yf(t,(e=>Go.cursor(t.lineBlockAt(e.head).to,-1))),shift:t=>lg(t,(e=>Go.cursor(t.lineBlockAt(e.head).to)))},{key:"Ctrl-d",run:Cg},{key:"Ctrl-h",run:Pg},{key:"Ctrl-k",run:t=>xg(t,(e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}))},{key:"Ctrl-Alt-h",run:Eg},{key:"Ctrl-o",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:vo.of(["",""])},range:Go.cursor(t.from)})));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange((e=>{if(!e.empty||0==e.from||e.from==t.doc.length)return{range:e};let n=e.from,o=t.doc.lineAt(n),i=n==o.from?n-1:Ao(o.text,n-o.from,!1)+o.from,r=n==o.to?n+1:Ao(o.text,n-o.from,!0)+o.from;return{changes:{from:i,to:r,insert:t.doc.slice(n,r).append(t.doc.slice(i,n))},range:Go.cursor(r)}}));return!n.changes.empty&&(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:rg}],Ng=[{key:"ArrowLeft",run:Bf,shift:ug,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:t=>Gf(t,!Uf(t)),shift:t=>pg(t,!Uf(t)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:t=>Yf(t,(e=>sg(t,e,!Uf(t)))),shift:t=>lg(t,(e=>sg(t,e,!Uf(t)))),preventDefault:!0},{key:"ArrowRight",run:Ff,shift:hg,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:t=>Gf(t,Uf(t)),shift:t=>pg(t,Uf(t)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:t=>Yf(t,(e=>sg(t,e,Uf(t)))),shift:t=>lg(t,(e=>sg(t,e,Uf(t)))),preventDefault:!0},{key:"ArrowUp",run:tg,shift:fg,preventDefault:!0},{mac:"Cmd-ArrowUp",run:_g,shift:bg},{mac:"Ctrl-ArrowUp",run:ig,shift:vg},{key:"ArrowDown",run:eg,shift:gg,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Og,shift:wg},{mac:"Ctrl-ArrowDown",run:rg,shift:yg},{key:"PageUp",run:ig,shift:vg},{key:"PageDown",run:rg,shift:yg},{key:"Home",run:t=>Yf(t,(e=>sg(t,e,!1))),shift:t=>lg(t,(e=>sg(t,e,!1))),preventDefault:!0},{key:"Mod-Home",run:_g,shift:bg},{key:"End",run:t=>Yf(t,(e=>sg(t,e,!0))),shift:t=>lg(t,(e=>sg(t,e,!0))),preventDefault:!0},{key:"Mod-End",run:Og,shift:wg},{key:"Enter",run:jg},{key:"Mod-a",run:({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:Pg,shift:Pg},{key:"Delete",run:Cg},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Eg},{key:"Mod-Delete",mac:"Alt-Delete",run:t=>Tg(t,!0)},{mac:"Mod-Backspace",run:t=>xg(t,(e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}))},{mac:"Mod-Delete",run:t=>xg(t,(e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}))}].concat(Ig.map((t=>({mac:t.key,run:t.run,shift:t.shift})))),Wg=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:t=>Yf(t,(e=>Kf(t.state,e,!Uf(t)))),shift:t=>lg(t,(e=>Kf(t.state,e,!Uf(t))))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:t=>Yf(t,(e=>Kf(t.state,e,Uf(t)))),shift:t=>lg(t,(e=>Kf(t.state,e,Uf(t))))},{key:"Alt-ArrowUp",run:({state:t,dispatch:e})=>Ag(t,e,!1)},{key:"Shift-Alt-ArrowUp",run:({state:t,dispatch:e})=>$g(t,e,!1)},{key:"Alt-ArrowDown",run:({state:t,dispatch:e})=>Ag(t,e,!0)},{key:"Shift-Alt-ArrowDown",run:({state:t,dispatch:e})=>$g(t,e,!0)},{key:"Escape",run:({state:t,dispatch:e})=>{let n=t.selection,o=null;return n.ranges.length>1?o=Go.create([n.main]):n.main.empty||(o=Go.create([Go.cursor(n.main.head)])),!!o&&(e(Lf(t,o)),!0)}},{key:"Mod-Enter",run:Rg},{key:"Alt-l",mac:"Ctrl-l",run:({state:t,dispatch:e})=>{let n=Qg(t).map((({from:e,to:n})=>Go.range(e,Math.min(n+1,t.doc.length))));return e(t.update({selection:Go.create(n),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:t,dispatch:e})=>{let n=Xf(t.selection,(e=>{var n;for(let o=Zp(t).resolveStack(e.from,1);o;o=o.next){let{node:t}=o;if((t.from<e.from&&t.to>=e.to||t.to>e.to&&t.from<=e.from)&&(null===(n=t.parent)||void 0===n?void 0:n.parent))return Go.range(t.to,t.from)}return e}));return e(Lf(t,n)),!0},preventDefault:!0},{key:"Mod-[",run:Dg},{key:"Mod-]",run:Vg},{key:"Mod-Alt-\\",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),o=new Hp(t,{overrideIndentation:t=>{let e=n[t];return null==e?-1:e}}),i=Mg(t,((e,i,r)=>{let s=Gp(o,e.from);if(null==s)return;/\S/.test(e.text)||(s=0);let a=/^\s*/.exec(e.text)[0],l=Fp(t,s);(a!=l||r.from<e.from+a.length)&&(n[e.from]=s,i.push({from:e.from,to:e.from+a.length,insert:l}))}));return i.changes.empty||e(t.update(i,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Qg(e).map((({from:t,to:n})=>(t>0?t--:n<e.doc.length&&n++,{from:t,to:n})))),o=Xf(e.selection,(e=>t.moveVertically(e,!0))).map(n);return t.dispatch({changes:n,selection:o,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:t,dispatch:e})=>ag(t,e,!1)},{key:"Mod-/",run:t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),o=ff(t.state,n.from);return o.line?hf(t):!!o.block&&df(t)}},{key:"Alt-A",run:pf}].concat(Ng);function Xg(){var t=arguments[0];"string"==typeof t&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){var i=n[o];"string"==typeof i?t.setAttribute(o,i):null!=i&&(t[o]=i)}e++}for(;e<arguments.length;e++)Lg(t,arguments[e]);return t}function Lg(t,e){if("string"==typeof e)t.appendChild(document.createTextNode(e));else if(null==e);else if(null!=e.nodeType)t.appendChild(e);else{if(!Array.isArray(e))throw new RangeError("Unsupported child node: "+e);for(var n=0;n<e.length;n++)Lg(t,e[n])}}const Yg="function"==typeof String.prototype.normalize?t=>t.normalize("NFKD"):t=>t;class zg{constructor(t,e,n=0,o=t.length,i,r){this.test=r,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=t.iterRange(n,o),this.bufferStart=n,this.normalize=i?t=>i(Yg(t)):Yg,this.query=this.normalize(e)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return Mo(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let t=this.peek();if(t<0)return this.done=!0,this;let e=Vo(t),n=this.bufferStart+this.bufferPos;this.bufferPos+=Do(t);let o=this.normalize(e);for(let t=0,i=n;;t++){let r=o.charCodeAt(t),s=this.match(r,i);if(t==o.length-1){if(s)return this.value=s,this;break}i==n&&t<e.length&&e.charCodeAt(t)==r&&i++}}}match(t,e){let n=null;for(let o=0;o<this.matches.length;o+=2){let i=this.matches[o],r=!1;this.query.charCodeAt(i)==t&&(i==this.query.length-1?n={from:this.matches[o+1],to:e+1}:(this.matches[o]++,r=!0)),r||(this.matches.splice(o,2),o-=2)}return this.query.charCodeAt(0)==t&&(1==this.query.length?n={from:e,to:e+1}:this.matches.push(1,e)),n&&this.test&&!this.test(n.from,n.to,this.buffer,this.bufferStart)&&(n=null),n}}"undefined"!=typeof Symbol&&(zg.prototype[Symbol.iterator]=function(){return this});const qg={from:-1,to:-1,match:/.*/.exec("")},Ug="gm"+(null==/x/.unicode?"":"u");class Bg{constructor(t,e,n,o=0,i=t.length){if(this.text=t,this.to=i,this.curLine="",this.done=!1,this.value=qg,/\\[sWDnr]|\n|\r|\[\^/.test(e))return new Hg(t,e,n,o,i);this.re=new RegExp(e,Ug+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.iter=t.iter();let r=t.lineAt(o);this.curLineStart=r.from,this.matchPos=Kg(t,o),this.getLine(this.curLineStart)}getLine(t){this.iter.next(t),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let t=this.matchPos-this.curLineStart;;){this.re.lastIndex=t;let e=this.matchPos<=this.to&&this.re.exec(this.curLine);if(e){let n=this.curLineStart+e.index,o=n+e[0].length;if(this.matchPos=Kg(this.text,o+(n==o?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<o||n>this.value.to)&&(!this.test||this.test(n,o,e)))return this.value={from:n,to:o,match:e},this;t=this.matchPos-this.curLineStart}else{if(!(this.curLineStart+this.curLine.length<this.to))return this.done=!0,this;this.nextLine(),t=0}}}}const Fg=new WeakMap;class Gg{constructor(t,e){this.from=t,this.text=e}get to(){return this.from+this.text.length}static get(t,e,n){let o=Fg.get(t);if(!o||o.from>=n||o.to<=e){let o=new Gg(e,t.sliceString(e,n));return Fg.set(t,o),o}if(o.from==e&&o.to==n)return o;let{text:i,from:r}=o;return r>e&&(i=t.sliceString(e,r)+i,r=e),o.to<n&&(i+=t.sliceString(o.to,n)),Fg.set(t,new Gg(r,i)),new Gg(e,i.slice(e-r,n-r))}}class Hg{constructor(t,e,n,o,i){this.text=t,this.to=i,this.done=!1,this.value=qg,this.matchPos=Kg(t,o),this.re=new RegExp(e,Ug+((null==n?void 0:n.ignoreCase)?"i":"")),this.test=null==n?void 0:n.test,this.flat=Gg.get(t,o,this.chunkEnd(o+5e3))}chunkEnd(t){return t>=this.to?this.to:this.text.lineAt(t).to}next(){for(;;){let t=this.re.lastIndex=this.matchPos-this.flat.from,e=this.re.exec(this.flat.text);if(e&&!e[0]&&e.index==t&&(this.re.lastIndex=t+1,e=this.re.exec(this.flat.text)),e){let t=this.flat.from+e.index,n=t+e[0].length;if((this.flat.to>=this.to||e.index+e[0].length<=this.flat.text.length-10)&&(!this.test||this.test(t,n,e)))return this.value={from:t,to:n,match:e},this.matchPos=Kg(this.text,n+(t==n?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Gg.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+2*this.flat.text.length))}}}function Kg(t,e){if(e>=t.length)return e;let n,o=t.lineAt(e);for(;e<o.to&&(n=o.text.charCodeAt(e-o.from))>=56320&&n<57344;)e++;return e}function Jg(t){let e=Xg("input",{class:"cm-textfield",name:"line",value:String(t.state.doc.lineAt(t.state.selection.main.head).number)});function n(){let n=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(e.value);if(!n)return;let{state:o}=t,i=o.doc.lineAt(o.selection.main.head),[,r,s,a,l]=n,c=a?+a.slice(1):0,u=s?+s:i.number;if(s&&l){let t=u/100;r&&(t=t*("-"==r?-1:1)+i.number/o.doc.lines),u=Math.round(o.doc.lines*t)}else s&&r&&(u=u*("-"==r?-1:1)+i.number);let h=o.doc.line(Math.max(1,Math.min(o.doc.lines,u))),p=Go.cursor(h.from+Math.max(0,Math.min(c,h.length)));t.dispatch({effects:[tm.of(!1),fc.scrollIntoView(p.from,{y:'center'})],selection:p}),t.focus()}return{dom:Xg("form",{class:"cm-gotoLine",onkeydown:e=>{27==e.keyCode?(e.preventDefault(),t.dispatch({effects:tm.of(!1)}),t.focus()):13==e.keyCode&&(e.preventDefault(),n())},onsubmit:t=>{t.preventDefault(),n()}},Xg("label",t.state.phrase("Go to line"),": ",e)," ",Xg("button",{class:"cm-button",type:"submit"},t.state.phrase("go")))}}"undefined"!=typeof Symbol&&(Bg.prototype[Symbol.iterator]=Hg.prototype[Symbol.iterator]=function(){return this});const tm=Ei.define(),em=si.define({create:()=>!0,update(t,e){for(let n of e.effects)n.is(tm)&&(t=n.value);return t},provide:t=>Zu.from(t,(t=>t?Jg:null))}),nm=fc.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),om={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},im=Jo.define({combine:t=>Xi(t,om,{highlightWordAroundCursor:(t,e)=>t||e,minSelectionLength:Math.min,maxMatches:Math.min})});function rm(t){let e=[um,cm];return t&&e.push(im.of(t)),e}const sm=Ts.mark({class:"cm-selectionMatch"}),am=Ts.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function lm(t,e,n,o){return!(0!=n&&t(e.sliceDoc(n-1,n))==Vi.Word||o!=e.doc.length&&t(e.sliceDoc(o,o+1))==Vi.Word)}const cm=Ks.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(im),{state:n}=t,o=n.selection;if(o.ranges.length>1)return Ts.none;let i,r=o.main,s=null;if(r.empty){if(!e.highlightWordAroundCursor)return Ts.none;let t=n.wordAt(r.head);if(!t)return Ts.none;s=n.charCategorizer(r.head),i=n.sliceDoc(t.from,t.to)}else{let t=r.to-r.from;if(t<e.minSelectionLength||t>200)return Ts.none;if(e.wholeWords){if(i=n.sliceDoc(r.from,r.to),s=n.charCategorizer(r.head),!lm(s,n,r.from,r.to)||!function(t,e,n,o){return t(e.sliceDoc(n,n+1))==Vi.Word&&t(e.sliceDoc(o-1,o))==Vi.Word}(s,n,r.from,r.to))return Ts.none}else if(i=n.sliceDoc(r.from,r.to).trim(),!i)return Ts.none}let a=[];for(let o of t.visibleRanges){let t=new zg(n.doc,i,o.from,o.to);for(;!t.next().done;){let{from:o,to:i}=t.value;if((!s||lm(s,n,o,i))&&(r.empty&&o<=r.from&&i>=r.to?a.push(am.range(o,i)):(o>=r.to||i<=r.from)&&a.push(sm.range(o,i)),a.length>e.maxMatches))return Ts.none}}return Ts.set(a)}},{decorations:t=>t.decorations}),um=fc.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}});const hm=Jo.define({combine:t=>Xi(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:t=>new Nm(t),scrollToMatch:t=>fc.scrollIntoView(t)})});class pm{constructor(t){this.search=t.search,this.caseSensitive=!!t.caseSensitive,this.literal=!!t.literal,this.regexp=!!t.regexp,this.replace=t.replace||"",this.valid=!!this.search&&(!this.regexp||function(t){try{return new RegExp(t,Ug),!0}catch(t){return!1}}(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!t.wholeWord}unquote(t){return this.literal?t:t.replace(/\\([nrt\\])/g,((t,e)=>"n"==e?"\n":"r"==e?"\r":"t"==e?"\t":"\\"))}eq(t){return this.search==t.search&&this.replace==t.replace&&this.caseSensitive==t.caseSensitive&&this.regexp==t.regexp&&this.wholeWord==t.wholeWord}create(){return this.regexp?new _m(this):new gm(this)}getCursor(t,e=0,n){let o=t.doc?t:Wi.create({doc:t});return null==n&&(n=o.doc.length),this.regexp?mm(this,o,e,n):fm(this,o,e,n)}}class dm{constructor(t){this.spec=t}}function fm(t,e,n,o){return new zg(e.doc,t.unquoted,n,o,t.caseSensitive?void 0:t=>t.toLowerCase(),t.wholeWord?function(t,e){return(n,o,i,r)=>((r>n||r+i.length<o)&&(r=Math.max(0,n-2),i=t.sliceString(r,Math.min(t.length,o+2))),!(e(vm(i,n-r))==Vi.Word&&e(ym(i,n-r))==Vi.Word||e(ym(i,o-r))==Vi.Word&&e(vm(i,o-r))==Vi.Word))}(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}class gm extends dm{constructor(t){super(t)}nextMatch(t,e,n){let o=fm(this.spec,t,n,t.doc.length).nextOverlapping();return o.done&&(o=fm(this.spec,t,0,e).nextOverlapping()),o.done?null:o.value}prevMatchInRange(t,e,n){for(let o=n;;){let n=Math.max(e,o-1e4-this.spec.unquoted.length),i=fm(this.spec,t,n,o),r=null;for(;!i.nextOverlapping().done;)r=i.value;if(r)return r;if(n==e)return null;o-=1e4}}prevMatch(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace)}matchAll(t,e){let n=fm(this.spec,t,0,t.doc.length),o=[];for(;!n.next().done;){if(o.length>=e)return null;o.push(n.value)}return o}highlight(t,e,n,o){let i=fm(this.spec,t,Math.max(0,e-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,t.doc.length));for(;!i.next().done;)o(i.value.from,i.value.to)}}function mm(t,e,n,o){return new Bg(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?(i=e.charCategorizer(e.selection.main.head),(t,e,n)=>!n[0].length||(i(vm(n.input,n.index))!=Vi.Word||i(ym(n.input,n.index))!=Vi.Word)&&(i(ym(n.input,n.index+n[0].length))!=Vi.Word||i(vm(n.input,n.index+n[0].length))!=Vi.Word)):void 0},n,o);var i}function vm(t,e){return t.slice(Ao(t,e,!1),e)}function ym(t,e){return t.slice(e,Ao(t,e))}class _m extends dm{nextMatch(t,e,n){let o=mm(this.spec,t,n,t.doc.length).next();return o.done&&(o=mm(this.spec,t,0,e).next()),o.done?null:o.value}prevMatchInRange(t,e,n){for(let o=1;;o++){let i=Math.max(e,n-1e4*o),r=mm(this.spec,t,i,n),s=null;for(;!r.next().done;)s=r.value;if(s&&(i==e||s.from>i+10))return s;if(i==e)return null}}prevMatch(t,e,n){return this.prevMatchInRange(t,0,e)||this.prevMatchInRange(t,n,t.doc.length)}getReplacement(t){return this.spec.unquote(this.spec.replace).replace(/\$([$&\d+])/g,((e,n)=>"$"==n?"$":"&"==n?t.match[0]:"0"!=n&&+n<t.match.length?t.match[n]:e))}matchAll(t,e){let n=mm(this.spec,t,0,t.doc.length),o=[];for(;!n.next().done;){if(o.length>=e)return null;o.push(n.value)}return o}highlight(t,e,n,o){let i=mm(this.spec,t,Math.max(0,e-250),Math.min(n+250,t.doc.length));for(;!i.next().done;)o(i.value.from,i.value.to)}}const Om=Ei.define(),bm=Ei.define(),wm=si.define({create:t=>new xm(Rm(t).create(),null),update(t,e){for(let n of e.effects)n.is(Om)?t=new xm(n.value.create(),t.panel):n.is(bm)&&(t=new xm(t.query,n.value?jm:null));return t},provide:t=>Zu.from(t,(t=>t.panel))});class xm{constructor(t,e){this.query=t,this.panel=e}}const Sm=Ts.mark({class:"cm-searchMatch"}),km=Ts.mark({class:"cm-searchMatch cm-searchMatch-selected"}),Pm=Ks.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(wm))}update(t){let e=t.state.field(wm);(e!=t.startState.field(wm)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return Ts.none;let{view:n}=this,o=new Bi;for(let e=0,i=n.visibleRanges,r=i.length;e<r;e++){let{from:s,to:a}=i[e];for(;e<r-1&&a>i[e+1].from-2*250;)a=i[++e].to;t.highlight(n.state,s,a,((t,e)=>{let i=n.state.selection.ranges.some((n=>n.from==t&&n.to==e));o.add(t,e,i?km:Sm)}))}return o.finish()}},{decorations:t=>t.decorations});function Cm(t){return e=>{let n=e.state.field(wm,!1);return n&&n.query.spec.valid?t(e,n):Vm(e)}}const Tm=Cm(((t,{query:e})=>{let{to:n}=t.state.selection.main,o=e.nextMatch(t.state,n,n);if(!o)return!1;let i=Go.single(o.from,o.to),r=t.state.facet(hm);return t.dispatch({selection:i,effects:[Ym(t,o),r.scrollToMatch(i.main,t)],userEvent:"select.search"}),Mm(t),!0})),Em=Cm(((t,{query:e})=>{let{state:n}=t,{from:o}=n.selection.main,i=e.prevMatch(n,o,o);if(!i)return!1;let r=Go.single(i.from,i.to),s=t.state.facet(hm);return t.dispatch({selection:r,effects:[Ym(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),Mm(t),!0})),Qm=Cm(((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!(!n||!n.length)&&(t.dispatch({selection:Go.create(n.map((t=>Go.range(t.from,t.to)))),userEvent:"select.search.matches"}),!0)})),Am=Cm(((t,{query:e})=>{let{state:n}=t,{from:o,to:i}=n.selection.main;if(n.readOnly)return!1;let r=e.nextMatch(n,o,o);if(!r)return!1;let s,a,l=[],c=[];if(r.from==o&&r.to==i&&(a=n.toText(e.getReplacement(r)),l.push({from:r.from,to:r.to,insert:a}),r=e.nextMatch(n,r.from,r.to),c.push(fc.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(o).number)+"."))),r){let e=0==l.length||l[0].from>=r.to?0:r.to-r.from-a.length;s=Go.single(r.from-e,r.to-e),c.push(Ym(t,r)),c.push(n.facet(hm).scrollToMatch(s.main,t))}return t.dispatch({changes:l,selection:s,effects:c,userEvent:"input.replace"}),!0})),$m=Cm(((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map((t=>{let{from:n,to:o}=t;return{from:n,to:o,insert:e.getReplacement(t)}}));if(!n.length)return!1;let o=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:fc.announce.of(o),userEvent:"input.replace.all"}),!0}));function jm(t){return t.state.facet(hm).createPanel(t)}function Rm(t,e){var n,o,i,r,s;let a=t.selection.main,l=a.empty||a.to>a.from+100?"":t.sliceDoc(a.from,a.to);if(e&&!l)return e;let c=t.facet(hm);return new pm({search:(null!==(n=null==e?void 0:e.literal)&&void 0!==n?n:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:null!==(o=null==e?void 0:e.caseSensitive)&&void 0!==o?o:c.caseSensitive,literal:null!==(i=null==e?void 0:e.literal)&&void 0!==i?i:c.literal,regexp:null!==(r=null==e?void 0:e.regexp)&&void 0!==r?r:c.regexp,wholeWord:null!==(s=null==e?void 0:e.wholeWord)&&void 0!==s?s:c.wholeWord})}function Zm(t){let e=Au(t,jm);return e&&e.dom.querySelector("[main-field]")}function Mm(t){let e=Zm(t);e&&e==t.root.activeElement&&e.select()}const Vm=t=>{let e=t.state.field(wm,!1);if(e&&e.panel){let n=Zm(t);if(n&&n!=t.root.activeElement){let o=Rm(t.state,e.query.spec);o.valid&&t.dispatch({effects:Om.of(o)}),n.focus(),n.select()}}else t.dispatch({effects:[bm.of(!0),e?Om.of(Rm(t.state,e.query.spec)):Ei.appendConfig.of(qm)]});return!0},Dm=t=>{let e=t.state.field(wm,!1);if(!e||!e.panel)return!1;let n=Au(t,jm);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:bm.of(!1)}),!0},Im=[{key:"Mod-f",run:Vm,scope:"editor search-panel"},{key:"F3",run:Tm,shift:Em,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Tm,shift:Em,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:Dm,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:o,to:i}=n.main,r=[],s=0;for(let e=new zg(t.doc,t.sliceDoc(o,i));!e.next().done;){if(r.length>1e3)return!1;e.value.from==o&&(s=r.length),r.push(Go.range(e.value.from,e.value.to))}return e(t.update({selection:Go.create(r,s),userEvent:"select.search.matches"})),!0}},{key:"Mod-Alt-g",run:t=>{let e=Au(t,Jg);if(!e){let n=[tm.of(!0)];null==t.state.field(em,!1)&&n.push(Ei.appendConfig.of([em,nm])),t.dispatch({effects:n}),e=Au(t,Jg)}return e&&e.dom.querySelector("input").select(),!0}},{key:"Mod-d",run:({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some((t=>t.from===t.to)))return(({state:t,dispatch:e})=>{let{selection:n}=t,o=Go.create(n.ranges.map((e=>t.wordAt(e.head)||Go.cursor(e.head))),n.mainIndex);return!o.eq(n)&&(e(t.update({selection:o})),!0)})({state:t,dispatch:e});let o=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some((e=>t.sliceDoc(e.from,e.to)!=o)))return!1;let i=function(t,e){let{main:n,ranges:o}=t.selection,i=t.wordAt(n.head),r=i&&i.from==n.from&&i.to==n.to;for(let n=!1,i=new zg(t.doc,e,o[o.length-1].to);;){if(i.next(),!i.done){if(n&&o.some((t=>t.from==i.value.from)))continue;if(r){let e=t.wordAt(i.value.from);if(!e||e.from!=i.value.from||e.to!=i.value.to)continue}return i.value}if(n)return null;i=new zg(t.doc,e,0,Math.max(0,o[o.length-1].from-1)),n=!0}}(t,o);return!!i&&(e(t.update({selection:t.selection.addRange(Go.range(i.from,i.to),!1),effects:fc.scrollIntoView(i.to)})),!0)},preventDefault:!0}];class Nm{constructor(t){this.view=t;let e=this.query=t.state.field(wm).query.spec;function n(t,e,n){return Xg("button",{class:"cm-button",name:t,onclick:e,type:"button"},n)}this.commit=this.commit.bind(this),this.searchField=Xg("input",{value:e.search,placeholder:Wm(t,"Find"),"aria-label":Wm(t,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Xg("input",{value:e.replace,placeholder:Wm(t,"Replace"),"aria-label":Wm(t,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=Xg("input",{type:"checkbox",name:"case",form:"",checked:e.caseSensitive,onchange:this.commit}),this.reField=Xg("input",{type:"checkbox",name:"re",form:"",checked:e.regexp,onchange:this.commit}),this.wordField=Xg("input",{type:"checkbox",name:"word",form:"",checked:e.wholeWord,onchange:this.commit}),this.dom=Xg("div",{onkeydown:t=>this.keydown(t),class:"cm-search"},[this.searchField,n("next",(()=>Tm(t)),[Wm(t,"next")]),n("prev",(()=>Em(t)),[Wm(t,"previous")]),n("select",(()=>Qm(t)),[Wm(t,"all")]),Xg("label",null,[this.caseField,Wm(t,"match case")]),Xg("label",null,[this.reField,Wm(t,"regexp")]),Xg("label",null,[this.wordField,Wm(t,"by word")]),...t.state.readOnly?[]:[Xg("br"),this.replaceField,n("replace",(()=>Am(t)),[Wm(t,"replace")]),n("replaceAll",(()=>$m(t)),[Wm(t,"replace all")])],Xg("button",{name:"close",onclick:()=>Dm(t),"aria-label":Wm(t,"close"),type:"button"},["×"])])}commit(){let t=new pm({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});t.eq(this.query)||(this.query=t,this.view.dispatch({effects:Om.of(t)}))}keydown(t){var e,n,o;e=this.view,n=t,o="search-panel",Cc(Sc(e.state),n,e,o)?t.preventDefault():13==t.keyCode&&t.target==this.searchField?(t.preventDefault(),(t.shiftKey?Em:Tm)(this.view)):13==t.keyCode&&t.target==this.replaceField&&(t.preventDefault(),Am(this.view))}update(t){for(let e of t.transactions)for(let t of e.effects)t.is(Om)&&!t.value.eq(this.query)&&this.setQuery(t.value)}setQuery(t){this.query=t,this.searchField.value=t.search,this.replaceField.value=t.replace,this.caseField.checked=t.caseSensitive,this.reField.checked=t.regexp,this.wordField.checked=t.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(hm).top}}function Wm(t,e){return t.state.phrase(e)}const Xm=30,Lm=/[\s\.,:;?!]/;function Ym(t,{from:e,to:n}){let o=t.state.doc.lineAt(e),i=t.state.doc.lineAt(n).to,r=Math.max(o.from,e-Xm),s=Math.min(i,n+Xm),a=t.state.sliceDoc(r,s);if(r!=o.from)for(let t=0;t<Xm;t++)if(!Lm.test(a[t+1])&&Lm.test(a[t])){a=a.slice(t);break}if(s!=i)for(let t=a.length-1;t>a.length-Xm;t--)if(!Lm.test(a[t-1])&&Lm.test(a[t])){a=a.slice(0,t);break}return fc.announce.of(`${t.state.phrase("current match")}. ${a} ${t.state.phrase("on line")} ${o.number}.`)}const zm=fc.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),qm=[wm,pi.low(Pm),zm];class Um{constructor(t,e,n){this.state=t,this.pos=e,this.explicit=n,this.abortListeners=[]}tokenBefore(t){let e=Zp(this.state).resolveInner(this.pos,-1);for(;e&&t.indexOf(e.name)<0;)e=e.parent;return e?{from:e.from,to:this.pos,text:this.state.sliceDoc(e.from,this.pos),type:e.type}:null}matchBefore(t){let e=this.state.doc.lineAt(this.pos),n=Math.max(e.from,this.pos-250),o=e.text.slice(n-e.from,this.pos-e.from),i=o.search(Km(t,!1));return i<0?null:{from:n+i,to:this.pos,text:o.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(t,e){"abort"==t&&this.abortListeners&&this.abortListeners.push(e)}}function Bm(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function Fm(t){let e=t.map((t=>"string"==typeof t?{label:t}:t)),[n,o]=e.every((t=>/^\w+$/.test(t.label)))?[/\w*$/,/\w+$/]:function(t){let e=Object.create(null),n=Object.create(null);for(let{label:o}of t){e[o[0]]=!0;for(let t=1;t<o.length;t++)n[o[t]]=!0}let o=Bm(e)+Bm(n)+"*$";return[new RegExp("^"+o),new RegExp(o)]}(e);return t=>{let i=t.matchBefore(o);return i||t.explicit?{from:i?i.from:t.pos,options:e,validFor:n}:null}}class Gm{constructor(t,e,n,o){this.completion=t,this.source=e,this.match=n,this.score=o}}function Hm(t){return t.selection.main.from}function Km(t,e){var n;let{source:o}=t,i=e&&"^"!=o[0],r="$"!=o[o.length-1];return i||r?new RegExp(`${i?"^":""}(?:${o})${r?"$":""}`,null!==(n=t.flags)&&void 0!==n?n:t.ignoreCase?"i":""):t}const Jm=Pi.define();const tv=new WeakMap;function ev(t){if(!Array.isArray(t))return t;let e=tv.get(t);return e||tv.set(t,e=Fm(t)),e}const nv=Ei.define(),ov=Ei.define();class iv{constructor(t){this.pattern=t,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let e=0;e<t.length;){let n=Mo(t,e),o=Do(n);this.chars.push(n);let i=t.slice(e,e+o),r=i.toUpperCase();this.folded.push(Mo(r==i?i.toLowerCase():r,0)),e+=o}this.astral=t.length!=this.chars.length}ret(t,e){return this.score=t,this.matched=e,!0}match(t){if(0==this.pattern.length)return this.ret(-100,[]);if(t.length<this.pattern.length)return!1;let{chars:e,folded:n,any:o,precise:i,byWord:r}=this;if(1==e.length){let o=Mo(t,0),i=Do(o),r=i==t.length?0:-100;if(o==e[0]);else{if(o!=n[0])return!1;r+=-200}return this.ret(r,[0,i])}let s=t.indexOf(this.pattern);if(0==s)return this.ret(t.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=e.length,l=0;if(s<0){for(let i=0,r=Math.min(t.length,200);i<r&&l<a;){let r=Mo(t,i);r!=e[l]&&r!=n[l]||(o[l++]=i),i+=Do(r)}if(l<a)return!1}let c=0,u=0,h=!1,p=0,d=-1,f=-1,g=/[a-z]/.test(t),m=!0;for(let o=0,l=Math.min(t.length,200),v=0;o<l&&u<a;){let l=Mo(t,o);s<0&&(c<a&&l==e[c]&&(i[c++]=o),p<a&&(l==e[p]||l==n[p]?(0==p&&(d=o),f=o+1,p++):p=0));let y,_=l<255?l>=48&&l<=57||l>=97&&l<=122?2:l>=65&&l<=90?1:0:(y=Vo(l))!=y.toLowerCase()?1:y!=y.toUpperCase()?2:0;(!o||1==_&&g||0==v&&0!=_)&&(e[u]==l||n[u]==l&&(h=!0)?r[u++]=o:r.length&&(m=!1)),v=_,o+=Do(l)}return u==a&&0==r[0]&&m?this.result(-100+(h?-200:0),r,t):p==a&&0==d?this.ret(-200-t.length+(f==t.length?0:-100),[0,f]):s>-1?this.ret(-700-t.length,[s,s+this.pattern.length]):p==a?this.ret(-200+-700-t.length,[d,f]):u==a?this.result(-100+(h?-200:0)+-700+(m?0:-1100),r,t):2!=e.length&&this.result((o[0]?-700:0)+-200+-1100,o,t)}result(t,e,n){let o=[],i=0;for(let t of e){let e=t+(this.astral?Do(Mo(n,t)):1);i&&o[i-1]==t?o[i-1]=e:(o[i++]=t,o[i++]=e)}return this.ret(t-n.length,o)}}const rv=Jo.define({combine:t=>Xi(t,{activateOnTyping:!0,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:av,compareCompletions:(t,e)=>t.label.localeCompare(e.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(t,e)=>t&&e,closeOnBlur:(t,e)=>t&&e,icons:(t,e)=>t&&e,tooltipClass:(t,e)=>n=>sv(t(n),e(n)),optionClass:(t,e)=>n=>sv(t(n),e(n)),addToOptions:(t,e)=>t.concat(e)})});function sv(t,e){return t?e?t+" "+e:t:e}function av(t,e,n,o,i,r){let s,a,l=t.textDirection==ha.RTL,c=l,u=!1,h="top",p=e.left-i.left,d=i.right-e.right,f=o.right-o.left,g=o.bottom-o.top;if(c&&p<Math.min(f,d)?c=!1:!c&&d<Math.min(f,p)&&(c=!0),f<=(c?p:d))s=Math.max(i.top,Math.min(n.top,i.bottom-g))-e.top,a=Math.min(400,c?p:d);else{u=!0,a=Math.min(400,(l?e.right:i.right-e.left)-30);let t=i.bottom-e.bottom;t>=g||t>e.top?s=n.bottom-e.top:(h="bottom",s=e.bottom-n.top)}return{style:`${h}: ${s/((e.bottom-e.top)/r.offsetHeight)}px; max-width: ${a/((e.right-e.left)/r.offsetWidth)}px`,class:"cm-completionInfo-"+(u?l?"left-narrow":"right-narrow":c?"left":"right")}}function lv(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let t=Math.floor(e/n);return{from:t*n,to:(t+1)*n}}let o=Math.floor((t-e)/n);return{from:t-(o+1)*n,to:t-o*n}}class cv{constructor(t,e,n){this.view=t,this.stateField=e,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:t=>this.placeInfo(t),key:this},this.space=null,this.currentClass="";let o=t.state.field(e),{options:i,selected:r}=o.open,s=t.state.facet(rv);this.optionContent=function(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(t){let e=document.createElement("div");return e.classList.add("cm-completionIcon"),t.type&&e.classList.add(...t.type.split(/\s+/g).map((t=>"cm-completionIcon-"+t))),e.setAttribute("aria-hidden","true"),e},position:20}),e.push({render(t,e,n,o){let i=document.createElement("span");i.className="cm-completionLabel";let r=t.displayLabel||t.label,s=0;for(let t=0;t<o.length;){let e=o[t++],n=o[t++];e>s&&i.appendChild(document.createTextNode(r.slice(s,e)));let a=i.appendChild(document.createElement("span"));a.appendChild(document.createTextNode(r.slice(e,n))),a.className="cm-completionMatchedText",s=n}return s<r.length&&i.appendChild(document.createTextNode(r.slice(s))),i},position:50},{render(t){if(!t.detail)return null;let e=document.createElement("span");return e.className="cm-completionDetail",e.textContent=t.detail,e},position:80}),e.sort(((t,e)=>t.position-e.position)).map((t=>t.render))}(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=lv(i.length,r,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(t.state),this.dom.addEventListener("mousedown",(n=>{let{options:o}=t.state.field(e).open;for(let e,i=n.target;i&&i!=this.dom;i=i.parentNode)if("LI"==i.nodeName&&(e=/-(\d+)$/.exec(i.id))&&+e[1]<o.length)return this.applyCompletion(t,o[+e[1]]),void n.preventDefault()})),this.dom.addEventListener("focusout",(e=>{let n=t.state.field(this.stateField,!1);n&&n.tooltip&&t.state.facet(rv).closeOnBlur&&e.relatedTarget!=t.contentDOM&&t.dispatch({effects:ov.of(null)})})),this.showOptions(i,o.id)}mount(){this.updateSel()}showOptions(t,e){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(t,e,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))}update(t){var e;let n=t.state.field(this.stateField),o=t.startState.field(this.stateField);if(this.updateTooltipClass(t.state),n!=o){let{options:i,selected:r,disabled:s}=n.open;o.open&&o.open.options==i||(this.range=lv(i.length,r,t.state.facet(rv).maxRenderedOptions),this.showOptions(i,n.id)),this.updateSel(),s!=(null===(e=o.open)||void 0===e?void 0:e.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(t){let e=this.tooltipClass(t);if(e!=this.currentClass){for(let t of this.currentClass.split(" "))t&&this.dom.classList.remove(t);for(let t of e.split(" "))t&&this.dom.classList.add(t);this.currentClass=e}}positioned(t){this.space=t,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let t=this.view.state.field(this.stateField),e=t.open;if((e.selected>-1&&e.selected<this.range.from||e.selected>=this.range.to)&&(this.range=lv(e.options.length,e.selected,this.view.state.facet(rv).maxRenderedOptions),this.showOptions(e.options,t.id)),this.updateSelectedOption(e.selected)){this.destroyInfo();let{completion:n}=e.options[e.selected],{info:o}=n;if(!o)return;let i="string"==typeof o?document.createTextNode(o):o(n);if(!i)return;"then"in i?i.then((e=>{e&&this.view.state.field(this.stateField,!1)==t&&this.addInfoPane(e,n)})).catch((t=>Bs(this.view.state,t,"completion info"))):this.addInfoPane(i,n)}}addInfoPane(t,e){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",null!=t.nodeType)n.appendChild(t),this.infoDestroy=null;else{let{dom:e,destroy:o}=t;n.appendChild(e),this.infoDestroy=o||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(t){let e=null;for(let n=this.list.firstChild,o=this.range.from;n;n=n.nextSibling,o++)"LI"==n.nodeName&&n.id?o==t?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),e=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):o--;return e&&function(t,e){let n=t.getBoundingClientRect(),o=e.getBoundingClientRect(),i=n.height/t.offsetHeight;o.top<n.top?t.scrollTop-=(n.top-o.top)/i:o.bottom>n.bottom&&(t.scrollTop+=(o.bottom-n.bottom)/i)}(this.list,e),e}measureInfo(){let t=this.dom.querySelector("[aria-selected]");if(!t||!this.info)return null;let e=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),o=t.getBoundingClientRect(),i=this.space;if(!i){let t=this.dom.ownerDocument.defaultView||window;i={left:0,top:0,right:t.innerWidth,bottom:t.innerHeight}}return o.top>Math.min(i.bottom,e.bottom)-10||o.bottom<Math.max(i.top,e.top)+10?null:this.view.state.facet(rv).positionInfo(this.view,e,o,n,i,this.dom)}placeInfo(t){this.info&&(t?(t.style&&(this.info.style.cssText=t.style),this.info.className="cm-tooltip cm-completionInfo "+(t.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(t,e,n){const o=document.createElement("ul");o.id=e,o.setAttribute("role","listbox"),o.setAttribute("aria-expanded","true"),o.setAttribute("aria-label",this.view.state.phrase("Completions"));let i=null;for(let r=n.from;r<n.to;r++){let{completion:s,match:a}=t[r],{section:l}=s;if(l){let t="string"==typeof l?l:l.name;if(t!=i&&(r>n.from||0==n.from))if(i=t,"string"!=typeof l&&l.header)o.appendChild(l.header(l));else{o.appendChild(document.createElement("completion-section")).textContent=t}}const c=o.appendChild(document.createElement("li"));c.id=e+"-"+r,c.setAttribute("role","option");let u=this.optionClass(s);u&&(c.className=u);for(let t of this.optionContent){let e=t(s,this.view.state,this.view,a);e&&c.appendChild(e)}}return n.from&&o.classList.add("cm-completionListIncompleteTop"),n.to<t.length&&o.classList.add("cm-completionListIncompleteBottom"),o}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function uv(t,e){return n=>new cv(n,t,e)}function hv(t){return 100*(t.boost||0)+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}class pv{constructor(t,e,n,o,i,r){this.options=t,this.attrs=e,this.tooltip=n,this.timestamp=o,this.selected=i,this.disabled=r}setSelected(t,e){return t==this.selected||t>=this.options.length?this:new pv(this.options,gv(e,t),this.tooltip,this.timestamp,t,this.disabled)}static build(t,e,n,o,i){let r=function(t,e){let n=[],o=null,i=t=>{n.push(t);let{section:e}=t.completion;if(e){o||(o=[]);let t="string"==typeof e?e:e.name;o.some((e=>e.name==t))||o.push("string"==typeof e?{name:t}:e)}};for(let o of t)if(o.hasResult()){let t=o.result.getMatch;if(!1===o.result.filter)for(let e of o.result.options)i(new Gm(e,o.source,t?t(e):[],1e9-n.length));else{let n=new iv(e.sliceDoc(o.from,o.to));for(let e of o.result.options)if(n.match(e.label)){let r=e.displayLabel?t?t(e,n.matched):[]:n.matched;i(new Gm(e,o.source,r,n.score+(e.boost||0)))}}}if(o){let t=Object.create(null),e=0,i=(t,e)=>{var n,o;return(null!==(n=t.rank)&&void 0!==n?n:1e9)-(null!==(o=e.rank)&&void 0!==o?o:1e9)||(t.name<e.name?-1:1)};for(let n of o.sort(i))e-=1e5,t[n.name]=e;for(let e of n){let{section:n}=e.completion;n&&(e.score+=t["string"==typeof n?n:n.name])}}let r=[],s=null,a=e.facet(rv).compareCompletions;for(let t of n.sort(((t,e)=>e.score-t.score||a(t.completion,e.completion)))){let e=t.completion;!s||s.label!=e.label||s.detail!=e.detail||null!=s.type&&null!=e.type&&s.type!=e.type||s.apply!=e.apply||s.boost!=e.boost?r.push(t):hv(t.completion)>hv(s)&&(r[r.length-1]=t),s=t.completion}return r}(t,e);if(!r.length)return o&&t.some((t=>1==t.state))?new pv(o.options,o.attrs,o.tooltip,o.timestamp,o.selected,!0):null;let s=e.facet(rv).selectOnOpen?0:-1;if(o&&o.selected!=s&&-1!=o.selected){let t=o.options[o.selected].completion;for(let e=0;e<r.length;e++)if(r[e].completion==t){s=e;break}}return new pv(r,gv(n,s),{pos:t.reduce(((t,e)=>e.hasResult()?Math.min(t,e.from):t),1e8),create:Sv,above:i.aboveCursor},o?o.timestamp:Date.now(),s,!1)}map(t){return new pv(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:t.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}}class dv{constructor(t,e,n){this.active=t,this.id=e,this.open=n}static start(){return new dv(mv,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(t){let{state:e}=t,n=e.facet(rv),o=(n.override||e.languageDataAt("autocomplete",Hm(e)).map(ev)).map((e=>{let o=this.active.find((t=>t.source==e))||new yv(e,this.active.some((t=>0!=t.state))?1:0);return o.update(t,n)}));o.length==this.active.length&&o.every(((t,e)=>t==this.active[e]))&&(o=this.active);let i=this.open;i&&t.docChanged&&(i=i.map(t.changes)),t.selection||o.some((e=>e.hasResult()&&t.changes.touchesRange(e.from,e.to)))||!function(t,e){if(t==e)return!0;for(let n=0,o=0;;){for(;n<t.length&&!t[n].hasResult;)n++;for(;o<e.length&&!e[o].hasResult;)o++;let i=n==t.length,r=o==e.length;if(i||r)return i==r;if(t[n++].result!=e[o++].result)return!1}}(o,this.active)?i=pv.build(o,e,this.id,i,n):i&&i.disabled&&!o.some((t=>1==t.state))&&(i=null),!i&&o.every((t=>1!=t.state))&&o.some((t=>t.hasResult()))&&(o=o.map((t=>t.hasResult()?new yv(t.source,0):t)));for(let e of t.effects)e.is(bv)&&(i=i&&i.setSelected(e.value,this.id));return o==this.active&&i==this.open?this:new dv(o,this.id,i)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:fv}}const fv={"aria-autocomplete":"list"};function gv(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const mv=[];function vv(t){return t.isUserEvent("input.type")?"input":t.isUserEvent("delete.backward")?"delete":null}class yv{constructor(t,e,n=-1){this.source=t,this.state=e,this.explicitPos=n}hasResult(){return!1}update(t,e){let n=vv(t),o=this;n?o=o.handleUserEvent(t,n,e):t.docChanged?o=o.handleChange(t):t.selection&&0!=o.state&&(o=new yv(o.source,0));for(let e of t.effects)if(e.is(nv))o=new yv(o.source,1,e.value?Hm(t.state):-1);else if(e.is(ov))o=new yv(o.source,0);else if(e.is(Ov))for(let t of e.value)t.source==o.source&&(o=t);return o}handleUserEvent(t,e,n){return"delete"!=e&&n.activateOnTyping?new yv(this.source,1):this.map(t.changes)}handleChange(t){return t.changes.touchesRange(Hm(t.startState))?new yv(this.source,0):this.map(t.changes)}map(t){return t.empty||this.explicitPos<0?this:new yv(this.source,this.state,t.mapPos(this.explicitPos))}}class _v extends yv{constructor(t,e,n,o,i){super(t,2,e),this.result=n,this.from=o,this.to=i}hasResult(){return!0}handleUserEvent(t,e,n){var o;let i=t.changes.mapPos(this.from),r=t.changes.mapPos(this.to,1),s=Hm(t.state);if((this.explicitPos<0?s<=i:s<this.from)||s>r||"delete"==e&&Hm(t.startState)==this.from)return new yv(this.source,"input"==e&&n.activateOnTyping?1:0);let a,l=this.explicitPos<0?-1:t.changes.mapPos(this.explicitPos);return function(t,e,n,o){if(!t)return!1;let i=e.sliceDoc(n,o);return"function"==typeof t?t(i,n,o,e):Km(t,!0).test(i)}(this.result.validFor,t.state,i,r)?new _v(this.source,l,this.result,i,r):this.result.update&&(a=this.result.update(this.result,i,r,new Um(t.state,s,l>=0)))?new _v(this.source,l,a,a.from,null!==(o=a.to)&&void 0!==o?o:Hm(t.state)):new yv(this.source,1,l)}handleChange(t){return t.changes.touchesRange(this.from,this.to)?new yv(this.source,0):this.map(t.changes)}map(t){return t.empty?this:new _v(this.source,this.explicitPos<0?-1:t.mapPos(this.explicitPos),this.result,t.mapPos(this.from),t.mapPos(this.to,1))}}const Ov=Ei.define({map:(t,e)=>t.map((t=>t.map(e)))}),bv=Ei.define(),wv=si.define({create:()=>dv.start(),update:(t,e)=>t.update(e),provide:t=>[bu.from(t,(t=>t.tooltip)),fc.contentAttributes.from(t,(t=>t.attrs))]});function xv(t,e){const n=e.completion.apply||e.completion.label;let o=t.state.field(wv).active.find((t=>t.source==e.source));return o instanceof _v&&("string"==typeof n?t.dispatch(Object.assign(Object.assign({},function(t,e,n,o){let{main:i}=t.selection,r=n-i.from,s=o-i.from;return Object.assign(Object.assign({},t.changeByRange((a=>a!=i&&n!=o&&t.sliceDoc(a.from+r,a.from+s)!=t.sliceDoc(n,o)?{range:a}:{changes:{from:a.from+r,to:o==i.from?a.to:a.from+s,insert:e},range:Go.cursor(a.from+r+e.length)}))),{scrollIntoView:!0,userEvent:"input.complete"})}(t.state,n,o.from,o.to)),{annotations:Jm.of(e.completion)})):n(t,e.completion,o.from,o.to),!0)}const Sv=uv(wv,xv);function kv(t,e="option"){return n=>{let o=n.state.field(wv,!1);if(!o||!o.open||o.open.disabled||Date.now()-o.open.timestamp<n.state.facet(rv).interactionDelay)return!1;let i,r=1;"page"==e&&(i=Tu(n,o.open.tooltip))&&(r=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let{length:s}=o.open.options,a=o.open.selected>-1?o.open.selected+r*(t?1:-1):t?0:s-1;return a<0?a="page"==e?0:s-1:a>=s&&(a="page"==e?s-1:0),n.dispatch({effects:bv.of(a)}),!0}}class Pv{constructor(t,e){this.active=t,this.context=e,this.time=Date.now(),this.updates=[],this.done=void 0}}const Cv=50,Tv=1e3,Ev=Ks.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let e of t.state.field(wv).active)1==e.state&&this.startQuery(e)}update(t){let e=t.state.field(wv);if(!t.selectionSet&&!t.docChanged&&t.startState.field(wv)==e)return;let n=t.transactions.some((t=>(t.selection||t.docChanged)&&!vv(t)));for(let e=0;e<this.running.length;e++){let o=this.running[e];if(n||o.updates.length+t.transactions.length>Cv&&Date.now()-o.time>Tv){for(let t of o.context.abortListeners)try{t()}catch(t){Bs(this.view.state,t)}o.context.abortListeners=null,this.running.splice(e--,1)}else o.updates.push(...t.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=e.active.some((t=>1==t.state&&!this.running.some((e=>e.active.source==t.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let e of t.transactions)"input"==vv(e)?this.composing=2:2==this.composing&&e.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:t}=this.view,e=t.field(wv);for(let t of e.active)1!=t.state||this.running.some((e=>e.active.source==t.source))||this.startQuery(t)}startQuery(t){let{state:e}=this.view,n=Hm(e),o=new Um(e,n,t.explicitPos==n),i=new Pv(t,o);this.running.push(i),Promise.resolve(t.source(o)).then((t=>{i.context.aborted||(i.done=t||null,this.scheduleAccept())}),(t=>{this.view.dispatch({effects:ov.of(null)}),Bs(this.view.state,t)}))}scheduleAccept(){this.running.every((t=>void 0!==t.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),this.view.state.facet(rv).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(rv);for(let o=0;o<this.running.length;o++){let i=this.running[o];if(void 0===i.done)continue;if(this.running.splice(o--,1),i.done){let o=new _v(i.active.source,i.active.explicitPos,i.done,i.done.from,null!==(t=i.done.to)&&void 0!==t?t:Hm(i.updates.length?i.updates[0].startState:this.view.state));for(let t of i.updates)o=o.update(t,n);if(o.hasResult()){e.push(o);continue}}let r=this.view.state.field(wv).active.find((t=>t.source==i.active.source));if(r&&1==r.state)if(null==i.done){let t=new yv(i.active.source,0);for(let e of i.updates)t=t.update(e,n);1!=t.state&&e.push(t)}else this.startQuery(r)}e.length&&this.view.dispatch({effects:Ov.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(wv,!1);if(e&&e.tooltip&&this.view.state.facet(rv).closeOnBlur){let n=e.open&&Tu(this.view,e.open.tooltip);n&&n.dom.contains(t.relatedTarget)||this.view.dispatch({effects:ov.of(null)})}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:nv.of(!1)})),20),this.composing=0}}}),Qv=fc.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:`${400}px`,boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:`${30}px`},".cm-completionInfo.cm-completionInfo-right-narrow":{left:`${30}px`},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class Av{constructor(t,e,n,o){this.field=t,this.line=e,this.from=n,this.to=o}}class $v{constructor(t,e,n){this.field=t,this.from=e,this.to=n}map(t){let e=t.mapPos(this.from,-1,No.TrackDel),n=t.mapPos(this.to,1,No.TrackDel);return null==e||null==n?null:new $v(this.field,e,n)}}class jv{constructor(t,e){this.lines=t,this.fieldPositions=e}instantiate(t,e){let n=[],o=[e],i=t.doc.lineAt(e),r=/^\s*/.exec(i.text)[0];for(let i of this.lines){if(n.length){let n=r,s=/^\t*/.exec(i)[0].length;for(let e=0;e<s;e++)n+=t.facet(Up);o.push(e+n.length-s),i=n+i.slice(s)}n.push(i),e+=i.length+1}let s=this.fieldPositions.map((t=>new $v(t.field,o[t.line]+t.from,o[t.line]+t.to)));return{text:n,ranges:s}}static parse(t){let e,n=[],o=[],i=[];for(let r of t.split(/\r\n?|\n/)){for(;e=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(r);){let t=e[1]?+e[1]:null,s=e[2]||e[3]||"",a=-1;for(let e=0;e<n.length;e++)(null!=t?n[e].seq==t:s&&n[e].name==s)&&(a=e);if(a<0){let e=0;for(;e<n.length&&(null==t||null!=n[e].seq&&n[e].seq<t);)e++;n.splice(e,0,{seq:t,name:s}),a=e;for(let t of i)t.field>=a&&t.field++}i.push(new Av(a,o.length,e.index,e.index+s.length)),r=r.slice(0,e.index)+s+r.slice(e.index+e[0].length)}for(let t;t=/\\([{}])/.exec(r);){r=r.slice(0,t.index)+t[1]+r.slice(t.index+t[0].length);for(let e of i)e.line==o.length&&e.from>t.index&&(e.from--,e.to--)}o.push(r)}return new jv(o,i)}}let Rv=Ts.widget({widget:new class extends Ps{toDOM(){let t=document.createElement("span");return t.className="cm-snippetFieldPosition",t}ignoreEvent(){return!1}}}),Zv=Ts.mark({class:"cm-snippetField"});class Mv{constructor(t,e){this.ranges=t,this.active=e,this.deco=Ts.set(t.map((t=>(t.from==t.to?Rv:Zv).range(t.from,t.to))))}map(t){let e=[];for(let n of this.ranges){let o=n.map(t);if(!o)return null;e.push(o)}return new Mv(e,this.active)}selectionInsideField(t){return t.ranges.every((t=>this.ranges.some((e=>e.field==this.active&&e.from<=t.from&&e.to>=t.to))))}}const Vv=Ei.define({map:(t,e)=>t&&t.map(e)}),Dv=Ei.define(),Iv=si.define({create:()=>null,update(t,e){for(let n of e.effects){if(n.is(Vv))return n.value;if(n.is(Dv)&&t)return new Mv(t.ranges,n.value)}return t&&e.docChanged&&(t=t.map(e.changes)),t&&e.selection&&!t.selectionInsideField(e.selection)&&(t=null),t},provide:t=>fc.decorations.from(t,(t=>t?t.deco:Ts.none))});function Nv(t,e){return Go.create(t.filter((t=>t.field==e)).map((t=>Go.range(t.from,t.to))))}function Wv(t){let e=jv.parse(t);return(t,n,o,i)=>{let{text:r,ranges:s}=e.instantiate(t.state,o),a={changes:{from:o,to:i,insert:vo.of(r)},scrollIntoView:!0,annotations:n?Jm.of(n):void 0};if(s.length&&(a.selection=Nv(s,0)),s.length>1){let e=new Mv(s,0),n=a.effects=[Vv.of(e)];void 0===t.state.field(Iv,!1)&&n.push(Ei.appendConfig.of([Iv,zv,Uv,Qv]))}t.dispatch(t.state.update(a))}}function Xv(t){return({state:e,dispatch:n})=>{let o=e.field(Iv,!1);if(!o||t<0&&0==o.active)return!1;let i=o.active+t,r=t>0&&!o.ranges.some((e=>e.field==i+t));return n(e.update({selection:Nv(o.ranges,i),effects:Vv.of(r?null:new Mv(o.ranges,i)),scrollIntoView:!0})),!0}}const Lv=[{key:"Tab",run:Xv(1),shift:Xv(-1)},{key:"Escape",run:({state:t,dispatch:e})=>!!t.field(Iv,!1)&&(e(t.update({effects:Vv.of(null)})),!0)}],Yv=Jo.define({combine:t=>t.length?t[0]:Lv}),zv=pi.highest(wc.compute([Yv],(t=>t.facet(Yv))));function qv(t,e){return Object.assign(Object.assign({},e),{apply:Wv(t)})}const Uv=fc.domEventHandlers({mousedown(t,e){let n,o=e.state.field(Iv,!1);if(!o||null==(n=e.posAtCoords({x:t.clientX,y:t.clientY})))return!1;let i=o.ranges.find((t=>t.from<=n&&t.to>=n));return!(!i||i.field==o.active)&&(e.dispatch({selection:Nv(o.ranges,i.field),effects:Vv.of(o.ranges.some((t=>t.field>i.field))?new Mv(o.ranges,i.field):null),scrollIntoView:!0}),!0)}});null&&Object.create(null);const Bv={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Fv=Ei.define({map(t,e){let n=e.mapPos(t,-1,No.TrackAfter);return null==n?void 0:n}}),Gv=new class extends Li{};Gv.startSide=1,Gv.endSide=-1;const Hv=si.define({create:()=>Ui.empty,update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:t=>t>=n.from&&t<=n.to})}for(let n of e.effects)n.is(Fv)&&(t=t.update({add:[Gv.range(n.value,n.value+1)]}));return t}});const Kv="()[]{}<>";function Jv(t){for(let e=0;e<Kv.length;e+=2)if(Kv.charCodeAt(e)==t)return Kv.charAt(e+1);return Vo(t<128?t:t+1)}function ty(t,e){return t.languageDataAt("closeBrackets",e)[0]||Bv}const ey="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),ny=fc.inputHandler.of(((t,e,n,o)=>{if((ey?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let i=t.state.selection.main;if(o.length>2||2==o.length&&1==Do(Mo(o,0))||e!=i.from||n!=i.to)return!1;let r=function(t,e){let n=ty(t,t.selection.main.head),o=n.brackets||Bv.brackets;for(let i of o){let r=Jv(Mo(i,0));if(e==i)return r==i?ly(t,i,o.indexOf(i+i+i)>-1,n):sy(t,i,r,n.before||Bv.before);if(e==r&&iy(t,t.selection.main.from))return ay(t,i,r)}return null}(t.state,o);return!!r&&(t.dispatch(r),!0)})),oy=[{key:"Backspace",run:({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=ty(t,t.selection.main.head).brackets||Bv.brackets,o=null,i=t.changeByRange((e=>{if(e.empty){let o=function(t,e){let n=t.sliceString(e-2,e);return Do(Mo(n,0))==n.length?n:n.slice(1)}(t.doc,e.head);for(let i of n)if(i==o&&ry(t.doc,e.head)==Jv(Mo(i,0)))return{changes:{from:e.head-i.length,to:e.head+i.length},range:Go.cursor(e.head-i.length)}}return{range:o=e}}));return o||e(t.update(i,{scrollIntoView:!0,userEvent:"delete.backward"})),!o}}];function iy(t,e){let n=!1;return t.field(Hv).between(0,t.doc.length,(t=>{t==e&&(n=!0)})),n}function ry(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Do(Mo(n,0)))}function sy(t,e,n,o){let i=null,r=t.changeByRange((r=>{if(!r.empty)return{changes:[{insert:e,from:r.from},{insert:n,from:r.to}],effects:Fv.of(r.to+e.length),range:Go.range(r.anchor+e.length,r.head+e.length)};let s=ry(t.doc,r.head);return!s||/\s/.test(s)||o.indexOf(s)>-1?{changes:{insert:e+n,from:r.head},effects:Fv.of(r.head+e.length),range:Go.cursor(r.head+e.length)}:{range:i=r}}));return i?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function ay(t,e,n){let o=null,i=t.changeByRange((e=>e.empty&&ry(t.doc,e.head)==n?{changes:{from:e.head,to:e.head+n.length,insert:n},range:Go.cursor(e.head+n.length)}:o={range:e}));return o?null:t.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function ly(t,e,n,o){let i=o.stringPrefixes||Bv.stringPrefixes,r=null,s=t.changeByRange((o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:e,from:o.to}],effects:Fv.of(o.to+e.length),range:Go.range(o.anchor+e.length,o.head+e.length)};let s,a=o.head,l=ry(t.doc,a);if(l==e){if(cy(t,a))return{changes:{insert:e+e,from:a},effects:Fv.of(a+e.length),range:Go.cursor(a+e.length)};if(iy(t,a)){let o=n&&t.sliceDoc(a,a+3*e.length)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+o.length,insert:o},range:Go.cursor(a+o.length)}}}else{if(n&&t.sliceDoc(a-2*e.length,a)==e+e&&(s=uy(t,a-2*e.length,i))>-1&&cy(t,s))return{changes:{insert:e+e+e+e,from:a},effects:Fv.of(a+e.length),range:Go.cursor(a+e.length)};if(t.charCategorizer(a)(l)!=Vi.Word&&uy(t,a,i)>-1&&!function(t,e,n,o){let i=Zp(t).resolveInner(e,-1),r=o.reduce(((t,e)=>Math.max(t,e.length)),0);for(let s=0;s<5;s++){let s=t.sliceDoc(i.from,Math.min(i.to,i.from+n.length+r)),a=s.indexOf(n);if(!a||a>-1&&o.indexOf(s.slice(0,a))>-1){let e=i.firstChild;for(;e&&e.from==i.from&&e.to-e.from>n.length+a;){if(t.sliceDoc(e.to-n.length,e.to)==n)return!1;e=e.firstChild}return!0}let l=i.to==e&&i.parent;if(!l)break;i=l}return!1}(t,a,e,i))return{changes:{insert:e+e,from:a},effects:Fv.of(a+e.length),range:Go.cursor(a+e.length)}}return{range:r=o}}));return r?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function cy(t,e){let n=Zp(t).resolveInner(e+1);return n.parent&&n.from==e}function uy(t,e,n){let o=t.charCategorizer(e);if(o(t.sliceDoc(e-1,e))!=Vi.Word)return e;for(let i of n){let n=e-i.length;if(t.sliceDoc(n,e)==i&&o(t.sliceDoc(n-1,n))!=Vi.Word)return n}return-1}function hy(t={}){return[wv,rv.of(t),Ev,dy,Qv]}const py=[{key:"Ctrl-Space",run:t=>!!t.state.field(wv,!1)&&(t.dispatch({effects:nv.of(!0)}),!0)},{key:"Escape",run:t=>{let e=t.state.field(wv,!1);return!(!e||!e.active.some((t=>0!=t.state)))&&(t.dispatch({effects:ov.of(null)}),!0)}},{key:"ArrowDown",run:kv(!0)},{key:"ArrowUp",run:kv(!1)},{key:"PageDown",run:kv(!0,"page")},{key:"PageUp",run:kv(!1,"page")},{key:"Enter",run:t=>{let e=t.state.field(wv,!1);return!(t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(rv).interactionDelay)&&xv(t,e.open.options[e.open.selected])}}],dy=pi.highest(wc.computeN([rv],(t=>t.facet(rv).defaultKeymap?[py]:[])));class fy{constructor(t,e,n){this.from=t,this.to=e,this.diagnostic=n}}class gy{constructor(t,e,n){this.diagnostics=t,this.panel=e,this.selected=n}static init(t,e,n){let o=t,i=n.facet(Ty).markerFilter;i&&(o=i(o));let r=Ts.set(o.map((t=>t.from==t.to||t.from==t.to-1&&n.doc.lineAt(t.from).to==t.from?Ts.widget({widget:new Ay(t),diagnostic:t}).range(t.from):Ts.mark({attributes:{class:"cm-lintRange cm-lintRange-"+t.severity+(t.markClass?" "+t.markClass:"")},diagnostic:t}).range(t.from,t.to))),!0);return new gy(r,e,my(r))}}function my(t,e=null,n=0){let o=null;return t.between(n,1e9,((t,n,{spec:i})=>{if(!e||i.diagnostic==e)return o=new fy(t,n,i.diagnostic),!1})),o}function vy(t,e){let n=t.startState.doc.lineAt(e.pos);return!(!t.effects.some((t=>t.is(_y)))&&!t.changes.touchesRange(n.from,n.to))}function yy(t,e){return t.field(wy,!1)?e:e.concat(Ei.appendConfig.of(Vy))}const _y=Ei.define(),Oy=Ei.define(),by=Ei.define(),wy=si.define({create:()=>new gy(Ts.none,null,null),update(t,e){if(e.docChanged){let n=t.diagnostics.map(e.changes),o=null;if(t.selected){let i=e.changes.mapPos(t.selected.from,1);o=my(n,t.selected.diagnostic,i)||my(n,null,i)}t=new gy(n,t.panel,o)}for(let n of e.effects)n.is(_y)?t=gy.init(n.value,t.panel,e.state):n.is(Oy)?t=new gy(t.diagnostics,n.value?jy.open:null,t.selected):n.is(by)&&(t=new gy(t.diagnostics,t.panel,n.value));return t},provide:t=>[Zu.from(t,(t=>t.panel)),fc.decorations.from(t,(t=>t.diagnostics))]});const xy=Ts.mark({class:"cm-lintRange cm-lintRange-active"});function Sy(t,e,n){let{diagnostics:o}=t.state.field(wy),i=[],r=2e8,s=0;o.between(e-(n<0?1:0),e+(n>0?1:0),((t,o,{spec:a})=>{e>=t&&e<=o&&(t==o||(e>t||n>0)&&(e<o||n<0))&&(i.push(a.diagnostic),r=Math.min(t,r),s=Math.max(o,s))}));let a=t.state.facet(Ty).tooltipFilter;return a&&(i=a(i)),i.length?{pos:r,end:s,above:t.state.doc.lineAt(r).to<s,create:()=>({dom:ky(t,i)})}:null}function ky(t,e){return Xg("ul",{class:"cm-tooltip-lint"},e.map((e=>Qy(t,e,!1))))}const Py=t=>{let e=t.state.field(wy,!1);return!(!e||!e.panel)&&(t.dispatch({effects:Oy.of(!1)}),!0)},Cy=[{key:"Mod-Shift-m",run:t=>{let e=t.state.field(wy,!1);e&&e.panel||t.dispatch({effects:yy(t.state,[Oy.of(!0)])});let n=Au(t,jy.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:t=>{let e=t.state.field(wy,!1);if(!e)return!1;let n=t.state.selection.main,o=e.diagnostics.iter(n.to+1);return!(!o.value&&(o=e.diagnostics.iter(0),!o.value||o.from==n.from&&o.to==n.to))&&(t.dispatch({selection:{anchor:o.from,head:o.to},scrollIntoView:!0}),!0)}}],Ty=(null&&ViewPlugin.fromClass(class{constructor(t){this.view=t,this.timeout=-1,this.set=!0;let{delay:e}=t.state.facet(Ty);this.lintTime=Date.now()+e,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,e)}run(){let t=Date.now();if(t<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:t}=this.view,{sources:e}=t.facet(Ty);Promise.all(e.map((t=>Promise.resolve(t(this.view))))).then((e=>{let n=e.reduce(((t,e)=>t.concat(e)));this.view.state.doc==t.doc&&this.view.dispatch(function(t,e){return{effects:yy(t,[_y.of(e)])}}(this.view.state,n))}),(t=>{logException(this.view.state,t)}))}}update(t){let e=t.state.facet(Ty);(t.docChanged||e!=t.startState.facet(Ty)||e.needsRefresh&&e.needsRefresh(t))&&(this.lintTime=Date.now()+e.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,e.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),Jo.define({combine:t=>Object.assign({sources:t.map((t=>t.source))},Xi(t.map((t=>t.config)),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null},{needsRefresh:(t,e)=>t?e?n=>t(n)||e(n):t:e}))}));function Ey(t){let e=[];if(t)t:for(let{name:n}of t){for(let t=0;t<n.length;t++){let o=n[t];if(/[a-zA-Z]/.test(o)&&!e.some((t=>t.toLowerCase()==o.toLowerCase()))){e.push(o);continue t}}e.push("")}return e}function Qy(t,e,n){var o;let i=n?Ey(e.actions):[];return Xg("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},Xg("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage():e.message),null===(o=e.actions)||void 0===o?void 0:o.map(((n,o)=>{let r=!1,s=o=>{if(o.preventDefault(),r)return;r=!0;let i=my(t.state.field(wy).diagnostics,e);i&&n.apply(t,i.from,i.to)},{name:a}=n,l=i[o]?a.indexOf(i[o]):-1,c=l<0?a:[a.slice(0,l),Xg("u",a.slice(l,l+1)),a.slice(l+1)];return Xg("button",{type:"button",class:"cm-diagnosticAction",onclick:s,onmousedown:s,"aria-label":` Action: ${a}${l<0?"":` (access key "${i[o]})"`}.`},c)})),e.source&&Xg("div",{class:"cm-diagnosticSource"},e.source))}class Ay extends Ps{constructor(t){super(),this.diagnostic=t}eq(t){return t.diagnostic==this.diagnostic}toDOM(){return Xg("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class $y{constructor(t,e){this.diagnostic=e,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=Qy(t,e,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class jy{constructor(t){this.view=t,this.items=[];this.list=Xg("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:e=>{if(27==e.keyCode)Py(this.view),this.view.focus();else if(38==e.keyCode||33==e.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==e.keyCode||34==e.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==e.keyCode)this.moveSelection(0);else if(35==e.keyCode)this.moveSelection(this.items.length-1);else if(13==e.keyCode)this.view.focus();else{if(!(e.keyCode>=65&&e.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],o=Ey(n.actions);for(let i=0;i<o.length;i++)if(o[i].toUpperCase().charCodeAt(0)==e.keyCode){let e=my(this.view.state.field(wy).diagnostics,n);e&&n.actions[i].apply(t,e.from,e.to)}}}e.preventDefault()},onclick:t=>{for(let e=0;e<this.items.length;e++)this.items[e].dom.contains(t.target)&&this.moveSelection(e)}}),this.dom=Xg("div",{class:"cm-panel-lint"},this.list,Xg("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Py(this.view)},"×")),this.update()}get selectedIndex(){let t=this.view.state.field(wy).selected;if(!t)return-1;for(let e=0;e<this.items.length;e++)if(this.items[e].diagnostic==t.diagnostic)return e;return-1}update(){let{diagnostics:t,selected:e}=this.view.state.field(wy),n=0,o=!1,i=null;for(t.between(0,this.view.state.doc.length,((t,r,{spec:s})=>{let a,l=-1;for(let t=n;t<this.items.length;t++)if(this.items[t].diagnostic==s.diagnostic){l=t;break}l<0?(a=new $y(this.view,s.diagnostic),this.items.splice(n,0,a),o=!0):(a=this.items[l],l>n&&(this.items.splice(n,l-n),o=!0)),e&&a.diagnostic==e.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),i=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}));n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)o=!0,this.items.pop();0==this.items.length&&(this.items.push(new $y(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),o=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:t,panel:e})=>{let n=e.height/this.list.offsetHeight;t.top<e.top?this.list.scrollTop-=(e.top-t.top)/n:t.bottom>e.bottom&&(this.list.scrollTop+=(t.bottom-e.bottom)/n)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),o&&this.sync()}sync(){let t=this.list.firstChild;function e(){let e=t;t=e.nextSibling,e.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;t!=n.dom;)e();t=n.dom.nextSibling}else this.list.insertBefore(n.dom,t);for(;t;)e()}moveSelection(t){if(this.selectedIndex<0)return;let e=my(this.view.state.field(wy).diagnostics,this.items[t].diagnostic);e&&this.view.dispatch({selection:{anchor:e.from,head:e.to},scrollIntoView:!0,effects:by.of(e)})}static open(t){return new jy(t)}}function Ry(t,e=`viewBox="0 0 40 40"`){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function Zy(t){return Ry(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,`width="6" height="3"`)}const My=fc.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Zy("#d11")},".cm-lintRange-warning":{backgroundImage:Zy("orange")},".cm-lintRange-info":{backgroundImage:Zy("#999")},".cm-lintRange-hint":{backgroundImage:Zy("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});const Vy=[wy,fc.decorations.compute([wy],(t=>{let{selected:e,panel:n}=t.field(wy);return e&&n&&e.from!=e.to?Ts.set([xy.range(e.from,e.to)]):Ts.none})),Cu(Sy,{hideOn:vy}),My];const Dy=(()=>[th(),oh,Jc(),xf(),Ad(),Mc(),[Yc,zc],Wi.allowMultipleSelections.of(!0),Wi.transactionFilter.of((t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:o}=t.newSelection.main,i=n.lineAt(o);if(o>i.from+ad)return t;let r=n.sliceString(i.from,o);if(!e.some((t=>t.test(r))))return t;let{state:s}=t,a=-1,l=[];for(let{head:t}of s.selection.ranges){let e=s.doc.lineAt(t);if(e.from==a)continue;a=e.from;let n=Gp(s,e.from);if(null==n)continue;let o=/^\s*/.exec(e.text)[0],i=Fp(s,n);o!=i&&l.push({from:e.from,to:e.from+o.length,insert:i})}return l.length?[t,{changes:l,sequential:!0}]:t})),Vd(Nd,{fallback:!0}),Gd(),[ny,Hv],hy(),cu(),pu(),ru,rm(),wc.of([...oy,...Wg,...Im,...Wf,...wd,...py,...Cy])])(),Iy=(null&&(highlightSpecialChars(),history(),drawSelection(),syntaxHighlighting(defaultHighlightStyle,{fallback:!0}),keymap.of([...defaultKeymap,...historyKeymap])),"#e5c07b"),Ny="#e06c75",Wy="#56b6c2",Xy="#ffffff",Ly="#abb2bf",Yy="#7d8799",zy="#61afef",qy="#98c379",Uy="#d19a66",By="#c678dd",Fy="#21252b",Gy="#2c313a",Hy="#282c34",Ky="#353a42",Jy="#3E4451",t_="#528bff",e_=fc.theme({"&":{color:Ly,backgroundColor:Hy},".cm-content":{caretColor:t_},".cm-cursor, .cm-dropCursor":{borderLeftColor:t_},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:Jy},".cm-panels":{backgroundColor:Fy,color:Ly},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Hy,color:Yy,border:"none"},".cm-activeLineGutter":{backgroundColor:Gy},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Ky},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Ky,borderBottomColor:Ky},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Gy,color:Ly}}},{dark:!0}),n_=jd.define([{tag:Cp.keyword,color:By},{tag:[Cp.name,Cp.deleted,Cp.character,Cp.propertyName,Cp.macroName],color:Ny},{tag:[Cp.function(Cp.variableName),Cp.labelName],color:zy},{tag:[Cp.color,Cp.constant(Cp.name),Cp.standard(Cp.name)],color:Uy},{tag:[Cp.definition(Cp.name),Cp.separator],color:Ly},{tag:[Cp.typeName,Cp.className,Cp.number,Cp.changed,Cp.annotation,Cp.modifier,Cp.self,Cp.namespace],color:Iy},{tag:[Cp.operator,Cp.operatorKeyword,Cp.url,Cp.escape,Cp.regexp,Cp.link,Cp.special(Cp.string)],color:Wy},{tag:[Cp.meta,Cp.comment],color:Yy},{tag:Cp.strong,fontWeight:"bold"},{tag:Cp.emphasis,fontStyle:"italic"},{tag:Cp.strikethrough,textDecoration:"line-through"},{tag:Cp.link,color:Yy,textDecoration:"underline"},{tag:Cp.heading,fontWeight:"bold",color:Ny},{tag:[Cp.atom,Cp.bool,Cp.special(Cp.variableName)],color:Uy},{tag:[Cp.processingInstruction,Cp.string,Cp.inserted],color:qy},{tag:Cp.invalid,color:Xy}]);class o_{constructor(t,e,n,o,i,r,s,a,l,c=0,u){this.p=t,this.stack=e,this.state=n,this.reducePos=o,this.pos=i,this.score=r,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter(((t,e)=>e%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(t,e,n=0){let o=t.parser.context;return new o_(t,[],e,n,n,0,[],0,o?new i_(o,o.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(t,e){this.stack.push(this.state,e,this.bufferBase+this.buffer.length),this.state=t}reduce(t){var e;let n=t>>19,o=65535&t,{parser:i}=this.p,r=i.dynamicPrecedence(o);if(r&&(this.score+=r),0==n)return this.pushState(i.getGoto(this.state,o,!0),this.reducePos),o<i.minRepeatTerm&&this.storeNode(o,this.reducePos,this.reducePos,4,!0),void this.reduceContext(o,this.reducePos);let s=this.stack.length-3*(n-1)-(262144&t?6:0),a=s?this.stack[s-2]:this.p.ranges[0].from,l=this.reducePos-a;l>=2e3&&!(null===(e=this.p.parser.nodeSet.types[o])||void 0===e?void 0:e.isAnonymous)&&(a==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=l):this.p.lastBigReductionSize<l&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=a,this.p.lastBigReductionSize=l));let c=s?this.stack[s-1]:0,u=this.bufferBase+this.buffer.length-c;if(o<i.minRepeatTerm||131072&t){let t=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(o,a,t,u+4,!0)}if(262144&t)this.state=this.stack[s];else{let t=this.stack[s-3];this.state=i.getGoto(t,o,!0)}for(;this.stack.length>s;)this.stack.pop();this.reduceContext(o,a)}storeNode(t,e,n,o=4,i=!1){if(0==t&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let t=this,o=this.buffer.length;if(0==o&&t.parent&&(o=t.bufferBase-t.parent.bufferBase,t=t.parent),o>0&&0==t.buffer[o-4]&&t.buffer[o-1]>-1){if(e==n)return;if(t.buffer[o-2]>=e)return void(t.buffer[o-2]=n)}}if(i&&this.pos!=n){let i=this.buffer.length;if(i>0&&0!=this.buffer[i-4])for(;i>0&&this.buffer[i-2]>n;)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,o>4&&(o-=4);this.buffer[i]=t,this.buffer[i+1]=e,this.buffer[i+2]=n,this.buffer[i+3]=o}else this.buffer.push(t,e,n,o)}shift(t,e,n,o){if(131072&t)this.pushState(65535&t,this.pos);else if(0==(262144&t)){let i=t,{parser:r}=this.p;(o>this.pos||e<=r.maxNode)&&(this.pos=o,r.stateFlag(i,1)||(this.reducePos=o)),this.pushState(i,n),this.shiftContext(e,n),e<=r.maxNode&&this.buffer.push(e,n,o,4)}else this.pos=o,this.shiftContext(e,n),e<=this.p.parser.maxNode&&this.buffer.push(e,n,o,4)}apply(t,e,n,o){65536&t?this.reduce(t):this.shift(t,e,n,o)}useNode(t,e){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=t)&&(this.p.reused.push(t),n++);let o=this.pos;this.reducePos=this.pos=o+t.length,this.pushState(e,o),this.buffer.push(n,o,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,t,this,this.p.stream.reset(this.pos-t.length)))}split(){let t=this,e=t.buffer.length;for(;e>0&&t.buffer[e-2]>t.reducePos;)e-=4;let n=t.buffer.slice(e),o=t.bufferBase+e;for(;t&&o==t.bufferBase;)t=t.parent;return new o_(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,o,this.curContext,this.lookAhead,t)}recoverByDelete(t,e){let n=t<=this.p.parser.maxNode;n&&this.storeNode(t,this.pos,e,4),this.storeNode(0,this.pos,e,n?8:4),this.pos=this.reducePos=e,this.score-=190}canShift(t){for(let e=new r_(this);;){let n=this.p.parser.stateSlot(e.state,4)||this.p.parser.hasAction(e.state,t);if(0==n)return!1;if(0==(65536&n))return!0;e.reduce(n)}}recoverByInsert(t){if(this.stack.length>=300)return[];let e=this.p.parser.nextStates(this.state);if(e.length>4<<1||this.stack.length>=120){let n=[];for(let o,i=0;i<e.length;i+=2)(o=e[i+1])!=this.state&&this.p.parser.hasAction(o,t)&&n.push(e[i],o);if(this.stack.length<120)for(let t=0;n.length<4<<1&&t<e.length;t+=2){let o=e[t+1];n.some(((t,e)=>1&e&&t==o))||n.push(e[t],o)}e=n}let n=[];for(let t=0;t<e.length&&n.length<4;t+=2){let o=e[t+1];if(o==this.state)continue;let i=this.split();i.pushState(o,this.pos),i.storeNode(0,i.pos,i.pos,4,!0),i.shiftContext(e[t],this.pos),i.reducePos=this.pos,i.score-=200,n.push(i)}return n}forceReduce(){let{parser:t}=this.p,e=t.stateSlot(this.state,5);if(0==(65536&e))return!1;if(!t.validAction(this.state,e)){let n=e>>19,o=65535&e,i=this.stack.length-3*n;if(i<0||t.getGoto(this.stack[i],o,!1)<0){let t=this.findForcedReduction();if(null==t)return!1;e=t}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(e),!0}findForcedReduction(){let{parser:t}=this.p,e=[],n=(o,i)=>{if(!e.includes(o))return e.push(o),t.allActions(o,(e=>{if(e&(262144|131072));else if(65536&e){let n=(e>>19)-i;if(n>1){let o=65535&e,i=this.stack.length-3*n;if(i>=0&&t.getGoto(this.stack[i],o,!1)>=0)return n<<19|65536|o}}else{let t=n(e,i+1);if(null!=t)return t}}))};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:t}=this.p;return 65535==t.data[t.stateSlot(this.state,1)]&&!t.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(t){if(this.state!=t.state||this.stack.length!=t.stack.length)return!1;for(let e=0;e<this.stack.length;e+=3)if(this.stack[e]!=t.stack[e])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(t){return this.p.parser.dialect.flags[t]}shiftContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,t,this,this.p.stream.reset(e)))}reduceContext(t,e){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,t,this,this.p.stream.reset(e)))}emitContext(){let t=this.buffer.length-1;(t<0||-3!=this.buffer[t])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let t=this.buffer.length-1;(t<0||-4!=this.buffer[t])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(t){if(t!=this.curContext.context){let e=new i_(this.curContext.tracker,t);e.hash!=this.curContext.hash&&this.emitContext(),this.curContext=e}}setLookAhead(t){t>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=t)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class i_{constructor(t,e){this.tracker=t,this.context=e,this.hash=t.strict?t.hash(e):0}}class r_{constructor(t){this.start=t,this.state=t.state,this.stack=t.stack,this.base=this.stack.length}reduce(t){let e=65535&t,n=t>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let o=this.start.p.parser.getGoto(this.stack[this.base-3],e,!0);this.state=o}}class s_{constructor(t,e,n){this.stack=t,this.pos=e,this.index=n,this.buffer=t.buffer,0==this.index&&this.maybeNext()}static create(t,e=t.bufferBase+t.buffer.length){return new s_(t,e,e-t.bufferBase)}maybeNext(){let t=this.stack.parent;null!=t&&(this.index=this.stack.bufferBase-t.bufferBase,this.stack=t,this.buffer=t.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new s_(this.stack,this.pos,this.index)}}function a_(t,e=Uint16Array){if("string"!=typeof t)return t;let n=null;for(let o=0,i=0;o<t.length;){let r=0;for(;;){let e=t.charCodeAt(o++),n=!1;if(126==e){r=65535;break}e>=92&&e--,e>=34&&e--;let i=e-32;if(i>=46&&(i-=46,n=!0),r+=i,n)break;r*=46}n?n[i++]=r:n=new e(r)}return n}class l_{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const c_=new l_;class u_{constructor(t,e){this.input=t,this.ranges=e,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=c_,this.rangeIndex=0,this.pos=this.chunkPos=e[0].from,this.range=e[0],this.end=e[e.length-1].to,this.readNext()}resolveOffset(t,e){let n=this.range,o=this.rangeIndex,i=this.pos+t;for(;i<n.from;){if(!o)return null;let t=this.ranges[--o];i-=n.from-t.to,n=t}for(;e<0?i>n.to:i>=n.to;){if(o==this.ranges.length-1)return null;let t=this.ranges[++o];i+=t.from-n.to,n=t}return i}clipPos(t){if(t>=this.range.from&&t<this.range.to)return t;for(let e of this.ranges)if(e.to>t)return Math.max(t,e.from);return this.end}peek(t){let e,n,o=this.chunkOff+t;if(o>=0&&o<this.chunk.length)e=this.pos+t,n=this.chunk.charCodeAt(o);else{let o=this.resolveOffset(t,1);if(null==o)return-1;if(e=o,e>=this.chunk2Pos&&e<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(e-this.chunk2Pos);else{let t=this.rangeIndex,o=this.range;for(;o.to<=e;)o=this.ranges[++t];this.chunk2=this.input.chunk(this.chunk2Pos=e),e+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-e)),n=this.chunk2.charCodeAt(0)}}return e>=this.token.lookAhead&&(this.token.lookAhead=e+1),n}acceptToken(t,e=0){let n=e?this.resolveOffset(e,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=t,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:t,chunkPos:e}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=t,this.chunk2Pos=e,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let t=this.input.chunk(this.pos),e=this.pos+t.length;this.chunk=e>this.range.to?t.slice(0,this.range.to-this.pos):t,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(t=1){for(this.chunkOff+=t;this.pos+t>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();t-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=t,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(t,e){if(e?(this.token=e,e.start=t,e.lookAhead=t+1,e.value=e.extended=-1):this.token=c_,this.pos!=t){if(this.pos=t,t==this.end)return this.setDone(),this;for(;t<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;t>=this.range.to;)this.range=this.ranges[++this.rangeIndex];t>=this.chunkPos&&t<this.chunkPos+this.chunk.length?this.chunkOff=t-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(t,e){if(t>=this.chunkPos&&e<=this.chunkPos+this.chunk.length)return this.chunk.slice(t-this.chunkPos,e-this.chunkPos);if(t>=this.chunk2Pos&&e<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(t-this.chunk2Pos,e-this.chunk2Pos);if(t>=this.range.from&&e<=this.range.to)return this.input.read(t,e);let n="";for(let o of this.ranges){if(o.from>=e)break;o.to>t&&(n+=this.input.read(Math.max(o.from,t),Math.min(o.to,e)))}return n}}class h_{constructor(t,e){this.data=t,this.id=e}token(t,e){let{parser:n}=e.p;f_(this.data,t,e,this.id,n.data,n.tokenPrecTable)}}h_.prototype.contextual=h_.prototype.fallback=h_.prototype.extend=!1;class p_{constructor(t,e,n){this.precTable=e,this.elseToken=n,this.data="string"==typeof t?a_(t):t}token(t,e){let n=t.pos,o=0;for(;;){let n=t.next<0,i=t.resolveOffset(1,1);if(f_(this.data,t,e,0,this.data,this.precTable),t.token.value>-1)break;if(null==this.elseToken)return;if(n||o++,null==i)break;t.reset(i,t.token)}o&&(t.reset(n,t.token),t.acceptToken(this.elseToken,o))}}p_.prototype.contextual=h_.prototype.fallback=h_.prototype.extend=!1;class d_{constructor(t,e={}){this.token=t,this.contextual=!!e.contextual,this.fallback=!!e.fallback,this.extend=!!e.extend}}function f_(t,e,n,o,i,r){let s=0,a=1<<o,{dialect:l}=n.p.parser;t:for(;0!=(a&t[s]);){let n=t[s+1];for(let o=s+3;o<n;o+=2)if((t[o+1]&a)>0){let n=t[o];if(l.allows(n)&&(-1==e.token.value||e.token.value==n||m_(n,e.token.value,i,r))){e.acceptToken(n);break}}let o=e.next,c=0,u=t[s+2];if(!(e.next<0&&u>c&&65535==t[n+3*u-3])){for(;c<u;){let i=c+u>>1,r=n+i+(i<<1),a=t[r],l=t[r+1]||65536;if(o<a)u=i;else{if(!(o>=l)){s=t[r+2],e.advance();continue t}c=i+1}}break}s=t[n+3*u-1]}}function g_(t,e,n){for(let o,i=e;65535!=(o=t[i]);i++)if(o==n)return i-e;return-1}function m_(t,e,n,o){let i=g_(n,o,e);return i<0||g_(n,o,t)<i}const v_="undefined"!=typeof process&&process.env&&/\bparse\b/.test(process.env.LOG);let y_=null;function __(t,e,n){let o=t.cursor(Oh.IncludeAnonymous);for(o.moveTo(e);;)if(!(n<0?o.childBefore(e):o.childAfter(e)))for(;;){if((n<0?o.to<e:o.from>e)&&!o.type.isError)return n<0?Math.max(0,Math.min(o.to-1,e-25)):Math.min(t.length,Math.max(o.from+1,e+25));if(n<0?o.prevSibling():o.nextSibling())break;if(!o.parent())return n<0?0:t.length}}class O_{constructor(t,e){this.fragments=t,this.nodeSet=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let t=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(t){for(this.safeFrom=t.openStart?__(t.tree,t.from+t.offset,1)-t.offset:t.from,this.safeTo=t.openEnd?__(t.tree,t.to+t.offset,-1)-t.offset:t.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(t.tree),this.start.push(-t.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(t){if(t<this.nextStart)return null;for(;this.fragment&&this.safeTo<=t;)this.nextFragment();if(!this.fragment)return null;for(;;){let e=this.trees.length-1;if(e<0)return this.nextFragment(),null;let n=this.trees[e],o=this.index[e];if(o==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=n.children[o],r=this.start[e]+n.positions[o];if(r>t)return this.nextStart=r,null;if(i instanceof bh){if(r==t){if(r<this.safeFrom)return null;let t=r+i.length;if(t<=this.safeTo){let e=i.prop(dh.lookAhead);if(!e||t+e<this.fragment.to)return i}}this.index[e]++,r+i.length>=Math.max(this.safeFrom,t)&&(this.trees.push(i),this.start.push(r),this.index.push(0))}else this.index[e]++,this.nextStart=r+i.length}}}class b_{constructor(t,e){this.stream=e,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=t.tokenizers.map((t=>new l_))}getActions(t){let e=0,n=null,{parser:o}=t.p,{tokenizers:i}=o,r=o.stateSlot(t.state,3),s=t.curContext?t.curContext.hash:0,a=0;for(let o=0;o<i.length;o++){if(0==(1<<o&r))continue;let l=i[o],c=this.tokens[o];if((!n||l.fallback)&&((l.contextual||c.start!=t.pos||c.mask!=r||c.context!=s)&&(this.updateCachedToken(c,l,t),c.mask=r,c.context=s),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let o=e;if(c.extended>-1&&(e=this.addActions(t,c.extended,c.end,e)),e=this.addActions(t,c.value,c.end,e),!l.extend&&(n=c,e>o))break}}for(;this.actions.length>e;)this.actions.pop();return a&&t.setLookAhead(a),n||t.pos!=this.stream.end||(n=new l_,n.value=t.p.parser.eofTerm,n.start=n.end=t.pos,e=this.addActions(t,n.value,n.end,e)),this.mainToken=n,this.actions}getMainToken(t){if(this.mainToken)return this.mainToken;let e=new l_,{pos:n,p:o}=t;return e.start=n,e.end=Math.min(n+1,o.stream.end),e.value=n==o.stream.end?o.parser.eofTerm:0,e}updateCachedToken(t,e,n){let o=this.stream.clipPos(n.pos);if(e.token(this.stream.reset(o,t),n),t.value>-1){let{parser:e}=n.p;for(let o=0;o<e.specialized.length;o++)if(e.specialized[o]==t.value){let i=e.specializers[o](this.stream.read(t.start,t.end),n);if(i>=0&&n.p.parser.dialect.allows(i>>1)){0==(1&i)?t.value=i>>1:t.extended=i>>1;break}}}else t.value=0,t.end=this.stream.clipPos(o+1)}putAction(t,e,n,o){for(let e=0;e<o;e+=3)if(this.actions[e]==t)return o;return this.actions[o++]=t,this.actions[o++]=e,this.actions[o++]=n,o}addActions(t,e,n,o){let{state:i}=t,{parser:r}=t.p,{data:s}=r;for(let t=0;t<2;t++)for(let a=r.stateSlot(i,t?2:1);;a+=3){if(65535==s[a]){if(1!=s[a+1]){0==o&&2==s[a+1]&&(o=this.putAction(T_(s,a+2),e,n,o));break}a=T_(s,a+2)}s[a]==e&&(o=this.putAction(T_(s,a+1),e,n,o))}return o}}class w_{constructor(t,e,n,o){this.parser=t,this.input=e,this.ranges=o,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new u_(e,o),this.tokens=new b_(t,this.stream),this.topTerm=t.top[1];let{from:i}=o[0];this.stacks=[o_.start(this,t.top[0],i)],this.fragments=n.length&&this.stream.end-i>4*t.bufferLength?new O_(n,t.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let t,e,n=this.stacks,o=this.minStackPos,i=this.stacks=[];if(this.bigReductionCount>300&&1==n.length){let[t]=n;for(;t.forceReduce()&&t.stack.length&&t.stack[t.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let r=0;r<n.length;r++){let s=n[r];for(;;){if(this.tokens.mainToken=null,s.pos>o)i.push(s);else{if(this.advanceStack(s,i,n))continue;{t||(t=[],e=[]),t.push(s);let n=this.tokens.getMainToken(s);e.push(n.value,n.end)}}break}}if(!i.length){let e=t&&function(t){let e=null;for(let n of t){let t=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=t&&n.pos>t)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}(t);if(e)return v_&&console.log("Finish with "+this.stackID(e)),this.stackToTree(e);if(this.parser.strict)throw v_&&t&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+o);this.recovering||(this.recovering=5)}if(this.recovering&&t){let n=null!=this.stoppedAt&&t[0].pos>this.stoppedAt?t[0]:this.runRecovery(t,e,i);if(n)return v_&&console.log("Force-finish "+this.stackID(n)),this.stackToTree(n.forceAll())}if(this.recovering){let t=1==this.recovering?1:3*this.recovering;if(i.length>t)for(i.sort(((t,e)=>e.score-t.score));i.length>t;)i.pop();i.some((t=>t.reducePos>o))&&this.recovering--}else if(i.length>1){t:for(let t=0;t<i.length-1;t++){let e=i[t];for(let n=t+1;n<i.length;n++){let o=i[n];if(e.sameState(o)||e.buffer.length>500&&o.buffer.length>500){if(!((e.score-o.score||e.buffer.length-o.buffer.length)>0)){i.splice(t--,1);continue t}i.splice(n--,1)}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let t=1;t<i.length;t++)i[t].pos<this.minStackPos&&(this.minStackPos=i[t].pos);return null}stopAt(t){if(null!=this.stoppedAt&&this.stoppedAt<t)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=t}advanceStack(t,e,n){let o=t.pos,{parser:i}=this,r=v_?this.stackID(t)+" -> ":"";if(null!=this.stoppedAt&&o>this.stoppedAt)return t.forceReduce()?t:null;if(this.fragments){let e=t.curContext&&t.curContext.tracker.strict,n=e?t.curContext.hash:0;for(let s=this.fragments.nodeAt(o);s;){let o=this.parser.nodeSet.types[s.type.id]==s.type?i.getGoto(t.state,s.type.id):-1;if(o>-1&&s.length&&(!e||(s.prop(dh.contextHash)||0)==n))return t.useNode(s,o),v_&&console.log(r+this.stackID(t)+` (via reuse of ${i.getName(s.type.id)})`),!0;if(!(s instanceof bh)||0==s.children.length||s.positions[0]>0)break;let a=s.children[0];if(!(a instanceof bh&&0==s.positions[0]))break;s=a}}let s=i.stateSlot(t.state,4);if(s>0)return t.reduce(s),v_&&console.log(r+this.stackID(t)+` (via always-reduce ${i.getName(65535&s)})`),!0;if(t.stack.length>=8400)for(;t.stack.length>6e3&&t.forceReduce(););let a=this.tokens.getActions(t);for(let s=0;s<a.length;){let l=a[s++],c=a[s++],u=a[s++],h=s==a.length||!n,p=h?t:t.split(),d=this.tokens.mainToken;if(p.apply(l,c,d?d.start:p.pos,u),v_&&console.log(r+this.stackID(p)+` (via ${0==(65536&l)?"shift":`reduce of ${i.getName(65535&l)}`} for ${i.getName(c)} @ ${o}${p==t?"":", split"})`),h)return!0;p.pos>o?e.push(p):n.push(p)}return!1}advanceFully(t,e){let n=t.pos;for(;;){if(!this.advanceStack(t,null,null))return!1;if(t.pos>n)return x_(t,e),!0}}runRecovery(t,e,n){let o=null,i=!1;for(let r=0;r<t.length;r++){let s=t[r],a=e[r<<1],l=e[(r<<1)+1],c=v_?this.stackID(s)+" -> ":"";if(s.deadEnd){if(i)continue;if(i=!0,s.restart(),v_&&console.log(c+this.stackID(s)+" (restarted)"),this.advanceFully(s,n))continue}let u=s.split(),h=c;for(let t=0;u.forceReduce()&&t<10;t++){if(v_&&console.log(h+this.stackID(u)+" (via force-reduce)"),this.advanceFully(u,n))break;v_&&(h=this.stackID(u)+" -> ")}for(let t of s.recoverByInsert(a))v_&&console.log(c+this.stackID(t)+" (via recover-insert)"),this.advanceFully(t,n);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),v_&&console.log(c+this.stackID(s)+` (via recover-delete ${this.parser.getName(a)})`),x_(s,n)):(!o||o.score<s.score)&&(o=s)}return o}stackToTree(t){return t.close(),bh.build({buffer:s_.create(t),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:t.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(t){let e=(y_||(y_=new WeakMap)).get(t);return e||y_.set(t,e=String.fromCodePoint(this.nextStackID++)),e+t}}function x_(t,e){for(let n=0;n<e.length;n++){let o=e[n];if(o.pos==t.pos&&o.sameState(t))return void(e[n].score<t.score&&(e[n]=t))}e.push(t)}class S_{constructor(t,e,n){this.source=t,this.flags=e,this.disabled=n}allows(t){return!this.disabled||0==this.disabled[t]}}const k_=t=>t;class P_{constructor(t){this.start=t.start,this.shift=t.shift||k_,this.reduce=t.reduce||k_,this.reuse=t.reuse||k_,this.hash=t.hash||(()=>0),this.strict=!1!==t.strict}}class C_ extends Wh{constructor(t){if(super(),this.wrappers=[],14!=t.version)throw new RangeError(`Parser version (${t.version}) doesn't match runtime version (${14})`);let e=t.nodeNames.split(" ");this.minRepeatTerm=e.length;for(let n=0;n<t.repeatNodeCount;n++)e.push("");let n=Object.keys(t.topRules).map((e=>t.topRules[e][1])),o=[];for(let t=0;t<e.length;t++)o.push([]);function i(t,e,n){o[t].push([e,e.deserialize(String(n))])}if(t.nodeProps)for(let e of t.nodeProps){let t=e[0];"string"==typeof t&&(t=dh[t]);for(let n=1;n<e.length;){let o=e[n++];if(o>=0)i(o,t,e[n++]);else{let r=e[n+-o];for(let s=-o;s>0;s--)i(e[n++],t,r);n++}}}this.nodeSet=new vh(e.map(((e,i)=>mh.define({name:i>=this.minRepeatTerm?void 0:e,id:i,props:o[i],top:n.indexOf(i)>-1,error:0==i,skipped:t.skippedNodes&&t.skippedNodes.indexOf(i)>-1})))),t.propSources&&(this.nodeSet=this.nodeSet.extend(...t.propSources)),this.strict=!1,this.bufferLength=uh;let r=a_(t.tokenData);this.context=t.context,this.specializerSpecs=t.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let t=0;t<this.specializerSpecs.length;t++)this.specialized[t]=this.specializerSpecs[t].term;this.specializers=this.specializerSpecs.map(E_),this.states=a_(t.states,Uint32Array),this.data=a_(t.stateData),this.goto=a_(t.goto),this.maxTerm=t.maxTerm,this.tokenizers=t.tokenizers.map((t=>"number"==typeof t?new h_(r,t):t)),this.topRules=t.topRules,this.dialects=t.dialects||{},this.dynamicPrecedences=t.dynamicPrecedences||null,this.tokenPrecTable=t.tokenPrec,this.termNames=t.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(t,e,n){let o=new w_(this,t,e,n);for(let i of this.wrappers)o=i(o,t,e,n);return o}getGoto(t,e,n=!1){let o=this.goto;if(e>=o[0])return-1;for(let i=o[e+1];;){let e=o[i++],r=1&e,s=o[i++];if(r&&n)return s;for(let n=i+(e>>1);i<n;i++)if(o[i]==t)return s;if(r)return-1}}hasAction(t,e){let n=this.data;for(let o=0;o<2;o++)for(let i,r=this.stateSlot(t,o?2:1);;r+=3){if(65535==(i=n[r])){if(1!=n[r+1]){if(2==n[r+1])return T_(n,r+2);break}i=n[r=T_(n,r+2)]}if(i==e||0==i)return T_(n,r+1)}return 0}stateSlot(t,e){return this.states[6*t+e]}stateFlag(t,e){return(this.stateSlot(t,0)&e)>0}validAction(t,e){return!!this.allActions(t,(t=>t==e||null))}allActions(t,e){let n=this.stateSlot(t,4),o=n?e(n):void 0;for(let n=this.stateSlot(t,1);null==o;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=T_(this.data,n+2)}o=e(T_(this.data,n+1))}return o}nextStates(t){let e=[];for(let n=this.stateSlot(t,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=T_(this.data,n+2)}if(0==(this.data[n+2]&65536>>16)){let t=this.data[n+1];e.some(((e,n)=>1&n&&e==t))||e.push(this.data[n],t)}}return e}configure(t){let e=Object.assign(Object.create(C_.prototype),this);if(t.props&&(e.nodeSet=this.nodeSet.extend(...t.props)),t.top){let n=this.topRules[t.top];if(!n)throw new RangeError(`Invalid top rule name ${t.top}`);e.top=n}return t.tokenizers&&(e.tokenizers=this.tokenizers.map((e=>{let n=t.tokenizers.find((t=>t.from==e));return n?n.to:e}))),t.specializers&&(e.specializers=this.specializers.slice(),e.specializerSpecs=this.specializerSpecs.map(((n,o)=>{let i=t.specializers.find((t=>t.from==n.external));if(!i)return n;let r=Object.assign(Object.assign({},n),{external:i.to});return e.specializers[o]=E_(r),r}))),t.contextTracker&&(e.context=t.contextTracker),t.dialect&&(e.dialect=this.parseDialect(t.dialect)),null!=t.strict&&(e.strict=t.strict),t.wrap&&(e.wrappers=e.wrappers.concat(t.wrap)),null!=t.bufferLength&&(e.bufferLength=t.bufferLength),e}hasWrappers(){return this.wrappers.length>0}getName(t){return this.termNames?this.termNames[t]:String(t<=this.maxNode&&this.nodeSet.types[t].name||t)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(t){let e=this.dynamicPrecedences;return null==e?0:e[t]||0}parseDialect(t){let e=Object.keys(this.dialects),n=e.map((()=>!1));if(t)for(let o of t.split(" ")){let t=e.indexOf(o);t>=0&&(n[t]=!0)}let o=null;for(let t=0;t<e.length;t++)if(!n[t])for(let n,i=this.dialects[e[t]];65535!=(n=this.data[i++]);)(o||(o=new Uint8Array(this.maxTerm+1)))[n]=1;return new S_(t,n,o)}static deserialize(t){return new C_(t)}}function T_(t,e){return t[e]|t[e+1]<<16}function E_(t){if(t.external){let e=t.extend?1:0;return(n,o)=>t.external(n,o)<<1|e}return t.get}const Q_=96,A_=1,$_=97,j_=98,R_=2,Z_=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],M_=58,V_=40,D_=95,I_=91,N_=45,W_=46,X_=35,L_=37,Y_=38,z_=92,q_=10;function U_(t){return t>=65&&t<=90||t>=97&&t<=122||t>=161}const B_=new d_(((t,e)=>{for(let o=!1,i=0,r=0;;r++){let{next:s}=t;if(U_(s)||s==N_||s==D_||o&&((n=s)>=48&&n<=57))!o&&(s!=N_||r>0)&&(o=!0),i===r&&s==N_&&i++,t.advance();else{if(s!=z_||t.peek(1)==q_){o&&t.acceptToken(s==V_?$_:2==i&&e.canShift(R_)?R_:j_);break}t.advance(),t.next>-1&&t.advance(),o=!0}}var n})),F_=new d_((t=>{if(Z_.includes(t.peek(-1))){let{next:e}=t;(U_(e)||e==D_||e==X_||e==W_||e==I_||e==M_||e==N_||e==Y_)&&t.acceptToken(Q_)}})),G_=new d_((t=>{if(!Z_.includes(t.peek(-1))){let{next:e}=t;if(e==L_&&(t.advance(),t.acceptToken(A_)),U_(e)){do{t.advance()}while(U_(t.next));t.acceptToken(A_)}}})),H_=sp({"AtKeyword import charset namespace keyframes media supports":Cp.definitionKeyword,"from to selector":Cp.keyword,NamespaceName:Cp.namespace,KeyframeName:Cp.labelName,KeyframeRangeName:Cp.operatorKeyword,TagName:Cp.tagName,ClassName:Cp.className,PseudoClassName:Cp.constant(Cp.className),IdName:Cp.labelName,"FeatureName PropertyName":Cp.propertyName,AttributeName:Cp.attributeName,NumberLiteral:Cp.number,KeywordQuery:Cp.keyword,UnaryQueryOp:Cp.operatorKeyword,"CallTag ValueName":Cp.atom,VariableName:Cp.variableName,Callee:Cp.operatorKeyword,Unit:Cp.unit,"UniversalSelector NestingSelector":Cp.definitionOperator,MatchOp:Cp.compareOperator,"ChildOp SiblingOp, LogicOp":Cp.logicOperator,BinOp:Cp.arithmeticOperator,Important:Cp.modifier,Comment:Cp.blockComment,ColorLiteral:Cp.color,"ParenthesizedContent StringLiteral":Cp.string,":":Cp.punctuation,"PseudoOp #":Cp.derefOperator,"; ,":Cp.separator,"( )":Cp.paren,"[ ]":Cp.squareBracket,"{ }":Cp.brace}),K_={__proto__:null,lang:32,"nth-child":32,"nth-last-child":32,"nth-of-type":32,"nth-last-of-type":32,dir:32,"host-context":32,url:60,"url-prefix":60,domain:60,regexp:60,selector:134},J_={__proto__:null,"@import":114,"@media":138,"@charset":142,"@namespace":146,"@keyframes":152,"@supports":164},tO={__proto__:null,not:128,only:128},eO=C_.deserialize({version:14,states:"9bQYQ[OOO#_Q[OOP#fOWOOOOQP'#Cd'#CdOOQP'#Cc'#CcO#kQ[O'#CfO$_QXO'#CaO$fQ[O'#ChO$qQ[O'#DPO$vQ[O'#DTOOQP'#Ej'#EjO${QdO'#DeO%gQ[O'#DrO${QdO'#DtO%xQ[O'#DvO&TQ[O'#DyO&]Q[O'#EPO&kQ[O'#EROOQS'#Ei'#EiOOQS'#EU'#EUQYQ[OOO&rQXO'#CdO'gQWO'#DaO'lQWO'#EpO'wQ[O'#EpQOQWOOP(RO#tO'#C_POOO)C@X)C@XOOQP'#Cg'#CgOOQP,59Q,59QO#kQ[O,59QO(^Q[O'#EXO(xQWO,58{O)QQ[O,59SO$qQ[O,59kO$vQ[O,59oO(^Q[O,59sO(^Q[O,59uO(^Q[O,59vO)]Q[O'#D`OOQS,58{,58{OOQP'#Ck'#CkOOQO'#C}'#C}OOQP,59S,59SO)dQWO,59SO)iQWO,59SOOQP'#DR'#DROOQP,59k,59kOOQO'#DV'#DVO)nQ`O,59oOOQS'#Cp'#CpO${QdO'#CqO)vQvO'#CsO+TQtO,5:POOQO'#Cx'#CxO)iQWO'#CwO+iQWO'#CyOOQS'#Em'#EmOOQO'#Dh'#DhO+nQ[O'#DoO+|QWO'#EqO&]Q[O'#DmO,[QWO'#DpOOQO'#Er'#ErO({QWO,5:^O,aQpO,5:`OOQS'#Dx'#DxO,iQWO,5:bO,nQ[O,5:bOOQO'#D{'#D{O,vQWO,5:eO,{QWO,5:kO-TQWO,5:mOOQS-E8S-E8SO${QdO,59{O-]Q[O'#EZO-jQWO,5;[O-jQWO,5;[POOO'#ET'#ETP-uO#tO,58yPOOO,58y,58yOOQP1G.l1G.lO.lQXO,5:sOOQO-E8V-E8VOOQS1G.g1G.gOOQP1G.n1G.nO)dQWO1G.nO)iQWO1G.nOOQP1G/V1G/VO.yQ`O1G/ZO/dQXO1G/_O/zQXO1G/aO0bQXO1G/bO0xQWO,59zO0}Q[O'#DOO1UQdO'#CoOOQP1G/Z1G/ZO${QdO1G/ZO1]QpO,59]OOQS,59_,59_O${QdO,59aO1eQWO1G/kOOQS,59c,59cO1jQ!bO,59eO1rQWO'#DhO1}QWO,5:TO2SQWO,5:ZO&]Q[O,5:VO&]Q[O'#E[O2[QWO,5;]O2gQWO,5:XO(^Q[O,5:[OOQS1G/x1G/xOOQS1G/z1G/zOOQS1G/|1G/|O2xQWO1G/|O2}QdO'#D|OOQS1G0P1G0POOQS1G0V1G0VOOQS1G0X1G0XO3YQtO1G/gOOQO,5:u,5:uO3pQ[O,5:uOOQO-E8X-E8XO3}QWO1G0vPOOO-E8R-E8RPOOO1G.e1G.eOOQP7+$Y7+$YOOQP7+$u7+$uO${QdO7+$uOOQS1G/f1G/fO4YQXO'#EoO4aQWO,59jO4fQtO'#EVO5ZQdO'#ElO5eQWO,59ZO5jQpO7+$uOOQS1G.w1G.wOOQS1G.{1G.{OOQS7+%V7+%VO5rQWO1G/PO${QdO1G/oOOQO1G/u1G/uOOQO1G/q1G/qO5wQWO,5:vOOQO-E8Y-E8YO6VQXO1G/vOOQS7+%h7+%hO6^QYO'#CsOOQO'#EO'#EOO6iQ`O'#D}OOQO'#D}'#D}O6tQWO'#E]O6|QdO,5:hOOQS,5:h,5:hO7XQtO'#EYO${QdO'#EYO8VQdO7+%ROOQO7+%R7+%ROOQO1G0a1G0aO8jQpO<<HaO8rQWO,5;ZOOQP1G/U1G/UOOQS-E8T-E8TO${QdO'#EWO8zQWO,5;WOOQT1G.u1G.uOOQP<<Ha<<HaOOQS7+$k7+$kO9SQdO7+%ZOOQO7+%b7+%bOOQO,5:i,5:iO3QQdO'#E^O6tQWO,5:wOOQS,5:w,5:wOOQS-E8Z-E8ZOOQS1G0S1G0SO9ZQtO,5:tOOQS-E8W-E8WOOQO<<Hm<<HmOOQPAN={AN={O:XQdO,5:rOOQO-E8U-E8UOOQO<<Hu<<HuOOQO,5:x,5:xOOQO-E8[-E8[OOQS1G0c1G0c",stateData:":k~O#WOS#XQQ~OUYOXYO]VO^VOtWOxXO!YaO!ZZO!g[O!i]O!k^O!n_O!t`O#URO#_TO~OQfOUYOXYO]VO^VOtWOxXO!YaO!ZZO!g[O!i]O!k^O!n_O!t`O#UeO#_TO~O#R#dP~P!ZO#XjO~O#UlO~O]qO^qOpoOtrOxsO|tO!PvO#SuO#_nO~O!RwO~P#pO`}O#TzO#UyO~O#U!OO~O#U!QO~OQ!ZOb!TOf!ZOh!ZOn!YO#T!WO#U!SO#b!UO~Ob!]O!b!_O!e!`O#U![O!R#eP~Oh!eOn!YO#U!dO~Oh!gO#U!gO~Ob!]O!b!_O!e!`O#U![O~O!W#eP~P%gO]WX]!UX^WXpWXtWXxWX|WX!PWX!RWX#SWX#_WX~O]!lO~O!W!mO#R#dX!Q#dX~O#R#dX!Q#dX~P!ZO#Y!pO#Z!pO#[!rO~OUYOXYO]VO^VOtWOxXO#URO#_TO~OpoO!RwO~O`!yO#TzO#UyO~O!Q#dP~P!ZOb#QO~Ob#RO~Ov#SOz#TO~OP#VObgXjgX!WgX!bgX!egX#UgXagXQgXfgXhgXngXpgX!VgX#RgX#TgX#bgXvgX!QgX~Ob!]Oj#WO!b!_O!e!`O#U![O!W#eP~Ob#ZO~Ob!]O!b!_O!e!`O#U#[O~Op#`O!`#_O!R#eX!W#eX~Ob#cO~Oj#WO!W#eO~O!W#fO~Oh#gOn!YO~O!R#hO~O!RwO!`#_O~O!RwO!W#kO~O!W!}X#R!}X!Q!}X~P!ZO!W!mO#R#da!Q#da~O#Y!pO#Z!pO#[#rO~O]qO^qOtrOxsO|tO!PvO#SuO#_nO~Op!{a!R!{aa!{a~P.QOv#tOz#uO~O]qO^qOtrOxsO#_nO~Op{i|{i!P{i!R{i#S{ia{i~P/ROp}i|}i!P}i!R}i#S}ia}i~P/ROp!Oi|!Oi!P!Oi!R!Oi#S!Oia!Oi~P/RO!Q#vO~Oa#cP~P(^Oa#`P~P${Oa#}Oj#WO~O!W$PO~Oh$QOo$QO~O]!^Xa![X!`![X~O]$RO~Oa$SO!`#_O~Op#`O!R#ea!W#ea~O!`#_Op!aa!R!aa!W!aaa!aa~O!W$XO~O!Q$`O#U$ZO#b$YO~Oj#WOp$bO!V$dO!W!Ti#R!Ti!Q!Ti~P${O!W!}a#R!}a!Q!}a~P!ZO!W!mO#R#di!Q#di~Oa#cX~P#pOa$hO~Oj#WOQ!yXa!yXb!yXf!yXh!yXn!yXp!yX#T!yX#U!yX#b!yX~Op$jOa#`X~P${Oa$lO~Oj#WOv$mO~Oa$nO~O!`#_Op#Oa!R#Oa!W#Oa~Oa$pO~P.QOP#VOpgX!RgX~O#b$YOp!qX!R!qX~Op$rO!RwO~O!Q$vO#U$ZO#b$YO~Oj#WOQ!|Xb!|Xf!|Xh!|Xn!|Xp!|X!V!|X!W!|X#R!|X#T!|X#U!|X#b!|X!Q!|X~Op$bO!V$yO!W!Tq#R!Tq!Q!Tq~P${Oj#WOv$zO~OpoOa#ca~Op$jOa#`a~Oa$}O~P${Oj#WOQ!|ab!|af!|ah!|an!|ap!|a!V!|a!W!|a#R!|a#T!|a#U!|a#b!|a!Q!|a~Oa!zap!za~P${O#Wo#X#bj!P#b~",goto:"-Y#gPPP#hP#kP#t$TP#t$d#tPP$jPPP$p$y$yP%]P$yP$y%w&ZPPP&s&y#tP'PP#tP'VP#tP#t#tPPP']'r(PPP#kPP(W(W(b(WP(WP(W(WP#kP#kP#kP(e#kP(h(k(n(u#kP#kP(z)Q)a)o)u*P*V*a*g*mPPPPPPPPPP*s*|P+i+lP,b,e,k,tRkQ_bOPdhw!m#nkYOPdhotuvw!m#Q#c#nkSOPdhotuvw!m#Q#c#nQmTR!snQ{VR!wqQ!w}Q#Y!XR#s!yq!ZZ]!T!l#R#T#W#l#u#z$R$b$c$j$o${p!ZZ]!T!l#R#T#W#l#u#z$R$b$c$j$o${U$]#h$_$rR$q$[q!XZ]!T!l#R#T#W#l#u#z$R$b$c$j$o${p!ZZ]!T!l#R#T#W#l#u#z$R$b$c$j$o${Q!e^R#g!fQ|VR!xqQ!w|R#s!xQ!PWR!zrQ!RXR!{sQxUQ!vpQ#d!bQ#j!iQ#k!jQ$t$^R%Q$sSgPwQ!ohQ#m!mR$e#nZfPhw!m#na!a[`a!V!]!_#_#`R#]!]R!f^R!h_R#i!hS$^#h$_R%O$rV$[#h$_$rQ!qjR#q!qQdOShPwU!kdh#nR#n!mQ#z#RU$i#z$o${Q$o$RR${$jQ$k#zR$|$kQpUS!up$gR$g#wQ$c#lR$x$cQ!ngS#o!n#pR#p!oQ#a!^R$V#aQ$_#hR$u$_Q$s$^R%P$s_cOPdhw!m#n^UOPdhw!m#nQ!toQ!|tQ!}uQ#OvQ#w#QR$W#cR#{#RQ!VZQ!c]Q#U!TQ#l!l[#y#R#z$R$j$o${Q#|#TQ$O#WS$a#l$cQ$f#uR$w$bR#x#QQiPR#PwQ!b[Q!jaR#X!VU!^[a!VQ!i`Q#^!]Q#b!_Q$T#_R$U#`",nodeNames:"⚠ Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent , PseudoClassName ArgList IdSelector # IdName ] AttributeSelector [ AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports AtRule Styles",maxTerm:114,nodeProps:[["openedBy",17,"(",48,"{"],["closedBy",18,")",49,"}"]],propSources:[H_],skippedNodes:[0,3,85],repeatNodeCount:10,tokenData:"J^~R!^OX$}X^%u^p$}pq%uqr)Xrs.Rst/utu6duv$}vw7^wx7oxy9^yz9oz{9t{|:_|}?Q}!O?c!O!P@Q!P!Q@i!Q![Ab![!]B]!]!^CX!^!_$}!_!`Cj!`!aC{!a!b$}!b!cDw!c!}$}!}#OFa#O#P$}#P#QFr#Q#R6d#R#T$}#T#UGT#U#c$}#c#dHf#d#o$}#o#pH{#p#q6d#q#rI^#r#sIo#s#y$}#y#z%u#z$f$}$f$g%u$g#BY$}#BY#BZ%u#BZ$IS$}$IS$I_%u$I_$I|$}$I|$JO%u$JO$JT$}$JT$JU%u$JU$KV$}$KV$KW%u$KW&FU$}&FU&FV%u&FV;'S$};'S;=`JW<%lO$}`%QSOy%^z;'S%^;'S;=`%o<%lO%^`%cSo`Oy%^z;'S%^;'S;=`%o<%lO%^`%rP;=`<%l%^~%zh#W~OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^~'mh#W~o`OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^l)[UOy%^z#]%^#]#^)n#^;'S%^;'S;=`%o<%lO%^l)sUo`Oy%^z#a%^#a#b*V#b;'S%^;'S;=`%o<%lO%^l*[Uo`Oy%^z#d%^#d#e*n#e;'S%^;'S;=`%o<%lO%^l*sUo`Oy%^z#c%^#c#d+V#d;'S%^;'S;=`%o<%lO%^l+[Uo`Oy%^z#f%^#f#g+n#g;'S%^;'S;=`%o<%lO%^l+sUo`Oy%^z#h%^#h#i,V#i;'S%^;'S;=`%o<%lO%^l,[Uo`Oy%^z#T%^#T#U,n#U;'S%^;'S;=`%o<%lO%^l,sUo`Oy%^z#b%^#b#c-V#c;'S%^;'S;=`%o<%lO%^l-[Uo`Oy%^z#h%^#h#i-n#i;'S%^;'S;=`%o<%lO%^l-uS!V[o`Oy%^z;'S%^;'S;=`%o<%lO%^~.UWOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o<%lO.R~.sOh~~.vRO;'S.R;'S;=`/P;=`O.R~/SXOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o;=`<%l.R<%lO.R~/rP;=`<%l.Rn/zYtQOy%^z!Q%^!Q![0j![!c%^!c!i0j!i#T%^#T#Z0j#Z;'S%^;'S;=`%o<%lO%^l0oYo`Oy%^z!Q%^!Q![1_![!c%^!c!i1_!i#T%^#T#Z1_#Z;'S%^;'S;=`%o<%lO%^l1dYo`Oy%^z!Q%^!Q![2S![!c%^!c!i2S!i#T%^#T#Z2S#Z;'S%^;'S;=`%o<%lO%^l2ZYf[o`Oy%^z!Q%^!Q![2y![!c%^!c!i2y!i#T%^#T#Z2y#Z;'S%^;'S;=`%o<%lO%^l3QYf[o`Oy%^z!Q%^!Q![3p![!c%^!c!i3p!i#T%^#T#Z3p#Z;'S%^;'S;=`%o<%lO%^l3uYo`Oy%^z!Q%^!Q![4e![!c%^!c!i4e!i#T%^#T#Z4e#Z;'S%^;'S;=`%o<%lO%^l4lYf[o`Oy%^z!Q%^!Q![5[![!c%^!c!i5[!i#T%^#T#Z5[#Z;'S%^;'S;=`%o<%lO%^l5aYo`Oy%^z!Q%^!Q![6P![!c%^!c!i6P!i#T%^#T#Z6P#Z;'S%^;'S;=`%o<%lO%^l6WSf[o`Oy%^z;'S%^;'S;=`%o<%lO%^d6gUOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^d7QSzSo`Oy%^z;'S%^;'S;=`%o<%lO%^b7cSXQOy%^z;'S%^;'S;=`%o<%lO%^~7rWOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W<%lO7o~8_RO;'S7o;'S;=`8h;=`O7o~8kXOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W;=`<%l7o<%lO7o~9ZP;=`<%l7on9cSb^Oy%^z;'S%^;'S;=`%o<%lO%^~9tOa~n9{UUQjWOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^n:fWjW!PQOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^l;TUo`Oy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^l;nYo`#b[Oy%^z!Q%^!Q![;g![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^l<cYo`Oy%^z{%^{|=R|}%^}!O=R!O!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=WUo`Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=qUo`#b[Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l>[[o`#b[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^n?VSp^Oy%^z;'S%^;'S;=`%o<%lO%^l?hWjWOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^n@VU#_QOy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^~@nTjWOy%^z{@}{;'S%^;'S;=`%o<%lO%^~AUSo`#X~Oy%^z;'S%^;'S;=`%o<%lO%^lAg[#b[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^bBbU]QOy%^z![%^![!]Bt!];'S%^;'S;=`%o<%lO%^bB{S^Qo`Oy%^z;'S%^;'S;=`%o<%lO%^nC^S!W^Oy%^z;'S%^;'S;=`%o<%lO%^dCoSzSOy%^z;'S%^;'S;=`%o<%lO%^bDQU|QOy%^z!`%^!`!aDd!a;'S%^;'S;=`%o<%lO%^bDkS|Qo`Oy%^z;'S%^;'S;=`%o<%lO%^bDzWOy%^z!c%^!c!}Ed!}#T%^#T#oEd#o;'S%^;'S;=`%o<%lO%^bEk[!YQo`Oy%^z}%^}!OEd!O!Q%^!Q![Ed![!c%^!c!}Ed!}#T%^#T#oEd#o;'S%^;'S;=`%o<%lO%^bFfSxQOy%^z;'S%^;'S;=`%o<%lO%^lFwSv[Oy%^z;'S%^;'S;=`%o<%lO%^bGWUOy%^z#b%^#b#cGj#c;'S%^;'S;=`%o<%lO%^bGoUo`Oy%^z#W%^#W#XHR#X;'S%^;'S;=`%o<%lO%^bHYS!`Qo`Oy%^z;'S%^;'S;=`%o<%lO%^bHiUOy%^z#f%^#f#gHR#g;'S%^;'S;=`%o<%lO%^fIQS!RUOy%^z;'S%^;'S;=`%o<%lO%^nIcS!Q^Oy%^z;'S%^;'S;=`%o<%lO%^fItU!PQOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^`JZP;=`<%l$}",tokenizers:[F_,G_,B_,1,2,3,4,new p_("m~RRYZ[z{a~~g~aO#Z~~dP!P!Qg~lO#[~~",28,102)],topRules:{StyleSheet:[0,4],Styles:[1,84]},specialized:[{term:97,get:t=>K_[t]||-1},{term:56,get:t=>J_[t]||-1},{term:98,get:t=>tO[t]||-1}],tokenPrec:1169});let nO=null;function oO(){if(!nO&&"object"==typeof document&&document.body){let{style:t}=document.body,e=[],n=new Set;for(let o in t)"cssText"!=o&&"cssFloat"!=o&&"string"==typeof t[o]&&(/[A-Z]/.test(o)&&(o=o.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase()))),n.has(o)||(e.push(o),n.add(o)));nO=e.sort().map((t=>({type:"property",label:t})))}return nO||[]}const iO=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map((t=>({type:"class",label:t}))),rO=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map((t=>({type:"keyword",label:t}))).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map((t=>({type:"constant",label:t})))),sO=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map((t=>({type:"type",label:t}))),aO=/^(\w[\w-]*|-\w[\w-]*|)$/,lO=/^-(-[\w-]*)?$/;const cO=new Ih,uO=["Declaration"];function hO(t){for(let e=t;;){if(e.type.isTop)return e;if(!(e=e.parent))return t}}function pO(t,e,n){if(e.to-e.from>4096){let o=cO.get(e);if(o)return o;let i=[],r=new Set,s=e.cursor(Oh.IncludeAnonymous);if(s.firstChild())do{for(let e of pO(t,s.node,n))r.has(e.label)||(r.add(e.label),i.push(e))}while(s.nextSibling());return cO.set(e,i),i}{let o=[],i=new Set;return e.cursor().iterate((e=>{var r;if(n(e)&&e.matchContext(uO)&&":"==(null===(r=e.node.nextSibling)||void 0===r?void 0:r.name)){let n=t.sliceString(e.from,e.to);i.has(n)||(i.add(n),o.push({label:n,type:"variable"}))}})),o}}const dO=t=>e=>{let{state:n,pos:o}=e,i=Zp(n).resolveInner(o,-1),r=i.type.isError&&i.from==i.to-1&&"-"==n.doc.sliceString(i.from,i.to);if("PropertyName"==i.name||(r||"TagName"==i.name)&&/^(Block|Styles)$/.test(i.resolve(i.to).name))return{from:i.from,options:oO(),validFor:aO};if("ValueName"==i.name)return{from:i.from,options:rO,validFor:aO};if("PseudoClassName"==i.name)return{from:i.from,options:iO,validFor:aO};if(t(i)||(e.explicit||r)&&function(t,e){var n;if(("("==t.name||t.type.isError)&&(t=t.parent||t),"ArgList"!=t.name)return!1;let o=null===(n=t.parent)||void 0===n?void 0:n.firstChild;return"Callee"==(null==o?void 0:o.name)&&"var"==e.sliceString(o.from,o.to)}(i,n.doc))return{from:t(i)||r?i.from:o,options:pO(n.doc,hO(i),t),validFor:lO};if("TagName"==i.name){for(let{parent:t}=i;t;t=t.parent)if("Block"==t.name)return{from:i.from,options:oO(),validFor:aO};return{from:i.from,options:sO,validFor:aO}}if(!e.explicit)return null;let s=i.resolve(o),a=s.childBefore(o);return a&&":"==a.name&&"PseudoClassSelector"==s.name?{from:o,options:iO,validFor:aO}:a&&":"==a.name&&"Declaration"==s.name||"ArgList"==s.name?{from:o,options:rO,validFor:aO}:"Block"==s.name||"Styles"==s.name?{from:o,options:oO(),validFor:aO}:null},fO=dO((t=>"VariableName"==t.name)),gO=Rp.define({name:"css",parser:eO.configure({props:[Kp.add({Declaration:sd()}),cd.add({"Block KeyframeList":ud})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function mO(){return new zp(gO,gO.data.of({autocomplete:fO}))}const vO=4,yO=5,_O=6,OO=7,bO=8,wO=9,xO=10,SO=11,kO=12,PO=13,CO=57,TO=14,EO=58,QO=20,AO=22,$O=23,jO=24,RO=26,ZO=27,MO=28,VO=31,DO=34,IO=36,NO=37,WO=0,XO=1,LO={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},YO={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},zO={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function qO(t){return 9==t||10==t||13==t||32==t}let UO=null,BO=null,FO=0;function GO(t,e){let n=t.pos+e;if(FO==n&&BO==t)return UO;let o=t.peek(e);for(;qO(o);)o=t.peek(++e);let i="";for(;45==(r=o)||46==r||58==r||r>=65&&r<=90||95==r||r>=97&&r<=122||r>=161;)i+=String.fromCharCode(o),o=t.peek(++e);var r;return BO=t,FO=n,UO=i?i.toLowerCase():o==tb||o==eb?void 0:null}const HO=60,KO=62,JO=47,tb=63,eb=33,nb=45;function ob(t,e){this.name=t,this.parent=e,this.hash=e?e.hash:0;for(let e=0;e<t.length;e++)this.hash+=(this.hash<<4)+t.charCodeAt(e)+(t.charCodeAt(e)<<8)}const ib=[_O,xO,OO,bO,wO],rb=new P_({start:null,shift:(t,e,n,o)=>ib.indexOf(e)>-1?new ob(GO(o,1)||"",t):t,reduce:(t,e)=>e==QO&&t?t.parent:t,reuse(t,e,n,o){let i=e.type.id;return i==_O||i==IO?new ob(GO(o,1)||"",t):t},hash:t=>t?t.hash:0,strict:!1}),sb=new d_(((t,e)=>{if(t.next!=HO)return void(t.next<0&&e.context&&t.acceptToken(CO));t.advance();let n=t.next==JO;n&&t.advance();let o=GO(t,0);if(void 0===o)return;if(!o)return t.acceptToken(n?TO:_O);let i=e.context?e.context.name:null;if(n){if(o==i)return t.acceptToken(SO);if(i&&YO[i])return t.acceptToken(CO,-2);if(e.dialectEnabled(WO))return t.acceptToken(kO);for(let t=e.context;t;t=t.parent)if(t.name==o)return;t.acceptToken(PO)}else{if("script"==o)return t.acceptToken(OO);if("style"==o)return t.acceptToken(bO);if("textarea"==o)return t.acceptToken(wO);if(LO.hasOwnProperty(o))return t.acceptToken(xO);i&&zO[i]&&zO[i][o]?t.acceptToken(CO,-1):t.acceptToken(_O)}}),{contextual:!0}),ab=new d_((t=>{for(let e=0,n=0;;n++){if(t.next<0){n&&t.acceptToken(EO);break}if(t.next==nb)e++;else{if(t.next==KO&&e>=2){n>=3&&t.acceptToken(EO,-2);break}e=0}t.advance()}}));const lb=new d_(((t,e)=>{if(t.next==JO&&t.peek(1)==KO){let n=e.dialectEnabled(XO)||function(t){for(;t;t=t.parent)if("svg"==t.name||"math"==t.name)return!0;return!1}(e.context);t.acceptToken(n?yO:vO,2)}else t.next==KO&&t.acceptToken(vO,1)}));function cb(t,e,n){let o=2+t.length;return new d_((i=>{for(let r=0,s=0,a=0;;a++){if(i.next<0){a&&i.acceptToken(e);break}if(0==r&&i.next==HO||1==r&&i.next==JO||r>=2&&r<o&&i.next==t.charCodeAt(r-2))r++,s++;else if(2!=r&&r!=o||!qO(i.next)){if(r==o&&i.next==KO){a>s?i.acceptToken(e,-s):i.acceptToken(n,-(s-2));break}if((10==i.next||13==i.next)&&a){i.acceptToken(e,1);break}r=s=0}else s++;i.advance()}}))}const ub=cb("script",54,1),hb=cb("style",55,2),pb=cb("textarea",56,3),db=sp({"Text RawText":Cp.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":Cp.angleBracket,TagName:Cp.tagName,"MismatchedCloseTag/TagName":[Cp.tagName,Cp.invalid],AttributeName:Cp.attributeName,"AttributeValue UnquotedAttributeValue":Cp.attributeValue,Is:Cp.definitionOperator,"EntityReference CharacterReference":Cp.character,Comment:Cp.blockComment,ProcessingInst:Cp.processingInstruction,DoctypeDecl:Cp.documentMeta}),fb=C_.deserialize({version:14,states:",xOVO!rOOO!WQ#tO'#CqO!]Q#tO'#CzO!bQ#tO'#C}O!gQ#tO'#DQO!lQ#tO'#DSO!qOaO'#CpO!|ObO'#CpO#XOdO'#CpO$eO!rO'#CpOOO`'#Cp'#CpO$lO$fO'#DTO$tQ#tO'#DVO$yQ#tO'#DWOOO`'#Dk'#DkOOO`'#DY'#DYQVO!rOOO%OQ&rO,59]O%WQ&rO,59fO%`Q&rO,59iO%hQ&rO,59lO%sQ&rO,59nOOOa'#D^'#D^O%{OaO'#CxO&WOaO,59[OOOb'#D_'#D_O&`ObO'#C{O&kObO,59[OOOd'#D`'#D`O&sOdO'#DOO'OOdO,59[OOO`'#Da'#DaO'WO!rO,59[O'_Q#tO'#DROOO`,59[,59[OOOp'#Db'#DbO'dO$fO,59oOOO`,59o,59oO'lQ#|O,59qO'qQ#|O,59rOOO`-E7W-E7WO'vQ&rO'#CsOOQW'#DZ'#DZO(UQ&rO1G.wOOOa1G.w1G.wO(^Q&rO1G/QOOOb1G/Q1G/QO(fQ&rO1G/TOOOd1G/T1G/TO(nQ&rO1G/WOOO`1G/W1G/WOOO`1G/Y1G/YO(yQ&rO1G/YOOOa-E7[-E7[O)RQ#tO'#CyOOO`1G.v1G.vOOOb-E7]-E7]O)WQ#tO'#C|OOOd-E7^-E7^O)]Q#tO'#DPOOO`-E7_-E7_O)bQ#|O,59mOOOp-E7`-E7`OOO`1G/Z1G/ZOOO`1G/]1G/]OOO`1G/^1G/^O)gQ,UO,59_OOQW-E7X-E7XOOOa7+$c7+$cOOOb7+$l7+$lOOOd7+$o7+$oOOO`7+$r7+$rOOO`7+$t7+$tO)rQ#|O,59eO)wQ#|O,59hO)|Q#|O,59kOOO`1G/X1G/XO*RO7[O'#CvO*dOMhO'#CvOOQW1G.y1G.yOOO`1G/P1G/POOO`1G/S1G/SOOO`1G/V1G/VOOOO'#D['#D[O*uO7[O,59bOOQW,59b,59bOOOO'#D]'#D]O+WOMhO,59bOOOO-E7Y-E7YOOQW1G.|1G.|OOOO-E7Z-E7Z",stateData:"+s~O!^OS~OUSOVPOWQOXROYTO[]O][O^^O`^Oa^Ob^Oc^Ox^O{_O!dZO~OfaO~OfbO~OfcO~OfdO~OfeO~O!WfOPlP!ZlP~O!XiOQoP!ZoP~O!YlORrP!ZrP~OUSOVPOWQOXROYTOZqO[]O][O^^O`^Oa^Ob^Oc^Ox^O!dZO~O!ZrO~P#dO![sO!euO~OfvO~OfwO~OS|OhyO~OS!OOhyO~OS!QOhyO~OS!SOT!TOhyO~OS!TOhyO~O!WfOPlX!ZlX~OP!WO!Z!XO~O!XiOQoX!ZoX~OQ!ZO!Z!XO~O!YlORrX!ZrX~OR!]O!Z!XO~O!Z!XO~P#dOf!_O~O![sO!e!aO~OS!bO~OS!cO~Oi!dOSgXhgXTgX~OS!fOhyO~OS!gOhyO~OS!hOhyO~OS!iOT!jOhyO~OS!jOhyO~Of!kO~Of!lO~Of!mO~OS!nO~Ok!qO!`!oO!b!pO~OS!rO~OS!sO~OS!tO~Oa!uOb!uOc!uO!`!wO!a!uO~Oa!xOb!xOc!xO!b!wO!c!xO~Oa!uOb!uOc!uO!`!{O!a!uO~Oa!xOb!xOc!xO!b!{O!c!xO~OT~bac!dx{!d~",goto:"%p!`PPPPPPPPPPPPPPPPPPPP!a!gP!mPP!yP!|#P#S#Y#]#`#f#i#l#r#x!aP!a!aP$O$U$l$r$x%O%U%[%bPPPPPPPP%hX^OX`pXUOX`pezabcde{}!P!R!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ}bQ!PcQ!RdQ!UeZ!e{}!P!R!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"⚠ StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:67,context:rb,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,21,30,33,36,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,29,32,35,37,"OpenTag"],["group",-9,14,17,18,19,20,39,40,41,42,"Entity",16,"Entity TextContent",-3,28,31,34,"TextContent Entity"]],propSources:[db],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|c`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bX`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UV`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pT`POv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!cpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({W`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!a`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!a`!cpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYkWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]``P!a`!cp!^^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebhSkWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXhSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vchS`P!a`!cpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!`h`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WihSkWc!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zbkWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOa!R!R7tP;=`<%l7S!Z8OYkWa!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{ihSkWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbhSkWa!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QchSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXhSa!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TakWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOb!R!RAwP;=`<%lAY!ZBRYkWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbhSkWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbhSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXhSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!bx`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYlhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_khS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_X`P!a`!cp!eQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZhSfQ`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!a`!cpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!a`!cp!dPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!a`!cpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!a`!cpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!a`!cpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!a`!cpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!a`!cpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!a`!cpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!a`!cpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!cpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO{PP!-nP;=`<%l!-Sq!-xS!cp{POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!a`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!a`{POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!a`!cp{POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!a`!cpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!a`!cpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!a`!cpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!a`!cpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!a`!cpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!a`!cpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!cpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOxPP!7TP;=`<%l!6Vq!7]V!cpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!cpxPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!a`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!a`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!a`xPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!a`!cpxPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXiS`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[ub,hb,pb,lb,sb,ab,0,1,2,3,4,5],topRules:{Document:[0,15]},dialects:{noMatch:0,selfClosing:485},tokenPrec:487});function gb(t,e){let n=Object.create(null);for(let o of t.getChildren($O)){let t=o.getChild(jO),i=o.getChild(RO)||o.getChild(ZO);t&&(n[e.read(t.from,t.to)]=i?i.type.id==RO?e.read(i.from+1,i.to-1):e.read(i.from,i.to):"")}return n}function mb(t,e){let n=t.getChild(AO);return n?e.read(n.from,n.to):" "}function vb(t,e,n){let o;for(let i of n)if(!i.attrs||i.attrs(o||(o=gb(t.node.parent.firstChild,e))))return{parser:i.parser};return null}function yb(t=[],e=[]){let n=[],o=[],i=[],r=[];for(let e of t){("script"==e.tag?n:"style"==e.tag?o:"textarea"==e.tag?i:r).push(e)}let s=e.length?Object.create(null):null;for(let t of e)(s[t.name]||(s[t.name]=[])).push(t);return a=(t,e)=>{let a=t.type.id;if(a==MO)return vb(t,e,n);if(a==VO)return vb(t,e,o);if(a==DO)return vb(t,e,i);if(a==QO&&r.length){let n,o=t.node,i=o.firstChild,s=i&&mb(i,e);if(s)for(let t of r)if(t.tag==s&&(!t.attrs||t.attrs(n||(n=gb(o,e))))){let e=o.lastChild,n=e.type.id==NO?e.from:o.to;if(n>i.to)return{parser:t.parser,overlay:[{from:i.to,to:n}]}}}if(s&&a==$O){let n,o=t.node;if(n=o.firstChild){let t=s[e.read(n.from,n.to)];if(t)for(let n of t){if(n.tagName&&n.tagName!=mb(o.parent,e))continue;let t=o.lastChild;if(t.type.id==RO){let e=t.from+1,o=t.lastChild,i=t.to-(o&&o.isError?0:1);if(i>e)return{parser:n.parser,overlay:[{from:e,to:i}]}}else if(t.type.id==ZO)return{parser:n.parser,overlay:[{from:t.from,to:t.to}]}}}}return null},(t,e,n,o)=>new Uh(t,a,e,n,o);var a}const _b=309,Ob=1,bb=2,wb=3,xb=310,Sb=312,kb=313,Pb=4,Cb=5,Tb=0,Eb=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],Qb=125,Ab=59,$b=47,jb=42,Rb=43,Zb=45,Mb=60,Vb=44,Db=new P_({start:!1,shift:(t,e)=>e==Pb||e==Cb||e==Sb?t:e==kb,strict:!1}),Ib=new d_(((t,e)=>{let{next:n}=t;(n==Qb||-1==n||e.context)&&t.acceptToken(xb)}),{contextual:!0,fallback:!0}),Nb=new d_(((t,e)=>{let n,{next:o}=t;Eb.indexOf(o)>-1||(o!=$b||(n=t.peek(1))!=$b&&n!=jb)&&(o==Qb||o==Ab||-1==o||e.context||t.acceptToken(_b))}),{contextual:!0}),Wb=new d_(((t,e)=>{let{next:n}=t;if((n==Rb||n==Zb)&&(t.advance(),n==t.next)){t.advance();let n=!e.context&&e.canShift(Ob);t.acceptToken(n?Ob:bb)}}),{contextual:!0});function Xb(t,e){return t>=65&&t<=90||t>=97&&t<=122||95==t||t>=192||!e&&t>=48&&t<=57}const Lb=new d_(((t,e)=>{if(t.next!=Mb||!e.dialectEnabled(Tb))return;if(t.advance(),t.next==$b)return;let n=0;for(;Eb.indexOf(t.next)>-1;)t.advance(),n++;if(Xb(t.next,!0)){for(t.advance(),n++;Xb(t.next,!1);)t.advance(),n++;for(;Eb.indexOf(t.next)>-1;)t.advance(),n++;if(t.next==Vb)return;for(let e=0;;e++){if(7==e){if(!Xb(t.next,!0))return;break}if(t.next!="extends".charCodeAt(e))break;t.advance(),n++}}t.acceptToken(wb,-n)})),Yb=sp({"get set async static":Cp.modifier,"for while do if else switch try catch finally return throw break continue default case":Cp.controlKeyword,"in of await yield void typeof delete instanceof":Cp.operatorKeyword,"let var const using function class extends":Cp.definitionKeyword,"import export from":Cp.moduleKeyword,"with debugger as new":Cp.keyword,TemplateString:Cp.special(Cp.string),super:Cp.atom,BooleanLiteral:Cp.bool,this:Cp.self,null:Cp.null,Star:Cp.modifier,VariableName:Cp.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":Cp.function(Cp.variableName),VariableDefinition:Cp.definition(Cp.variableName),Label:Cp.labelName,PropertyName:Cp.propertyName,PrivatePropertyName:Cp.special(Cp.propertyName),"CallExpression/MemberExpression/PropertyName":Cp.function(Cp.propertyName),"FunctionDeclaration/VariableDefinition":Cp.function(Cp.definition(Cp.variableName)),"ClassDeclaration/VariableDefinition":Cp.definition(Cp.className),PropertyDefinition:Cp.definition(Cp.propertyName),PrivatePropertyDefinition:Cp.definition(Cp.special(Cp.propertyName)),UpdateOp:Cp.updateOperator,"LineComment Hashbang":Cp.lineComment,BlockComment:Cp.blockComment,Number:Cp.number,String:Cp.string,Escape:Cp.escape,ArithOp:Cp.arithmeticOperator,LogicOp:Cp.logicOperator,BitOp:Cp.bitwiseOperator,CompareOp:Cp.compareOperator,RegExp:Cp.regexp,Equals:Cp.definitionOperator,Arrow:Cp.function(Cp.punctuation),": Spread":Cp.punctuation,"( )":Cp.paren,"[ ]":Cp.squareBracket,"{ }":Cp.brace,"InterpolationStart InterpolationEnd":Cp.special(Cp.brace),".":Cp.derefOperator,", ;":Cp.separator,"@":Cp.meta,TypeName:Cp.typeName,TypeDefinition:Cp.definition(Cp.typeName),"type enum interface implements namespace module declare":Cp.definitionKeyword,"abstract global Privacy readonly override":Cp.modifier,"is keyof unique infer":Cp.operatorKeyword,JSXAttributeValue:Cp.attributeValue,JSXText:Cp.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":Cp.angleBracket,"JSXIdentifier JSXNameSpacedName":Cp.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":Cp.attributeName,"JSXBuiltin/JSXIdentifier":Cp.standard(Cp.tagName)}),zb={__proto__:null,export:18,as:23,from:31,default:34,async:39,function:40,extends:52,this:56,true:64,false:64,null:76,void:80,typeof:84,super:102,new:136,delete:152,yield:161,await:165,class:170,public:227,private:227,protected:227,readonly:229,instanceof:248,satisfies:251,in:252,const:254,import:286,keyof:339,unique:343,infer:349,is:385,abstract:405,implements:407,type:409,let:412,var:414,using:417,interface:423,enum:427,namespace:433,module:435,declare:439,global:443,for:462,of:471,while:474,with:478,do:482,if:486,else:488,switch:492,case:498,try:504,catch:508,finally:512,return:516,throw:520,break:524,continue:528,debugger:532},qb={__proto__:null,async:123,get:125,set:127,declare:187,public:189,private:189,protected:189,static:191,abstract:193,override:195,readonly:201,accessor:203,new:389},Ub={__proto__:null,"<":143},Bb=C_.deserialize({version:14,states:"$<UO%TQ^OOO%[Q^OOO'_Q`OOP(lOWOOO*zQ08SO'#ChO+RO!bO'#CiO+aO#tO'#CiO+oO?MpO'#D^O.QQ^O'#DdO.bQ^O'#DoO%[Q^O'#DyO0fQ^O'#EROOQ07b'#EZ'#EZO1PQWO'#EWOOQO'#El'#ElOOQO'#Ie'#IeO1XQWO'#GmO1dQWO'#EkO1iQWO'#EkO3kQ08SO'#JiO6[Q08SO'#JjO6xQWO'#FZO6}Q&jO'#FqOOQ07b'#Fc'#FcO7YO,YO'#FcO7hQ7[O'#FxO9UQWO'#FwOOQ07b'#Jj'#JjOOQ07`'#Ji'#JiO9ZQWO'#GqOOQU'#KU'#KUO9fQWO'#IRO9kQ07hO'#ISOOQU'#JW'#JWOOQU'#IW'#IWQ`Q^OOO`Q^OOO%[Q^O'#DqO9sQ^O'#D}O9zQ^O'#EPO9aQWO'#GmO:RQ7[O'#CnO:aQWO'#EjO:lQWO'#EuO:qQ7[O'#FbO;`QWO'#GmOOQO'#KV'#KVO;eQWO'#KVO;sQWO'#GuO;sQWO'#GvO;sQWO'#GxO9aQWO'#G{O<jQWO'#HOO>RQWO'#CdO>cQWO'#H[O>kQWO'#HbO>kQWO'#HdO`Q^O'#HfO>kQWO'#HhO>kQWO'#HkO>pQWO'#HqO>uQ07iO'#HwO%[Q^O'#HyO?QQ07iO'#H{O?]Q07iO'#H}O9kQ07hO'#IPO?hQ08SO'#ChO@jQ`O'#DiQOQWOOO%[Q^O'#EPOAQQWO'#ESO:RQ7[O'#EjOA]QWO'#EjOAhQpO'#FbOOQU'#Cf'#CfOOQ07`'#Dn'#DnOOQ07`'#Jm'#JmO%[Q^O'#JmOOQO'#Jq'#JqOOQO'#Ib'#IbOBhQ`O'#EcOOQ07`'#Eb'#EbOCdQ07pO'#EcOCnQ`O'#EVOOQO'#Jp'#JpODSQ`O'#JqOEaQ`O'#EVOCnQ`O'#EcPEnO!0LbO'#CaPOOO)CDu)CDuOOOO'#IX'#IXOEyO!bO,59TOOQ07b,59T,59TOOOO'#IY'#IYOFXO#tO,59TO%[Q^O'#D`OOOO'#I['#I[OFgO?MpO,59xOOQ07b,59x,59xOFuQ^O'#I]OGYQWO'#JkOI[QrO'#JkO+}Q^O'#JkOIcQWO,5:OOIyQWO'#ElOJWQWO'#JyOJcQWO'#JxOJcQWO'#JxOJkQWO,5;YOJpQWO'#JwOOQ07f,5:Z,5:ZOJwQ^O,5:ZOLxQ08SO,5:eOMiQWO,5:mONSQ07hO'#JvONZQWO'#JuO9ZQWO'#JuONoQWO'#JuONwQWO,5;XON|QWO'#JuO!#UQrO'#JjOOQ07b'#Ch'#ChO%[Q^O'#ERO!#tQpO,5:rOOQO'#Jr'#JrOOQO-E<c-E<cO9aQWO,5=XO!$[QWO,5=XO!$aQ^O,5;VO!&dQ7[O'#EgO!'}QWO,5;VO!)mQ7[O'#DsO!)tQ^O'#DxO!*OQ`O,5;`O!*WQ`O,5;`O%[Q^O,5;`OOQU'#FR'#FROOQU'#FT'#FTO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aOOQU'#FX'#FXO!*fQ^O,5;rOOQ07b,5;w,5;wOOQ07b,5;x,5;xO!,iQWO,5;xOOQ07b,5;y,5;yO%[Q^O'#IiO!,qQ07hO,5<eO!&dQ7[O,5;aO!-`Q7[O,5;aO%[Q^O,5;uO!-gQ&jO'#FgO!.dQ&jO'#J}O!.OQ&jO'#J}O!.kQ&jO'#J}OOQO'#J}'#J}O!/PQ&jO,5<POOOS,5<],5<]O!/bQ^O'#FsOOOS'#Ih'#IhO7YO,YO,5;}O!/iQ&jO'#FuOOQ07b,5;},5;}O!0YQMhO'#CuOOQ07b'#Cy'#CyO!0mQWO'#CyO!0rO?MpO'#C}O!1`Q7[O,5<bO!1gQWO,5<dO!3SQ!LQO'#GSO!3aQWO'#GTO!3fQWO'#GTO!3kQ!LQO'#GXO!4jQ`O'#G]OOQO'#Gh'#GhO!(SQ7[O'#GgOOQO'#Gj'#GjO!(SQ7[O'#GiO!5]QMhO'#JdOOQ07b'#Jd'#JdO!5gQWO'#JcO!5uQWO'#JbO!5}QWO'#CtOOQ07b'#Cw'#CwOOQ07b'#DR'#DROOQ07b'#DT'#DTO1SQWO'#DVO!(SQ7[O'#FzO!(SQ7[O'#F|O!6VQWO'#GOO!6[QWO'#GPO!3fQWO'#GVO!(SQ7[O'#G[O!6aQWO'#EmO!7OQWO,5<cOOQ07`'#Cq'#CqO!7WQWO'#EnO!8QQ`O'#EoOOQ07`'#Jw'#JwO!8XQ07hO'#KWO9kQ07hO,5=]O`Q^O,5>mOOQU'#J`'#J`OOQU,5>n,5>nOOQU-E<U-E<UO!:ZQ08SO,5:]O!<wQ08SO,5:iO%[Q^O,5:iO!?bQ08SO,5:kOOQO,5@q,5@qO!@RQ7[O,5=XO!@aQ07hO'#JaO9UQWO'#JaO!@rQ07hO,59YO!@}Q`O,59YO!AVQ7[O,59YO:RQ7[O,59YO!AbQWO,5;VO!AjQWO'#HZO!BOQWO'#KZO%[Q^O,5;zO!7{Q`O,5;|O!BWQWO,5=tO!B]QWO,5=tO!BbQWO,5=tO9kQ07hO,5=tO;sQWO,5=dOOQO'#Cu'#CuO!BpQ`O,5=aO!BxQ7[O,5=bO!CTQWO,5=dO!CYQpO,5=gO!CbQWO'#KVO>pQWO'#HQO9aQWO'#HSO!CgQWO'#HSO:RQ7[O'#HUO!ClQWO'#HUOOQU,5=j,5=jO!CqQWO'#HVO!DSQWO'#CnO!DXQWO,59OO!DcQWO,59OO!FhQ^O,59OOOQU,59O,59OO!FxQ07hO,59OO%[Q^O,59OO!ITQ^O'#H^OOQU'#H_'#H_OOQU'#H`'#H`O`Q^O,5=vO!IkQWO,5=vO`Q^O,5=|O`Q^O,5>OO!IpQWO,5>QO`Q^O,5>SO!IuQWO,5>VO!IzQ^O,5>]OOQU,5>c,5>cO%[Q^O,5>cO9kQ07hO,5>eOOQU,5>g,5>gO!NUQWO,5>gOOQU,5>i,5>iO!NUQWO,5>iOOQU,5>k,5>kO!NZQ`O'#D[O%[Q^O'#JmO!NxQ`O'#JmO# gQ`O'#DjO# xQ`O'#DjO#$ZQ^O'#DjO#$bQWO'#JlO#$jQWO,5:TO#$oQWO'#EpO#$}QWO'#JzO#%VQWO,5;ZO#%[Q`O'#DjO#%iQ`O'#EUOOQ07b,5:n,5:nO%[Q^O,5:nO#%pQWO,5:nO>pQWO,5;UO!@}Q`O,5;UO!AVQ7[O,5;UO:RQ7[O,5;UO#%xQWO,5@XO#%}Q$ISO,5:rOOQO-E<`-E<`O#'TQ07pO,5:}OCnQ`O,5:qO#'_Q`O,5:qOCnQ`O,5:}O!@rQ07hO,5:qOOQ07`'#Ef'#EfOOQO,5:},5:}O%[Q^O,5:}O#'lQ07hO,5:}O#'wQ07hO,5:}O!@}Q`O,5:qOOQO,5;T,5;TO#(VQ07hO,5:}POOO'#IV'#IVP#(kO!0LbO,58{POOO,58{,58{OOOO-E<V-E<VOOQ07b1G.o1G.oOOOO-E<W-E<WO#(vQpO,59zOOOO-E<Y-E<YOOQ07b1G/d1G/dO#({QrO,5>wO+}Q^O,5>wOOQO,5>},5>}O#)VQ^O'#I]OOQO-E<Z-E<ZO#)dQWO,5@VO#)lQrO,5@VO#)sQWO,5@dOOQ07b1G/j1G/jO%[Q^O,5@eO#){QWO'#IcOOQO-E<a-E<aO#)sQWO,5@dOOQ07`1G0t1G0tOOQ07f1G/u1G/uOOQ07f1G0X1G0XO%[Q^O,5@bO#*aQ07hO,5@bO#*rQ07hO,5@bO#*yQWO,5@aO9ZQWO,5@aO#+RQWO,5@aO#+aQWO'#IfO#*yQWO,5@aOOQ07`1G0s1G0sO!*OQ`O,5:tO!*ZQ`O,5:tOOQO,5:v,5:vO#,RQWO,5:vO#,ZQ7[O1G2sO9aQWO1G2sOOQ07b1G0q1G0qO#,iQ08SO1G0qO#-nQ08QO,5;ROOQ07b'#GR'#GRO#.[Q08SO'#JdO!$aQ^O1G0qO#0dQ7[O'#JnO#0nQWO,5:_O#0sQrO'#JoO%[Q^O'#JoO#0}QWO,5:dOOQ07b'#D['#D[OOQ07b1G0z1G0zO%[Q^O1G0zOOQ07b1G1d1G1dO#1SQWO1G0zO#3kQ08SO1G0{O#3rQ08SO1G0{O#6]Q08SO1G0{O#6dQ08SO1G0{O#8nQ08SO1G0{O#9UQ08SO1G0{O#<OQ08SO1G0{O#<VQ08SO1G0{O#>pQ08SO1G0{O#>wQ08SO1G0{O#@oQ08SO1G0{O#CoQ(CYO'#ChO#EmQ(CYO1G1^O#EtQ(CYO'#JjO!,lQWO1G1dO#FUQ08SO,5?TOOQ07`-E<g-E<gO#FxQ08SO1G0{OOQ07b1G0{1G0{O#ITQ08SO1G1aO#IwQ&jO,5<TO#JPQ&jO,5<UO#JXQ&jO'#FlO#JpQWO'#FkOOQO'#KO'#KOOOQO'#Ig'#IgO#JuQ&jO1G1kOOQ07b1G1k1G1kOOOS1G1v1G1vO#KWQ(CYO'#JiO#KbQWO,5<_O!*fQ^O,5<_OOOS-E<f-E<fOOQ07b1G1i1G1iO#KgQ`O'#J}OOQ07b,5<a,5<aO#KoQ`O,5<aOOQ07b,59e,59eO!&dQ7[O'#DPOOOO'#IZ'#IZO#KtO?MpO,59iOOQ07b,59i,59iO%[Q^O1G1|O!6[QWO'#IkO#LPQ7[O,5<uOOQ07b,5<r,5<rO!(SQ7[O'#InO#LoQ7[O,5=RO!(SQ7[O'#IpO#MbQ7[O,5=TO!&dQ7[O,5=VOOQO1G2O1G2OO#MlQpO'#CqO#NPQpO,5<nO#NWQWO'#KRO9aQWO'#KRO#NfQWO,5<pO!(SQ7[O,5<oO#NkQWO'#GUO#NvQWO,5<oO#N{QpO'#GRO$ YQpO'#KSO$ dQWO'#KSO!&dQ7[O'#KSO$ iQWO,5<sO$ nQ`O'#G^O!4eQ`O'#G^O$!PQWO'#G`O$!UQWO'#GbO!3fQWO'#GeO$!ZQ07hO'#ImO$!fQ`O,5<wOOQ07f,5<w,5<wO$!mQ`O'#G^O$!{Q`O'#G_O$#TQ`O'#G_O$#YQ7[O,5=RO$#jQ7[O,5=TOOQ07b,5=W,5=WO!(SQ7[O,5?}O!(SQ7[O,5?}O$#zQWO'#IrO$$VQWO,5?|O$$_QWO,59`O$%OQ7[O,59qOOQ07b,59q,59qO$%qQ7[O,5<fO$&dQ7[O,5<hO@bQWO,5<jOOQ07b,5<k,5<kO$&nQWO,5<qO$&sQ7[O,5<vO$'TQWO'#JuO!$aQ^O1G1}O$'YQWO1G1}O9ZQWO'#JxO9ZQWO'#EpO%[Q^O'#EpO9ZQWO'#ItO$'_Q07hO,5@rOOQU1G2w1G2wOOQU1G4X1G4XOOQ07b1G/w1G/wO!,iQWO1G/wO$)dQ08SO1G0TOOQU1G2s1G2sO!&dQ7[O1G2sO%[Q^O1G2sO#,^QWO1G2sO$+hQ7[O'#EgOOQ07`,5?{,5?{O$+rQ07hO,5?{OOQU1G.t1G.tO!@rQ07hO1G.tO!@}Q`O1G.tO!AVQ7[O1G.tO$,TQWO1G0qO$,YQWO'#ChO$,eQWO'#K[O$,mQWO,5=uO$,rQWO'#K[O$,wQWO'#K[O$-VQWO'#IzO$-eQWO,5@uO$-mQrO1G1fOOQ07b1G1h1G1hO9aQWO1G3`O@bQWO1G3`O$-tQWO1G3`O$-yQWO1G3`OOQU1G3`1G3`O!CTQWO1G3OO!&dQ7[O1G2{O$.OQWO1G2{OOQU1G2|1G2|O!&dQ7[O1G2|O$.TQWO1G2|O$.]Q`O'#GzOOQU1G3O1G3OO!4eQ`O'#IvO!CYQpO1G3ROOQU1G3R1G3ROOQU,5=l,5=lO$.eQ7[O,5=nO9aQWO,5=nO$!UQWO,5=pO9UQWO,5=pO!@}Q`O,5=pO!AVQ7[O,5=pO:RQ7[O,5=pO$.sQWO'#KYO$/OQWO,5=qOOQU1G.j1G.jO$/TQ07hO1G.jO@bQWO1G.jO$/`QWO1G.jO9kQ07hO1G.jO$1eQrO,5@wO$1uQWO,5@wO9ZQWO,5@wO$2QQ^O,5=xO$2XQWO,5=xOOQU1G3b1G3bO`Q^O1G3bOOQU1G3h1G3hOOQU1G3j1G3jO>kQWO1G3lO$2^Q^O1G3nO$6bQ^O'#HmOOQU1G3q1G3qO$6oQWO'#HsO>pQWO'#HuOOQU1G3w1G3wO$6wQ^O1G3wO9kQ07hO1G3}OOQU1G4P1G4POOQ07`'#GY'#GYO9kQ07hO1G4RO9kQ07hO1G4TO$;OQWO,5@XO!*fQ^O,5;[O9ZQWO,5;[O>pQWO,5:UO!*fQ^O,5:UO!@}Q`O,5:UO$;TQ(CYO,5:UOOQO,5;[,5;[O$;_Q`O'#I^O$;uQWO,5@WOOQ07b1G/o1G/oO$;}Q`O'#IdO$<XQWO,5@fOOQ07`1G0u1G0uO# xQ`O,5:UOOQO'#Ia'#IaO$<aQ`O,5:pOOQ07f,5:p,5:pO#%sQWO1G0YOOQ07b1G0Y1G0YO%[Q^O1G0YOOQ07b1G0p1G0pO>pQWO1G0pO!@}Q`O1G0pO!AVQ7[O1G0pOOQ07`1G5s1G5sO!@rQ07hO1G0]OOQO1G0i1G0iO%[Q^O1G0iO$<hQ07hO1G0iO$<sQ07hO1G0iO!@}Q`O1G0]OCnQ`O1G0]O$=RQ07hO1G0iOOQO1G0]1G0]O$=gQ08SO1G0iPOOO-E<T-E<TPOOO1G.g1G.gOOOO1G/f1G/fO$=qQpO,5<eO$=yQrO1G4cOOQO1G4i1G4iO%[Q^O,5>wO$>TQWO1G5qO$>]QWO1G6OO$>eQrO1G6PO9ZQWO,5>}O$>oQ08SO1G5|O%[Q^O1G5|O$?PQ07hO1G5|O$?bQWO1G5{O$?bQWO1G5{O9ZQWO1G5{O$?jQWO,5?QO9ZQWO,5?QOOQO,5?Q,5?QO$@OQWO,5?QO$'TQWO,5?QOOQO-E<d-E<dOOQO1G0`1G0`OOQO1G0b1G0bO!,lQWO1G0bOOQU7+(_7+(_O!&dQ7[O7+(_O%[Q^O7+(_O$@^QWO7+(_O$@iQ7[O7+(_O$@wQ08SO,5=RO$CSQ08SO,5=TO$E_Q08SO,5=RO$GpQ08SO,5=TO$JRQ08SO,59qO$LZQ08SO,5<fO$NfQ08SO,5<hO%!qQ08SO,5<vOOQ07b7+&]7+&]O%%SQ08SO7+&]O%%vQ7[O'#I_O%&QQWO,5@YOOQ07b1G/y1G/yO%&YQ^O'#I`O%&gQWO,5@ZO%&oQrO,5@ZOOQ07b1G0O1G0OO%&yQWO7+&fOOQ07b7+&f7+&fO%'OQ(CYO,5:eO%[Q^O7+&xO%'YQ(CYO,5:]O%'gQ(CYO,5:iO%'qQ(CYO,5:kOOQ07b7+'O7+'OOOQO1G1o1G1oOOQO1G1p1G1pO%'{QtO,5<WO!*fQ^O,5<VOOQO-E<e-E<eOOQ07b7+'V7+'VOOOS7+'b7+'bOOOS1G1y1G1yO%(WQWO1G1yOOQ07b1G1{1G1{O%(]QpO,59kOOOO-E<X-E<XOOQ07b1G/T1G/TO%(dQ08SO7+'hOOQ07b,5?V,5?VO%)WQpO,5?VOOQ07b1G2a1G2aP!&dQ7[O'#IkPOQ07b-E<i-E<iO%)vQ7[O,5?YOOQ07b-E<l-E<lO%*iQ7[O,5?[OOQ07b-E<n-E<nO%*sQpO1G2qOOQ07b1G2Y1G2YO%*zQWO'#IjO%+YQWO,5@mO%+YQWO,5@mO%+bQWO,5@mO%+mQWO,5@mOOQO1G2[1G2[O%+{Q7[O1G2ZO!(SQ7[O1G2ZO%,]Q!LQO'#IlO%,mQWO,5@nO!&dQ7[O,5@nO%,uQpO,5@nOOQ07b1G2_1G2_OOQ07`,5<x,5<xOOQ07`,5<y,5<yO$'TQWO,5<yOC_QWO,5<yO!@}Q`O,5<xOOQO'#Ga'#GaO%-PQWO,5<zOOQ07`,5<|,5<|O$'TQWO,5=POOQO,5?X,5?XOOQO-E<k-E<kOOQ07f1G2c1G2cO!4eQ`O,5<xO%-XQWO,5<yO$!PQWO,5<zO!4eQ`O,5<yO!(SQ7[O'#InO%-{Q7[O1G2mO!(SQ7[O'#IpO%.nQ7[O1G2oO%.xQ7[O1G5iO%/SQ7[O1G5iOOQO,5?^,5?^OOQO-E<p-E<pOOQO1G.z1G.zO!7{Q`O,59sO%[Q^O,59sO%/aQWO1G2UO!(SQ7[O1G2]O%/fQ08SO7+'iOOQ07b7+'i7+'iO!$aQ^O7+'iO%0YQWO,5;[OOQ07`,5?`,5?`OOQ07`-E<r-E<rOOQ07b7+%c7+%cO%0_QpO'#KTO#%sQWO7+(_O%0iQrO7+(_O$@aQWO7+(_O%0pQ08QO'#ChO%1TQ08QO,5<}O%1uQWO,5<}OOQ07`1G5g1G5gOOQU7+$`7+$`O!@rQ07hO7+$`O!@}Q`O7+$`O!$aQ^O7+&]O%1zQWO'#IyO%2cQWO,5@vOOQO1G3a1G3aO9aQWO,5@vO%2cQWO,5@vO%2kQWO,5@vOOQO,5?f,5?fOOQO-E<x-E<xOOQ07b7+'Q7+'QO%2pQWO7+(zO9kQ07hO7+(zO9aQWO7+(zO@bQWO7+(zOOQU7+(j7+(jO%2uQ08QO7+(gO!&dQ7[O7+(gO%3PQpO7+(hOOQU7+(h7+(hO!&dQ7[O7+(hO%3WQWO'#KXO%3cQWO,5=fOOQO,5?b,5?bOOQO-E<t-E<tOOQU7+(m7+(mO%4rQ`O'#HTOOQU1G3Y1G3YO!&dQ7[O1G3YO%[Q^O1G3YO%4yQWO1G3YO%5UQ7[O1G3YO9kQ07hO1G3[O$!UQWO1G3[O9UQWO1G3[O!@}Q`O1G3[O!AVQ7[O1G3[O%5dQWO'#IxO%5xQWO,5@tO%6QQ`O,5@tOOQ07`1G3]1G3]OOQU7+$U7+$UO@bQWO7+$UO9kQ07hO7+$UO%6]QWO7+$UO%[Q^O1G6cO%[Q^O1G6dO%6bQ07hO1G6cO%6lQ^O1G3dO%6sQWO1G3dO%6xQ^O1G3dOOQU7+(|7+(|O9kQ07hO7+)WO`Q^O7+)YOOQU'#K_'#K_OOQU'#I{'#I{O%7PQ^O,5>XOOQU,5>X,5>XO%[Q^O'#HnO%7^QWO'#HpOOQU,5>_,5>_O9ZQWO,5>_OOQU,5>a,5>aOOQU7+)c7+)cOOQU7+)i7+)iOOQU7+)m7+)mOOQU7+)o7+)oO%7cQ`O1G5sO%7wQ(CYO1G0vO%8RQWO1G0vOOQO1G/p1G/pO%8^Q(CYO1G/pO>pQWO1G/pO!*fQ^O'#DjOOQO,5>x,5>xOOQO-E<[-E<[OOQO,5?O,5?OOOQO-E<b-E<bO!@}Q`O1G/pOOQO-E<_-E<_OOQ07f1G0[1G0[OOQ07b7+%t7+%tO#%sQWO7+%tOOQ07b7+&[7+&[O>pQWO7+&[O!@}Q`O7+&[OOQO7+%w7+%wO$=gQ08SO7+&TOOQO7+&T7+&TO%[Q^O7+&TO%8hQ07hO7+&TO!@rQ07hO7+%wO!@}Q`O7+%wO%8sQ07hO7+&TO%9RQ08SO7++hO%[Q^O7++hO%9cQWO7++gO%9cQWO7++gOOQO1G4l1G4lO9ZQWO1G4lO%9kQWO1G4lOOQO7+%|7+%|O#%sQWO<<KyO%0iQrO<<KyO%9yQWO<<KyOOQU<<Ky<<KyO!&dQ7[O<<KyO%[Q^O<<KyO%:RQWO<<KyO%:^Q08SO,5?YO%<iQ08SO,5?[O%>tQ08SO1G2ZO%AVQ08SO1G2mO%CbQ08SO1G2oO%EmQ7[O,5>yOOQO-E<]-E<]O%EwQrO,5>zO%[Q^O,5>zOOQO-E<^-E<^O%FRQWO1G5uOOQ07b<<JQ<<JQO%FZQ(CYO1G0qO%HeQ(CYO1G0{O%HlQ(CYO1G0{O%JpQ(CYO1G0{O%JwQ(CYO1G0{O%LlQ(CYO1G0{O%MSQ(CYO1G0{O& gQ(CYO1G0{O& nQ(CYO1G0{O&#rQ(CYO1G0{O&#yQ(CYO1G0{O&%qQ(CYO1G0{O&&UQ08SO<<JdO&'ZQ(CYO1G0{O&)PQ(CYO'#JdO&+SQ(CYO1G1aO&+aQ(CYO1G0TO!*fQ^O'#FnOOQO'#KP'#KPOOQO1G1r1G1rO&+kQWO1G1qO&+pQ(CYO,5?TOOOS7+'e7+'eOOOO1G/V1G/VOOQ07b1G4q1G4qO!(SQ7[O7+(]O&+zQWO,5?UO9aQWO,5?UOOQO-E<h-E<hO&,YQWO1G6XO&,YQWO1G6XO&,bQWO1G6XO&,mQ7[O7+'uO&,}QpO,5?WO&-XQWO,5?WO!&dQ7[O,5?WOOQO-E<j-E<jO&-^QpO1G6YO&-hQWO1G6YOOQ07`1G2e1G2eO$'TQWO1G2eOOQ07`1G2d1G2dO&-pQWO1G2fO!&dQ7[O1G2fOOQ07`1G2k1G2kO!@}Q`O1G2dOC_QWO1G2eO&-uQWO1G2fO&-}QWO1G2eO&.qQ7[O,5?YOOQ07b-E<m-E<mO&/dQ7[O,5?[OOQ07b-E<o-E<oO!(SQ7[O7++TOOQ07b1G/_1G/_O&/nQWO1G/_OOQ07b7+'p7+'pO&/sQ7[O7+'wO&0TQ08SO<<KTOOQ07b<<KT<<KTO&0wQWO1G0vO!&dQ7[O'#IsO&0|QWO,5@oO!&dQ7[O1G2iOOQU<<Gz<<GzO!@rQ07hO<<GzO&1UQ08SO<<IwOOQ07b<<Iw<<IwOOQO,5?e,5?eO&1xQWO,5?eO&1}QWO,5?eOOQO-E<w-E<wO&2]QWO1G6bO&2]QWO1G6bO9aQWO1G6bO@bQWO<<LfOOQU<<Lf<<LfO&2eQWO<<LfO9kQ07hO<<LfOOQU<<LR<<LRO%2uQ08QO<<LROOQU<<LS<<LSO%3PQpO<<LSO&2jQ`O'#IuO&2uQWO,5@sO!*fQ^O,5@sOOQU1G3Q1G3QO&2}Q^O'#JmOOQO'#Iw'#IwO9kQ07hO'#IwO&3XQ`O,5=oOOQU,5=o,5=oO&3`Q`O'#EcO&3tQWO7+(tO&3yQWO7+(tOOQU7+(t7+(tO!&dQ7[O7+(tO%[Q^O7+(tO&4RQWO7+(tOOQU7+(v7+(vO9kQ07hO7+(vO$!UQWO7+(vO9UQWO7+(vO!@}Q`O7+(vO&4^QWO,5?dOOQO-E<v-E<vOOQO'#HW'#HWO&4iQWO1G6`O9kQ07hO<<GpOOQU<<Gp<<GpO@bQWO<<GpO&4qQWO7++}O&4vQWO7+,OO%[Q^O7++}O%[Q^O7+,OOOQU7+)O7+)OO&4{QWO7+)OO&5QQ^O7+)OO&5XQWO7+)OOOQU<<Lr<<LrOOQU<<Lt<<LtOOQU-E<y-E<yOOQU1G3s1G3sO&5^QWO,5>YOOQU,5>[,5>[O&5cQWO1G3yO9ZQWO7+&bO!*fQ^O7+&bOOQO7+%[7+%[O&5hQ(CYO1G6PO>pQWO7+%[OOQ07b<<I`<<I`OOQ07b<<Iv<<IvO>pQWO<<IvOOQO<<Io<<IoO$=gQ08SO<<IoO%[Q^O<<IoOOQO<<Ic<<IcO!@rQ07hO<<IcO&5rQ07hO<<IoO&5}Q08SO<= SO&6_QWO<= ROOQO7+*W7+*WO9ZQWO7+*WOOQUANAeANAeO&6gQWOANAeO!&dQ7[OANAeO#%sQWOANAeO%0iQrOANAeO%[Q^OANAeO&6oQ08SO7+'uO&9QQ08SO,5?YO&;]Q08SO,5?[O&=hQ08SO7+'wO&?yQrO1G4fO&@TQ(CYO7+&]O&BXQ(CYO,5=RO&D`Q(CYO,5=TO&DpQ(CYO,5=RO&EQQ(CYO,5=TO&EbQ(CYO,59qO&GeQ(CYO,5<fO&IhQ(CYO,5<hO&KkQ(CYO,5<vO&MaQ(CYO7+'hO&MnQ(CYO7+'iO&M{QWO,5<YOOQO7+']7+']O&NQQ7[O<<KwOOQO1G4p1G4pO&NXQWO1G4pO&NdQWO1G4pO&NrQWO7++sO&NrQWO7++sO!&dQ7[O1G4rO&NzQpO1G4rO' UQWO7++tOOQ07`7+(P7+(PO$'TQWO7+(QO' ^QpO7+(QOOQ07`7+(O7+(OO$'TQWO7+(PO' eQWO7+(QO!&dQ7[O7+(QOC_QWO7+(PO' jQ7[O<<NoOOQ07b7+$y7+$yO' tQpO,5?_OOQO-E<q-E<qO'!OQ08QO7+(TOOQUAN=fAN=fO9aQWO1G5POOQO1G5P1G5PO'!`QWO1G5PO'!eQWO7++|O'!eQWO7++|O9kQ07hOANBQO@bQWOANBQOOQUANBQANBQOOQUANAmANAmOOQUANAnANAnO'!mQWO,5?aOOQO-E<s-E<sO'!xQ(CYO1G6_O'%YQrO'#ChOOQO,5?c,5?cOOQO-E<u-E<uOOQU1G3Z1G3ZO&2}Q^O,5<zOOQU<<L`<<L`O!&dQ7[O<<L`O&3tQWO<<L`O'%dQWO<<L`O%[Q^O<<L`OOQU<<Lb<<LbO9kQ07hO<<LbO$!UQWO<<LbO9UQWO<<LbO'%lQ`O1G5OO'%wQWO7++zOOQUAN=[AN=[O9kQ07hOAN=[OOQU<= i<= iOOQU<= j<= jO'&PQWO<= iO'&UQWO<= jOOQU<<Lj<<LjO'&ZQWO<<LjO'&`Q^O<<LjOOQU1G3t1G3tO>pQWO7+)eO'&gQWO<<I|O'&rQ(CYO<<I|OOQO<<Hv<<HvOOQ07bAN?bAN?bOOQOAN?ZAN?ZO$=gQ08SOAN?ZOOQOAN>}AN>}O%[Q^OAN?ZOOQO<<Mr<<MrOOQUG27PG27PO!&dQ7[OG27PO#%sQWOG27PO'&|QWOG27PO%0iQrOG27PO''UQ(CYO<<JdO''cQ(CYO1G2ZO')XQ(CYO,5?YO'+[Q(CYO,5?[O'-_Q(CYO1G2mO'/bQ(CYO1G2oO'1eQ(CYO<<KTO'1rQ(CYO<<IwOOQO1G1t1G1tO!(SQ7[OANAcOOQO7+*[7+*[O'2PQWO7+*[O'2[QWO<= _O'2dQpO7+*^OOQ07`<<Kl<<KlO$'TQWO<<KlOOQ07`<<Kk<<KkO'2nQpO<<KlO$'TQWO<<KkOOQO7+*k7+*kO9aQWO7+*kO'2uQWO<= hOOQUG27lG27lO9kQ07hOG27lO!*fQ^O1G4{O'2}QWO7++yO&3tQWOANAzOOQUANAzANAzO!&dQ7[OANAzO'3VQWOANAzOOQUANA|ANA|O9kQ07hOANA|O$!UQWOANA|OOQO'#HX'#HXOOQO7+*j7+*jOOQUG22vG22vOOQUANETANETOOQUANEUANEUOOQUANBUANBUO'3_QWOANBUOOQU<<MP<<MPO!*fQ^OAN?hOOQOG24uG24uO$=gQ08SOG24uO#%sQWOLD,kOOQULD,kLD,kO!&dQ7[OLD,kO'3dQWOLD,kO'3lQ(CYO7+'uO'5bQ(CYO,5?YO'7eQ(CYO,5?[O'9hQ(CYO7+'wO';^Q7[OG26}OOQO<<Mv<<MvOOQ07`ANAWANAWO$'TQWOANAWOOQ07`ANAVANAVOOQO<<NV<<NVOOQULD-WLD-WO';nQ(CYO7+*gOOQUG27fG27fO&3tQWOG27fO!&dQ7[OG27fOOQUG27hG27hO9kQ07hOG27hOOQUG27pG27pO';xQ(CYOG25SOOQOLD*aLD*aOOQU!$(!V!$(!VO#%sQWO!$(!VO!&dQ7[O!$(!VO'<SQ08SOG26}OOQ07`G26rG26rOOQULD-QLD-QO&3tQWOLD-QOOQULD-SLD-SOOQU!)9Eq!)9EqO#%sQWO!)9EqOOQU!$(!l!$(!lOOQU!.K;]!.K;]O'>eQ(CYOG26}O!*fQ^O'#DyO1PQWO'#EWO'@ZQrO'#JiO!*fQ^O'#DqO'@bQ^O'#D}O'@iQrO'#ChO'CPQrO'#ChO!*fQ^O'#EPO'CaQ^O,5;VO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O'#IiO'EdQWO,5<eO'ElQ7[O,5;aO'GVQ7[O,5;aO!*fQ^O,5;uO!&dQ7[O'#GgO'ElQ7[O'#GgO!&dQ7[O'#GiO'ElQ7[O'#GiO1SQWO'#DVO1SQWO'#DVO!&dQ7[O'#FzO'ElQ7[O'#FzO!&dQ7[O'#F|O'ElQ7[O'#F|O!&dQ7[O'#G[O'ElQ7[O'#G[O!*fQ^O,5:iO!*fQ^O,5@eO'CaQ^O1G0qO'G^Q(CYO'#ChO!*fQ^O1G1|O!&dQ7[O'#InO'ElQ7[O'#InO!&dQ7[O'#IpO'ElQ7[O'#IpO!&dQ7[O,5<oO'ElQ7[O,5<oO'CaQ^O1G1}O!*fQ^O7+&xO!&dQ7[O1G2ZO'ElQ7[O1G2ZO!&dQ7[O'#InO'ElQ7[O'#InO!&dQ7[O'#IpO'ElQ7[O'#IpO!&dQ7[O1G2]O'ElQ7[O1G2]O'CaQ^O7+'iO'CaQ^O7+&]O!&dQ7[OANAcO'ElQ7[OANAcO'GhQWO'#EkO'GmQWO'#EkO'GuQWO'#FZO'GzQWO'#EuO'HPQWO'#JyO'H[QWO'#JwO'HgQWO,5;VO'HlQ7[O,5<bO'HsQWO'#GTO'HxQWO'#GTO'H}QWO,5<cO'IVQWO,5;VO'I_Q(CYO1G1^O'IfQWO,5<oO'IkQWO,5<oO'IpQWO,5<qO'IuQWO,5<qO'IzQWO1G1}O'JPQWO1G0qO'JUQ7[O<<KwO'J]Q7[O<<KwO7hQ7[O'#FxO9UQWO'#FwOA]QWO'#EjO!*fQ^O,5;rO!3fQWO'#GTO!3fQWO'#GTO!3fQWO'#GVO!3fQWO'#GVO!(SQ7[O7+(]O!(SQ7[O7+(]O%*sQpO1G2qO%*sQpO1G2qO!&dQ7[O,5=VO!&dQ7[O,5=V",stateData:"'Ka~O'tOS'uOSSOS'vRQ~OPYOQYORfOX!VO`qOczOdyOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![XO!fuO!kZO!nYO!oYO!pYO!rvO!twO!wxO!{]O#s!PO$T|O%b}O%d!QO%f!OO%g!OO%h!OO%k!RO%m!SO%p!TO%q!TO%s!UO&P!WO&V!XO&X!YO&Z!ZO&]![O&`!]O&f!^O&l!_O&n!`O&p!aO&r!bO&t!cO'{SO'}TO(QUO(XVO(g[O(tiO~OVtO~P`OPYOQYORfOc!jOd!iOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![!eO!fuO!kZO!nYO!oYO!pYO!rvO!t!gO!w!hO$T!kO'{!dO'}TO(QUO(XVO(g[O(tiO~O`!vOo!nO!P!oO!_!xO!`!uO!a!uO!{:dO#P!pO#Q!pO#R!wO#S!pO#T!pO#W!yO#X!yO'|!lO'}TO(QUO([!mO(g!sO~O'v!zO~OP[XZ[X`[Xn[X|[X}[X!P[X!Y[X!h[X!i[X!k[X!o[X#[[X#geX#j[X#k[X#l[X#m[X#n[X#o[X#p[X#q[X#r[X#t[X#v[X#x[X#y[X$O[X'r[X(X[X(h[X(o[X(p[X~O!d$|X~P(qO^!|O'}#OO(O!|O(P#OO~O^#PO(P#OO(Q#OO(R#PO~Ot#RO!R#SO(Y#SO(Z#UO~OPYOQYORfOc!jOd!iOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![!eO!fuO!kZO!nYO!oYO!pYO!rvO!t!gO!w!hO$T!kO'{:hO'}TO(QUO(XVO(g[O(tiO~O!X#YO!Y#VO!V(_P!V(lP~P+}O!Z#bO~P`OPYOQYORfOc!jOd!iOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![!eO!fuO!kZO!nYO!oYO!pYO!rvO!t!gO!w!hO$T!kO'}TO(QUO(XVO(g[O(tiO~Ol#lO!X#hO!{]O#e#kO#f#hO'{:iO!j(iP~P.iO!k#nO'{#mO~O!w#rO!{]O%b#sO~O#g#tO~O!d#uO#g#tO~OP$]OZ$dOn$QO|#yO}#zO!P#{O!Y$aO!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO#v$VO#x$XO#y$YO(XVO(h$ZO(o#|O(p#}O~O`(]X'r(]X'p(]X!j(]X!V(]X![(]X%c(]X!d(]X~P1qO#[$eO$O$eOP(^XZ(^Xn(^X|(^X}(^X!P(^X!Y(^X!h(^X!k(^X!o(^X#j(^X#k(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#t(^X#v(^X#x(^X#y(^X(X(^X(h(^X(o(^X(p(^X![(^X%c(^X~O`(^X!i(^X'r(^X'p(^X!V(^X!j(^Xr(^X!d(^X~P4XO#[$eO~O$Y$gO$[$fO$c$lO~ORfO![$mO$f$nO$h$pO~Og%VOl%WOn$tOo$sOp$sOv%XOx%YOz%ZO!P${O![$|O!f%`O!k$xO#f%aO$T%^O$o%[O$q%]O$t%_O'{$rO'}TO(QUO(X$uO(o$}O(p%POf(UP~O!k%bO~O!P%eO![%fO'{%dO~O!d%jO~O`%kO'r%kO~O'|!lO~P%[O%h%rO~P%[Og%VO!k%bO'{%dO'|!lO~Od%yO!k%bO'{%dO~O#r$SO~O|&OO![%{O!k%}O%d&RO'{%dO'|!lO'}TO(QUO_(}P~O!w#rO~O%m&TO!P(yX![(yX'{(yX~O'{&UO~O!t&ZO#s!PO%d!QO%f!OO%g!OO%h!OO%k!RO%m!SO%p!TO%q!TO~Oc&`Od&_O!w&]O%b&^O%u&[O~P;xOc&cOdyO![&bO!t&ZO!wxO!{]O#s!PO%b}O%f!OO%g!OO%h!OO%k!RO%m!SO%p!TO%q!TO%s!UO~Oa&fO#[&iO%d&dO'|!lO~P<}O!k&jO!t&nO~O!k#nO~O![XO~O`%kO'q&vO'r%kO~O`%kO'q&yO'r%kO~O`%kO'q&{O'r%kO~O'p[X!V[Xr[X!j[X&T[X![[X%c[X!d[X~P(qO!_'YO!`'RO!a'RO'|!lO'}TO(QUO~Oo'PO!P'OO!X'SO([&}O!Z(`P!Z(nP~P@UOj']O!['ZO'{%dO~Od'bO!k%bO'{%dO~O|&OO!k%}O~Oo!nO!P!oO!{:dO#P!pO#Q!pO#S!pO#T!pO'|!lO'}TO(QUO([!mO(g!sO~O!_'hO!`'gO!a'gO#R!pO#W'iO#X'iO~PApO`%kOg%VO!d#uO!k%bO'r%kO(h'kO~O!o'oO#['mO~PCOOo!nO!P!oO'}TO(QUO([!mO(g!sO~O![XOo(eX!P(eX!_(eX!`(eX!a(eX!{(eX#P(eX#Q(eX#R(eX#S(eX#T(eX#W(eX#X(eX'|(eX'}(eX(Q(eX([(eX(g(eX~O!`'gO!a'gO'|!lO~PCnO'w'sO'x'sO'y'uO~O^!|O'}'wO(O!|O(P'wO~O^#PO(P'wO(Q'wO(R#PO~Ot#RO!R#SO(Y#SO(Z'{O~O!X'}O!V'PX!V'VX!Y'PX!Y'VX~P+}O!Y(PO!V(_X~OP$]OZ$dOn$QO|#yO}#zO!P#{O!Y(PO!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO#v$VO#x$XO#y$YO(XVO(h$ZO(o#|O(p#}O~O!V(_X~PGbO!V(UO~O!V(kX!Y(kX!d(kX!j(kX(h(kX~O#[(kX#g#`X!Z(kX~PIhO#[(VO!V(mX!Y(mX~O!Y(WO!V(lX~O!V(ZO~O#[$eO~PIhO!Z([O~P`O|#yO}#zO!P#{O!i#wO!k#xO(XVOP!maZ!man!ma!Y!ma!h!ma!o!ma#j!ma#k!ma#l!ma#m!ma#n!ma#o!ma#p!ma#q!ma#r!ma#t!ma#v!ma#x!ma#y!ma(h!ma(o!ma(p!ma~O`!ma'r!ma'p!ma!V!ma!j!mar!ma![!ma%c!ma!d!ma~PKOO!j(]O~O!d#uO#[(^O(h'kO!Y(jX`(jX'r(jX~O!j(jX~PMnO!P%eO![%fO!{]O#e(cO#f(bO'{%dO~O!Y(dO!j(iX~O!j(fO~O!P%eO![%fO#f(bO'{%dO~OP(^XZ(^Xn(^X|(^X}(^X!P(^X!Y(^X!h(^X!i(^X!k(^X!o(^X#j(^X#k(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#t(^X#v(^X#x(^X#y(^X(X(^X(h(^X(o(^X(p(^X~O!d#uO!j(^X~P! [O|(gO}(hO!i#wO!k#xO!{!za!P!za~O!w!za%b!za![!za#e!za#f!za'{!za~P!#`O!w(lO~OPYOQYORfOc!jOd!iOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![XO!fuO!kZO!nYO!oYO!pYO!rvO!t!gO!w!hO$T!kO'{!dO'}TO(QUO(XVO(g[O(tiO~Og%VOl%WOn$tOo$sOp$sOv%XOx%YOz;QO!P${O![$|O!f<`O!k$xO#f;WO$T%^O$o;SO$q;UO$t%_O'{(pO'}TO(QUO(X$uO(o$}O(p%PO~O#g(rO~Og%VOl%WOn$tOo$sOp$sOv%XOx%YOz%ZO!P${O![$|O!f%`O!k$xO#f%aO$T%^O$o%[O$q%]O$t%_O'{(pO'}TO(QUO(X$uO(o$}O(p%PO~Of(bP~P!(SO!X(vO!j(cP~P%[O([(xO(g[O~O!P(zO!k#xO([(xO(g[O~OP:cOQ:cORfOc<[Od!iOlkOn:cOokOpkOvkOx:cOz:cO!PWO!TkO!UkO![!eO!f:fO!kZO!n:cO!o:cO!p:cO!r:gO!t:jO!w!hO$T!kO'{)YO'}TO(QUO(XVO(g[O(t<YO~O})]O!k#xO~O!Y$aO`$ma'r$ma'p$ma!j$ma!V$ma![$ma%c$ma!d$ma~O#s)aO~P!&dO|)dO!d)cO![$ZX$W$ZX$Y$ZX$[$ZX$c$ZX~O!d)cO![(qX$W(qX$Y(qX$[(qX$c(qX~O|)dO~P!.OO|)dO![(qX$W(qX$Y(qX$[(qX$c(qX~O![)fO$W)jO$Y)eO$[)eO$c)kO~O!X)nO~P!*fO$Y$gO$[$fO$c)rO~Oj$uX|$uX!P$uX!i$uX(o$uX(p$uX~OfiXf$uXjiX!YiX#[iX~P!/tOo)tO~Ot)uO(Y)vO(Z)xO~Oj*RO|)zO!P){O(o$}O(p%PO~Of)yO~P!0}Of*SO~Og%VOl%WOn$tOo$sOp$sOv%XOx%YOz;QO!P${O![$|O!f<`O!k$xO#f;WO$T%^O$o;SO$q;UO$t%_O'}TO(QUO(X$uO(o$}O(p%PO~O!X*WO'{*TO!j(uP~P!1lO#g*YO~O!k*ZO~O!X*`O'{*]O!V(vP~P!1lOn*lO!P*dO!_*jO!`*cO!a*cO!k*ZO#W*kO%Y*fO'|!lO([!mO~O!Z*iO~P!3xO!i#wOj(WX|(WX!P(WX(o(WX(p(WX!Y(WX#[(WX~Of(WX#|(WX~P!4qOj*qO#[*pOf(VX!Y(VX~O!Y*rOf(UX~O'{&UOf(UP~O!k*yO~O'{(pO~Ol*}O!P%eO!X#hO![%fO!{]O#e#kO#f#hO'{%dO!j(iP~O!d#uO#g+OO~O!P%eO!X+QO!Y(WO![%fO'{%dO!V(lP~Oo'VO!P+SO!X+RO'}TO(QUO([(xO~O!Z(nP~P!7lO!Y+TO`(zX'r(zX~OP$]OZ$dOn$QO|#yO}#zO!P#{O!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO#v$VO#x$XO#y$YO(XVO(h$ZO(o#|O(p#}O~O`!ea!Y!ea'r!ea'p!ea!V!ea!j!ear!ea![!ea%c!ea!d!ea~P!8dO|#yO}#zO!P#{O!i#wO!k#xO(XVOP!qaZ!qan!qa!Y!qa!h!qa!o!qa#j!qa#k!qa#l!qa#m!qa#n!qa#o!qa#p!qa#q!qa#r!qa#t!qa#v!qa#x!qa#y!qa(h!qa(o!qa(p!qa~O`!qa'r!qa'p!qa!V!qa!j!qar!qa![!qa%c!qa!d!qa~P!:}O|#yO}#zO!P#{O!i#wO!k#xO(XVOP!saZ!san!sa!Y!sa!h!sa!o!sa#j!sa#k!sa#l!sa#m!sa#n!sa#o!sa#p!sa#q!sa#r!sa#t!sa#v!sa#x!sa#y!sa(h!sa(o!sa(p!sa~O`!sa'r!sa'p!sa!V!sa!j!sar!sa![!sa%c!sa!d!sa~P!=hOg%VOj+^O!['ZO%c+]O~O!d+`O`(TX![(TX'r(TX!Y(TX~O`%kO![XO'r%kO~Og%VO!k%bO~Og%VO!k%bO'{%dO~O!d#uO#g(rO~Oa+kO%d+lO'{+hO'}TO(QUO!Z)OP~O!Y+mO_(}X~OZ+qO~O_+rO~O![%{O'{%dO'|!lO_(}P~Og%VO#[+wO~Og%VOj+zO![$|O~O![+|O~O|,OO![XO~O%h%rO~O!w,TO~Od,YO~Oa,ZO'{#mO'}TO(QUO!Z(|P~Od%yO~O%d!QO'{&UO~P<}OZ,`O_,_O~OPYOQYORfOczOdyOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO!fuO!kZO!nYO!oYO!pYO!rvO!wxO!{]O%b}O'}TO(QUO(XVO(g[O(tiO~O![!eO!t!gO$T!kO'{!dO~P!DkO_,_O`%kO'r%kO~OPYOQYORfOc!jOd!iOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![!eO!fuO!kZO!nYO!oYO!pYO!rvO!w!hO$T!kO'{!dO'}TO(QUO(XVO(g[O(tiO~O`,eO!twO#s!OO%f!OO%g!OO%h!OO~P!GTO!k&jO~O&V,kO~O![,mO~O&h,oO&j,pOP&eaQ&eaR&eaX&ea`&eac&ead&eal&ean&eao&eap&eav&eax&eaz&ea!P&ea!T&ea!U&ea![&ea!f&ea!k&ea!n&ea!o&ea!p&ea!r&ea!t&ea!w&ea!{&ea#s&ea$T&ea%b&ea%d&ea%f&ea%g&ea%h&ea%k&ea%m&ea%p&ea%q&ea%s&ea&P&ea&V&ea&X&ea&Z&ea&]&ea&`&ea&f&ea&l&ea&n&ea&p&ea&r&ea&t&ea'p&ea'{&ea'}&ea(Q&ea(X&ea(g&ea(t&ea!Z&ea&^&eaa&ea&c&ea~O'{,uO~Og!bX!Y!OX!Y!bX!Z!OX!Z!bX!d!OX!d!bX!k!bX#[!OX~O!d,zO#[,yOg(aX!Y#dX!Y(aX!Z#dX!Z(aX!d(aX!k(aX~Og%VO!d,|O!k%bO!Y!^X!Z!^X~Oo!nO!P!oO'}TO(QUO([!mO~OP:cOQ:cORfOc<[Od!iOlkOn:cOokOpkOvkOx:cOz:cO!PWO!TkO!UkO![!eO!f:fO!kZO!n:cO!o:cO!p:cO!r:gO!t:jO!w!hO$T!kO'}TO(QUO(XVO(g[O(t<YO~O'{;]O~P#!ZO!Y-QO!Z(`X~O!Z-SO~O!d,zO#[,yO!Y#dX!Z#dX~O!Y-TO!Z(nX~O!Z-VO~O!`-WO!a-WO'|!lO~P# xO!Z-ZO~P'_Oj-^O!['ZO~O!V-cO~Oo!za!_!za!`!za!a!za#P!za#Q!za#R!za#S!za#T!za#W!za#X!za'|!za'}!za(Q!za([!za(g!za~P!#`O!o-hO#[-fO~PCOO!`-jO!a-jO'|!lO~PCnO`%kO#[-fO'r%kO~O`%kO!d#uO#[-fO'r%kO~O`%kO!d#uO!o-hO#[-fO'r%kO(h'kO~O'w'sO'x'sO'y-oO~Or-pO~O!V'Pa!Y'Pa~P!8dO!X-tO!V'PX!Y'PX~P%[O!Y(PO!V(_a~O!V(_a~PGbO!Y(WO!V(la~O!P%eO!X-xO![%fO'{%dO!V'VX!Y'VX~O#[-zO!Y(ja!j(ja`(ja'r(ja~O!d#uO~P#*aO!Y(dO!j(ia~O!P%eO![%fO#f.OO'{%dO~Ol.TO!P%eO!X.QO![%fO!{]O#e.SO#f.QO'{%dO!Y'YX!j'YX~O}.XO!k#xO~Og%VOj.[O!['ZO%c.ZO~O`#_i!Y#_i'r#_i'p#_i!V#_i!j#_ir#_i![#_i%c#_i!d#_i~P!8dOj<fO|)zO!P){O(o$}O(p%PO~O#g#Za`#Za#[#Za'r#Za!Y#Za!j#Za![#Za!V#Za~P#-]O#g(WXP(WXZ(WX`(WXn(WX}(WX!h(WX!k(WX!o(WX#j(WX#k(WX#l(WX#m(WX#n(WX#o(WX#p(WX#q(WX#r(WX#t(WX#v(WX#x(WX#y(WX'r(WX(X(WX(h(WX!j(WX!V(WX'p(WXr(WX![(WX%c(WX!d(WX~P!4qO!Y.iOf(bX~P!0}Of.kO~O!Y.lO!j(cX~P!8dO!j.oO~O!V.qO~OP$]O|#yO}#zO!P#{O!i#wO!k#xO!o$]O(XVOZ#ii`#iin#ii!Y#ii!h#ii#k#ii#l#ii#m#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii'r#ii(h#ii(o#ii(p#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~O#j#ii~P#1XO#j$OO~P#1XOP$]O|#yO}#zO!P#{O!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO(XVOZ#ii`#ii!Y#ii!h#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii'r#ii(h#ii(o#ii(p#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~On#ii~P#3yOn$QO~P#3yOP$]On$QO|#yO}#zO!P#{O!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO(XVO`#ii!Y#ii#t#ii#v#ii#x#ii#y#ii'r#ii(h#ii(o#ii(p#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~OZ#ii!h#ii#o#ii#p#ii#q#ii#r#ii~P#6kOZ$dO!h$SO#o$SO#p$SO#q$cO#r$SO~P#6kOP$]OZ$dOn$QO|#yO}#zO!P#{O!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO(XVO`#ii!Y#ii#v#ii#x#ii#y#ii'r#ii(h#ii(p#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~O(o#ii~P#9lO(o#|O~P#9lOP$]OZ$dOn$QO|#yO}#zO!P#{O!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO#v$VO(XVO(o#|O`#ii!Y#ii#x#ii#y#ii'r#ii(h#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~O(p#ii~P#<^O(p#}O~P#<^OP$]OZ$dOn$QO|#yO}#zO!P#{O!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO#v$VO#x$XO(XVO(o#|O(p#}O~O`#ii!Y#ii#y#ii'r#ii(h#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~P#?OOP[XZ[Xn[X|[X}[X!P[X!h[X!i[X!k[X!o[X#[[X#geX#j[X#k[X#l[X#m[X#n[X#o[X#p[X#q[X#r[X#t[X#v[X#x[X#y[X$O[X(X[X(h[X(o[X(p[X!Y[X!Z[X~O#|[X~P#AiOP$]OZ:zOn:nO|#yO}#zO!P#{O!h:pO!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO#n:oO#o:pO#p:pO#q:yO#r:pO#t:qO#v:sO#x:uO#y:vO(XVO(h$ZO(o#|O(p#}O~O#|.sO~P#CvO#[:{O$O:{O#|(^X!Z(^X~P! [O`']a!Y']a'r']a'p']a!j']a!V']ar']a![']a%c']a!d']a~P!8dOP#iiZ#ii`#iin#ii}#ii!Y#ii!h#ii!i#ii!k#ii!o#ii#j#ii#k#ii#l#ii#m#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii'r#ii(X#ii(h#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~P#-]O`#}i!Y#}i'r#}i'p#}i!V#}i!j#}ir#}i![#}i%c#}i!d#}i~P!8dO$Y.xO$[.xO~O$Y.yO$[.yO~O!d)cO#[.zO![$`X$W$`X$Y$`X$[$`X$c$`X~O!X.{O~O![)fO$W.}O$Y)eO$[)eO$c/OO~O!Y:wO!Z(]X~P#CvO!Z/PO~O!d)cO$c(qX~O$c/RO~Ot)uO(Y)vO(Z/UO~O!V/YO~P!&dO(o$}Oj%Za|%Za!P%Za(p%Za!Y%Za#[%Za~Of%Za#|%Za~P#LWO(p%POj%]a|%]a!P%]a(o%]a!Y%]a#[%]a~Of%]a#|%]a~P#LyO!YeX!deX!jeX!j$uX(heX~P!/tO!j/bO~P#-]O!Y/cO!d#uO(h'kO!j(uX~O!j/hO~O!X*WO'{%dO!j(uP~O#g/jO~O!V$uX!Y$uX!d$|X~P!/tO!Y/kO!V(vX~P#-]O!d/mO~O!V/oO~Og%VOn/sO!d#uO!k%bO(h'kO~O'{/uO~O!d+`O~O`%kO!Y/yO'r%kO~O!Z/{O~P!3xO!`/|O!a/|O'|!lO([!mO~O!P0OO([!mO~O#W0PO~Of%Za!Y%Za#[%Za#|%Za~P!0}Of%]a!Y%]a#[%]a#|%]a~P!0}O'{&UOf'fX!Y'fX~O!Y*rOf(Ua~Of0YO~O|0ZO}0ZO!P0[Ojya(oya(pya!Yya#[ya~Ofya#|ya~P$$dO|)zO!P){Oj$na(o$na(p$na!Y$na#[$na~Of$na#|$na~P$%YO|)zO!P){Oj$pa(o$pa(p$pa!Y$pa#[$pa~Of$pa#|$pa~P$%{O#g0^O~Of%Oa!Y%Oa#[%Oa#|%Oa~P!0}O!d#uO~O#g0aO~O!Y+TO`(za'r(za~O|#yO}#zO!P#{O!i#wO!k#xO(XVOP!qiZ!qin!qi!Y!qi!h!qi!o!qi#j!qi#k!qi#l!qi#m!qi#n!qi#o!qi#p!qi#q!qi#r!qi#t!qi#v!qi#x!qi#y!qi(h!qi(o!qi(p!qi~O`!qi'r!qi'p!qi!V!qi!j!qir!qi![!qi%c!qi!d!qi~P$'jOg%VOn$tOo$sOp$sOv%XOx%YOz;QO!P${O![$|O!f<`O!k$xO#f;WO$T%^O$o;SO$q;UO$t%_O'}TO(QUO(X$uO(o$}O(p%PO~Ol0kO'{0jO~P$*TO!d+`O`(Ta![(Ta'r(Ta!Y(Ta~O#g0qO~OZ[X!YeX!ZeX~O!Y0rO!Z)OX~O!Z0tO~OZ0uO~Oa0wO'{+hO'}TO(QUO~O![%{O'{%dO_'nX!Y'nX~O!Y+mO_(}a~O!j0zO~P!8dOZ0}O~O_1OO~O#[1RO~Oj1UO![$|O~O([(xO!Z({P~Og%VOj1_O![1[O%c1^O~OZ1iO!Y1gO!Z(|X~O!Z1jO~O_1lO`%kO'r%kO~O'{#mO'}TO(QUO~O#[$eO$O$eOP(^XZ(^Xn(^X|(^X}(^X!P(^X!Y(^X!h(^X!k(^X!o(^X#j(^X#k(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#t(^X#v(^X#x(^X#y(^X(X(^X(h(^X(o(^X(p(^X~O#r1oO&T1pO`(^X!i(^X~P$/kO#[$eO#r1oO&T1pO~O`1rO~P%[O`1tO~O&^1wOP&[iQ&[iR&[iX&[i`&[ic&[id&[il&[in&[io&[ip&[iv&[ix&[iz&[i!P&[i!T&[i!U&[i![&[i!f&[i!k&[i!n&[i!o&[i!p&[i!r&[i!t&[i!w&[i!{&[i#s&[i$T&[i%b&[i%d&[i%f&[i%g&[i%h&[i%k&[i%m&[i%p&[i%q&[i%s&[i&P&[i&V&[i&X&[i&Z&[i&]&[i&`&[i&f&[i&l&[i&n&[i&p&[i&r&[i&t&[i'p&[i'{&[i'}&[i(Q&[i(X&[i(g&[i(t&[i!Z&[ia&[i&c&[i~Oa1}O!Z1{O&c1|O~P`O![XO!k2PO~O&j,pOP&eiQ&eiR&eiX&ei`&eic&eid&eil&ein&eio&eip&eiv&eix&eiz&ei!P&ei!T&ei!U&ei![&ei!f&ei!k&ei!n&ei!o&ei!p&ei!r&ei!t&ei!w&ei!{&ei#s&ei$T&ei%b&ei%d&ei%f&ei%g&ei%h&ei%k&ei%m&ei%p&ei%q&ei%s&ei&P&ei&V&ei&X&ei&Z&ei&]&ei&`&ei&f&ei&l&ei&n&ei&p&ei&r&ei&t&ei'p&ei'{&ei'}&ei(Q&ei(X&ei(g&ei(t&ei!Z&ei&^&eia&ei&c&ei~O!V2VO~O!Y!^a!Z!^a~P#CvOo!nO!P!oO!X2]O([!mO!Y'QX!Z'QX~P@UO!Y-QO!Z(`a~O!Y'WX!Z'WX~P!7lO!Y-TO!Z(na~O!Z2dO~P'_O`%kO#[2mO'r%kO~O`%kO!d#uO#[2mO'r%kO~O`%kO!d#uO!o2qO#[2mO'r%kO(h'kO~O`%kO'r%kO~P!8dO!Y$aOr$ma~O!V'Pi!Y'Pi~P!8dO!Y(PO!V(_i~O!Y(WO!V(li~O!V(mi!Y(mi~P!8dO!Y(ji!j(ji`(ji'r(ji~P!8dO#[2sO!Y(ji!j(ji`(ji'r(ji~O!Y(dO!j(ii~O!P%eO![%fO!{]O#e2xO#f2wO'{%dO~O!P%eO![%fO#f2wO'{%dO~Oj3PO!['ZO%c3OO~Og%VOj3PO!['ZO%c3OO~O#g%ZaP%ZaZ%Za`%Zan%Za}%Za!h%Za!i%Za!k%Za!o%Za#j%Za#k%Za#l%Za#m%Za#n%Za#o%Za#p%Za#q%Za#r%Za#t%Za#v%Za#x%Za#y%Za'r%Za(X%Za(h%Za!j%Za!V%Za'p%Zar%Za![%Za%c%Za!d%Za~P#LWO#g%]aP%]aZ%]a`%]an%]a}%]a!h%]a!i%]a!k%]a!o%]a#j%]a#k%]a#l%]a#m%]a#n%]a#o%]a#p%]a#q%]a#r%]a#t%]a#v%]a#x%]a#y%]a'r%]a(X%]a(h%]a!j%]a!V%]a'p%]ar%]a![%]a%c%]a!d%]a~P#LyO#g%ZaP%ZaZ%Za`%Zan%Za}%Za!Y%Za!h%Za!i%Za!k%Za!o%Za#j%Za#k%Za#l%Za#m%Za#n%Za#o%Za#p%Za#q%Za#r%Za#t%Za#v%Za#x%Za#y%Za'r%Za(X%Za(h%Za!j%Za!V%Za'p%Za#[%Zar%Za![%Za%c%Za!d%Za~P#-]O#g%]aP%]aZ%]a`%]an%]a}%]a!Y%]a!h%]a!i%]a!k%]a!o%]a#j%]a#k%]a#l%]a#m%]a#n%]a#o%]a#p%]a#q%]a#r%]a#t%]a#v%]a#x%]a#y%]a'r%]a(X%]a(h%]a!j%]a!V%]a'p%]a#[%]ar%]a![%]a%c%]a!d%]a~P#-]O#gyaPyaZya`yanya!hya!iya!kya!oya#jya#kya#lya#mya#nya#oya#pya#qya#rya#tya#vya#xya#yya'rya(Xya(hya!jya!Vya'pyarya![ya%cya!dya~P$$dO#g$naP$naZ$na`$nan$na}$na!h$na!i$na!k$na!o$na#j$na#k$na#l$na#m$na#n$na#o$na#p$na#q$na#r$na#t$na#v$na#x$na#y$na'r$na(X$na(h$na!j$na!V$na'p$nar$na![$na%c$na!d$na~P$%YO#g$paP$paZ$pa`$pan$pa}$pa!h$pa!i$pa!k$pa!o$pa#j$pa#k$pa#l$pa#m$pa#n$pa#o$pa#p$pa#q$pa#r$pa#t$pa#v$pa#x$pa#y$pa'r$pa(X$pa(h$pa!j$pa!V$pa'p$par$pa![$pa%c$pa!d$pa~P$%{O#g%OaP%OaZ%Oa`%Oan%Oa}%Oa!Y%Oa!h%Oa!i%Oa!k%Oa!o%Oa#j%Oa#k%Oa#l%Oa#m%Oa#n%Oa#o%Oa#p%Oa#q%Oa#r%Oa#t%Oa#v%Oa#x%Oa#y%Oa'r%Oa(X%Oa(h%Oa!j%Oa!V%Oa'p%Oa#[%Oar%Oa![%Oa%c%Oa!d%Oa~P#-]O`#_q!Y#_q'r#_q'p#_q!V#_q!j#_qr#_q![#_q%c#_q!d#_q~P!8dOf'RX!Y'RX~P!(SO!Y.iOf(ba~O!X3ZO!Y'SX!j'SX~P%[O!Y.lO!j(ca~O!Y.lO!j(ca~P!8dO!V3^O~O#|!ma!Z!ma~PKOO#|!ea!Y!ea!Z!ea~P#CvO#|!qa!Z!qa~P!:}O#|!sa!Z!sa~P!=hORfO![3pO$a3qO~O!Z3uO~Or3vO~P#-]O`$jq!Y$jq'r$jq'p$jq!V$jq!j$jqr$jq![$jq%c$jq!d$jq~P!8dO!V3wO~P#-]O|)zO!P){O(p%POj'ba(o'ba!Y'ba#['ba~Of'ba#|'ba~P%)_O|)zO!P){Oj'da(o'da(p'da!Y'da#['da~Of'da#|'da~P%*QO(h$ZO~P#-]O!X3zO'{%dO!Y'^X!j'^X~O!Y/cO!j(ua~O!Y/cO!d#uO!j(ua~O!Y/cO!d#uO(h'kO!j(ua~Of$wi!Y$wi#[$wi#|$wi~P!0}O!X4SO'{*]O!V'`X!Y'`X~P!1lO!Y/kO!V(va~O!Y/kO!V(va~P#-]O!d#uO#r4[O~On4_O!d#uO(h'kO~O(o$}Oj%Zi|%Zi!P%Zi(p%Zi!Y%Zi#[%Zi~Of%Zi#|%Zi~P%-dO(p%POj%]i|%]i!P%]i(o%]i!Y%]i#[%]i~Of%]i#|%]i~P%.VOf(Vi!Y(Vi~P!0}O#[4fOf(Vi!Y(Vi~P!0}O!j4iO~O`$kq!Y$kq'r$kq'p$kq!V$kq!j$kqr$kq![$kq%c$kq!d$kq~P!8dO!V4mO~O!Y4nO![(wX~P#-]O!i#wO~P4XO`$uX![$uX%W[X'r$uX!Y$uX~P!/tO%W4pO`kXjkX|kX!PkX![kX'rkX(okX(pkX!YkX~O%W4pO~Oa4vO%d4wO'{+hO'}TO(QUO!Y'mX!Z'mX~O!Y0rO!Z)Oa~OZ4{O~O_4|O~O`%kO'r%kO~P#-]O![$|O~P#-]O!Y5UO#[5WO!Z({X~O!Z5XO~Oo!nO!P5YO!_!xO!`!uO!a!uO!{:dO#P!pO#Q!pO#R!pO#S!pO#T!pO#W5_O#X!yO'|!lO'}TO(QUO([!mO(g!sO~O!Z5^O~P%3hOj5dO![1[O%c5cO~Og%VOj5dO![1[O%c5cO~Oa5kO'{#mO'}TO(QUO!Y'lX!Z'lX~O!Y1gO!Z(|a~O'}TO(QUO([5mO~O_5qO~O#r5tO&T5uO~PMnO!j5vO~P%[O`5xO~O`5xO~P%[Oa1}O!Z5}O&c1|O~P`O!d6PO~O!d6ROg(ai!Y(ai!Z(ai!d(ai!k(ai~O!Y#di!Z#di~P#CvO#[6SO!Y#di!Z#di~O!Y!^i!Z!^i~P#CvO`%kO#[6]O'r%kO~O`%kO!d#uO#[6]O'r%kO~O!Y(jq!j(jq`(jq'r(jq~P!8dO!Y(dO!j(iq~O!P%eO![%fO#f6dO'{%dO~O!['ZO%c6gO~Oj6jO!['ZO%c6gO~O#g'baP'baZ'ba`'ban'ba}'ba!h'ba!i'ba!k'ba!o'ba#j'ba#k'ba#l'ba#m'ba#n'ba#o'ba#p'ba#q'ba#r'ba#t'ba#v'ba#x'ba#y'ba'r'ba(X'ba(h'ba!j'ba!V'ba'p'bar'ba!['ba%c'ba!d'ba~P%)_O#g'daP'daZ'da`'dan'da}'da!h'da!i'da!k'da!o'da#j'da#k'da#l'da#m'da#n'da#o'da#p'da#q'da#r'da#t'da#v'da#x'da#y'da'r'da(X'da(h'da!j'da!V'da'p'dar'da!['da%c'da!d'da~P%*QO#g$wiP$wiZ$wi`$win$wi}$wi!Y$wi!h$wi!i$wi!k$wi!o$wi#j$wi#k$wi#l$wi#m$wi#n$wi#o$wi#p$wi#q$wi#r$wi#t$wi#v$wi#x$wi#y$wi'r$wi(X$wi(h$wi!j$wi!V$wi'p$wi#[$wir$wi![$wi%c$wi!d$wi~P#-]O#g%ZiP%ZiZ%Zi`%Zin%Zi}%Zi!h%Zi!i%Zi!k%Zi!o%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#p%Zi#q%Zi#r%Zi#t%Zi#v%Zi#x%Zi#y%Zi'r%Zi(X%Zi(h%Zi!j%Zi!V%Zi'p%Zir%Zi![%Zi%c%Zi!d%Zi~P%-dO#g%]iP%]iZ%]i`%]in%]i}%]i!h%]i!i%]i!k%]i!o%]i#j%]i#k%]i#l%]i#m%]i#n%]i#o%]i#p%]i#q%]i#r%]i#t%]i#v%]i#x%]i#y%]i'r%]i(X%]i(h%]i!j%]i!V%]i'p%]ir%]i![%]i%c%]i!d%]i~P%.VOf'Ra!Y'Ra~P!0}O!Y'Sa!j'Sa~P!8dO!Y.lO!j(ci~O#|#_i!Y#_i!Z#_i~P#CvOP$]O|#yO}#zO!P#{O!i#wO!k#xO!o$]O(XVOZ#iin#ii!h#ii#k#ii#l#ii#m#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii#|#ii(h#ii(o#ii(p#ii!Y#ii!Z#ii~O#j#ii~P%FhO#j:lO~P%FhOP$]O|#yO}#zO!P#{O!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO(XVOZ#ii!h#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii#|#ii(h#ii(o#ii(p#ii!Y#ii!Z#ii~On#ii~P%HsOn:nO~P%HsOP$]On:nO|#yO}#zO!P#{O!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO#n:oO(XVO#t#ii#v#ii#x#ii#y#ii#|#ii(h#ii(o#ii(p#ii!Y#ii!Z#ii~OZ#ii!h#ii#o#ii#p#ii#q#ii#r#ii~P%KOOZ:zO!h:pO#o:pO#p:pO#q:yO#r:pO~P%KOOP$]OZ:zOn:nO|#yO}#zO!P#{O!h:pO!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO#n:oO#o:pO#p:pO#q:yO#r:pO#t:qO(XVO#v#ii#x#ii#y#ii#|#ii(h#ii(p#ii!Y#ii!Z#ii~O(o#ii~P%MjO(o#|O~P%MjOP$]OZ:zOn:nO|#yO}#zO!P#{O!h:pO!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO#n:oO#o:pO#p:pO#q:yO#r:pO#t:qO#v:sO(XVO(o#|O#x#ii#y#ii#|#ii(h#ii!Y#ii!Z#ii~O(p#ii~P& uO(p#}O~P& uOP$]OZ:zOn:nO|#yO}#zO!P#{O!h:pO!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO#n:oO#o:pO#p:pO#q:yO#r:pO#t:qO#v:sO#x:uO(XVO(o#|O(p#}O~O#y#ii#|#ii(h#ii!Y#ii!Z#ii~P&$QO`#zy!Y#zy'r#zy'p#zy!V#zy!j#zyr#zy![#zy%c#zy!d#zy~P!8dOj<gO|)zO!P){O(o$}O(p%PO~OP#iiZ#iin#ii}#ii!h#ii!i#ii!k#ii!o#ii#j#ii#k#ii#l#ii#m#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii#|#ii(X#ii(h#ii!Y#ii!Z#ii~P&&xO!i#wOP(WXZ(WXj(WXn(WX|(WX}(WX!P(WX!h(WX!k(WX!o(WX#j(WX#k(WX#l(WX#m(WX#n(WX#o(WX#p(WX#q(WX#r(WX#t(WX#v(WX#x(WX#y(WX#|(WX(X(WX(h(WX(o(WX(p(WX!Y(WX!Z(WX~O#|#}i!Y#}i!Z#}i~P#CvO#|!qi!Z!qi~P$'jO!Z6|O~O!Y']a!Z']a~P#CvO!d#uO(h'kO!Y'^a!j'^a~O!Y/cO!j(ui~O!Y/cO!d#uO!j(ui~Of$wq!Y$wq#[$wq#|$wq~P!0}O!V'`a!Y'`a~P#-]O!d7TO~O!Y/kO!V(vi~P#-]O!Y/kO!V(vi~O!V7XO~O!d#uO#r7^O~On7_O!d#uO(h'kO~O|)zO!P){O(p%POj'ca(o'ca!Y'ca#['ca~Of'ca#|'ca~P&.YO|)zO!P){Oj'ea(o'ea(p'ea!Y'ea#['ea~Of'ea#|'ea~P&.{O!V7aO~Of$yq!Y$yq#[$yq#|$yq~P!0}O`$ky!Y$ky'r$ky'p$ky!V$ky!j$kyr$ky![$ky%c$ky!d$ky~P!8dO!d6RO~O!Y4nO![(wa~O`#_y!Y#_y'r#_y'p#_y!V#_y!j#_yr#_y![#_y%c#_y!d#_y~P!8dOZ7fO~Oa7hO'{+hO'}TO(QUO~O!Y0rO!Z)Oi~O_7lO~O([(xO!Y'iX!Z'iX~O!Y5UO!Z({a~OlkO'{7sO~P.iO!Z7vO~P%3hOo!nO!P7wO'}TO(QUO([!mO(g!sO~O![1[O~O![1[O%c7yO~Oj7|O![1[O%c7yO~OZ8RO!Y'la!Z'la~O!Y1gO!Z(|i~O!j8VO~O!j8WO~O!j8ZO~O!j8ZO~P%[O`8]O~O!d8^O~O!j8_O~O!Y(mi!Z(mi~P#CvO`%kO#[8gO'r%kO~O!Y(jy!j(jy`(jy'r(jy~P!8dO!Y(dO!j(iy~O!['ZO%c8jO~O#g$wqP$wqZ$wq`$wqn$wq}$wq!Y$wq!h$wq!i$wq!k$wq!o$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#p$wq#q$wq#r$wq#t$wq#v$wq#x$wq#y$wq'r$wq(X$wq(h$wq!j$wq!V$wq'p$wq#[$wqr$wq![$wq%c$wq!d$wq~P#-]O#g'caP'caZ'ca`'can'ca}'ca!h'ca!i'ca!k'ca!o'ca#j'ca#k'ca#l'ca#m'ca#n'ca#o'ca#p'ca#q'ca#r'ca#t'ca#v'ca#x'ca#y'ca'r'ca(X'ca(h'ca!j'ca!V'ca'p'car'ca!['ca%c'ca!d'ca~P&.YO#g'eaP'eaZ'ea`'ean'ea}'ea!h'ea!i'ea!k'ea!o'ea#j'ea#k'ea#l'ea#m'ea#n'ea#o'ea#p'ea#q'ea#r'ea#t'ea#v'ea#x'ea#y'ea'r'ea(X'ea(h'ea!j'ea!V'ea'p'ear'ea!['ea%c'ea!d'ea~P&.{O#g$yqP$yqZ$yq`$yqn$yq}$yq!Y$yq!h$yq!i$yq!k$yq!o$yq#j$yq#k$yq#l$yq#m$yq#n$yq#o$yq#p$yq#q$yq#r$yq#t$yq#v$yq#x$yq#y$yq'r$yq(X$yq(h$yq!j$yq!V$yq'p$yq#[$yqr$yq![$yq%c$yq!d$yq~P#-]O!Y'Si!j'Si~P!8dO#|#_q!Y#_q!Z#_q~P#CvO(o$}OP%ZaZ%Zan%Za}%Za!h%Za!i%Za!k%Za!o%Za#j%Za#k%Za#l%Za#m%Za#n%Za#o%Za#p%Za#q%Za#r%Za#t%Za#v%Za#x%Za#y%Za#|%Za(X%Za(h%Za!Y%Za!Z%Za~Oj%Za|%Za!P%Za(p%Za~P&@bO(p%POP%]aZ%]an%]a}%]a!h%]a!i%]a!k%]a!o%]a#j%]a#k%]a#l%]a#m%]a#n%]a#o%]a#p%]a#q%]a#r%]a#t%]a#v%]a#x%]a#y%]a#|%]a(X%]a(h%]a!Y%]a!Z%]a~Oj%]a|%]a!P%]a(o%]a~P&BiOj<gO|)zO!P){O(p%PO~P&@bOj<gO|)zO!P){O(o$}O~P&BiO|0ZO}0ZO!P0[OPyaZyajyanya!hya!iya!kya!oya#jya#kya#lya#mya#nya#oya#pya#qya#rya#tya#vya#xya#yya#|ya(Xya(hya(oya(pya!Yya!Zya~O|)zO!P){OP$naZ$naj$nan$na}$na!h$na!i$na!k$na!o$na#j$na#k$na#l$na#m$na#n$na#o$na#p$na#q$na#r$na#t$na#v$na#x$na#y$na#|$na(X$na(h$na(o$na(p$na!Y$na!Z$na~O|)zO!P){OP$paZ$paj$pan$pa}$pa!h$pa!i$pa!k$pa!o$pa#j$pa#k$pa#l$pa#m$pa#n$pa#o$pa#p$pa#q$pa#r$pa#t$pa#v$pa#x$pa#y$pa#|$pa(X$pa(h$pa(o$pa(p$pa!Y$pa!Z$pa~OP%OaZ%Oan%Oa}%Oa!h%Oa!i%Oa!k%Oa!o%Oa#j%Oa#k%Oa#l%Oa#m%Oa#n%Oa#o%Oa#p%Oa#q%Oa#r%Oa#t%Oa#v%Oa#x%Oa#y%Oa#|%Oa(X%Oa(h%Oa!Y%Oa!Z%Oa~P&&xO#|$jq!Y$jq!Z$jq~P#CvO#|$kq!Y$kq!Z$kq~P#CvO!Z8vO~O#|8wO~P!0}O!d#uO!Y'^i!j'^i~O!d#uO(h'kO!Y'^i!j'^i~O!Y/cO!j(uq~O!V'`i!Y'`i~P#-]O!Y/kO!V(vq~O!V8}O~P#-]O!V8}O~Of(Vy!Y(Vy~P!0}O!Y'ga!['ga~P#-]O`%Vq![%Vq'r%Vq!Y%Vq~P#-]OZ9SO~O!Y0rO!Z)Oq~O#[9WO!Y'ia!Z'ia~O!Y5UO!Z({i~P#CvOP[XZ[Xn[X|[X}[X!P[X!V[X!Y[X!h[X!i[X!k[X!o[X#[[X#geX#j[X#k[X#l[X#m[X#n[X#o[X#p[X#q[X#r[X#t[X#v[X#x[X#y[X$O[X(X[X(h[X(o[X(p[X~O!d%TX#r%TX~P'#SO![1[O%c9[O~O'}TO(QUO([9aO~O!Y1gO!Z(|q~O!j9dO~O!j9eO~O!j9fO~O!j9fO~P%[O#[9iO!Y#dy!Z#dy~O!Y#dy!Z#dy~P#CvO!['ZO%c9nO~O#|#zy!Y#zy!Z#zy~P#CvOP$wiZ$win$wi}$wi!h$wi!i$wi!k$wi!o$wi#j$wi#k$wi#l$wi#m$wi#n$wi#o$wi#p$wi#q$wi#r$wi#t$wi#v$wi#x$wi#y$wi#|$wi(X$wi(h$wi!Y$wi!Z$wi~P&&xO|)zO!P){O(p%POP'baZ'baj'ban'ba}'ba!h'ba!i'ba!k'ba!o'ba#j'ba#k'ba#l'ba#m'ba#n'ba#o'ba#p'ba#q'ba#r'ba#t'ba#v'ba#x'ba#y'ba#|'ba(X'ba(h'ba(o'ba!Y'ba!Z'ba~O|)zO!P){OP'daZ'daj'dan'da}'da!h'da!i'da!k'da!o'da#j'da#k'da#l'da#m'da#n'da#o'da#p'da#q'da#r'da#t'da#v'da#x'da#y'da#|'da(X'da(h'da(o'da(p'da!Y'da!Z'da~O(o$}OP%ZiZ%Zij%Zin%Zi|%Zi}%Zi!P%Zi!h%Zi!i%Zi!k%Zi!o%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#p%Zi#q%Zi#r%Zi#t%Zi#v%Zi#x%Zi#y%Zi#|%Zi(X%Zi(h%Zi(p%Zi!Y%Zi!Z%Zi~O(p%POP%]iZ%]ij%]in%]i|%]i}%]i!P%]i!h%]i!i%]i!k%]i!o%]i#j%]i#k%]i#l%]i#m%]i#n%]i#o%]i#p%]i#q%]i#r%]i#t%]i#v%]i#x%]i#y%]i#|%]i(X%]i(h%]i(o%]i!Y%]i!Z%]i~O#|$ky!Y$ky!Z$ky~P#CvO#|#_y!Y#_y!Z#_y~P#CvO!d#uO!Y'^q!j'^q~O!Y/cO!j(uy~O!V'`q!Y'`q~P#-]O!V9wO~P#-]O!Y0rO!Z)Oy~O!Y5UO!Z({q~O![1[O%c:OO~O!j:RO~O!['ZO%c:WO~OP$wqZ$wqn$wq}$wq!h$wq!i$wq!k$wq!o$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#p$wq#q$wq#r$wq#t$wq#v$wq#x$wq#y$wq#|$wq(X$wq(h$wq!Y$wq!Z$wq~P&&xO|)zO!P){O(p%POP'caZ'caj'can'ca}'ca!h'ca!i'ca!k'ca!o'ca#j'ca#k'ca#l'ca#m'ca#n'ca#o'ca#p'ca#q'ca#r'ca#t'ca#v'ca#x'ca#y'ca#|'ca(X'ca(h'ca(o'ca!Y'ca!Z'ca~O|)zO!P){OP'eaZ'eaj'ean'ea}'ea!h'ea!i'ea!k'ea!o'ea#j'ea#k'ea#l'ea#m'ea#n'ea#o'ea#p'ea#q'ea#r'ea#t'ea#v'ea#x'ea#y'ea#|'ea(X'ea(h'ea(o'ea(p'ea!Y'ea!Z'ea~OP$yqZ$yqn$yq}$yq!h$yq!i$yq!k$yq!o$yq#j$yq#k$yq#l$yq#m$yq#n$yq#o$yq#p$yq#q$yq#r$yq#t$yq#v$yq#x$yq#y$yq#|$yq(X$yq(h$yq!Y$yq!Z$yq~P&&xOf%_!Z!Y%_!Z#[%_!Z#|%_!Z~P!0}O!Y'iq!Z'iq~P#CvO!Y#d!Z!Z#d!Z~P#CvO#g%_!ZP%_!ZZ%_!Z`%_!Zn%_!Z}%_!Z!Y%_!Z!h%_!Z!i%_!Z!k%_!Z!o%_!Z#j%_!Z#k%_!Z#l%_!Z#m%_!Z#n%_!Z#o%_!Z#p%_!Z#q%_!Z#r%_!Z#t%_!Z#v%_!Z#x%_!Z#y%_!Z'r%_!Z(X%_!Z(h%_!Z!j%_!Z!V%_!Z'p%_!Z#[%_!Zr%_!Z![%_!Z%c%_!Z!d%_!Z~P#-]OP%_!ZZ%_!Zn%_!Z}%_!Z!h%_!Z!i%_!Z!k%_!Z!o%_!Z#j%_!Z#k%_!Z#l%_!Z#m%_!Z#n%_!Z#o%_!Z#p%_!Z#q%_!Z#r%_!Z#t%_!Z#v%_!Z#x%_!Z#y%_!Z#|%_!Z(X%_!Z(h%_!Z!Y%_!Z!Z%_!Z~P&&xOr(]X~P1qO'|!lO~P!*fO!VeX!YeX#[eX~P'#SOP[XZ[Xn[X|[X}[X!P[X!Y[X!YeX!h[X!i[X!k[X!o[X#[[X#[eX#geX#j[X#k[X#l[X#m[X#n[X#o[X#p[X#q[X#r[X#t[X#v[X#x[X#y[X$O[X(X[X(h[X(o[X(p[X~O!deX!j[X!jeX(heX~P'@vOP:cOQ:cORfOc<[Od!iOlkOn:cOokOpkOvkOx:cOz:cO!PWO!TkO!UkO![XO!f:fO!kZO!n:cO!o:cO!p:cO!r:gO!t:jO!w!hO$T!kO'{)YO'}TO(QUO(XVO(g[O(t<YO~O!Y:wO!Z$ma~Og%VOl%WOn$tOo$sOp$sOv%XOx%YOz;RO!P${O![$|O!f<aO!k$xO#f;XO$T%^O$o;TO$q;VO$t%_O'{(pO'}TO(QUO(X$uO(o$}O(p%PO~O#s)aO~P'ElO!Z[X!ZeX~P'@vO#g:kO~O!d#uO#g:kO~O#[:{O~O#r:pO~O#[;ZO!Y(mX!Z(mX~O#[:{O!Y(kX!Z(kX~O#g;[O~Of;^O~P!0}O#g;cO~O#g;dO~O!d#uO#g;eO~O!d#uO#g;[O~O#|;fO~P#CvO#g;gO~O#g;hO~O#g;mO~O#g;nO~O#g;oO~O#g;pO~O#|;qO~P!0}O#|;rO~P!0}O!i#P#Q#S#T#W#e#f#q(t$o$q$t%W%b%c%d%k%m%p%q%s%u~'vS#k!U't'|#lo#j#mn|'u$Y'u'{$[([~",goto:"$2p)SPPPPP)TPP)WP)iP*x.|PPPP5pPP6WPP<S?gP?zP?zPPP?zPAxP?zP?zP?zPA|PPBRPBlPGdPPPGhPPPPGhJiPPPJoKjPGhPMxPPPP!!WGhPPPGhPGhP!$fGhP!'z!(|!)VP!)y!)}!)yPPPPP!-Y!(|PP!-v!.pP!1dGhGh!1i!4s!9Y!9Y!=OPPP!=VGhPPPPPPPPPPP!@dP!AuPPGh!CSPGhPGhGhGhGhPGh!DfP!GnP!JrP!Jv!KQ!KU!KUP!GkP!KY!KYP!N^P!NbGhGh!Nh##k?zP?zP?z?zP#$v?z?z#'O?z#)k?z#+m?z?z#,[#.f#.f#.j#.r#.f#.zP#.fP?z#/d?z#3R?z?z5pPPP#6vPPP#7a#7aP#7aP#7w#7aPP#7}P#7tP#7t#8b#7t#8|#9S5m)W#9V)WP#9^#9^#9^P)WP)WP)WP)WPP)WP#9d#9gP#9g)WP#9kP#9nP)WP)WP)WP)WP)WP)W)WPP#9t#9z#:V#:]#:c#:i#:o#:}#;T#;Z#;e#;k#;u#<U#<[#<|#=`#=f#=l#=z#>a#@O#@^#@d#Ax#BW#Cr#DQ#DW#D^#Dd#Dn#Dt#Dz#EU#Eh#EnPPPPPPPPPP#EtPPPPPPP#Fi#Ip#KP#KW#K`PPPP$!d$%Z$+r$+u$+x$,q$,t$,w$-O$-WPP$-^$-b$.Y$/X$/]$/qPP$/u$/{$0PP$0S$0W$0Z$1P$1h$2P$2T$2W$2Z$2a$2d$2h$2lR!{RoqOXst!Z#c%j&m&o&p&r,h,m1w1zY!uQ'Z-Y1[5]Q%pvQ%xyQ&P|Q&e!VS'R!e-QQ'a!iS'g!r!xS*c$|*hQ+f%yQ+s&RQ,X&_Q-W'YQ-b'bQ-j'hQ/|*jQ1f,YR;Y:g%OdOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S,e,h,m-^-f-t-z.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3Z5Y5d5t5u5x6]7w7|8]8gS#p]:d!r)[$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]Q*u%ZQ+k%{Q,Z&bQ,b&jQ.c;QQ0h+^Q0l+`Q0w+lQ1n,`Q2{.[Q4v0rQ5k1gQ6i3PQ6u;RQ7h4wR8m6j&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]t!nQ!r!u!x!y'R'Y'Z'g'h'i-Q-W-Y-j1[5]5_$v$si#u#w$c$d$x${%O%Q%[%]%a)u){)}*P*R*Y*`*p*q+]+`+w+z.Z.i/Z/j/k/m0Q0S0^1R1U1^3O3x4S4[4f4n4p5c6g7T7^7y8j8w9[9n:O:W:y:z:|:};O;P;S;T;U;V;W;X;_;`;a;b;c;d;g;h;i;j;k;l;m;n;q;r<Y<b<c<f<gQ&S|Q'P!eS'V%f-TQ+k%{Q,Z&bQ0]*yQ0w+lQ0|+rQ1m,_Q1n,`Q4v0rQ5P1OQ5k1gQ5n1iQ5o1lQ7h4wQ7k4|Q8U5qQ9V7lR9b8RrnOXst!V!Z#c%j&d&m&o&p&r,h,m1w1zR,]&f&v^OPXYstuvwz!Z!`!g!j!o#R#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O']'m(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<[<][#[WZ#V#Y'S'}!S%gm#g#h#k%b%e(W(b(c(d+Q+R+T,d,z-x.O.P.Q.S2P2w2x6R6dQ%sxQ%wyS%||&RQ&Y!TQ'^!hQ'`!iQ(k#rS*V$x*ZS+e%x%yQ+i%{Q,S&]Q,W&_S-a'a'bQ.^(lQ/g*WQ0p+fQ0v+lQ0x+mQ0{+qQ1a,TS1e,X,YQ2i-bQ3y/cQ4u0rQ4y0uQ5O0}Q5j1fQ7Q3zQ7g4wQ7j4{Q9R7fR9y9S!O$zi#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<c!S%uy!i!t%w%x%y'Q'`'a'b'f'p*b+e+f,}-a-b-i/t0p2b2i2p4^Q+_%sQ+x&VQ+{&WQ,V&_Q.](kQ1`,SU1d,W,X,YQ3Q.^Q5e1aS5i1e1fQ8Q5j#W<^#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<go<_:y:z:};P;T;V;X;`;b;d;h;j;l;n;rW%Ti%V*r<YS&V!Q&dQ&W!RQ&X!SR+v&T$w%Si#u#w$c$d$x${%O%Q%[%]%a)u){)}*P*R*Y*`*p*q+]+`+w+z.Z.i/Z/j/k/m0Q0S0^1R1U1^3O3x4S4[4f4n4p5c6g7T7^7y8j8w9[9n:O:W:y:z:|:};O;P;S;T;U;V;W;X;_;`;a;b;c;d;g;h;i;j;k;l;m;n;q;r<Y<b<c<f<gT)v$u)wV*v%Z;Q;RU'V!e%f-TS(y#y#zQ+p&OS.V(g(hQ1V+|Q4g0ZR7p5U&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]$i$`c#X#d%n%o%q'|(S(n(u(})O)P)Q)R)S)T)U)V)W)X)Z)^)b)l+Z+o-O-m-r-w-y.h.n.r.t.u.v/V0_2W2Z2k2r3Y3_3`3a3b3c3d3e3f3g3h3i3j3k3n3o3t4k4s6U6[6a6o6p6y6z7r8a8e8n8t8u9k9{:S:e<PT#SV#T&}kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]Q'T!eR2^-Qv!nQ!e!r!u!x!y'R'Y'Z'g'h'i-Q-W-Y-j1[5]5_S*b$|*hS/t*c*jQ/}*kQ1X,OQ4^/|R4a0PnqOXst!Z#c%j&m&o&p&r,h,m1w1zQ&t!^Q'q!wS(m#t:kQ+c%vQ,Q&YQ,R&[Q-_'_Q-l'jS.g(r;[S0`+O;eQ0n+dQ1Z,PQ2O,oQ2Q,pQ2Y,{Q2g-`Q2j-dS4l0a;oQ4q0oS4t0q;pQ6T2[Q6X2hQ6^2oQ7e4rQ8b6VQ8c6YQ8f6_R9h8_$d$_c#X#d%o%q'|(S(n(u(})O)P)Q)R)S)T)U)V)W)X)Z)^)b)l+Z+o-O-m-r-w-y.h.n.r.u.v/V0_2W2Z2k2r3Y3_3`3a3b3c3d3e3f3g3h3i3j3k3n3o3t4k4s6U6[6a6o6p6y6z7r8a8e8n8t8u9k9{:S:e<PS(j#o'dU*o%R(q3mS+Y%n.tQ2|0hQ6f2{Q8l6iR9o8m$d$^c#X#d%o%q'|(S(n(u(})O)P)Q)R)S)T)U)V)W)X)Z)^)b)l+Z+o-O-m-r-w-y.h.n.r.u.v/V0_2W2Z2k2r3Y3_3`3a3b3c3d3e3f3g3h3i3j3k3n3o3t4k4s6U6[6a6o6p6y6z7r8a8e8n8t8u9k9{:S:e<PS(i#o'dS({#z$_S+X%n.tS.W(h(jQ.w)]Q0e+YR2y.X&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]S#p]:dQ&o!XQ&p!YQ&r![Q&s!]R1v,kQ'[!hQ+[%sQ-]'^S.Y(k+_Q2e-[W2}.].^0g0iQ6W2fU6e2z2|3QS8i6f6hS9m8k8lS:U9l9oQ:^:VR:a:_U!vQ'Z-YT5Z1[5]!Q_OXZ`st!V!Z#c#g%b%j&d&f&m&o&p&r(d,h,m.P1w1z]!pQ!r'Z-Y1[5]T#p]:d%Y{OPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&j&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S+^,e,h,m-^-f-t-z.[.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3P3Z5Y5d5t5u5x6]6j7w7|8]8gS(y#y#zS.V(g(h!s;v$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]Y!tQ'Z-Y1[5]Q'f!rS'p!u!xS'r!y5_S-i'g'hQ-k'iR2p-jQ'o!tS(`#f1qS-h'f'rQ/f*VQ/r*bQ2q-kQ4O/gS4X/s/}Q7P3yS7[4_4aQ8y7QR9Q7_Q#vbQ'n!tS(_#f1qS(a#l*}Q+P%cQ+a%tQ+g%zU-g'f'o'rQ-{(`Q/e*VQ/q*bQ/w*eQ0m+bQ1b,US2n-h-kQ2v.TS3}/f/gS4W/r/}Q4Z/vQ4]/xQ5g1cQ6`2qQ7O3yQ7S4OS7W4X4aQ7]4`Q8O5hS8x7P7QQ8|7XQ9O7[Q9_8PQ9u8yQ9v8}Q9x9QQ:Q9`Q:Y9wQ;y;tQ<U;}R<V<OV!vQ'Z-Y%YaOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&j&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S+^,e,h,m-^-f-t-z.[.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3P3Z5Y5d5t5u5x6]6j7w7|8]8gS#vz!j!r;s$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]R;y<[%YbOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&j&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S+^,e,h,m-^-f-t-z.[.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3P3Z5Y5d5t5u5x6]6j7w7|8]8gQ%cj!S%ty!i!t%w%x%y'Q'`'a'b'f'p*b+e+f,}-a-b-i/t0p2b2i2p4^S%zz!jQ+b%uQ,U&_W1c,V,W,X,YU5h1d1e1fS8P5i5jQ9`8Q!r;t$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]Q;}<ZR<O<[$|eOPXYstuvw!Z!`!g!o#R#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&m&o&p&r&v'O']'m(P(V(^(r(v(z)y+O+S+^,e,h,m-^-f-t-z.[.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3P3Z5Y5d5t5u5x6]6j7w7|8]8gY#aWZ#V#Y'}!S%gm#g#h#k%b%e(W(b(c(d+Q+R+T,d,z-x.O.P.Q.S2P2w2x6R6dQ,c&j!p;u$[$m)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]R;x'SS'W!e%fR2`-T%OdOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S,e,h,m-^-f-t-z.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3Z5Y5d5t5u5x6]7w7|8]8g!r)[$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]Q,b&jQ0h+^Q2{.[Q6i3PR8m6j!f$Uc#X%n'|(S(n(u)U)V)W)X)^)b+o-m-r-w-y.h.n/V0_2k2r3Y3k4k4s6[6a6o8e9k:e!T:r)Z)l-O.t2W2Z3_3g3h3i3j3n3t6U6p6y6z7r8a8n8t8u9{:S<P!b$Wc#X%n'|(S(n(u)W)X)^)b+o-m-r-w-y.h.n/V0_2k2r3Y3k4k4s6[6a6o8e9k:e!P:t)Z)l-O.t2W2Z3_3i3j3n3t6U6p6y6z7r8a8n8t8u9{:S<P!^$[c#X%n'|(S(n(u)^)b+o-m-r-w-y.h.n/V0_2k2r3Y3k4k4s6[6a6o8e9k:eQ3x/az<])Z)l-O.t2W2Z3_3n3t6U6p6y6z7r8a8n8t8u9{:S<PQ<b<dR<c<e&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]S$nh$oR3q.z'TgOPWXYZhstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m$o%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.z.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]T$jf$pQ$hfS)e$k)iR)q$pT$if$pT)g$k)i'ThOPWXYZhstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m$o%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.z.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]T$nh$oQ$qhR)p$o%YjOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&j&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S+^,e,h,m-^-f-t-z.[.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3P3Z5Y5d5t5u5x6]6j7w7|8]8g!s<Z$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]#clOPXZst!Z!`!o#R#c#n#{$m%j&f&i&j&m&o&p&r&v'O'](z)n+S+^,e,h,m-^.[.{0[1_1o1p1r1t1w1z1|3P3p5Y5d5t5u5x6j7w7|8]!O%Ri#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<c#W(q#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<gQ*z%_Q/W)zo3m:y:z:};P;T;V;X;`;b;d;h;j;l;n;r!O$yi#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<cQ*[$zS*e$|*hQ*{%`Q/x*f#W;{#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<gn;|:y:z:};P;T;V;X;`;b;d;h;j;l;n;rQ<Q<^Q<R<_Q<S<`R<T<a!O%Ri#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<c#W(q#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<go3m:y:z:};P;T;V;X;`;b;d;h;j;l;n;rnoOXst!Z#c%j&m&o&p&r,h,m1w1zQ*_${Q,v&yQ,w&{R4R/k$v%Si#u#w$c$d$x${%O%Q%[%]%a)u){)}*P*R*Y*`*p*q+]+`+w+z.Z.i/Z/j/k/m0Q0S0^1R1U1^3O3x4S4[4f4n4p5c6g7T7^7y8j8w9[9n:O:W:y:z:|:};O;P;S;T;U;V;W;X;_;`;a;b;c;d;g;h;i;j;k;l;m;n;q;r<Y<b<c<f<gQ+y&WQ1T+{Q5S1SR7o5TT*g$|*hS*g$|*hT5[1[5]S/v*d5YT4`0O7wQ+a%tQ/w*eQ0m+bQ1b,UQ5g1cQ8O5hQ9_8PR:Q9`!O%Oi#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<cr)}$v(s*O*n*|/i0U0V3W4P4j6}7`9t;z<W<XS0Q*m0R#W:|#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<gn:}:y:z:};P;T;V;X;`;b;d;h;j;l;n;r!^;_(o)`*U*^._.b.f/S/X/a/n0f1Q1S3T4Q4U5R5T6k6n7U7Y7b7d8{9P:X<d<e`;`3l6q6t6x8o9p9s:bS;i.a3UT;j6s8r!O%Qi#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<cv*P$v(s*Q*m*|/]/i0U0V3W4P4b4j6}7`9t;z<W<XS0S*n0T#W;O#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<gn;P:y:z:};P;T;V;X;`;b;d;h;j;l;n;r!b;a(o)`*U*^.`.a.f/S/X/a/n0f1Q1S3R3T4Q4U5R5T6k6l6n7U7Y7b7d8{9P:X<d<ed;b3l6r6s6x8o8p9p9q9s:bS;k.b3VT;l6t8srnOXst!V!Z#c%j&d&m&o&p&r,h,m1w1zQ&a!UR,e&jrnOXst!V!Z#c%j&d&m&o&p&r,h,m1w1zR&a!UQ+}&XR1P+vsnOXst!V!Z#c%j&d&m&o&p&r,h,m1w1zQ1],SS5b1`1aU7x5`5a5eS9Z7z7{S9|9Y9]Q:Z9}R:`:[Q&h!VR,^&dR5n1iS%||&RR0x+mQ&m!WR,h&nR,n&sT1x,m1zR,r&tQ,q&tR2R,rQ't!zR-n'tSsOtQ#cXT%ms#cQ!}TR'v!}Q#QUR'x#QQ)w$uR/T)wQ#TVR'z#TQ#WWU(Q#W(R-uQ(R#XR-u(SQ-R'TR2_-RQ.j(sR3X.jQ.m(uS3[.m3]R3].nQ-Y'ZR2c-YY!rQ'Z-Y1[5]R'e!rS#^W%eU(X#^(Y-vQ(Y#_R-v(TQ-U'WR2a-Ut`OXst!V!Z#c%j&d&f&m&o&p&r,h,m1w1zS#gZ%bU#q`#g.PR.P(dQ(e#iQ-|(aW.U(e-|2t6bQ2t-}R6b2uQ)i$kR.|)iQ$ohR)o$oQ$bcU)_$b-q:xQ-q:eR:x)lQ/d*VW3{/d3|7R8zU3|/e/f/gS7R3}4OR8z7S$X)|$v(o(s)`*U*^*m*n*w*x*|.a.b.d.e.f/S/X/]/_/a/i/n0U0V0f1Q1S3R3S3T3W3l4P4Q4U4b4d4j5R5T6k6l6m6n6s6t6v6w6x6}7U7Y7`7b7d8o8p8q8{9P9p9q9r9s9t:X:b;z<W<X<d<eQ/l*^U4T/l4V7VQ4V/nR7V4UQ*h$|R/z*hr*O$v(s*m*n*|/i0U0V3W4P4j6}7`9t;z<W<X!^._(o)`*U*^.a.b.f/S/X/a/n0f1Q1S3T4Q4U5R5T6k6n7U7Y7b7d8{9P:X<d<eU/^*O._6qa6q3l6s6t6x8o9p9s:bQ0R*mQ3U.aU4c0R3U8rR8r6sv*Q$v(s*m*n*|/]/i0U0V3W4P4b4j6}7`9t;z<W<X!b.`(o)`*U*^.a.b.f/S/X/a/n0f1Q1S3R3T4Q4U5R5T6k6l6n7U7Y7b7d8{9P:X<d<eU/`*Q.`6re6r3l6s6t6x8o8p9p9q9s:bQ0T*nQ3V.bU4e0T3V8sR8s6tQ*s%UR0X*sQ4o0fR7c4oQ+U%hR0d+UQ5V1VS7q5V9XR9X7rQ,P&YR1Y,PQ5]1[R7u5]Q1h,ZS5l1h8SR8S5nQ0s+iW4x0s4z7i9TQ4z0vQ7i4yR9T7jQ+n%|R0y+nQ1z,mR5|1zYrOXst#cQ&q!ZQ+W%jQ,g&mQ,i&oQ,j&pQ,l&rQ1u,hS1x,m1zR5{1wQ%lpQ&u!_Q&x!aQ&z!bQ&|!cQ'l!tQ+V%iQ+c%vQ+u&SQ,]&hQ,t&wW-e'f'n'o'rQ-l'jQ/y*gQ0n+dS1k,^,aQ2S,sQ2T,vQ2U,wQ2j-dW2l-g-h-k-mQ4q0oQ4}0|Q5Q1QQ5f1bQ5p1mQ5z1vU6Z2k2n2qQ6^2oQ7e4rQ7m5PQ7n5RQ7t5[Q7}5gQ8T5oS8d6[6`Q8f6_Q9U7kQ9^8OQ9c8UQ9j8eQ9z9VQ:P9_Q:T9kR:]:QQ%vyQ'_!iQ'j!tU+d%w%x%yQ,{'QU-`'`'a'bS-d'f'pQ/p*bS0o+e+fQ2[,}S2h-a-bQ2o-iQ4Y/tQ4r0pQ6V2bQ6Y2iQ6_2pR7Z4^S$wi<YR*t%VU%Ui%V<YR0W*rQ$viS(o#u+`Q(s#wS)`$c$dQ*U$xQ*^${Q*m%OQ*n%QQ*w%[Q*x%]Q*|%aQ.a:|Q.b;OQ.d;SQ.e;UQ.f;WQ/S)uS/X){/ZQ/])}Q/_*PQ/a*RQ/i*YQ/n*`Q0U*pQ0V*qh0f+].Z1^3O5c6g7y8j9[9n:O:WQ1Q+wQ1S+zQ3R;_Q3S;aQ3T;cQ3W.iS3l:y:zQ4P/jQ4Q/kQ4U/mQ4b0QQ4d0SQ4j0^Q5R1RQ5T1UQ6k;gQ6l;iQ6m;kQ6n;mQ6s:}Q6t;PQ6v;TQ6w;VQ6x;XQ6}3xQ7U4SQ7Y4[Q7`4fQ7b4nQ7d4pQ8o;dQ8p;`Q8q;bQ8{7TQ9P7^Q9p;hQ9q;jQ9r;lQ9s;nQ9t8wQ:X;qQ:b;rQ;z<YQ<W<bQ<X<cQ<d<fR<e<gnpOXst!Z#c%j&m&o&p&r,h,m1w1zQ!fPS#eZ#nQ&w!`U'c!o5Y7wQ'y#RQ(|#{Q)m$mS,a&f&iQ,f&jQ,s&vQ,x'OQ-[']Q.p(zQ/Q)nQ0b+SQ0i+^Q1s,eQ2f-^Q2|.[Q3s.{Q4h0[Q5a1_Q5r1oQ5s1pQ5w1rQ5y1tQ6O1|Q6f3PQ6{3pQ7{5dQ8X5tQ8Y5uQ8[5xQ8l6jQ9]7|R9g8]#WcOPXZst!Z!`!o#c#n#{%j&f&i&j&m&o&p&r&v'O'](z+S+^,e,h,m-^.[0[1_1o1p1r1t1w1z1|3P5Y5d5t5u5x6j7w7|8]Q#XWQ#dYQ%nuQ%ovS%qw!gS'|#V(PQ(S#YQ(n#tQ(u#xQ(}$OQ)O$PQ)P$QQ)Q$RQ)R$SQ)S$TQ)T$UQ)U$VQ)V$WQ)W$XQ)X$YQ)Z$[Q)^$aQ)b$eW)l$m)n.{3pQ+Z%pQ+o%}S-O'S2]Q-m'mS-r'}-tQ-w(VQ-y(^Q.h(rQ.n(vQ.r:cQ.t:fQ.u:gQ.v:jQ/V)yQ0_+OQ2W,yQ2Z,|Q2k-fQ2r-zQ3Y.lQ3_:kQ3`:lQ3a:mQ3b:nQ3c:oQ3d:pQ3e:qQ3f:rQ3g:sQ3h:tQ3i:uQ3j:vQ3k.sQ3n:{Q3o;YQ3t:wQ4k0aQ4s0qQ6U;ZQ6[2mQ6a2sQ6o3ZQ6p;[Q6y;^Q6z;eQ7r5WQ8a6SQ8e6]Q8n;fQ8t;oQ8u;pQ9k8gQ9{9WQ:S9iQ:e#RR<P<]R#ZWR'U!eY!tQ'Z-Y1[5]S'Q!e-QQ'f!rS'p!u!xS'r!y5_S,}'R'YS-i'g'hQ-k'iQ2b-WR2p-jR(t#wR(w#xQ!fQT-X'Z-Y]!qQ!r'Z-Y1[5]Q#o]R'd:dT#jZ%bS#iZ%bS%hm,dU(a#g#h#kS-}(b(cQ.R(dQ0c+TQ2u.OU2v.P.Q.SS6c2w2xR8h6d`#]W#V#Y%e'}(W+Q-xr#fZm#g#h#k%b(b(c(d+T.O.P.Q.S2w2x6dQ1q,dQ2X,zQ6Q2PQ8`6RT;w'S+RT#`W%eS#_W%eS(O#V(WS(T#Y+QS-P'S+RT-s'}-xT'X!e%fQ$kfR)s$pT)h$k)iR3r.zT*X$x*ZR*a${Q0g+]Q2z.ZQ5`1^Q6h3OQ7z5cQ8k6gQ9Y7yQ9l8jQ9}9[Q:V9nQ:[:OR:_:WnqOXst!Z#c%j&m&o&p&r,h,m1w1zQ&g!VR,]&dtmOXst!U!V!Z#c%j&d&m&o&p&r,h,m1w1zR,d&jT%im,dR1W+|R,[&bQ&Q|R+t&RR+j%{T&k!W&nT&l!W&nT1y,m1z",nodeNames:"⚠ ArithOp ArithOp JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:371,context:Db,nodeProps:[["group",-26,8,16,18,65,201,205,209,210,212,215,218,228,230,236,238,240,242,245,251,257,259,261,263,265,267,268,"Statement",-32,12,13,28,31,32,38,48,51,52,54,59,67,75,79,81,83,84,106,107,116,117,134,137,139,140,141,142,144,145,164,165,167,"Expression",-23,27,29,33,37,39,41,168,170,172,173,175,176,177,179,180,181,183,184,185,195,197,199,200,"Type",-3,87,99,105,"ClassItem"],["openedBy",22,"<",34,"InterpolationStart",53,"[",57,"{",72,"(",157,"JSXStartCloseTag"],["closedBy",23,">",36,"InterpolationEnd",47,"]",58,"}",73,")",162,"JSXEndTag"]],propSources:[Yb],skippedNodes:[0,4,5,271],repeatNodeCount:37,tokenData:"$Fj(CSR!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#8g!R![#:v![!]#Gv!]!^#IS!^!_#J^!_!`#Ns!`!a$#_!a!b$(l!b!c$,k!c!}Er!}#O$-u#O#P$/P#P#Q$4h#Q#R$5r#R#SEr#S#T$7P#T#o$8Z#o#p$<k#p#q$=a#q#r$>q#r#s$?}#s$f%Z$f$g+g$g#BYEr#BY#BZ$AX#BZ$ISEr$IS$I_$AX$I_$I|Er$I|$I}$Dd$I}$JO$Dd$JO$JTEr$JT$JU$AX$JU$KVEr$KV$KW$AX$KW&FUEr&FU&FV$AX&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$AX?HUOEr(n%d_$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$f&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$f&j(R!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(R!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$f&j(OpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(OpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Op(R!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z(CS+rq$f&j(Op(R!b't(;dOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z(CS.ST(P#S$f&j'u(;dO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c(CS.n_$f&j(Op(R!b'u(;dOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`/x`$f&j!o$Ip(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S1V`#t$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S2d_#t$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/|3l_'}$(n$f&j(R!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$f&j(R!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$f&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$a`$f&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$a``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$a`$f&j(R!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(R!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$a`(R!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k#%|:hh$f&j(Op(R!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__VS$f&j(Op(R!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]VS$f&j(R!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXVS$f&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSVSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWVS(R!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]VS$f&j(OpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWVS(OpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYVS(Op(R!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S#%|C}i$f&j(g!L^(Op(R!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr#%|EoP;=`<%lCr(CSFRk$f&j(Op(R!b$Y#t'{&;d([!LYOY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$f&j(Op(R!b$Y#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv(CSJPP;=`<%lEr%#SJ_`$f&j(Op(R!b#l$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SKl_$f&j$O$Id(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&COLva(p&;`$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SNW`$f&j#x$Id(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/|! c_(Q$)`$f&j(OpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$f&j(OpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$f&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$a`$f&j(OpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(OpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$a`(OpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b(*Q!'t_!k(!b$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'l!)O_!jM|$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h!*[b$f&j(Op(R!b'|#)d#m$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S!+o`$f&j(Op(R!b#j$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&-O!,|`$f&j(Op(R!bn&%`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&C[!.Z_!Y&;l$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!/ec$f&j(Op(R!b|'<nOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!0ya$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!2Z_!XMt$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!3eg$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!5Vg$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!6wc$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!8_c$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!9uf$f&j(Op(R!b#k$IdOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpxz!;Zz{#,f{!P!;Z!P!Q#-{!Q!^!;Z!^!_#'Z!_!`#5k!`!a#7Q!a!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z(r!;fb$f&j(Op(R!b!USOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z(Q!<w`$f&j(R!b!USOY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eb!Q!^!<n!^!_!GY!_!}!<n!}#O!Ja#O#P!Dj#P#o!<n#o#p!GY#p;'S!<n;'S;=`!Kj<%lO!<n&n!>Q^$f&j!USOY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@Y!_!}!=y!}#O!Bw#O#P!Dj#P#o!=y#o#p!@Y#p;'S!=y;'S;=`!E[<%lO!=y&n!?Ta$f&j!USO!^&c!_#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&cS!@_X!USOY!@YZ!P!@Y!P!Q!@z!Q!}!@Y!}#O!Ac#O#P!Bb#P;'S!@Y;'S;=`!Bq<%lO!@YS!APU!US#Z#[!@z#]#^!@z#a#b!@z#g#h!@z#i#j!@z#m#n!@zS!AfVOY!AcZ#O!Ac#O#P!A{#P#Q!@Y#Q;'S!Ac;'S;=`!B[<%lO!AcS!BOSOY!AcZ;'S!Ac;'S;=`!B[<%lO!AcS!B_P;=`<%l!AcS!BeSOY!@YZ;'S!@Y;'S;=`!Bq<%lO!@YS!BtP;=`<%l!@Y&n!B|[$f&jOY!BwYZ&cZ!^!Bw!^!_!Ac!_#O!Bw#O#P!Cr#P#Q!=y#Q#o!Bw#o#p!Ac#p;'S!Bw;'S;=`!Dd<%lO!Bw&n!CwX$f&jOY!BwYZ&cZ!^!Bw!^!_!Ac!_#o!Bw#o#p!Ac#p;'S!Bw;'S;=`!Dd<%lO!Bw&n!DgP;=`<%l!Bw&n!DoX$f&jOY!=yYZ&cZ!^!=y!^!_!@Y!_#o!=y#o#p!@Y#p;'S!=y;'S;=`!E[<%lO!=y&n!E_P;=`<%l!=y(Q!Eki$f&j(R!b!USOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#Z&}#Z#[!Eb#[#]&}#]#^!Eb#^#a&}#a#b!Eb#b#g&}#g#h!Eb#h#i&}#i#j!Eb#j#m&}#m#n!Eb#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!f!GaZ(R!b!USOY!GYZw!GYwx!@Yx!P!GY!P!Q!HS!Q!}!GY!}#O!Ic#O#P!Bb#P;'S!GY;'S;=`!JZ<%lO!GY!f!HZb(R!b!USOY'}Zw'}x#O'}#P#Z'}#Z#[!HS#[#]'}#]#^!HS#^#a'}#a#b!HS#b#g'}#g#h!HS#h#i'}#i#j!HS#j#m'}#m#n!HS#n;'S'};'S;=`(f<%lO'}!f!IhX(R!bOY!IcZw!Icwx!Acx#O!Ic#O#P!A{#P#Q!GY#Q;'S!Ic;'S;=`!JT<%lO!Ic!f!JWP;=`<%l!Ic!f!J^P;=`<%l!GY(Q!Jh^$f&j(R!bOY!JaYZ&cZw!Jawx!Bwx!^!Ja!^!_!Ic!_#O!Ja#O#P!Cr#P#Q!<n#Q#o!Ja#o#p!Ic#p;'S!Ja;'S;=`!Kd<%lO!Ja(Q!KgP;=`<%l!Ja(Q!KmP;=`<%l!<n'`!Ky`$f&j(Op!USOY!KpYZ&cZr!Kprs!=ys!P!Kp!P!Q!L{!Q!^!Kp!^!_!Ns!_!}!Kp!}#O##z#O#P!Dj#P#o!Kp#o#p!Ns#p;'S!Kp;'S;=`#%T<%lO!Kp'`!MUi$f&j(Op!USOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#Z(r#Z#[!L{#[#](r#]#^!L{#^#a(r#a#b!L{#b#g(r#g#h!L{#h#i(r#i#j!L{#j#m(r#m#n!L{#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rt!NzZ(Op!USOY!NsZr!Nsrs!@Ys!P!Ns!P!Q# m!Q!}!Ns!}#O#!|#O#P!Bb#P;'S!Ns;'S;=`##t<%lO!Nst# tb(Op!USOY)rZr)rs#O)r#P#Z)r#Z#[# m#[#])r#]#^# m#^#a)r#a#b# m#b#g)r#g#h# m#h#i)r#i#j# m#j#m)r#m#n# m#n;'S)r;'S;=`*Z<%lO)rt##RX(OpOY#!|Zr#!|rs!Acs#O#!|#O#P!A{#P#Q!Ns#Q;'S#!|;'S;=`##n<%lO#!|t##qP;=`<%l#!|t##wP;=`<%l!Ns'`#$R^$f&j(OpOY##zYZ&cZr##zrs!Bws!^##z!^!_#!|!_#O##z#O#P!Cr#P#Q!Kp#Q#o##z#o#p#!|#p;'S##z;'S;=`#$}<%lO##z'`#%QP;=`<%l##z'`#%WP;=`<%l!Kp(r#%fk$f&j(Op(R!b!USOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#Z%Z#Z#[#%Z#[#]%Z#]#^#%Z#^#a%Z#a#b#%Z#b#g%Z#g#h#%Z#h#i%Z#i#j#%Z#j#m%Z#m#n#%Z#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#W#'d](Op(R!b!USOY#'ZZr#'Zrs!GYsw#'Zwx!Nsx!P#'Z!P!Q#(]!Q!}#'Z!}#O#)w#O#P!Bb#P;'S#'Z;'S;=`#*w<%lO#'Z#W#(fe(Op(R!b!USOY*gZr*grs'}sw*gwx)rx#O*g#P#Z*g#Z#[#(]#[#]*g#]#^#(]#^#a*g#a#b#(]#b#g*g#g#h#(]#h#i*g#i#j#(]#j#m*g#m#n#(]#n;'S*g;'S;=`+Z<%lO*g#W#*OZ(Op(R!bOY#)wZr#)wrs!Icsw#)wwx#!|x#O#)w#O#P!A{#P#Q#'Z#Q;'S#)w;'S;=`#*q<%lO#)w#W#*tP;=`<%l#)w#W#*zP;=`<%l#'Z(r#+W`$f&j(Op(R!bOY#*}YZ&cZr#*}rs!Jasw#*}wx##zx!^#*}!^!_#)w!_#O#*}#O#P!Cr#P#Q!;Z#Q#o#*}#o#p#)w#p;'S#*};'S;=`#,Y<%lO#*}(r#,]P;=`<%l#*}(r#,cP;=`<%l!;Z(CS#,sb$f&j(Op(R!b'v(;d!USOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z(CS#.W_$f&j(Op(R!bS(;dOY#-{YZ&cZr#-{rs#/Vsw#-{wx#2gx!^#-{!^!_#4f!_#O#-{#O#P#0X#P#o#-{#o#p#4f#p;'S#-{;'S;=`#5e<%lO#-{(Bb#/`]$f&j(R!bS(;dOY#/VYZ&cZw#/Vwx#0Xx!^#/V!^!_#1j!_#O#/V#O#P#0X#P#o#/V#o#p#1j#p;'S#/V;'S;=`#2a<%lO#/V(AO#0`X$f&jS(;dOY#0XYZ&cZ!^#0X!^!_#0{!_#o#0X#o#p#0{#p;'S#0X;'S;=`#1d<%lO#0X(;d#1QSS(;dOY#0{Z;'S#0{;'S;=`#1^<%lO#0{(;d#1aP;=`<%l#0{(AO#1gP;=`<%l#0X(<v#1qW(R!bS(;dOY#1jZw#1jwx#0{x#O#1j#O#P#0{#P;'S#1j;'S;=`#2Z<%lO#1j(<v#2^P;=`<%l#1j(Bb#2dP;=`<%l#/V(Ap#2p]$f&j(OpS(;dOY#2gYZ&cZr#2grs#0Xs!^#2g!^!_#3i!_#O#2g#O#P#0X#P#o#2g#o#p#3i#p;'S#2g;'S;=`#4`<%lO#2g(<U#3pW(OpS(;dOY#3iZr#3irs#0{s#O#3i#O#P#0{#P;'S#3i;'S;=`#4Y<%lO#3i(<U#4]P;=`<%l#3i(Ap#4cP;=`<%l#2g(=h#4oY(Op(R!bS(;dOY#4fZr#4frs#1jsw#4fwx#3ix#O#4f#O#P#0{#P;'S#4f;'S;=`#5_<%lO#4f(=h#5bP;=`<%l#4f(CS#5hP;=`<%l#-{%#W#5xb$f&j$O$Id(Op(R!b!USOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z+h#7_b$W#t$f&j(Op(R!b!USOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z$/l#8rp$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#:v![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#:v#S#U%Z#U#V#>Q#V#X%Z#X#Y!4|#Y#b%Z#b#c#<v#c#d#AY#d#l%Z#l#m#D[#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#;Rk$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#:v![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#:v#S#X%Z#X#Y!4|#Y#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#=R_$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#>Zd$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#?i!R!S#?i!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#?i#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#?tf$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#?i!R!S#?i!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#?i#S#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#Acc$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#Bn!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#Bn#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#Bye$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#Bn!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#Bn#S#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#Deg$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#E|![!^%Z!^!_*g!_!c%Z!c!i#E|!i#O%Z#O#P&c#P#R%Z#R#S#E|#S#T%Z#T#Z#E|#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#FXi$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#E|![!^%Z!^!_*g!_!c%Z!c!i#E|!i#O%Z#O#P&c#P#R%Z#R#S#E|#S#T%Z#T#Z#E|#Z#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#HT_!d$b$f&j#|%<f(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#I__`l$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^#Jk^g!*v!h'.r(Op(R!b(tSOY*gZr*grs'}sw*gwx)rx!P*g!P!Q#Kg!Q!^*g!^!_#L]!_!`#M}!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#KpX$h&j(Op(R!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#LfZ#n$Id(Op(R!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#MX!`#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#MbX$O$Id(Op(R!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#NWX#o$Id(Op(R!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Gh$ Oa#[%?x$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$!T!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#W$!`_#g$Ih$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh$#nafBf#o$Id$c#|$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$$s!`!a$%}!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$%O_#o$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$&Ya#n$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$'_!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$'j`#n$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h$(wc(h$Ip$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P$*S!P!^%Z!^!_*g!_!a%Z!a!b$+^!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+`$*__}'#p$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$+i`$f&j#y$Id(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&^$,v_!{!Ln$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^$.Q_!P(8n$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/UZ$f&jO!^$/w!^!_$0_!_#i$/w#i#j$0d#j#l$/w#l#m$2V#m#o$/w#o#p$0_#p;'S$/w;'S;=`$4b<%lO$/w(n$0OT^#S$f&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0dO^#S(n$0i[$f&jO!Q&c!Q![$1_![!^&c!_!c&c!c!i$1_!i#T&c#T#Z$1_#Z#o&c#o#p$3u#p;'S&c;'S;=`&w<%lO&c(n$1dZ$f&jO!Q&c!Q![$2V![!^&c!_!c&c!c!i$2V!i#T&c#T#Z$2V#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2[Z$f&jO!Q&c!Q![$2}![!^&c!_!c&c!c!i$2}!i#T&c#T#Z$2}#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3SZ$f&jO!Q&c!Q![$/w![!^&c!_!c&c!c!i$/w!i#T&c#T#Z$/w#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$3xR!Q![$4R!c!i$4R#T#Z$4R#S$4US!Q![$4R!c!i$4R#T#Z$4R#q#r$0_(n$4eP;=`<%l$/w!2r$4s_!V!+S$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$5}`#v$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&,v$7[_$f&j(Op(R!b(X&%WOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$8jk$f&j(Op(R!b'{&;d$[#t([!LYOY%ZYZ&cZr%Zrs&}st%Ztu$8Zuw%Zwx(rx}%Z}!O$:_!O!Q%Z!Q![$8Z![!^%Z!^!_*g!_!c%Z!c!}$8Z!}#O%Z#O#P&c#P#R%Z#R#S$8Z#S#T%Z#T#o$8Z#o#p*g#p$g%Z$g;'S$8Z;'S;=`$<e<%lO$8Z+d$:jk$f&j(Op(R!b$[#tOY%ZYZ&cZr%Zrs&}st%Ztu$:_uw%Zwx(rx}%Z}!O$:_!O!Q%Z!Q![$:_![!^%Z!^!_*g!_!c%Z!c!}$:_!}#O%Z#O#P&c#P#R%Z#R#S$:_#S#T%Z#T#o$:_#o#p*g#p$g%Z$g;'S$:_;'S;=`$<_<%lO$:_+d$<bP;=`<%l$:_(CS$<hP;=`<%l$8Z!5p$<tX![!3l(Op(R!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g&CO$=la(o&;`$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+^#q;'S%Z;'S;=`+a<%lO%Z%#`$?O_!Z$I`r`$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(r$@Y_!pS$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$Aj|$f&j(Op(R!b't(;d$Y#t'{&;d([!LYOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$AX#BZ$ISEr$IS$I_$AX$I_$JTEr$JT$JU$AX$JU$KVEr$KV$KW$AX$KW&FUEr&FU&FV$AX&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$AX?HUOEr(CS$Duk$f&j(Op(R!b'u(;d$Y#t'{&;d([!LYOY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[Nb,Wb,Lb,2,3,4,5,6,7,8,9,10,11,12,13,Ib,new p_("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOt~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!R~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(Z~~",141,332),new p_("j~RQYZXz{^~^O'x~~aP!P!Qd~iO'y~~",25,315)],topRules:{Script:[0,6],SingleExpression:[1,269],SingleClassItem:[2,270]},dialects:{jsx:0,ts:14602},dynamicPrecedences:{69:1,79:1,81:1,165:1,193:1},specialized:[{term:319,get:t=>zb[t]||-1},{term:334,get:t=>qb[t]||-1},{term:70,get:t=>Ub[t]||-1}],tokenPrec:14626}),Fb=[qv("function ${name}(${params}) {\n\t${}\n}",{label:"function",detail:"definition",type:"keyword"}),qv("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n\t${}\n}",{label:"for",detail:"loop",type:"keyword"}),qv("for (let ${name} of ${collection}) {\n\t${}\n}",{label:"for",detail:"of loop",type:"keyword"}),qv("do {\n\t${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),qv("while (${}) {\n\t${}\n}",{label:"while",detail:"loop",type:"keyword"}),qv("try {\n\t${}\n} catch (${error}) {\n\t${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),qv("if (${}) {\n\t${}\n}",{label:"if",detail:"block",type:"keyword"}),qv("if (${}) {\n\t${}\n} else {\n\t${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),qv("class ${name} {\n\tconstructor(${params}) {\n\t\t${}\n\t}\n}",{label:"class",detail:"definition",type:"keyword"}),qv("import {${names}} from \"${module}\"\n${}",{label:"import",detail:"named",type:"keyword"}),qv("import ${name} from \"${module}\"\n${}",{label:"import",detail:"default",type:"keyword"})],Gb=Fb.concat([qv("interface ${name} {\n\t${}\n}",{label:"interface",detail:"definition",type:"keyword"}),qv("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),qv("enum ${name} {\n\t${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),Hb=new Ih,Kb=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function Jb(t){return(e,n)=>{let o=e.node.getChild("VariableDefinition");return o&&n(o,t),!0}}const tw=["FunctionDeclaration"],ew={FunctionDeclaration:Jb("function"),ClassDeclaration:Jb("class"),ClassExpression:()=>!0,EnumDeclaration:Jb("constant"),TypeAliasDeclaration:Jb("type"),NamespaceDeclaration:Jb("namespace"),VariableDefinition(t,e){t.matchContext(tw)||e(t,"variable")},TypeDefinition(t,e){e(t,"type")},__proto__:null};function nw(t,e){let n=Hb.get(e);if(n)return n;let o=[],i=!0;function r(e,n){let i=t.sliceString(e.from,e.to);o.push({label:i,type:n})}return e.cursor(Oh.IncludeAnonymous).iterate((e=>{if(i)i=!1;else if(e.name){let t=ew[e.name];if(t&&t(e,r)||Kb.has(e.name))return!1}else if(e.to-e.from>8192){for(let n of nw(t,e.node))o.push(n);return!1}})),Hb.set(e,o),o}const ow=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,iw=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function rw(t){let e=Zp(t.state).resolveInner(t.pos,-1);if(iw.indexOf(e.name)>-1)return null;let n="VariableName"==e.name||e.to-e.from<20&&ow.test(t.state.sliceDoc(e.from,e.to));if(!n&&!t.explicit)return null;let o=[];for(let n=e;n;n=n.parent)Kb.has(n.name)&&(o=o.concat(nw(t.state.doc,n)));return{options:o,from:n?e.from:t.pos,validFor:ow}}const sw=Rp.define({name:"javascript",parser:Bb.configure({props:[Kp.add({IfStatement:sd({except:/^\s*({|else\b)/}),TryStatement:sd({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:t=>t.baseIndent,SwitchBody:t=>{let e=t.textAfter,n=/^\s*\}/.test(e),o=/^\s*(case|default)\b/.test(e);return t.baseIndent+(n?0:o?1:2)*t.unit},Block:id({closing:"}"}),ArrowFunction:t=>t.baseIndent+t.unit,"TemplateString BlockComment":()=>null,"Statement Property":sd({except:/^{/}),JSXElement(t){let e=/^\s*<\//.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},JSXEscape(t){let e=/\s*\}/.test(t.textAfter);return t.lineIndent(t.node.from)+(e?0:t.unit)},"JSXOpenTag JSXSelfClosingTag":t=>t.column(t.node.from)+t.unit}),cd.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":ud,BlockComment:t=>({from:t.from+2,to:t.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),aw={test:t=>/^JSX/.test(t.name),facet:Qp({commentTokens:{block:{open:"{/*",close:"*/}"}}})},lw=sw.configure({dialect:"ts"},"typescript"),cw=sw.configure({dialect:"jsx",props:[Ap.add((t=>t.isTop?[aw]:void 0))]}),uw=sw.configure({dialect:"jsx ts",props:[Ap.add((t=>t.isTop?[aw]:void 0))]},"typescript");let hw=t=>({label:t,type:"keyword"});const pw="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(hw),dw=pw.concat(["declare","implements","private","protected","public"].map(hw));function fw(t={}){let e=t.jsx?t.typescript?uw:cw:t.typescript?lw:sw,n=t.typescript?Gb.concat(dw):Fb.concat(pw);return new zp(e,[sw.data.of({autocomplete:(o=iw,i=Fm(n),t=>{for(let e=Zp(t.state).resolveInner(t.pos,-1);e;e=e.parent){if(o.indexOf(e.name)>-1)return null;if(e.type.isTop)break}return i(t)})}),sw.data.of({autocomplete:rw}),t.jsx?vw:[]]);var o,i}function gw(t,e,n=t.length){for(let o=null==e?void 0:e.firstChild;o;o=o.nextSibling)if("JSXIdentifier"==o.name||"JSXBuiltin"==o.name||"JSXNamespacedName"==o.name||"JSXMemberExpression"==o.name)return t.sliceString(o.from,Math.min(o.to,n));return""}const mw="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),vw=fc.inputHandler.of(((t,e,n,o,i)=>{if((mw?t.composing:t.compositionStarted)||t.state.readOnly||e!=n||">"!=o&&"/"!=o||!sw.isActiveAt(t.state,e,-1))return!1;let r=i(),{state:s}=r,a=s.changeByRange((t=>{var e;let n,{head:i}=t,r=Zp(s).resolveInner(i-1,-1);if("JSXStartTag"==r.name&&(r=r.parent),s.doc.sliceString(i-1,i)!=o||"JSXAttributeValue"==r.name&&r.to>i);else{if(">"==o&&"JSXFragmentTag"==r.name)return{range:t,changes:{from:i,insert:`</>`}};if("/"==o&&"JSXStartCloseTag"==r.name){let t=r.parent,o=t.parent;if(o&&t.from==i-2&&((n=gw(s.doc,o.firstChild,i))||"JSXFragmentTag"==(null===(e=o.firstChild)||void 0===e?void 0:e.name))){let t=`${n}>`;return{range:Go.cursor(i+t.length,-1),changes:{from:i,insert:t}}}}else if(">"==o){let e=function(t){for(;;){if("JSXOpenTag"==t.name||"JSXSelfClosingTag"==t.name||"JSXFragmentTag"==t.name)return t;if("JSXEscape"==t.name||!t.parent)return null;t=t.parent}}(r);if(e&&!/^\/?>|^<\//.test(s.doc.sliceString(i,i+2))&&(n=gw(s.doc,e,i)))return{range:t,changes:{from:i,insert:`</${n}>`}}}}return{range:t}}));return!a.changes.empty&&(t.dispatch([r,s.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}));const yw=["_blank","_self","_top","_parent"],_w=["ascii","utf-8","utf-16","latin1","latin1"],Ow=["get","post","put","delete"],bw=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],ww=["true","false"],xw={},Sw={a:{attrs:{href:null,ping:null,type:null,media:null,target:yw,hreflang:null}},abbr:xw,address:xw,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:xw,aside:xw,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:xw,base:{attrs:{href:null,target:yw}},bdi:xw,bdo:xw,blockquote:{attrs:{cite:null}},body:xw,br:xw,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:bw,formmethod:Ow,formnovalidate:["novalidate"],formtarget:yw,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:xw,center:xw,cite:xw,code:xw,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:xw,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:xw,div:xw,dl:xw,dt:xw,em:xw,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:xw,figure:xw,footer:xw,form:{attrs:{action:null,name:null,"accept-charset":_w,autocomplete:["on","off"],enctype:bw,method:Ow,novalidate:["novalidate"],target:yw}},h1:xw,h2:xw,h3:xw,h4:xw,h5:xw,h6:xw,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:xw,hgroup:xw,hr:xw,html:{attrs:{manifest:null}},i:xw,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:bw,formmethod:Ow,formnovalidate:["novalidate"],formtarget:yw,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:xw,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:xw,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:xw,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:_w,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:xw,noscript:xw,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:xw,param:{attrs:{name:null,value:null}},pre:xw,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:xw,rt:xw,ruby:xw,samp:xw,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:_w}},section:xw,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:xw,source:{attrs:{src:null,type:null,media:null}},span:xw,strong:xw,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:xw,summary:xw,sup:xw,table:xw,tbody:xw,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:xw,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:xw,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:xw,time:{attrs:{datetime:null}},title:xw,tr:xw,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:xw,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:xw},kw={accesskey:null,class:null,contenteditable:ww,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:ww,autocorrect:ww,autocapitalize:ww,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":ww,"aria-autocomplete":["inline","list","both","none"],"aria-busy":ww,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":ww,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":ww,"aria-hidden":ww,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":ww,"aria-multiselectable":ww,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":ww,"aria-relevant":null,"aria-required":ww,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},Pw=("beforeunload copy cut dragstart dragover dragleave dragenter dragend "+"drag paste focus blur change click load mousedown mouseenter mouseleave "+"mouseup keydown keyup resize scroll unload").split(" ").map((t=>"on"+t));for(let t of Pw)kw[t]=null;class Cw{constructor(t,e){this.tags=Object.assign(Object.assign({},Sw),t),this.globalAttrs=Object.assign(Object.assign({},kw),e),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}}function Tw(t,e,n=t.length){if(!e)return"";let o=e.firstChild,i=o&&o.getChild("TagName");return i?t.sliceString(i.from,Math.min(i.to,n)):""}function Ew(t,e=!1){for(;t;t=t.parent)if("Element"==t.name){if(!e)return t;e=!1}return null}function Qw(t,e,n){let o=n.tags[Tw(t,Ew(e))];return(null==o?void 0:o.children)||n.allTags}function Aw(t,e){let n=[];for(let o=Ew(e);o&&!o.type.isTop;o=Ew(o.parent)){let i=Tw(t,o);if(i&&"CloseTag"==o.lastChild.name)break;i&&n.indexOf(i)<0&&("EndTag"==e.name||e.from>=o.firstChild.to)&&n.push(i)}return n}Cw.default=new Cw;const $w=/^[:\-\.\w\u00b7-\uffff]*$/;function jw(t,e,n,o,i){let r=/\s*>/.test(t.sliceDoc(i,i+5))?"":">",s=Ew(n,!0);return{from:o,to:i,options:Qw(t.doc,s,e).map((t=>({label:t,type:"type"}))).concat(Aw(t.doc,n).map(((t,e)=>({label:"/"+t,apply:"/"+t+r,type:"type",boost:99-e})))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function Rw(t,e,n,o){let i=/\s*>/.test(t.sliceDoc(o,o+5))?"":">";return{from:n,to:o,options:Aw(t.doc,e).map(((t,e)=>({label:t,apply:t+i,type:"type",boost:99-e}))),validFor:$w}}function Zw(t,e){let{state:n,pos:o}=e,i=Zp(n).resolveInner(o,-1),r=i.resolve(o);for(let t,e=o;r==i&&(t=i.childBefore(e));){let n=t.lastChild;if(!n||!n.type.isError||n.from<n.to)break;r=i=t,e=n.from}return"TagName"==i.name?i.parent&&/CloseTag$/.test(i.parent.name)?Rw(n,i,i.from,o):jw(n,t,i,i.from,o):"StartTag"==i.name?jw(n,t,i,o,o):"StartCloseTag"==i.name||"IncompleteCloseTag"==i.name?Rw(n,i,o,o):e.explicit&&("OpenTag"==i.name||"SelfClosingTag"==i.name)||"AttributeName"==i.name?function(t,e,n,o,i){let r=Ew(n),s=r?e.tags[Tw(t.doc,r)]:null,a=s&&s.attrs?Object.keys(s.attrs):[];return{from:o,to:i,options:(s&&!1===s.globalAttrs?a:a.length?a.concat(e.globalAttrNames):e.globalAttrNames).map((t=>({label:t,type:"property"}))),validFor:$w}}(n,t,i,"AttributeName"==i.name?i.from:o,o):"Is"==i.name||"AttributeValue"==i.name||"UnquotedAttributeValue"==i.name?function(t,e,n,o,i){var r;let s,a=null===(r=n.parent)||void 0===r?void 0:r.getChild("AttributeName"),l=[];if(a){let r=t.sliceDoc(a.from,a.to),c=e.globalAttrs[r];if(!c){let o=Ew(n),i=o?e.tags[Tw(t.doc,o)]:null;c=(null==i?void 0:i.attrs)&&i.attrs[r]}if(c){let e=t.sliceDoc(o,i).toLowerCase(),n='"',r='"';/^['"]/.test(e)?(s='"'==e[0]?/^[^"]*$/:/^[^']*$/,n="",r=t.sliceDoc(i,i+1)==e[0]?"":e[0],e=e.slice(1),o++):s=/^[^\s<>='"]*$/;for(let t of c)l.push({label:t,apply:n+t+r,type:"constant"})}}return{from:o,to:i,options:l,validFor:s}}(n,t,i,"Is"==i.name?o:i.from,o):!e.explicit||"Element"!=r.name&&"Text"!=r.name&&"Document"!=r.name?null:function(t,e,n,o){let i=[],r=0;for(let o of Qw(t.doc,n,e))i.push({label:"<"+o,type:"type"});for(let e of Aw(t.doc,n))i.push({label:"</"+e+">",type:"type",boost:99-r++});return{from:o,to:o,options:i,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}(n,t,i,o)}function Mw(t){let{extraTags:e,extraGlobalAttributes:n}=t,o=n||e?new Cw(e,n):Cw.default;return t=>Zw(o,t)}const Vw=sw.parser.configure({top:"SingleExpression"}),Dw=[{tag:"script",attrs:t=>"text/typescript"==t.type||"ts"==t.lang,parser:lw.parser},{tag:"script",attrs:t=>"text/babel"==t.type||"text/jsx"==t.type,parser:cw.parser},{tag:"script",attrs:t=>"text/typescript-jsx"==t.type,parser:uw.parser},{tag:"script",attrs:t=>/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(t.type),parser:Vw},{tag:"script",attrs:t=>!t.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(t.type),parser:sw.parser},{tag:"style",attrs:t=>(!t.lang||"css"==t.lang)&&(!t.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(t.type)),parser:gO.parser}],Iw=[{name:"style",parser:gO.parser.configure({top:"Styles"})}].concat(Pw.map((t=>({name:t,parser:sw.parser})))),Nw=Rp.define({name:"html",parser:fb.configure({props:[Kp.add({Element(t){let e=/^(\s*)(<\/)?/.exec(t.textAfter);return t.node.to<=t.pos+e[0].length?t.continue():t.lineIndent(t.node.from)+(e[2]?0:t.unit)},"OpenTag CloseTag SelfClosingTag":t=>t.column(t.node.from)+t.unit,Document(t){if(t.pos+/\s*/.exec(t.textAfter)[0].length<t.node.to)return t.continue();let e,n=null;for(let e=t.node;;){let t=e.lastChild;if(!t||"Element"!=t.name||t.to!=e.to)break;n=e=t}return n&&(!(e=n.lastChild)||"CloseTag"!=e.name&&"SelfClosingTag"!=e.name)?t.lineIndent(n.from)+t.unit:null}}),cd.add({Element(t){let e=t.firstChild,n=t.lastChild;return e&&"OpenTag"==e.name?{from:e.to,to:"CloseTag"==n.name?n.from:t.to}:null}}),Hd.add({"OpenTag CloseTag":t=>t.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"\x3c!--",close:"--\x3e"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}}),Ww=Nw.configure({wrap:yb(Dw,Iw)});const Xw=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),Lw=fc.inputHandler.of(((t,e,n,o,i)=>{if(t.composing||t.state.readOnly||e!=n||">"!=o&&"/"!=o||!Ww.isActiveAt(t.state,e,-1))return!1;let r=i(),{state:s}=r,a=s.changeByRange((t=>{var e,n,i;let r,a=s.doc.sliceString(t.from-1,t.to)==o,{head:l}=t,c=Zp(s).resolveInner(l-1,-1);if("TagName"!=c.name&&"StartTag"!=c.name||(c=c.parent),a&&">"==o&&"OpenTag"==c.name){if("CloseTag"!=(null===(n=null===(e=c.parent)||void 0===e?void 0:e.lastChild)||void 0===n?void 0:n.name)&&(r=Tw(s.doc,c.parent,l))&&!Xw.has(r)){return{range:t,changes:{from:l,to:l+(">"===s.doc.sliceString(l,l+1)?1:0),insert:`</${r}>`}}}}else if(a&&"/"==o&&"IncompleteCloseTag"==c.name){let t=c.parent;if(c.from==l-2&&"CloseTag"!=(null===(i=t.lastChild)||void 0===i?void 0:i.name)&&(r=Tw(s.doc,t,l))&&!Xw.has(r)){let t=l+(">"===s.doc.sliceString(l,l+1)?1:0),e=`${r}>`;return{range:Go.cursor(l+e.length,-1),changes:{from:l,to:t,insert:e}}}}return{range:t}}));return!a.changes.empty&&(t.dispatch([r,s.update(a,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}));var Yw=n(921);function zw(t,{state:e,dispatch:n}){var o;let i=e.doc.iterRange(t.from,t.to),r='';for(;!i.done;)r+=i.value,i=i.next();const s=null!==(o=e.facet(qw))&&void 0!==o?o:{},a=function(t){const e=t.facet(Yp);return e===gO?(t,e)=>(0,Yw.css_beautify)(t,e):e===Ww?(t,e)=>(0,Yw.html_beautify)(t,e):e===sw?(t,e)=>(0,Yw.js_beautify)(t,e):(t,e)=>t}(e)(e.doc.toString(),Object.assign({indent_size:Bp(e)},s));return e.selection.asSingle().main==t?n(e.update(e.replaceSelection(a))):n({changes:{from:t.from,to:t.to,insert:a}}),!0}const qw=Jo.define();var Uw=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Bw=void 0&&(void 0).__assign||function(){return Bw=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Bw.apply(this,arguments)},Fw=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.readOnlyCompartment=new fi,t.lineNumbersCompartment=new fi,t}return Uw(n,e),n.prototype.defaults=function(){return{input:'',label:'',codeName:'',theme:'hopscotch',readOnly:!0,lineNumbers:!0,autoFormat:!0,readOnlyRanges:function(t){return[]}}},Object.defineProperty(n.prototype,"readonly",{get:function(){return this.get('readOnly')},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"readOnlyRanges",{get:function(){return this.get('readOnlyRanges')},enumerable:!1,configurable:!0}),n.prototype.editorFromTextArea=function(t,e){var n,o=new fc(Bw({doc:t.value},e));return null===(n=t.parentNode)||void 0===n||n.insertBefore(o.dom,t),t.style.display='none',t.form&&t.form.addEventListener('submit',(function(){t.value=o.state.doc.toString()})),o},n.prototype.getCodeLanguage=function(t){switch(t){case'htmlmixed':return function(t={}){let e,n="";!1===t.matchClosingTags&&(n="noMatch"),!0===t.selfClosingTags&&(n=(n?n+" ":"")+"selfClosing"),(t.nestedLanguages&&t.nestedLanguages.length||t.nestedAttributes&&t.nestedAttributes.length)&&(e=yb((t.nestedLanguages||[]).concat(Dw),(t.nestedAttributes||[]).concat(Iw)));let o=e?Nw.configure({wrap:e,dialect:n}):n?Ww.configure({dialect:n}):Ww;return new zp(o,[Ww.data.of({autocomplete:Mw(t)}),!1!==t.autoCloseTags?Lw:[],fw().support,mO().support])}();case'css':return mO();case'js':return fw();default:return}},n.prototype.setReadonlyState=function(t){var e=this.editor,n=this.readOnlyCompartment;if(e){var o=e.state.update({effects:[n.reconfigure(Wi.readOnly.of(t))]});e.update([o])}},n.prototype.init=function(e){(0,t.bindAll)(this,'onChange');var n=this.getCodeLanguage(this.get('codeName')),o=[];o.push(Dy),o.push(e_),o.push(this.lineNumbersCompartment.of(th())),o.push(Vd(n_)),n&&o.push(n),o.push(this.readOnlyCompartment.of(Wi.readOnly.of(this.readonly))),o.push(function(t){return[ch(t),(n=t,Wi.transactionFilter.of((function(t){if(t.isUserEvent("delete.selection")&&!t.isUserEvent("delete.selection.smart")){var e=t.startState.selection.ranges.map((function(t){return{from:t.from,to:t.to}}));if(e.length>0){var o=n(t.startState);return ah(o,e[0],{from:0,to:t.startState.doc.line(t.startState.doc.lines).to}).map((function(e){return t.startState.update({changes:{from:e.from,to:e.to},annotations:Qi.userEvent.of("".concat(t.annotation(Qi.userEvent),".smart"))})}))}}return t}))),(e=t,Wi.changeFilter.of((function(t){var n,o,i,r;try{for(var s=e(t.startState),a=e(t.state),l=0;l<s.length;l++){var c=null!==(n=s[l].from)&&void 0!==n?n:0,u=null!==(o=s[l].to)&&void 0!==o?o:t.startState.doc.line(t.startState.doc.lines).to,h=null!==(i=a[l].from)&&void 0!==i?i:0,p=null!==(r=a[l].to)&&void 0!==r?r:t.state.doc.line(t.state.doc.lines).to;if(t.startState.sliceDoc(c,u)!==t.state.sliceDoc(h,p))return!1}}catch(t){return!1}return!0})))];var e,n}(this.readOnlyRanges));var i=Wi.create({doc:e.value,extensions:o});return this.editor=this.editorFromTextArea(e,Bw({state:i},this.attributes)),this.element=e,this.editor.dom.addEventListener('change',this.onChange),this},n.prototype.onChange=function(){this.trigger('update',this)},n.prototype.getEditor=function(){return this.editor},n.prototype.getElement=function(){return this.element},n.prototype.setElement=function(t){return this.element=t,this},n.prototype.focus=function(){return this.getEditor().focus(),this},n.prototype.getContent=function(){var t=this.getEditor();return t&&t.state.doc},n.prototype.setContent=function(t,e){void 0===e&&(e={});var n=this.readonly;if(this.editor){this.setReadonlyState(!1);var o=this.editor.state,i=o.update({changes:{from:0,to:o.doc.length,insert:t}});this.editor.update([i]);var r=this.get('autoFormat');(!0===r||Array.isArray(r)&&r.includes(this.get('codeName')))&&(({state:t,dispatch:e})=>{zw(Go.range(0,t.doc.length),{state:t,dispatch:e})})(this.editor),this.setReadonlyState(n)}},n}(u.Hn);const Gw=Fw;Fw.prototype.CodeMirror=fc;var Hw=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Kw=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.type='function',o.variables=null==n?void 0:n.variables,o}return Hw(e,t),Object.defineProperty(e.prototype,"clsLabel",{get:function(){var t=this.ppfx;return"".concat(t,"field")},enumerable:!1,configurable:!0}),e.prototype.getInputElem=function(){var t=this.input,e=this.$input;return t||e&&e.get&&e.get(0)||this.getElInput()},Object.defineProperty(e.prototype,"inputValue",{get:function(){var t,e=this.getInputElem();return null!==(t=null==e?void 0:e.value)&&void 0!==t?t:this.target.value},set:function(t){var e=this.getInputElem();e&&(e.value=t)},enumerable:!1,configurable:!0}),e.prototype.templateInput=function(){return''},e.prototype.codeUpdated=function(){var t=this.editor;t&&(this.target.value=t.getContent().toString())},e.prototype.renderField=function(){var t,e=this.$el,n=this.variables,o=e.find('[data-input]'),i=o[o.length-1],r=document.createElement('textarea');r.value="function(".concat(null!==(t=null==n?void 0:n.join(", "))&&void 0!==t?t:'',"){ \n //TODO: implementing it \n}"),i.appendChild(r);var s=new Gw({el:r,readOnly:!1,lineNumbers:!1,codeName:'js',readOnlyRanges:function(t){return[{to:t.doc.line(1).to},{from:t.doc.line(t.doc.lines).from}]}});s.init(r),s.on('update',this.codeUpdated,this)},e}(Wt);const Jw=Kw;var tx=void 0&&(void 0).__assign||function(){return tx=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},tx.apply(this,arguments)},ex=function(){function e(){}return e.build=function(e,n){return n instanceof mt?n:(0,t.isString)(n)?new $t(n,e,{label:n}):'list'===n.type?new Tt(n.name,e,tx(tx({},n),{name:n.name})):new $t(n.name,e,n)},e.buildView=function(t,e,n){var o,i,r=tx({name:t.name},n);if(void 0!==n&&(o=n.type,r=n),'target'===t.name){var s=e.Traits.config.optionsTarget;i=new ve(e,tx(tx({name:t.name},r),{default:!1,options:s}))}else{i=t instanceof xt?new mo(e,tx(tx(tx({},t.opts),n),{traits:t.traits})):new(this.getView(o,r))(e,n)}return i.setTarget(t)},e.getView=function(t,e){switch(t){case'text':default:return Yt;case'number':return e.units?fe:de;case'select':return ve;case'checkbox':return oe;case'color':return ce;case'button':return te;case'list':return ho;case'function':return Jw}},e}();const nx=ex;var ox=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ix=void 0&&(void 0).__assign||function(){return ix=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ix.apply(this,arguments)},rx=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},sx=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},ax=function(t){return t.replace(/[|\\{}()[\]^$+*?.]/g,'\\$&')},lx=function(t){return!!(null==t?void 0:t.getConfig().avoidInlineStyle)},cx='component:drag',ux='__symbols',hx='__symbol',px='__symbol_ovrd',dx='component:update',fx="".concat(dx,"-inside"),gx=function(t){console.log(t);var e=function(){console.log("start");t.url,t.columnDefs;console.log(t);var e=document.createElement('table');$(".myTable").empty().append(e);new DataTable(e,{columns:[{title:'id',data:'id'},{data:'email'},{data:'first_name'},{data:'last_name'},{data:'avatar'}],ajax:{url:t.url,dataSrc:'data'}});console.log("end")};if('undefined'==typeof DataTable&&!window.test2){if(console.log(typeof $),'undefined'==typeof $){var n=document.createElement('script');n.src='https://code.jquery.com/jquery-3.7.1.min.js',n.integrity='sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=',n.crossOrigin="anonymous",document.body.appendChild(n)}setTimeout((function(){var t=document.createElement('script');t.onload=e,t.src='https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js',document.body.appendChild(t);var n=document.createElement('link');n.type="text/css",n.rel="stylesheet",n.href='https://cdn.datatables.net/1.13.7/css/jquery.dataTables.min.css',document.head.appendChild(n)}),50)}window.test2=!0},mx=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return ox(o,n),Object.defineProperty(o.prototype,"defaults",{get:function(){var t;return(t={tagName:'div',type:'',name:'',removable:!0,draggable:!0,droppable:!0,badgable:!0,stylable:!0,'stylable-require':'','style-signature':'',unstylable:'',highlightable:!0,copyable:!0,resizable:!1,editable:!1,layerable:!0,selectable:!0,hoverable:!0,locked:!1,void:!1,state:'',status:'',content:'',icon:'',style:'',styles:'',classes:'',script:gx,'script-props':['url','columnDefs'],'script-export':'',url:'https://reqres.in/api/users?page=2',attributes:{},traits:['id','title',{name:'url',changeProp:!0},{name:'columnDefs',type:'list',traits:[{name:"render",type:"function",variables:['data','type','row']},{name:"targets",type:"text"},{name:"visible",type:"checkbox"}]}],propagate:'',dmode:'',toolbar:null,delegate:null})[hx]=0,t[ux]=0,t[px]=0,t._undo=!0,t._undoexc=['status','open'],t},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"classes",{get:function(){return this.get('classes')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"traits",{get:function(){return this.get('traits')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"content",{get:function(){var t;return null!==(t=this.get('content'))&&void 0!==t?t:''},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"toolbar",{get:function(){return this.get('toolbar')||[]},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"resizable",{get:function(){return this.get('resizable')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"delegate",{get:function(){return this.get('delegate')},enumerable:!1,configurable:!0}),o.prototype.init=function(){},o.prototype.updated=function(t,e,n){},o.prototype.removed=function(){},o.prototype.initialize=function(e,n){var i=this;void 0===e&&(e={}),void 0===n&&(n={}),(0,t.bindAll)(this,'__upSymbProps','__upSymbCls','__upSymbComps');var r=n.em,s=this.parent(),a=null==s?void 0:s.attributes,l=this.get('propagate');if(l&&this.set('propagate',(0,t.isArray)(l)?l:[l]),a&&a.propagate&&!l){var c={},u=a.propagate;u.forEach((function(t){return c[t]=s.get(t)})),c.propagate=u,this.set(ix(ix({},c),e))}if(n&&n.config&&n.config.voidElements.indexOf(this.get('tagName'))>=0&&this.set('void',!0),n.em=r,this.opt=n,this.em=r,this.frame=n.frame,this.config=n.config||{},this.set('attributes',ix(ix({},(0,t.result)(this,'defaults').attributes||{}),this.get('attributes')||{})),this.ccid=o.createId(this,n),this.initClasses(),this.initComponents(),this.initTraits(),this.initToolbar(),this.initScriptProps(),this.listenTo(this,'change:script',this.scriptUpdated),this.listenTo(this,'change:tagName',this.tagUpdated),this.listenTo(this,'change:attributes',this.attrUpdated),this.listenTo(this,'change:attributes:id',this._idUpdated),this.on('change:toolbar',this.__emitUpdateTlb),this.on('change',this.__onChange),this.on(fx,this.__propToParent),this.set('status',''),this.views=[],['classes','components'].forEach((function(t){var e="add remove ".concat('components'!==t?'change':'');i.listenTo(i.get(t),e.trim(),(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return i.emitUpdate.apply(i,sx([t],e,!1))}))})),!n.temporary){var h=r&&r.Css,p=this.attributes,d=p.styles,f=p.type;d&&h&&h.addCollection(d,{avoidUpdateStyle:!0},{group:"cmp:".concat(f)}),this.__postAdd(),this.init(),this.__isSymbolOrInst()&&this.__initSymb(),r&&r.trigger('component:create',this)}},o.prototype.__postAdd=function(t){void 0===t&&(t={});var e=this.em,n=null==e?void 0:e.UndoManager,o=this.components();n&&!this.__hasUm&&(n.add(o),n.add(this.getSelectors()),this.__hasUm=!0),t.recursive&&o.map((function(e){return e.__postAdd(t)}))},o.prototype.__postRemove=function(){var t=this.em,e=null==t?void 0:t.get('UndoManager');e&&(e.remove(this.components()),e.remove(this.getSelectors()),delete this.__hasUm)},o.prototype.__onChange=function(n,o){var i=this,r=this.changedAttributes()||{};(0,t.keys)(r).forEach((function(t){return i.emitUpdate(t)})),['status','open','toolbar','traits'].forEach((function(t){return delete r[t]})),(0,e.isEmptyObj)(r)||(this.__changesUp(o),this.__propSelfToParent({component:this,changed:r,options:o}))},o.prototype.__onStyleChange=function(e){var n=this,o=this.em;if(o){var i='component:styleUpdate',r=(0,t.keys)(e),s={style:e};o.trigger(i,this,s),r.forEach((function(t){return o.trigger("".concat(i,":").concat(t),n,s)}))}},o.prototype.__changesUp=function(t){var e=this.em;[this.frame,e].forEach((function(e){return e&&e.changesUp(t)}))},o.prototype.__propSelfToParent=function(t){this.trigger(dx,t),this.__propToParent(t)},o.prototype.__propToParent=function(t){var e=this.parent();e&&e.trigger(fx,t)},o.prototype.__emitUpdateTlb=function(){this.emitUpdate('toolbar')},o.prototype.is=function(t){return!(this.get('type')!=t)},o.prototype.props=function(){return this.attributes},o.prototype.index=function(){var t=this.collection;return t?t.indexOf(this):0},o.prototype.setDragMode=function(t){return this.set('dmode',t)},o.prototype.getDragMode=function(){return this.get('dmode')||''},o.prototype.find=function(t){var e,n=[],o=null===(e=this.view)||void 0===e?void 0:e.$el.find(t);return null==o||o.each((function(t){var e=o.eq(t).data('model');e&&n.push(e)})),n},o.prototype.findType=function(t){var e=[],n=function(o){return o.forEach((function(o){o.is(t)&&e.push(o),n(o.components())}))};return n(this.components()),e},o.prototype.closest=function(t){var e,n=null===(e=this.view)||void 0===e?void 0:e.$el.closest(t);return(null==n?void 0:n.length)?n.data('model'):void 0},o.prototype.closestType=function(t){for(var e=this.parent();e&&!e.is(t);)e=e.parent();return e},o.prototype.contains=function(t){var e=!1;if(!t)return e;var n=function(o){!e&&o.forEach((function(o){o===t&&(e=!0),!e&&n(o.components())}))};return n(this.components()),e},o.prototype.tagUpdated=function(){this.trigger('rerender')},o.prototype.replaceWith=function(e,n){void 0===n&&(n={});var o=this.collection,i=o.indexOf(this);o.remove(this);var r=o.add(e,ix(ix({},n),{at:i}));return(0,t.isArray)(r)?r:[r]},o.prototype.attrUpdated=function(n,o,i){var r=this;void 0===i&&(i={});var s=this.get('attributes'),a=s.class;a&&this.setClass(a),delete s.class;var l=s.style;l&&this.setStyle(l),delete s.style;var c=ix({},this.previous('attributes')),u=(0,e.shallowDiff)(c,this.get('attributes'));(0,t.keys)(u).forEach((function(t){return r.trigger("change:attributes:".concat(t),r,u[t],i)}))},o.prototype.setAttributes=function(t,e){return void 0===e&&(e={}),this.set('attributes',ix({},t),e),this},o.prototype.addAttributes=function(t,e){return void 0===e&&(e={}),this.setAttributes(ix(ix({},this.getAttributes({noClass:!0})),t),e)},o.prototype.removeAttributes=function(t,e){void 0===t&&(t=[]),void 0===e&&(e={});var n=Array.isArray(t)?t:[t],o=this.getAttributes();return n.map((function(t){return delete o[t]})),this.setAttributes(o,e)},o.prototype.getStyle=function(e,o){void 0===e&&(e={}),void 0===o&&(o={});var i=this.em,r=(0,t.isString)(e)?e:'',s=r?o:e;if(lx(i)&&!s.inline){var a=i.get('state'),l=i.Css.getIdRule(this.getId(),ix({state:a},s));if(this.rule=l,l)return l.getStyle(r)}return n.prototype.getStyle.call(this,r)},o.prototype.setStyle=function(o,i){var r=this;void 0===o&&(o={}),void 0===i&&(i={});var s=this.opt,a=this.em;if(!lx(a)||s.temporary||i.inline)o=n.prototype.setStyle.apply(this,arguments);else{var l=this.get('style')||{};o=(0,t.isString)(o)?this.parseStyle(o):o,o=ix(ix({},o),l);var c=a.get('state'),u=a.Css,h=this.getStyle(i);this.rule=u.setIdRule(this.getId(),o,ix({state:c},i));var p=(0,e.shallowDiff)(h,o);this.set('style','',{silent:!0}),(0,t.keys)(p).forEach((function(t){return r.trigger("change:style:".concat(t))}))}return s.temporary||this.__onStyleChange(i.addStyle||o),o},o.prototype.getAttributes=function(n){void 0===n&&(n={});var o=this.em,i=[],r=ix({},this.get('attributes')),s=null==o?void 0:o.Selectors,a=this.getId();if(n.noClass?delete r.class:(this.classes.forEach((function(e){return i.push((0,t.isString)(e)?e:e.getName())})),i.length&&(r.class=i.join(' '))),!n.noStyle){var l=this.get('style');(0,e.isObject)(l)&&!(0,e.isEmptyObj)(l)&&(r.style=this.styleToString({inline:1}))}if(!(0,t.has)(r,'id')){var c=!1;!lx(o)&&(0,t.isEmpty)(this.getStyle())||(c=!!(null==s?void 0:s.get(a,s.Selector.TYPE_ID))),(this.__getSymbol()||this.__getSymbols()||this.get('script-export')||this.get('script'))&&(c=!0),c&&(r.id=a)}return r},o.prototype.addClass=function(t){var e=this.em.Selectors.addClass(t);return this.classes.add(e)},o.prototype.setClass=function(t){return this.classes.reset(),this.addClass(t)},o.prototype.removeClass=function(e){var n=[];e=(0,t.isArray)(e)?e:[e];var o=this.classes,i=oo.TYPE_CLASS;return e.forEach((function(t){t.split(' ').forEach((function(t){var e=o.where({name:t,type:i})[0];e&&n.push(o.remove(e))}))})),n},o.prototype.getClasses=function(){var t=this.getAttributes().class;return t?t.split(' '):[]},o.prototype.__logSymbol=function(t,e,n){void 0===n&&(n={});var o=this.__getSymbol(),i=this.__getSymbols();(o||i)&&this.em.log(t,{model:this,toUp:e,context:'symbols',opts:n})},o.prototype.__initSymb=function(){this.__symbReady||(this.on('change',this.__upSymbProps),this.__symbReady=!0)},o.prototype.__isSymbol=function(){return(0,t.isArray)(this.get(ux))},o.prototype.__isSymbolOrInst=function(){return!(!this.__isSymbol()&&!this.get(hx))},o.prototype.__isSymbolTop=function(){var t=this.parent();return this.__isSymbolOrInst()&&(!t||t&&!t.__isSymbol()&&!t.__getSymbol())},o.prototype.__isSymbolNested=function(){if(!this.__isSymbolOrInst()||this.__isSymbolTop())return!1;var t=(this.__isSymbol()?this:this.__getSymbol()).__getSymbTop(),e=this.__getSymbTop();return(e.__isSymbol()?e:e.__getSymbol())!==t},o.prototype.__getAllById=function(){var t=this.em;return t?t.Components.allById():{}},o.prototype.__getSymbol=function(){var e=this.get(hx);if(e&&(0,t.isString)(e)){var n=this.__getAllById()[e];n?(e=n,this.set(hx,n)):e=0}return e},o.prototype.__getSymbols=function(){var e=this,n=this.get(ux);return n&&(0,t.isArray)(n)&&(n.forEach((function(o,i){o&&(0,t.isString)(o)&&(n[i]=e.__getAllById()[o])})),n=n.filter((function(e){return e&&!(0,t.isString)(e)}))),n},o.prototype.__isSymbOvrd=function(e){void 0===e&&(e='');var n=this.get(px),o=e.split(':')[0],i=e!==o?[e,o]:[e];return!0===n||(0,t.isArray)(n)&&i.some((function(t){return n.indexOf(t)>=0}))},o.prototype.__getSymbToUp=function(t){var e=this;void 0===t&&(t={});var n=[],o=t.changed;if(t.fromInstance||t.noPropagate||t.fromUndo||o&&this.__isSymbOvrd(o))return n;var i=this.__getSymbols()||[],r=this.__getSymbol();return n=(r?sx([r],r.__getSymbols()||[],!0):i).filter((function(t){return t!==e})).filter((function(t){return!(o&&t.__isSymbOvrd(o))}))},o.prototype.__getSymbTop=function(t){for(var e=this,n=this.parent(t);n&&(n.__isSymbol()||n.__getSymbol());)e=n,n=n.parent(t);return e},o.prototype.__upSymbProps=function(n,o){var i=this;void 0===o&&(o={});var r=this.changedAttributes()||{},s=r.attributes||{};if(delete r.status,delete r.open,delete r[ux],delete r[hx],delete r[px],delete r.attributes,delete s.id,(0,e.isEmptyObj)(s)||(r.attributes=s),!(0,e.isEmptyObj)(r)){var a=this.__getSymbToUp(o);(0,t.keys)(r).map((function(t){i.__isSymbOvrd(t)&&delete r[t]})),this.__logSymbol('props',a,{opts:o,changed:r}),a.forEach((function(e){var n=ix({},r);(0,t.keys)(n).map((function(t){e.__isSymbOvrd(t)&&delete n[t]})),e.set(n,ix({fromInstance:i},o))}))}},o.prototype.__upSymbCls=function(t,e,n){var o=this;void 0===n&&(n={});var i=this.__getSymbToUp(n);this.__logSymbol('classes',i,{opts:n}),i.forEach((function(t){t.set('classes',o.get('classes'),{fromInstance:o})})),this.__changesUp(n)},o.prototype.__upSymbComps=function(t,e,n){var o=this,i=n||e||{},r={fromInstance:i.fromInstance,fromUndo:i.fromUndo},s=t.opt.temporary;if(n)if(n.add){var a=[],l=!!this.__getSymbols();if((v=this.__getSymbToUp(ix(ix({},r),{changed:'components:add'}))).length){var c=t.__getSymbol();a=(c?c.__getSymbols():t.__getSymbols())||[],(a=sx([],a,!0)).push(c||t)}!s&&this.__logSymbol('add',v,{opts:n,addedInstances:a.map((function(t){return t.cid})),added:t.cid}),v.forEach((function(e){var i=e.__getSymbTop(),r=a.filter((function(t){var e=t.__getSymbTop({prev:1});return i&&e&&e===i}))[0]||t.clone({symbol:!0,symbolInv:l});e.append(r,ix({fromInstance:o},n))}))}else{var u=t.__getSymbol();if(u&&!n.temporary&&u.set(ux,u.__getSymbols().filter((function(e){return e!==t}))),!t.__isSymbolTop()){var h='components:remove',p=n.index,d=t.parent(),f=ix({fromInstance:t},n),g=t.__isSymbolNested(),m=function(t){var e=t.parent();e&&!e.__isSymbOvrd(h)&&t.remove(f)};v=(null==d?void 0:d.__isSymbOvrd(h))?[]:t.__getSymbToUp(r);g&&(v=null==d?void 0:d.__getSymbToUp(ix(ix({},r),{changed:h})),m=function(t){var e=t.components().at(p);e&&e.remove(ix({fromInstance:d},f))}),!s&&this.__logSymbol('remove',v,{opts:n,removed:t.cid,isSymbNested:g}),v.forEach(m)}}else{var v=this.__getSymbToUp(ix(ix({},r),{changed:'components:reset'})),y=t.models;this.__logSymbol('reset',v,{components:y}),v.forEach((function(t){var n=y.map((function(t){return t.clone({symbol:!0})}));t.components().reset(n,ix({fromInstance:o},e))}))}this.__changesUp(i)},o.prototype.initClasses=function(e,n,o){void 0===o&&(o={});var i=this.get('attributes')||{},r=i.class,s=rx(i,["class"]),a=[this,'change:classes',this.initClasses],l=this.get('classes')||r||[],c=(0,t.isString)(l)?l.split(' '):l;this.stopListening.apply(this,a);var u=this.normalizeClasses(c),h=new ao([]);return this.set('classes',h,o),h.add(u),h.on('add remove reset',this.__upSymbCls),r&&u.length&&this.set('attributes',s),this.listenTo.apply(this,a),this},o.prototype.initComponents=function(){var e=[this,'change:components',this.initComponents];this.stopListening.apply(this,e);var n=new Kn([],this.opt);n.parent=this;var o=this.get('components'),i=!this.opt.avoidChildren;return this.set('components',n),i&&o&&n.add((0,t.isFunction)(o)?o(this):o,this.opt),n.on('add remove reset',this.__upSymbComps),this.listenTo.apply(this,e),this},o.prototype.initTraits=function(t){var e=this.em,n='change:traits';return this.off(n,this.initTraits),this.__loadTraits(),this.on(n,this.initTraits),t&&e&&e.trigger('component:toggled'),this},o.prototype.initScriptProps=function(){if(!this.opt.temporary){var t='script-props',e=["change:".concat(t),this.initScriptProps];this.off.apply(this,e);var n=this.previous(t)||[],o=this.get(t)||[],i=n.map((function(t){return"change:".concat(t)})).join(' '),r=o.map((function(t){return"change:".concat(t)})).join(' ');i&&this.off(i,this.__scriptPropsChange),r&&this.on(r,this.__scriptPropsChange),this.on.apply(this,e)}},o.prototype.__scriptPropsChange=function(t,e,n){void 0===n&&(n={}),n.avoidStore||this.trigger('rerender')},o.prototype.append=function(e,n){void 0===n&&(n={});var o=((0,t.isArray)(e)?sx([],e,!0):[e]).map((function(e){return(0,t.isString)(e)||e.collection&&e.collection.remove(e,{temporary:!0}),e})),i=this.components().add(o,n);return(0,t.isArray)(i)?i:[i]},o.prototype.components=function(e,n){void 0===n&&(n={});var o=this.get('components');return(0,t.isUndefined)(e)?o:(o.reset(void 0,n),e?this.append(e,n):[])},o.prototype.getChildAt=function(t){return this.components().at(t||0)||void 0},o.prototype.getLastChild=function(){var t=this.components();return t.at(t.length-1)||null},o.prototype.empty=function(t){return void 0===t&&(t={}),this.components().reset(void 0,t),this},o.prototype.parent=function(t){void 0===t&&(t={});var e=this.collection||t.prev&&this.prevColl;return e?e.parent:void 0},o.prototype.parents=function(){var t=this.parent();return t?[t].concat(t.parents()):[]},o.prototype.scriptUpdated=function(){this.set('scriptUpdated',1)},o.prototype.initToolbar=function(){var t=this.em,e=this,n=t&&t.getConfig().stylePrefix||'';if(!e.get('toolbar')&&t){var o=[];e.collection&&o.push({label:t.getIcon('arrowUp'),command:function(t){return t.runCommand('core:component-exit',{force:1})}}),e.get('draggable')&&o.push({attributes:{class:"".concat(n,"no-touch-actions"),draggable:!0},label:t.getIcon('move'),command:'tlb-move'}),e.get('copyable')&&o.push({label:t.getIcon('copy'),command:'tlb-clone'}),e.get('removable')&&o.push({label:t.getIcon('delete'),command:'tlb-delete'}),e.set('toolbar',o)}},o.prototype.__loadTraits=function(t){var e=this,n=t||this.traits;this.set('traits',n.map((function(t){return nx.build(e,t)})));var o=ix({},this.get('attributes'));return this.traits.forEach((function(t){if(!t.changeProp){var e=t.name,n=t.value;e&&n&&(o[e]=n)}})),n.length&&this.set('attributes',o),this},o.prototype.getTraits=function(){return this.traits},o.prototype.setTraits=function(e){var n=(0,t.isArray)(e)?e:[e];return this.__loadTraits(n),this.getTraits()},o.prototype.getTrait=function(t){return this.traits.find((function(e){return e.name===t}))||null},o.prototype.updateTrait=function(t,e){var n,o=this.getTrait(t);return null==o||o.updateOpts(e),null===(n=this.em)||void 0===n||n.trigger('component:toggled'),this},o.prototype.getTraitIndex=function(t){var e=this.getTrait(t);return e?this.traits.indexOf(e):-1},o.prototype.removeTrait=function(e){var n,o=this,i=((0,t.isArray)(e)?e:[e]).map((function(t){var e=o.getTraitIndex(t);if(-1!=e)return o.traits.splice(e,1)[0]}));return null===(n=this.em)||void 0===n||n.trigger('component:toggled'),(0,t.isArray)(i)?i:[i]},o.prototype.addTrait=function(e,n){var o,i=this;void 0===n&&(n={});var r=((0,t.isArray)(e)?e:[e]).map((function(t){var e=nx.build(i,t);return i.traits.push(e),e}));return null===(o=this.em)||void 0===o||o.trigger('component:toggled'),r},o.prototype.normalizeClasses=function(t){var e=[],n=this.em,o=null==n?void 0:n.Selectors;return o?t.models?sx([],t.models,!0):(t.forEach((function(t){return e.push(o.add(t))})),e):[]},o.prototype.clone=function(t){void 0===t&&(t={});var e=this.em,n=ix({},this.attributes),o=ix({},this.opt),i=this.getId(),r=null==e?void 0:e.Css;n.attributes=ix({},n.attributes),delete n.attributes.id,n.components=[],n.classes=[],n.traits=[],this.__isSymbolTop()&&(t.symbol=!0),this.get('components').each((function(e,o){n.components[o]=e.clone(ix(ix({},t),{_inner:1}))})),this.traits.forEach((function(t,e){n.traits[e]=ix(ix({},t.opts),{name:t.name})})),this.get('classes').each((function(t,e){n.classes[e]=t.get('name')})),n.status='',o.collection=null;var s=new this.constructor(n,o),a="#".concat(s.getId());(r?r.getRules("#".concat(i)):[]).forEach((function(t){var e=t.clone();e.set('selectors',[a]),r.getAll().add(e)})),s.set(ux,0);var l=this.__getSymbol(),c=this.__getSymbols();t.symbol||!l&&!c?l?(l.set(ux,sx(sx([],l.__getSymbols(),!0),[s],!1)),s.__initSymb()):t.symbol&&(this.__isSymbol()?(this.set(ux,sx(sx([],c,!0),[s],!1)),s.set(hx,this),s.__initSymb()):t.symbolInv?(this.set(ux,[s]),s.set(hx,this),[this,s].map((function(t){return t.__initSymb()}))):(s.set(ux,[this]),[this,s].map((function(t){return t.__initSymb()})),this.set(hx,s))):(s.set(hx,0),s.set(ux,0));var u='component:clone';return e&&e.trigger(u,s),this.trigger(u,s),s},o.prototype.getName=function(t){void 0===t&&(t={});var n=this.em,o=this.attributes,i=o.type,r=o.tagName,s=o.name,a=i||r,l=i?'':r,c='domComponents.names.',u=s&&(null==n?void 0:n.t("".concat(c).concat(s))),h=l&&(null==n?void 0:n.t("".concat(c).concat(l))),p=n&&(n.t("".concat(c).concat(i))||n.t("".concat(c).concat(r))),d=this.get('custom-name');return(t.noCustom?'':d)||u||s||h||(0,e.capitalize)(l)||p||(0,e.capitalize)(a)},o.prototype.getIcon=function(){var t=this.get('icon');return t?t+' ':''},o.prototype.toHTML=function(n){void 0===n&&(n={});var o=this,i=[],r=n.tag||o.get('tagName'),s=o.get('void'),a=n.attributes,l=this.getAttrToHTML();if(delete n.tag,a&&((0,t.isFunction)(a)?l=a(o,l)||{}:(0,e.isObject)(a)&&(l=a)),n.withProps){var c=this.toJSON();(0,t.forEach)(c,(function(n,o){'_'!==o[0]&&['classes','attributes','components'].indexOf(o)<0&&(l["data-gjs-".concat(o)]=(0,t.isArray)(n)||(0,e.isObject)(n)?JSON.stringify(n):n)}))}for(var u in l){var h=l[u];if(!(0,t.isUndefined)(h)&&null!==h)if((0,t.isBoolean)(h))h&&i.push(u);else{var p='';if(n.altQuoteAttr&&(0,t.isString)(h)&&h.indexOf('"')>=0)p="'".concat(h.replace(/'/g,'&apos;'),"'");else{var d=(0,t.isString)(h)?h.replace(/"/g,'&quot;'):h;p="\"".concat(d,"\"")}i.push("".concat(u,"=").concat(p))}}var f=i.length?" ".concat(i.join(' ')):'',g=o.getInnerHTML(n),m="<".concat(r).concat(f).concat(s?'/':'',">").concat(g);return!s&&(m+="</".concat(r,">")),m},o.prototype.getInnerHTML=function(t){return this.__innerHTML(t)},o.prototype.__innerHTML=function(t){void 0===t&&(t={});var e=this.components();return e.length?e.map((function(e){return e.toHTML(t)})).join(''):this.content},o.prototype.getAttrToHTML=function(){var t=this.getAttributes();return lx(this.em)&&delete t.style,t},o.prototype.toJSON=function(e){void 0===e&&(e={});var n=s.Model.prototype.toJSON.call(this,e);if(n.attributes=this.getAttributes(),delete n.attributes.class,delete n.toolbar,delete n.traits,delete n.status,delete n.open,delete n._undoexc,delete n.delegate,!e.fromUndo){var o=n[hx],i=n[ux];i&&(0,t.isArray)(i)&&(n[ux]=i.filter((function(t){return t})).map((function(t){return t.getId?t.getId():t}))),o&&!(0,t.isString)(o)&&(n[hx]=o.getId())}return this.em.getConfig().avoidDefaults&&this.getChangedProps(n),n},o.prototype.getChangedProps=function(e){var n=e||s.Model.prototype.toJSON.apply(this),o=(0,t.result)(this,'defaults');return(0,t.forEach)(o,(function(t,e){-1===['type'].indexOf(e)&&n[e]===t&&delete n[e]})),(0,t.isEmpty)(n.type)&&delete n.type,(0,t.forEach)(['attributes','style'],(function(e){(0,t.isEmpty)(o[e])&&(0,t.isEmpty)(n[e])&&delete n[e]})),(0,t.forEach)(['classes','components'],(function(e){(!n[e]||(0,t.isEmpty)(o[e])&&!n[e].length)&&delete n[e]})),n},o.prototype.getId=function(){return(this.get('attributes')||{}).id||this.ccid||this.cid},o.prototype.setId=function(t,e){var n=ix({},this.get('attributes'));return n.id=t,this.set('attributes',n,e),this},o.prototype.getEl=function(t){var e=this.getView(t);return e&&e.el},o.prototype.getView=function(t){var e=this,n=e.view,o=e.views,i=e.em,r=t||(null==i?void 0:i.getCurrentFrameModel());return r&&(n=o.filter((function(t){return t.frameView===r.view}))[0]),n},o.prototype.getCurrentView=function(){var t=this.em.getCurrentFrame(),e=null==t?void 0:t.model;return this.getView(e)},o.prototype.__getScriptProps=function(){var t=this.props();return(this.get('script-props')||[]).reduce((function(e,n){return e[n]=t[n],e}),{})},o.prototype.getScriptString=function(e){var n=this,o=e||this.get('script')||'';if(!o)return o;if(this.get('script-props'))o=o.toString().trim();else{if((0,t.isFunction)(o)){var i=o.toString().trim();o=(i=i.slice(i.indexOf('{')+1,i.lastIndexOf('}'))).trim()}var r=this.em.getConfig(),s=ax(r.tagVarStart||'{[ '),a=ax(r.tagVarEnd||' ]}'),l=new RegExp("".concat(s,"([\\w\\d-]*)").concat(a),'g');o=o.replace(l,(function(e,o){n.scriptUpdated();var i=n.attributes[o]||'';return(0,t.isArray)(i)||'object'==typeof i?JSON.stringify(i):i}))}return o},o.prototype.emitUpdate=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var i=this.em,r=dx+(t?":".concat(t):''),s=t&&this.get(t);t&&this.updated.apply(this,sx([t,s,t&&this.previous(t)],n,!1)),this.trigger.apply(this,sx([r],n,!1)),i&&i.trigger.apply(i,sx([r,this],n,!1)),['components','classes'].indexOf(t)>=0&&this.__propSelfToParent({component:this,changed:(e={},e[t]=s,e),options:n[2]||n[1]||{}})},o.prototype.onAll=function(e){return(0,t.isFunction)(e)&&(e(this),this.components().forEach((function(t){return t.onAll(e)}))),this},o.prototype.forEachChild=function(e){(0,t.isFunction)(e)&&this.components().forEach((function(t){e(t),t.forEachChild(e)}))},o.prototype.remove=function(t){var e=this;void 0===t&&(t={});var n=this.em,o=this.collection,i=function(){o&&o.remove(e,ix(ix({},t),{action:'remove-component'})),o||(e.components('',t),e.components().removeChildren(e,void 0,t))},r=ix({},t);return[this,n].map((function(t){return t.trigger('component:remove:before',e,i,r)})),!r.abort&&i(),this},o.prototype.move=function(t,e){if(void 0===e&&(e={}),t){var n=e.at,o=this.index(),i=t===this.parent();i&&(o===n||o===n-1)||(i&&n&&n>o&&(e.at=n-1),this.remove({temporary:1}),t.append(this,e),this.emitUpdate())}return this},o.prototype.isInstanceOf=function(t){var e,n,o=null===(n=null===(e=this.em)||void 0===e?void 0:e.Components.getType(t))||void 0===n?void 0:n.model;return!!o&&this instanceof o},o.prototype.isChildOf=function(e){for(var n=(0,t.isString)(e),o=this.parent();o;){if(n){if(o.isInstanceOf(e))return!0}else if(o===e)return!0;o=o.parent()}return!1},o.prototype.resetId=function(t){void 0===t&&(t={});var e=this.em,n=this.getId();if(!n)return this;var i=o.createId(this);this.setId(i);var r=null==e?void 0:e.Css.getIdRule(n),s=null==r?void 0:r.get('selectors').at(0);return null==s||s.set('name',i),this},o.prototype._getStyleRule=function(t){var e=(void 0===t?{}:t).id,n=this.em,o=e||this.getId();return null==n?void 0:n.Css.getIdRule(o)},o.prototype._getStyleSelector=function(t){var e=this._getStyleRule(t);return null==e?void 0:e.get('selectors').at(0)},o.prototype._idUpdated=function(t,e,n){if(void 0===n&&(n={}),!n.idUpdate){var i=this.ccid,r=(this.get('attributes')||{}).id,s=(this.previous('attributes')||{}).id||i,a=o.getList(this);if(a[r]||!r&&s)return this.setId(s,{idUpdate:!0});delete a[s],a[r]=this,this.ccid=r;var l=this._getStyleSelector({id:s});l&&l.set({name:r,label:r})}},o.getDefaults=function(){return(0,t.result)(this.prototype,'defaults')},o.isComponent=function(t){return{tagName:(0,e.toLowerCase)(t.tagName)}},o.ensureInList=function(t){var e=o.getList(t),n=t.getId(),i=e[n];if(i){if(i!==t){var r=o.getIncrementId(n,e);t.setId(r),e[r]=t}}else e[n]=t;t.components().forEach((function(t){return o.ensureInList(t)}))},o.createId=function(t,e){void 0===e&&(e={});var n,i=o.getList(t),r=e.idMap,s=void 0===r?{}:r,a=t.get('attributes').id;return a?(n=o.getIncrementId(a,i,e),t.setId(n),a!==n&&(s[a]=n)):n=o.getNewId(i),i[n]=t,n},o.getNewId=function(t){for(var e=Object.keys(t).length.toString().length+2,n=(Math.random()+1.1).toString(36).slice(-e),i="i".concat(n);t[i];)i=o.getNewId(t);return i},o.getIncrementId=function(t,e,n){void 0===n&&(n={});var o=n.keepIds,i=1,r=t;if((void 0===o?[]:o).indexOf(t)<0)for(;e[r];)i++,r="".concat(t,"-").concat(i);return r},o.getList=function(t){var e=t.opt,n=void 0===e?{}:e,o=n.domc,i=n.em,r=o||(null==i?void 0:i.Components);return r?r.componentsById:{}},o.checkId=function(e,n,i,r){void 0===n&&(n=[]),void 0===i&&(i={}),void 0===r&&(r={});var s=(0,t.isArray)(e)?e:[e],a=r.keepIds,l=void 0===a?[]:a,c=r.idMap,u=void 0===c?{}:c;s.forEach((function(e){e.attributes;var s=e.attributes,a=void 0===s?{}:s,c=e.components,h=a.id;if(h&&i[h]&&l.indexOf(h)<0){var p=o.getIncrementId(h,i);u[h]=p,a.id=p,(0,t.isArray)(n)&&n.forEach((function(t){var e=t.selectors;e.forEach((function(t,n){t==="#".concat(h)&&(e[n]="#".concat(p))}))}))}c&&o.checkId(c,n,i,r)}))},o}(Yn);const vx=mx;var yx=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),_x=void 0&&(void 0).__assign||function(){return _x=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},_x.apply(this,arguments)},Ox=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return yx(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return _x(_x({},t.prototype.defaults),{tagName:'',droppable:!1,layerable:!1,selectable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.toHTML=function(){var t=this.content,e=this.parent();return(null==e?void 0:e.is('script'))?t:this.__escapeContent(t)},n.prototype.__escapeContent=function(t){return(0,e.escapeNodeContent)(t)},n.isComponent=function(t){var e;if(3===t.nodeType)return{type:'textnode',content:null!==(e=t.textContent)&&void 0!==e?e:''}},n}(vx);const bx=Ox;var wx=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xx=void 0&&(void 0).__assign||function(){return xx=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},xx.apply(this,arguments)},Sx=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wx(e,t),Object.defineProperty(e.prototype,"defaults",{get:function(){return xx({},t.prototype.defaults)},enumerable:!1,configurable:!0}),e.prototype.toHTML=function(){return"\x3c!--".concat(this.content,"--\x3e")},e.isComponent=function(t){var e;if(8==t.nodeType)return{tagName:'NULL',type:'comment',content:null!==(e=t.textContent)&&void 0!==e?e:''}},e}(bx);const kx=Sx;var Px=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Cx=void 0&&(void 0).__assign||function(){return Cx=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Cx.apply(this,arguments)},Tx='iframe';const Ex=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Px(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return Cx(Cx({},t.prototype.defaults),{type:Tx,tagName:Tx,droppable:!1,resizable:!0,traits:['id','title','src'],attributes:{frameborder:'0'}})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===Tx},n}(vx);var Qx=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ax=void 0&&(void 0).__assign||function(){return Ax=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ax.apply(this,arguments)},$x='xmlns="http://www.w3.org/2000/svg" width="100" viewBox="0 0 24 24" style="fill: rgba(0,0,0,0.15); transform: scale(0.75)"',jx=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Qx(o,n),Object.defineProperty(o.prototype,"defaults",{get:function(){return Ax(Ax({},n.prototype.defaults),{type:'image',tagName:'img',void:!0,droppable:0,editable:1,highlightable:0,resizable:{ratioDefault:1},traits:['alt'],src:"<svg ".concat($x,">\n        <path d=\"M8.5 13.5l2.5 3 3.5-4.5 4.5 6H5m16 1V5a2 2 0 0 0-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2z\"></path>\n      </svg>"),fallback:"<svg ".concat($x,">\n        <path d=\"M2.28 3L1 4.27l2 2V19c0 1.1.9 2 2 2h12.73l2 2L21 21.72 2.28 3m2.55 0L21 19.17V5a2 2 0 0 0-2-2H4.83M8.5 13.5l2.5 3 1-1.25L14.73 18H5l3.5-4.5z\"></path>\n      </svg>"),file:''})},enumerable:!1,configurable:!0}),o.prototype.initialize=function(o,i){n.prototype.initialize.call(this,o,i);var r=this.get('attributes').src;r&&(0,e.buildBase64UrlFromSvg)((0,t.result)(this,'defaults').src)!==r&&this.set('src',r,{silent:!0})},o.prototype.initToolbar=function(){n.prototype.initToolbar.call(this);var t=this.em;if(t){var e='image-editor';if(t.Commands.has(e)){for(var o=!1,i=this.get('toolbar'),r=0;r<i.length;r++)if('image-editor'===i[r].command){o=!0;break}o||(i.push({attributes:{class:'fa fa-pencil'},command:e}),this.set('toolbar',i))}}},o.prototype.getAttrToHTML=function(){var t=n.prototype.getAttrToHTML.call(this),e=this.getSrcResult();return e&&(t.src=e),t},o.prototype.getSrcResult=function(t){void 0===t&&(t={});var n=this.get(t.fallback?'fallback':'src')||'',o=n;return n&&'<svg'===n.substr(0,4)&&(o=(0,e.buildBase64UrlFromSvg)(n)),o},o.prototype.isDefaultSrc=function(){var n=this.get('src'),o=(0,t.result)(this,'defaults').src;return n===o||n===(0,e.buildBase64UrlFromSvg)(o)},o.prototype.toJSON=function(t){var e=n.prototype.toJSON.call(this,t),o=e.attributes;return o&&e.src===o.src&&delete e.src,e},o.prototype.parseUri=function(t){var n={};if((0,e.hasWin)())(n=document.createElement('a')).href=t;else if('undefined'!=typeof URL)try{n=new URL(t)}catch(t){}return{hostname:n.hostname||'',pathname:n.pathname||'',protocol:n.protocol||'',search:n.search||'',hash:n.hash||'',port:n.port||'',query:function(t){void 0===t&&(t='');for(var e={},n=t.substring(1).split('&'),o=0;o<n.length;o++){var i=n[o].split('='),r=decodeURIComponent(i[0]);r&&(e[r]=decodeURIComponent(i[1]||''))}return e}(n.search)}},o.isComponent=function(t){return'img'===(0,e.toLowerCase)(t.tagName)},o}(vx);const Rx=jx;var Zx=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Mx=void 0&&(void 0).__assign||function(){return Mx=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Mx.apply(this,arguments)};const Vx=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Zx(n,e),Object.defineProperty(n.prototype,"defaults",{get:function(){return Mx(Mx({},e.prototype.defaults),{type:'text',droppable:!1,editable:!0})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(t,n){e.prototype.initialize.call(this,t,n),this.__checkInnerChilds()},n.prototype.__checkInnerChilds=function(){var e=this.em.Components.config.disableTextInnerChilds;if(e){var n=function(t){t.isInstanceOf('textnode')||t.set({locked:!0,layerable:!1})};(0,t.isFunction)(e)?this.forEachChild((function(t){e(t)&&n(t)})):this.forEachChild(n)}},n}(vx);var Dx=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ix=void 0&&(void 0).__assign||function(){return Ix=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ix.apply(this,arguments)},Nx='label';const Wx=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Dx(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return Ix(Ix({},t.prototype.defaults),{type:Nx,tagName:Nx,traits:['id','title','for']})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===Nx},n}(Vx);var Xx=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lx=void 0&&(void 0).__assign||function(){return Lx=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Lx.apply(this,arguments)},Yx='link',zx=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return Xx(o,n),Object.defineProperty(o.prototype,"defaults",{get:function(){return Lx(Lx({},n.prototype.defaults),{type:Yx,tagName:'a',traits:['title','href','target']})},enumerable:!1,configurable:!0}),o.isComponent=function(n,o){var i;if(void 0===o&&(o={}),'a'===(0,e.toLowerCase)(n.tagName)){var r=o.textTags||[];i={type:Yx,editable:!1};var s=n.childNodes;s.length||delete i.editable,(0,t.forEach)(s,(function(t){var n=t.tagName;(3==t.nodeType&&''!==t.textContent.trim()||n&&r.indexOf((0,e.toLowerCase)(n))>=0)&&delete i.editable}))}return i},o}(Vx);const qx=zx;var Ux=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Bx=void 0&&(void 0).__assign||function(){return Bx=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Bx.apply(this,arguments)},Fx=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Ux(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){var e=t.prototype.defaults;return Bx(Bx({},e),{type:'map',src:'',void:!1,mapUrl:'https://maps.google.com/maps',tagName:'iframe',mapType:'q',address:'',zoom:'1',attributes:{frameborder:0},toolbar:e.toolbar,traits:[{label:'Address',name:'address',placeholder:'eg. London, UK',changeProp:1},{type:'select',label:'Map type',name:'mapType',changeProp:1,options:[{value:'q',name:'Roadmap'},{value:'w',name:'Satellite'}]},{label:'Zoom',name:'zoom',type:'range',min:'1',max:'20',changeProp:1}]})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(e,n){this.get('src')?this.parseFromSrc():this.updateSrc(),t.prototype.initialize.call(this,e,n),this.listenTo(this,'change:address change:zoom change:mapType',this.updateSrc)},n.prototype.updateSrc=function(){this.set('src',this.getMapUrl())},n.prototype.getMapUrl=function(){var t=this.get('address'),e=this.get('zoom'),n=this.get('mapType');t=t?'&q='+t:'',e=e?'&z='+e:'',n=n?'&t='+n:'';var o=this.get('mapUrl')+'?'+t+e+n;return o+='&output=embed'},n.prototype.parseFromSrc=function(){var t=this.parseUri(this.get('src')).query;t.q&&this.set('address',t.q),t.z&&this.set('zoom',t.z),t.t&&this.set('mapType',t.t)},n.isComponent=function(t){if('iframe'==(0,e.toLowerCase)(t.tagName)&&/maps\.google\.com/.test(t.src))return{type:'map',src:t.src}},n}(Rx);const Gx=Fx;var Hx=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Kx=void 0&&(void 0).__assign||function(){return Kx=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Kx.apply(this,arguments)},Jx='script';const tS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return Hx(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return Kx(Kx({},t.prototype.defaults),{type:Jx,tagName:Jx,droppable:!1,draggable:!1,layerable:!1})},enumerable:!1,configurable:!0}),n.isComponent=function(t){if((0,e.toLowerCase)(t.tagName)==Jx){var n={type:Jx};return t.src&&(n.src=t.src,n.onload=t.onload),n}},n}(vx);var eS=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nS=void 0&&(void 0).__assign||function(){return nS=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},nS.apply(this,arguments)},oS='svg';const iS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return eS(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return nS(nS({},t.prototype.defaults),{type:oS,tagName:oS,highlightable:!1,resizable:{ratioDefault:!0}})},enumerable:!1,configurable:!0}),n.prototype.getName=function(){var t=this.get('tagName'),e=this.get('custom-name');return t=t.charAt(0).toUpperCase()+t.slice(1),e||t},n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===oS},n}(vx);var rS=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),sS=void 0&&(void 0).__assign||function(){return sS=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},sS.apply(this,arguments)};const aS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return rS(e,t),Object.defineProperty(e.prototype,"defaults",{get:function(){return sS(sS({},t.prototype.defaults),{selectable:!1,hoverable:!1,layerable:!1})},enumerable:!1,configurable:!0}),e.isComponent=function(t,e){return void 0===e&&(e={}),!!e.inSvg},e}(iS);var lS=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),cS=void 0&&(void 0).__assign||function(){return cS=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},cS.apply(this,arguments)},uS='table';const hS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return lS(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return cS(cS({},t.prototype.defaults),{type:uS,tagName:uS,droppable:['tbody','thead','tfoot']})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(e,n){t.prototype.initialize.call(this,e,n);var o=this.get('components');!o.length&&o.add({type:'tbody'})},n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===uS},n}(vx);var pS=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dS=void 0&&(void 0).__assign||function(){return dS=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},dS.apply(this,arguments)},fS='tbody';const gS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return pS(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return dS(dS({},t.prototype.defaults),{type:fS,tagName:fS,draggable:['table'],droppable:['tr'],columns:1,rows:1})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(e,n){t.prototype.initialize.call(this,e,n);var o=this.get('components'),i=this.get('columns'),r=this.get('rows');if(!o.length){for(var s=[];r--;){for(var a=[],l=i;l--;)a.push({type:'cell',classes:['cell']});s.push({type:'row',classes:['row'],components:a})}o.add(s)}},n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===fS},n}(vx);var mS=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vS=void 0&&(void 0).__assign||function(){return vS=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},vS.apply(this,arguments)};const yS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return mS(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return vS(vS({},t.prototype.defaults),{type:'cell',tagName:'td',draggable:['tr']})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return['td','th'].indexOf((0,e.toLowerCase)(t.tagName))>=0},n}(vx);var _S=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),OS=void 0&&(void 0).__assign||function(){return OS=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},OS.apply(this,arguments)},bS='tfoot';const wS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return _S(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return OS(OS({},t.prototype.defaults),{type:bS,tagName:bS})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===bS},n}(gS);var xS=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),SS=void 0&&(void 0).__assign||function(){return SS=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},SS.apply(this,arguments)},kS='thead';const PS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return xS(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return SS(SS({},t.prototype.defaults),{type:kS,tagName:kS})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===kS},n}(gS);var CS=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),TS=void 0&&(void 0).__assign||function(){return TS=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},TS.apply(this,arguments)},ES='tr';const QS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return CS(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return TS(TS({},t.prototype.defaults),{tagName:ES,draggable:['thead','tbody','tfoot'],droppable:['th','td']})},enumerable:!1,configurable:!0}),n.isComponent=function(t){return(0,e.toLowerCase)(t.tagName)===ES},n}(vx);var AS=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$S=void 0&&(void 0).__assign||function(){return $S=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},$S.apply(this,arguments)},jS='video',RS='yt',ZS='vi',MS='ytnc',VS='so',DS=function(t){return t&&'0'!==t},IS=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return AS(n,t),Object.defineProperty(n.prototype,"defaults",{get:function(){return $S($S({},t.prototype.defaults),{type:jS,tagName:jS,videoId:'',void:!1,provider:VS,ytUrl:'https://www.youtube.com/embed/',ytncUrl:'https://www.youtube-nocookie.com/embed/',viUrl:'https://player.vimeo.com/video/',loop:!1,poster:'',muted:0,autoplay:!1,controls:!0,color:'',list:'',src:'',rel:1,modestbranding:0,sources:[],attributes:{allowfullscreen:'allowfullscreen'}})},enumerable:!1,configurable:!0}),n.prototype.initialize=function(e,n){this.em=n.em,this.get('src')&&this.parseFromSrc(),this.updatePropsFromAttr(),this.updateTraits(),this.on('change:provider',this.updateTraits),this.on('change:videoId change:provider',this.updateSrc),t.prototype.initialize.call(this,e,n)},n.prototype.updatePropsFromAttr=function(){if(this.get('provider')===VS){var t=this.get('attributes'),n=t.controls,o=t.autoplay,i=t.loop,r={};(0,e.isDef)(n)&&(r.controls=!!n),(0,e.isDef)(o)&&(r.autoplay=!!o),(0,e.isDef)(i)&&(r.loop=!!i),(0,e.isEmptyObj)(r)||this.set(r)}},n.prototype.updateTraits=function(){var t,e=this.em,n='iframe';switch(this.get('provider')){case RS:case MS:t=this.getYoutubeTraits();break;case ZS:t=this.getVimeoTraits();break;default:n='video',t=this.getSourceTraits()}this.set({tagName:n},{silent:!0}),this.set({traits:t}),e.get('ready')&&e.trigger('component:toggled')},n.prototype.parseFromSrc=function(){var t=this.get('provider'),e=this.parseUri(this.get('src')),n=e.query;switch(t){case RS:case MS:case ZS:this.set('videoId',e.pathname.split('/').pop()),n.list&&this.set('list',n.list),DS(n.autoplay)&&this.set('autoplay',!0),DS(n.loop)&&this.set('loop',!0),0===parseInt(n.controls)&&this.set('controls',!1),DS(n.color)&&this.set('color',n.color),'0'===n.rel&&this.set('rel',0),'1'===n.modestbranding&&this.set('modestbranding',1)}},n.prototype.updateSrc=function(){var t='';switch(this.get('provider')){case RS:t=this.getYoutubeSrc();break;case MS:t=this.getYoutubeNoCookieSrc();break;case ZS:t=this.getVimeoSrc()}this.set({src:t})},n.prototype.getAttrToHTML=function(){var e=t.prototype.getAttrToHTML.call(this);switch(this.get('provider')){case RS:case MS:case ZS:break;default:e.loop=!!this.get('loop'),e.autoplay=!!this.get('autoplay'),e.controls=!!this.get('controls')}return e},n.prototype.getProviderTrait=function(){return{type:'select',label:'Provider',name:'provider',changeProp:!0,options:[{value:'so',name:'HTML5 Source'},{value:RS,name:'Youtube'},{value:MS,name:'Youtube (no cookie)'},{value:ZS,name:'Vimeo'}]}},n.prototype.getSourceTraits=function(){return[this.getProviderTrait(),{label:'Source',name:'src',placeholder:'eg. ./media/video.mp4',changeProp:!0},{label:'Poster',name:'poster',placeholder:'eg. ./media/image.jpg'},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait()]},n.prototype.getYoutubeTraits=function(){return[this.getProviderTrait(),{label:'Video ID',name:'videoId',placeholder:'eg. jNQXAC9IVRw',changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait(),this.getControlsTrait(),{type:'checkbox',label:'Related',name:'rel',changeProp:!0},{type:'checkbox',label:'Modest',name:'modestbranding',changeProp:!0}]},n.prototype.getVimeoTraits=function(){return[this.getProviderTrait(),{label:'Video ID',name:'videoId',placeholder:'eg. 123456789',changeProp:!0},{label:'Color',name:'color',placeholder:'eg. FF0000',changeProp:!0},this.getAutoplayTrait(),this.getLoopTrait()]},n.prototype.getAutoplayTrait=function(){return{type:'checkbox',label:'Autoplay',name:'autoplay',changeProp:!0}},n.prototype.getLoopTrait=function(){return{type:'checkbox',label:'Loop',name:'loop',changeProp:!0}},n.prototype.getControlsTrait=function(){return{type:'checkbox',label:'Controls',name:'controls',changeProp:!0}},n.prototype.getYoutubeSrc=function(){var t=this.get('videoId'),e=this.get('ytUrl'),n=this.get('list');return e+=t+(t.indexOf('?')<0?'?':''),e+=n?"&list=".concat(n):'',e+=this.get('autoplay')?'&autoplay=1&mute=1':'',e+=this.get('controls')?'':'&controls=0&showinfo=0',e+=this.get('loop')?"&loop=1&playlist=".concat(t):'',e+=this.get('rel')?'':'&rel=0',e+=this.get('modestbranding')?'&modestbranding=1':''},n.prototype.getYoutubeNoCookieSrc=function(){var t=this.getYoutubeSrc();return t=t.replace(this.get('ytUrl'),this.get('ytncUrl'))},n.prototype.getVimeoSrc=function(){var t=this.get('viUrl');return t+=this.get('videoId')+'?',t+=this.get('autoplay')?'&autoplay=1&muted=1':'',t+=this.get('loop')?'&loop=1':'',t+=this.get('controls')?'':'&title=0&portrait=0&badge=0',t+=this.get('color')?'&color='+this.get('color'):''},n.isComponent=function(t){var n=t.tagName,o=t.src,i=/youtube\.com\/embed/.test(o),r=/youtube-nocookie\.com\/embed/.test(o),s=/player\.vimeo\.com\/video/.test(o),a=i||r||s;if((0,e.toLowerCase)(n)==jS||'iframe'==(0,e.toLowerCase)(n)&&a){var l={type:'video'};return o&&(l.src=o),a&&(i?l.provider=RS:r?l.provider=MS:s&&(l.provider=ZS)),l}},n}(Rx);const NS=IS;var WS=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),XS=void 0&&(void 0).__assign||function(){return XS=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},XS.apply(this,arguments)},LS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return WS(e,t),Object.defineProperty(e.prototype,"defaults",{get:function(){return XS(XS({},t.prototype.defaults),{tagName:'body',removable:!1,copyable:!1,draggable:!1,components:[],traits:[],stylable:['background','background-color','background-image','background-repeat','background-attachment','background-position','background-size']})},enumerable:!1,configurable:!0}),e.prototype.__postAdd=function(){var e,n=null===(e=this.em)||void 0===e?void 0:e.UndoManager;return!this.__hasUm&&(null==n||n.add(this)),t.prototype.__postAdd.call(this)},e.prototype.__postRemove=function(){var e,n=null===(e=this.em)||void 0===e?void 0:e.UndoManager;return null==n||n.remove(this),t.prototype.__postRemove.call(this)},e.isComponent=function(){return!1},e}(vx);const YS=LS;var zS=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qS=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.compView=HS,t}return zS(n,e),n.prototype.initialize=function(t){this.opts=t||{},this.config=t.config||{},this.em=this.config.em;var e=this.collection;this.listenTo(e,'add',this.addTo),this.listenTo(e,'reset',this.resetChildren),this.listenTo(e,'remove',this.removeChildren)},n.prototype.removeChildren=function(t,e,n){var o=this;void 0===n&&(n={}),t.views.forEach((function(t){if(t){var e=t.childrenView,n=t.scriptContainer;e&&e.stopListening(),(0,ue.L_)(n),t.remove.apply(t)}})),t.components().forEach((function(t){return o.removeChildren(t,e,n)}))},n.prototype.addTo=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var o=this.em,i=this.collection.indexOf(t);if(this.addToCollection(t,null,i),o&&!n.temporary){var r=function(t){o.trigger('component:add',t),t.components().forEach((function(t){return r(t)}))};r(t)}},n.prototype.addToCollection=function(e,n,o){for(var i=this,r=i.config,s=i.opts,a=i.em,l=n||null,c=r.frameView,u=(null==c?void 0:c.model)&&e.getView(c.model),h=s.componentTypes||(null==a?void 0:a.Components.getTypes()),p=e.get('type')||'default',d=this.compView,f=0;f<h.length;f++)if(h[f].id==p){d=h[f].view;break}var g,m=u||new d({model:e,config:r,componentTypes:h});try{g=m.render().el}catch(t){g=document.createTextNode(''),a.logError(t)}if(l)l.appendChild(g);else{var v=this.parentEl,y=v.childNodes;if((0,t.isUndefined)(o))v.appendChild(g);else{var _=y.length==o;_&&o--,_||!y.length?v.appendChild(g):v.insertBefore(g,y[o])}}return e.opt.temporary||null==a||a.trigger('component:mount',e),g},n.prototype.resetChildren=function(t,e){var n=this,o=(void 0===e?{}:e).previousModels,i=void 0===o?[]:o;this.parentEl.innerHTML='',i.forEach((function(t){return n.removeChildren(t,n.collection)})),t.each((function(t){return n.addToCollection(t)}))},n.prototype.render=function(t){var e=this,n=this.el,o=document.createDocumentFragment();return this.parentEl=t||this.el,this.collection.each((function(t){return e.addToCollection(t,o)})),n.innerHTML='',n.appendChild(o),this},n}(u.G7);const US=qS;var BS=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),FS=void 0&&(void 0).__assign||function(){return FS=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},FS.apply(this,arguments)},GS=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return BS(o,n),o.prototype.className=function(){return this.getClasses()},o.prototype.tagName=function(){return this.model.get('tagName')},o.prototype.preinitialize=function(t){void 0===t&&(t={}),this.opts=t},o.prototype.initialize=function(t){void 0===t&&(t={});var n=this.model,o=t.config||{},i=o.em,r=n.opt||{},s=this.$el,a=this.el;this.opts=t,this.modelOpt=r,this.config=o,this.em=i,this.pfx=o.stylePrefix||'',this.ppfx=o.pStylePrefix||'',this.attr=n.get('attributes'),this.classe=this.attr.class||[],this.listenTo(n,'change:style',this.updateStyle),this.listenTo(n,'change:attributes',this.renderAttributes),this.listenTo(n,'change:highlightable',this.updateHighlight),this.listenTo(n,'change:status change:locked',this.updateStatus),this.listenTo(n,'change:script rerender',this.reset),this.listenTo(n,'change:content',this.updateContent),this.listenTo(n,'change',this.handleChange),this.listenTo(n,'active',this.onActive),this.listenTo(n,'disable',this.onDisable),s.data('model',n),(0,e.setViewEl)(a,this),n.view=this,this.frameView&&n.views.push(this),this.initClasses(),this.initComponents({avoidRender:!0}),this.events=FS(FS({},this.constructor.getEvents()),{dragstart:'handleDragStart'}),this.delegateEvents(),!r.temporary&&this.init(this._clbObj())},Object.defineProperty(o.prototype,"__cmpStyleOpts",{get:function(){return{state:'',mediaText:''}},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"frameView",{get:function(){return this.opts.config.frameView},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"createDoc",{get:function(){var t,e,n=(null===(t=this.frameView)||void 0===t?void 0:t.getDoc())||document;return(null===(e=this.opts.config)||void 0===e?void 0:e.useFrameDoc)?n:document},enumerable:!1,configurable:!0}),o.prototype.__isDraggable=function(){var t=this.model,e=this.config,n=t.attributes.draggable;return e.draggableComponents&&n},o.prototype._clbObj=function(){var t=this,e=t.em,n=t.model,o=t.el;return{editor:null==e?void 0:e.getEditor(),model:n,el:o}},o.prototype.init=function(t){},o.prototype.removed=function(t){},o.prototype.onRender=function(t){},o.prototype.onActive=function(t){},o.prototype.onDisable=function(t){},o.prototype.remove=function(){var t;n.prototype.remove.call(this);var e=this.model,o=this.$el,i=e.views,r=this.frameView||{};return e.components().forEach((function(t){var e=t.getView(r.model);null==e||e.remove()})),null===(t=this.childrenView)||void 0===t||t.remove(),i.splice(i.indexOf(this),1),this.removed(this._clbObj()),o.data({model:'',collection:'',view:''}),this},o.prototype.handleDragStart=function(t){if(!this.__isDraggable())return!1;t.stopPropagation(),t.preventDefault(),this.em.Commands.run('tlb-move',{target:this.model,event:t})},o.prototype.initClasses=function(){var t=this.model,e=t.classes,n='change:classes';e instanceof ao&&(this.stopListening(t,n,this.initClasses),this.listenTo(t,n,this.initClasses),this.listenTo(e,'add remove change reset',this.updateClasses),e.length&&this.importClasses())},o.prototype.initComponents=function(t){void 0===t&&(t={});var e=this,n=e.model,o=e.$el,i=e.childrenView,r=n.get('components'),s=[n,'change:components',this.initComponents];r instanceof Kn&&(o.data('collection',r),i&&i.remove(),this.stopListening.apply(this,s),!t.avoidRender&&this.renderChildren(),this.listenTo.apply(this,s))},o.prototype.handleChange=function(){var e=this.model,n=(0,t.keys)(e.changed);if(1!==n.length||'status'!==n[0])for(var o in e.emitUpdate(),e.changed)e.emitUpdate(o)},o.prototype.importClasses=function(){var t=this.em,e=this.model,n=t.Selectors;n&&e.classes.forEach((function(t){return n.add(t.getName())}))},o.prototype.updateStatus=function(t){void 0===t&&(t={});var e=this,n=e.em,o=e.el,i=e.ppfx,r=e.model,s=null==n?void 0:n.Canvas,a=null==s?void 0:s.config.extHl,l=r.get('status'),c="".concat(i,"selected"),u="".concat(c,"-parent"),h="".concat(i,"freezed"),p="".concat(i,"hovered"),d="".concat(i,"no-pointer"),f=[c,u,h,p,d],g=a&&!t.noExtHl?'':c;this.$el.removeClass(f.join(' '));var m=[o.getAttribute('class')||''],v=!(null==s?void 0:s.hasCustomSpot(We.q.Select)),y=!(null==s?void 0:s.hasCustomSpot(We.q.Target));switch(l){case'selected':v&&m.push(g);break;case'selected-parent':y&&m.push(u);break;case'freezed':m.push(h);break;case'freezed-selected':m.push(h),v&&m.push(g);break;case'hovered':!t.avoidHover&&m.push(p)}r.get('locked')&&m.push(d);var _=m.filter(Boolean).join(' ');_&&o.setAttribute('class',_)},o.prototype.updateHighlight=function(){var t=this.model,e=t.get('textable'),n=t.get('highlightable')&&(e||!t.isChildOf('text'));this.setAttribute('data-gjs-highlightable',!!n||'')},o.prototype.updateStyle=function(e,n,o){void 0===o&&(o={});var i=this.model,r=this.em;if(lx(r)&&!o.inline){var s=this.__cmpStyleOpts,a=i.getStyle(s);!(0,t.isEmpty)(a)&&i.setStyle(a,s)}else this.setAttribute('style',i.styleToString(o))},o.prototype.updateClasses=function(){var t=this.model.classes.pluck('name').join(' ');this.setAttribute('class',t),this.updateStatus(),this.onAttrUpdate()},o.prototype.setAttribute=function(t,e){var n=this.$el;e?n.attr(t,e):n.removeAttr(t)},o.prototype.getClasses=function(){return this.model.getClasses().join(' ')},o.prototype.updateAttributes=function(){var e=[],n=this,o=n.model,i=n.$el,r=n.el,s=o.attributes,a=s.textable,l=s.type,c=FS(FS({id:o.getId(),'data-gjs-type':l||'default'},this.__isDraggable()&&{draggable:!0}),a&&{contenteditable:'false'});(0,t.each)(r.attributes,(function(t){return e.push(t.nodeName)})),e.forEach((function(t){return i.removeAttr(t)})),this.updateStyle(),this.updateHighlight();var u=FS(FS({},c),o.getAttributes());(0,t.keys)(u).forEach((function(t){return!1===u[t]&&delete u[t]})),i.attr(u)},o.prototype.updateContent=function(){var t=this.model.content,e=this.model.components().length;this.getChildrenContainer().innerHTML=e?'':t},o.prototype.prevDef=function(t){t.preventDefault()},o.prototype.updateScript=function(){var t=this.model,e=this.em;t.get('script')&&(null==e||e.Canvas.getCanvasView().updateScript(this))},o.prototype.getChildrenContainer=function(){var t=this.el;return'function'==typeof this.getChildrenSelector?t=this.el.querySelector(this.getChildrenSelector()):this.getTemplate,t},o.prototype.getOffsetRect=function(){var t={top:0,left:0,bottom:0,right:0},e=this.el,n=0,o=0,i=function(r){var s=r.offsetParent;s?(n+=s.offsetTop,o+=s.offsetLeft,i(s)):(t.top=e.offsetTop+n,t.left=e.offsetLeft+o,t.bottom=t.top+e.offsetHeight,t.right=t.left+e.offsetWidth)};return i(e),t},o.prototype.isInViewport=function(){var t=this,e=t.el,n=t.em,o=t.frameView,i=n.Canvas.getCanvasView().getElBoxRect(e,{local:!0}),r=o.el,s=r.clientHeight,a=r.clientWidth,l=i.y,c=i.x,u=l+i.height,h=c+i.width;return(l>=0&&l<s||u>0&&u<s)&&(h>=0&&h<a||c>0&&c<=a)},o.prototype.scrollIntoView=function(t){var e;if(void 0===t&&(t={}),!this.isInViewport()||t.force){var n=this.el;if('smooth'!==t.behavior){var o=this.getOffsetRect();null===(e=n.ownerDocument.defaultView)||void 0===e||e.scrollTo(0,o.top)}else n.scrollIntoView(FS({behavior:'smooth',block:'nearest'},t))}},o.prototype.reset=function(){var t=this.el;this.el='',this._ensureElement(),this._setData(),(0,ue.dL)(t,this.el),this.render()},o.prototype._setData=function(){var t=this.model,e=t.components();this.$el.data({model:t,collection:e,view:this})},o.prototype._createElement=function(t){return this.createDoc.createElement(t)},o.prototype.renderChildren=function(){this.updateContent();var t=this.getChildrenContainer(),e=this.childrenView||new US({collection:this.model.get('components'),config:this.config,componentTypes:this.opts.componentTypes});e.render(t),this.childrenView=e;for(var n=Array.prototype.slice.call(e.el.childNodes),o=0,i=n.length;o<i;o++)t.appendChild(n.shift())},o.prototype.renderAttributes=function(){this.updateAttributes(),this.updateClasses()},o.prototype.onAttrUpdate=function(){},o.prototype.render=function(){return this.renderAttributes(),this.modelOpt.temporary||(this.renderChildren(),this.updateScript(),(0,e.setViewEl)(this.el,this),this.postRender()),this},o.prototype.postRender=function(){this.modelOpt.temporary||this.onRender(this._clbObj())},o.getEvents=function(){return(0,t.result)(this.prototype,'events')},o}(u.G7);const HS=GS;var KS=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const JS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return KS(e,t),e.prototype._setAttributes=function(){},e.prototype.renderAttributes=function(){},e.prototype.updateStatus=function(){},e.prototype.updateClasses=function(){},e.prototype.setAttribute=function(){},e.prototype.updateAttributes=function(){},e.prototype.initClasses=function(){},e.prototype.initComponents=function(){},e.prototype.delegateEvents=function(){return this},e.prototype._createElement=function(){return document.createTextNode('')},e.prototype.render=function(){var t=this.model,e=this.el;return t.opt.temporary||(e.textContent=t.content),this},e}(HS);var tk=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ek=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return tk(e,t),e.prototype._createElement=function(){return document.createComment(this.model.content)},e}(JS);var nk=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const ok=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return nk(e,t),e.prototype.tagName=function(){return'div'},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.listenTo(this.model,'change:attributes:src',this.updateSrc)},e.prototype.updateSrc=function(){var t=(0,ue.sE)(this.el,'iframe')[0];t&&(0,ue.FW)(t,{src:this.__getSrc()})},e.prototype.render=function(){t.prototype.render.call(this);var e=(0,ue.ut)('iframe',{class:"".concat(this.ppfx,"no-pointer"),style:'width: 100%; height: 100%; border: none',src:this.__getSrc()});return this.el.appendChild(e),this},e.prototype.__getSrc=function(){return this.model.getAttributes().src||''},e}(HS);var ik=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),rk=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return ik(n,e),n.prototype.tagName=function(){return'img'},n.prototype.events=function(){return{dblclick:'onActive',click:'initResize',error:'onError',load:'onLoad',dragstart:'noDrag'}},n.prototype.initialize=function(t){e.prototype.initialize.call(this,t),this.listenTo(this.model,'change:src',this.updateSrc),this.classEmpty="".concat(this.ppfx,"plh-image"),this.fetchFile()},n.prototype.fetchFile=function(){if(!this.modelOpt.temporary){var e=this.model,n=this.em,o=e.get('file');if(o&&n){var i=n.Assets.FileUploader();null==i||i.uploadFile({dataTransfer:{files:[o]}},(function(n){var o=n&&n.data&&n.data[0],i=o&&((0,t.isString)(o)?o:o.src);i&&e.set({src:i})})),e.set('file','')}}},n.prototype.updateSrc=function(){var t=this.model;t.addAttributes({src:t.getSrcResult()}),this.updateClasses()},n.prototype.updateClasses=function(){e.prototype.updateClasses.call(this);var t=this,n=t.el,o=t.classEmpty,i=t.model,r=i.getSrcResult()&&!i.isDefaultSrc()?'remove':'add';n.classList[r](o)},n.prototype.onActive=function(t){null==t||t.stopPropagation();var e=this.em,n=this.model,o=null==e?void 0:e.Assets;o&&n.get('editable')&&o.open({select:function(t,e){n.set({src:t.getSrc()}),e&&o.close()},target:n,types:['image'],accept:'image/*'})},n.prototype.onError=function(){var t=this.model.getSrcResult({fallback:!0});t&&(this.el.src=t)},n.prototype.onLoad=function(){this.em.trigger('change:canvasOffset')},n.prototype.noDrag=function(t){return t.preventDefault(),!1},n.prototype.render=function(){if(this.renderAttributes(),this.modelOpt.temporary)return this;this.updateSrc();var t=this.$el,e=this.model,n=t.attr('class')||'';return!e.get('src')&&t.attr('class',"".concat(n," ").concat(this.classEmpty).trim()),this.postRender(),this},n}(HS);const sk=rk;var ak=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),lk=void 0&&(void 0).__assign||function(){return lk=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},lk.apply(this,arguments)},ck=void 0&&(void 0).__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o["throw"](t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},uk=void 0&&(void 0).__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},hk=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return ak(o,n),o.prototype.events=function(){return{dblclick:'onActive',input:'onInput'}},o.prototype.initialize=function(e){n.prototype.initialize.call(this,e),(0,t.bindAll)(this,'disableEditing','onDisable');var o=this.model,i=this.em;this.listenTo(o,'focus',this.onActive),this.listenTo(o,'change:content',this.updateContentText),this.listenTo(o,'sync:content',this.syncContent),this.rte=null==i?void 0:i.RichTextEditor},o.prototype.updateContentText=function(t,e,n){void 0===n&&(n={}),!n.fromDisable&&this.disableEditing()},o.prototype.canActivate=function(){var t,e=this,n=e.model,o=e.rteEnabled,i=e.em,r=(null==i?void 0:i.getEditing())===n,s=!0,a=!1;if((o||!n.get('editable')||r||(a=n.isChildOf('text')))&&(s=!1,a&&!n.get('textable'))){for(var l=n.parent();l&&!l.isInstanceOf('text');)l=l.parent();l&&l.get('editable')?t=l:s=!0}return{result:s,delegate:t}},o.prototype.onActive=function(t){var e,n;return ck(this,void 0,void 0,(function(){var o,i,r,s,a,l,c,u,h;return uk(this,(function(p){switch(p.label){case 0:return i=(o=this).rte,r=o.em,s=this.canActivate(),a=s.result,l=s.delegate,a?(null===(n=null==t?void 0:t.stopPropagation)||void 0===n||n.call(t),c=this,[4,this.getContent()]):(l&&(null===(e=null==t?void 0:t.stopPropagation)||void 0===e||e.call(t),r.setSelected(l),l.trigger('active',t)),[2]);case 1:if(c.lastContent=p.sent(),!i)return[3,5];p.label=2;case 2:return p.trys.push([2,4,,5]),u=this,[4,i.enable(this,this.activeRte,{event:t})];case 3:return u.activeRte=p.sent(),[3,5];case 4:return h=p.sent(),r.logError(h),[3,5];case 5:return this.toggleEvents(!0),[2]}}))}))},o.prototype.onDisable=function(t){this.disableEditing(t)},o.prototype.disableEditing=function(t){return void 0===t&&(t={}),ck(this,void 0,void 0,(function(){var e,n,o,i,r,s,a,l;return uk(this,(function(c){switch(c.label){case 0:if(n=(e=this).model,o=e.rte,i=e.activeRte,r=e.em,s=n&&n.get('editable'),!o)return[3,8];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,o.disable(this,i,t)];case 2:return c.sent(),[3,4];case 3:return a=c.sent(),r.logError(a),[3,4];case 4:return(l=s)?[4,this.getContent()]:[3,6];case 5:l=c.sent()!==this.lastContent,c.label=6;case 6:return l?[4,this.syncContent(t)]:[3,8];case 7:c.sent(),this.lastContent='',c.label=8;case 8:return this.toggleEvents(),[2]}}))}))},o.prototype.getContent=function(){return ck(this,void 0,void 0,(function(){var t,e,n,o;return uk(this,(function(i){switch(i.label){case 0:return e=(t=this).rte,n=t.activeRte,o='',e?[4,e.getContent(this,n)]:[3,2];case 1:o=i.sent(),i.label=2;case 2:return[2,o]}}))}))},o.prototype.syncContent=function(t){return void 0===t&&(t={}),ck(this,void 0,void 0,(function(){var e,n,o,i,r,s;return uk(this,(function(a){switch(a.label){case 0:return n=(e=this).model,o=e.rte,e.rteEnabled||t.force?[4,this.getContent()]:[2];case 1:return i=a.sent(),r=n.components(),s=lk({fromDisable:1},t),n.set('content','',s),(null==o?void 0:o.customRte)&&!o.customRte.parseContent?(r.length&&r.reset(void 0,lk(lk({},t),{keepIds:Fn(r)})),n.set('content',i,s)):r.resetFromString(i,t),[2]}}))}))},o.prototype.insertComponent=function(t,n){var o;void 0===n&&(n={});var i=this.model,r=this.el.ownerDocument.getSelection();if(null==r?void 0:r.rangeCount){var s=r.getRangeAt(0),a=s.startContainer,l=s.startOffset,c=(0,e.getComponentModel)(a),u=[];if(c&&(null===(o=c.is)||void 0===o?void 0:o.call(c,'textnode'))){var h=c.collection;h.forEach((function(e){if(e===c){var n='textnode',o=e.content;u.push({type:n,content:o.slice(0,l)}),u.push(t),u.push({type:n,content:o.slice(l)})}else u.push(e)}));var p=u.filter(Boolean),d=p.indexOf(t);return h.reset(p,n),h.at(d)}}return i.append(t,n)},o.prototype.onInput=function(){var t=this.em,e='component',n=["".concat(e,":update"),"".concat(e,":input")].join(' ');t&&t.trigger(n,this.model)},o.prototype.disablePropagation=function(t){t.stopPropagation()},o.prototype.toggleEvents=function(t){var e=this,n=e.em,o=e.model,i=e.$el,r={on:ue.on,off:ue.S1},s=t?'on':'off';n.setEditing(!!t&&this),this.rteEnabled=!!t;var a=[this.el.ownerDocument,document];if(r.off(a,'mousedown',this.onDisable),r[s](a,'mousedown',this.onDisable),n[s]('toolbar:run:before',this.onDisable),o&&(o[s]('removed',this.onDisable),o.trigger("rte:".concat(t?'enable':'disable'))),null==i||i.off('mousedown',this.disablePropagation),i&&i[s]('mousedown',this.disablePropagation),this.config.draggableComponents)for(var l=this.el;l;)l.draggable=!t,(l=l.parentNode)&&'BODY'==l.tagName&&(l=0)},o}(HS);const pk=hk;var dk=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const fk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return dk(e,t),e.prototype.render=function(){return t.prototype.render.call(this),this.el.addEventListener('click',this.prevDef,!0),this},e}(pk);var gk=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const mk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gk(e,t),e}(fk);var vk=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const yk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return vk(e,t),e.prototype.tagName=function(){return'div'},e.prototype.events=function(){return{}},e.prototype.initialize=function(e){t.prototype.initialize.call(this,e),this.classEmpty=this.ppfx+'plh-map'},e.prototype.updateSrc=function(){this.getIframe().src=this.model.get('src')},e.prototype.getIframe=function(){if(!this.iframe){var t=document.createElement('iframe');t.src=this.model.get('src'),t.frameBorder='0',t.style.height='100%',t.style.width='100%',t.className=this.ppfx+'no-pointer',this.iframe=t}return this.iframe},e.prototype.render=function(){return t.prototype.render.call(this),this.updateClasses(),this.el.appendChild(this.getIframe()),this},e}(sk);var _k=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ok=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _k(e,t),e.prototype.tagName=function(){return'script'},e.prototype.events=function(){return{}},e.prototype.render=function(){var t=this.model,e=this.em,n=t.get('src'),o=e&&e.get('scriptCount'),i=o||0,r='';if(n){var s=t.get('onload'),a="script".concat(i),l="script".concat(i+1),c="".concat(a,"Start"),u="".concat(l,"Start");r="\n        var ".concat(a," = document.createElement('script');\n        ").concat(a,".onload = function() {\n          ").concat(s?"".concat(s,"();\n"):'',"\n          typeof ").concat(u," == 'function' && ").concat(u,"();\n        };\n        ").concat(a,".src = '").concat(n,"';\n        function ").concat(c,"() { document.body.appendChild(").concat(a,"); };\n        ").concat(i?'':"".concat(c,"();"),"\n      "),e&&e.set('scriptCount',i+1)}else r=t.__innerHTML();return this.el.innerHTML=r,this.postRender(),this},e}(sk);const bk=Ok;var wk=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return wk(e,t),e.prototype._createElement=function(t){return document.createElementNS('http://www.w3.org/2000/svg',t)},e}(HS);const Sk=xk;var kk=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Pk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return kk(e,t),e}(HS);var Ck=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Tk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ck(e,t),e}(HS);var Ek=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Qk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ek(e,t),e}(HS);var Ak=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const $k=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ak(e,t),e}(HS);var jk=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Rk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return jk(e,t),e}(HS),Zk=HS.extend({events:{}});var Mk=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Vk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Mk(e,t),e.prototype.tagName=function(){return'div'},e.prototype.events=function(){return{}},e.prototype.initialize=function(){HS.prototype.initialize.apply(this,arguments);var t=this.model,e=['loop','autoplay','controls','color','rel','modestbranding','poster'].map((function(t){return"change:".concat(t)})).join(' ');this.listenTo(t,'change:provider',this.updateProvider),this.listenTo(t,'change:src',this.updateSrc),this.listenTo(t,e,this.updateVideo)},e.prototype.updateProvider=function(){var t=this.model.get('provider');this.el.innerHTML='',this.el.appendChild(this.renderByProvider(t))},e.prototype.updateSrc=function(){var t=this.model,e=this.videoEl;if(e){var n=t.get('provider'),o=t.get('src');switch(n){case'yt':o=t.getYoutubeSrc();break;case'ytnc':o=t.getYoutubeNoCookieSrc();break;case'vi':o=t.getVimeoSrc()}e.src=o}},e.prototype.updateVideo=function(){var t=this.model,e=this.videoEl;switch(t.get('provider')){case'yt':case'ytnc':case'vi':t.trigger('change:videoId');break;default:if(e){var n=e;n.loop=t.get('loop'),n.autoplay=t.get('autoplay'),n.controls=t.get('controls'),n.poster=t.get('poster')}}},e.prototype.renderByProvider=function(t){var e;switch(t){case'yt':e=this.renderYoutube();break;case'ytnc':e=this.renderYoutubeNoCookie();break;case'vi':e=this.renderVimeo();break;default:e=this.renderSource()}return this.videoEl=e,e},e.prototype.renderSource=function(){var t=document.createElement('video');return t.src=this.model.get('src'),this.initVideoEl(t),t},e.prototype.renderYoutube=function(){var t=document.createElement('iframe');return t.src=this.model.getYoutubeSrc(),t.frameBorder='0',t.setAttribute('allowfullscreen','true'),this.initVideoEl(t),t},e.prototype.renderYoutubeNoCookie=function(){var t=document.createElement('iframe');return t.src=this.model.getYoutubeNoCookieSrc(),t.frameBorder='0',t.setAttribute('allowfullscreen','true'),this.initVideoEl(t),t},e.prototype.renderVimeo=function(){var t=document.createElement('iframe');return t.src=this.model.getVimeoSrc(),t.frameBorder='0',t.setAttribute('allowfullscreen','true'),this.initVideoEl(t),t},e.prototype.initVideoEl=function(t){t.className=this.ppfx+'no-pointer',t.style.height='100%',t.style.width='100%'},e.prototype.render=function(){HS.prototype.render.apply(this),this.updateClasses();var t=this.model.get('provider');return this.el.appendChild(this.renderByProvider(t)),this.updateVideo(),this},e}(sk);const Dk=Vk;var Ik=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const Nk=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Ik(e,t),e.prototype.tagName=function(){return'div'},e}(HS);var Wk,Xk=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lk=void 0&&(void 0).__assign||function(){return Lk=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Lk.apply(this,arguments)},Yk=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n};!function(t){t[t["InvalidSource"]=0]="InvalidSource",t[t["SourceReject"]=1]="SourceReject",t[t["TargetReject"]=2]="TargetReject"}(Wk||(Wk={}));var zk=function(n){function o(t){var e=n.call(this,t,'DomComponents',new Kn(void 0,{em:t}))||this;for(var o in e.componentTypes=[{id:'cell',model:yS,view:Tk},{id:'row',model:QS,view:Rk},{id:'table',model:hS,view:Zk},{id:'thead',model:PS,view:$k},{id:'tbody',model:gS,view:Pk},{id:'tfoot',model:wS,view:Qk},{id:'map',model:Gx,view:yk},{id:'link',model:qx,view:fk},{id:'label',model:Wx,view:mk},{id:'video',model:NS,view:Dk},{id:'image',model:Rx,view:sk},{id:'script',model:tS,view:bk},{id:'svg-in',model:aS,view:Sk},{id:'svg',model:iS,view:Sk},{id:'iframe',model:Ex,view:ok},{id:'comment',model:kx,view:ek},{id:'textnode',model:bx,view:JS},{id:'text',model:Vx,view:pk},{id:'wrapper',model:YS,view:Nk},{id:'default',model:vx,view:HS}],e.componentsById={},e.Component=vx,e.Components=Kn,e.ComponentView=HS,e.ComponentsView=US,e.storageKey='components',t&&(e.config.components=t.config.components||e.config.components),$n)o in e.config||(e.config[o]=$n[o]);var i=e.config.pStylePrefix;if(i&&(e.config.stylePrefix=i+e.config.stylePrefix),t){t.get('Parser').compTypes=e.componentTypes,t.on('change:componentHovered',e.componentHovered,e);var r=t.get('selected');t.listenTo(r,'add',(function(t,n,o){return e.selectAdd(r.getComponent(t),o)})),t.listenTo(r,'remove',(function(t,n,o){return e.selectRemove(r.getComponent(t),o)}))}return e}return Xk(o,n),o.prototype.load=function(e){var n=this;return this.loadProjectData(e,{onResult:function(e){var o=n.getWrapper();if(o||(n.em.Pages.add({},{select:!0}),o=n.getWrapper()),(0,t.isArray)(e))e.length&&o.components(e);else{var i=e.components,r=void 0===i?[]:i,s=Yk(e,["components"]);o.set(s),o.components(r)}}})},o.prototype.store=function(){return{}},o.prototype.getComponent=function(){var t=this.em.Pages.getSelected(),e=null==t?void 0:t.getMainFrame();return null==e?void 0:e.getComponent()},o.prototype.getWrapper=function(){return this.getComponent()},o.prototype.getComponents=function(){var t=this.getWrapper();return null==t?void 0:t.components()},o.prototype.addComponent=function(t,e){return void 0===e&&(e={}),this.getComponents().add(t,e)},o.prototype.render=function(){var t;return null===(t=this.componentView)||void 0===t?void 0:t.render().el},o.prototype.clear=function(t){void 0===t&&(t={});var e=this.getComponents();return null==e||e.filter(Boolean).forEach((function(e){return e.remove(t)})),this},o.prototype.setComponents=function(t,e){void 0===e&&(e={}),this.clear(e).addComponent(t,e)},o.prototype.addType=function(e,n){var o=this.em,i=n.model,r=void 0===i?{}:i,s=n.view,a=void 0===s?{}:s,l=n.isComponent,c=n.extend,u=n.extendView,h=n.extendFn,p=void 0===h?[]:h,d=n.extendFnView,f=void 0===d?[]:d,g=this.getType(e),m=this.getType(c),v=this.getType(u),y=m||(g||this.getType('default')),_=y.model,O=v?v.view:y.view,b=function(t,e,n){return t.reduce((function(t,o){var i=e[o],r=n.prototype[o];return i&&r&&(t[o]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r.bind(this).apply(void 0,t),i.bind(this).apply(void 0,t)}),t}),{})};if('object'==typeof r){var w={defaults:r.defaults};delete r.defaults,n.model=_.extend(Lk(Lk({},r),b(p,r,_)),{isComponent:!g||m||l?l||function(){return 0}:_.isComponent}),Object.defineProperty(n.model.prototype,'defaults',{get:function(){return Lk(Lk({},(0,t.result)(_.prototype,'defaults')||{}),(0,t.result)(w,'defaults')||{})}})}'object'==typeof a&&(n.view=O.extend(Lk(Lk({},a),b(f,a,O)))),g?(g.model=n.model,g.view=n.view):(n.id=e,this.componentTypes.unshift(n));var x="component:type:".concat(g?'update':'add');return null==o||o.trigger(x,g||n),this},o.prototype.getType=function(t){for(var e=this.componentTypes,n=0;n<e.length;n++){if(e[n].id==t)return e[n]}},o.prototype.removeType=function(t){var e=this.componentTypes,n=this.getType(t);if(n){var o=e.indexOf(n);return e.splice(o,1),n}},o.prototype.getTypes=function(){return this.componentTypes},o.prototype.selectAdd=function(t,e){var n=this;void 0===e&&(e={}),t&&(t.set({status:'selected'}),['component:selected','component:toggled'].forEach((function(o){return n.em.trigger(o,t,e)})))},o.prototype.selectRemove=function(t,e){var n=this;if(void 0===e&&(e={}),t){this.em;t.set({status:'',state:''}),['component:deselected','component:toggled'].forEach((function(o){return n.em.trigger(o,t,e)}))}},o.prototype.componentHovered=function(){var e=this.em,n=e.get('componentHovered'),o=e.previous('componentHovered'),i='hovered';o&&o.get('status')==i&&o.set({status:'',state:''}),n&&(0,t.isEmpty)(n.get('status'))&&n.set('status',i)},o.prototype.getShallowWrapper=function(){var e=this.shallow,n=this.em;if(!e&&n){var o=n.shallow;if(!o)return;var i=o.Components;if(i.componentTypes=this.componentTypes,e=i.getWrapper()){var r=[dx,fx].join(' ');e.on(r,(0,t.debounce)((function(){return null==e?void 0:e.components('')}),100))}this.shallow=e}return e},o.prototype.isComponent=function(t){return(0,e.isComponent)(t)},o.prototype.canMove=function(n,o,i){var r={result:!1,reason:Wk.InvalidSource,target:n,source:null};if(!o||!n)return r;var s=(0,e.isComponent)(o)?o:null;if(!s){var a=this.getShallowWrapper();s=(null==a?void 0:a.append(o)[0])||null}if(r.source=s,!s)return r;var l=s.get('draggable');if((0,t.isFunction)(l))l=!!l(s,n,i);else{var c=n.getEl();l=(0,t.isArray)(l)?l.join(','):l,l=(0,t.isString)(l)?null==c?void 0:c.matches(l):l}if(!l)return Lk(Lk({},r),{reason:Wk.SourceReject});var u=n.get('droppable');if((0,t.isFunction)(u))u=!!u(s,n,i);else if(!1===u&&n.isInstanceOf('text')&&s.get('textable'))u=!0;else{c=s.getEl();u=(0,t.isArray)(u)?u.join(','):u,u=(0,t.isString)(u)?null==c?void 0:c.matches(u):u}var h=[n].concat(n.parents()).indexOf(s)>-1;return Lk(Lk({},r),!u||h?{reason:Wk.TargetReject}:{result:!0})},o.prototype.allById=function(){return this.componentsById},o.prototype.getById=function(t){return this.componentsById[t]||null},o.prototype.destroy=function(){var t,e=this.allById();Object.keys(e).forEach((function(t){return e[t]&&e[t].remove()})),null===(t=this.componentView)||void 0===t||t.remove(),[this.em,this.componentsById,this.componentView].forEach((function(t){return{}}))},o}(O);const qk=zk;const Uk={stylePrefix:'css-',rules:[]};var Bk=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fk=Number.MAX_VALUE,Gk=function(n){function o(){var e=n.call(this)||this;return(0,t.bindAll)(e,'sortRules'),e.compCls=[],e.ids=[],e}return Bk(o,n),o.prototype.buildFromModel=function(t,e){var n=this;void 0===e&&(e={});var o='',i=this.em,r=i&&i.getConfig().avoidInlineStyle,s=t.styleToString(),a=t.classes;return this.ids.push("#".concat(t.getId())),a.forEach((function(t){return n.compCls.push(t.getFullName())})),!r&&s&&(o="#".concat(t.getId(),"{").concat(s,"}")),t.components().forEach((function(t){return o+=n.buildFromModel(t,e)})),o},o.prototype.build=function(n,o){var i=this;void 0===o&&(o={});var r=o.json,s=o.em,a=o.cssc||(null==s?void 0:s.Css);this.em=s,this.compCls=[],this.ids=[],this.model=n;var l=[],c=n?this.buildFromModel(n,o):'',u=(0,t.isUndefined)(o.clearStyles)&&s?s.getConfig().clearStyles:o.clearStyles;if(a){var h=o.rules||a.getAll(),p={},d=[];o.onlyMatched&&n&&(0,e.hasWin)()&&(h=this.matchedRules(n,h)),h.forEach((function(t){var e=t.getAtRule();if(e){var n=p[e];n?n.push(t):p[e]=[t]}else{var s=i.buildFromRule(t,d,o);r?l.push(s):c+=s}})),this.sortMediaObject(p).forEach((function(t){var e='',n=t.key;t.value.forEach((function(t){var s=i.buildFromRule(t,d,o);t.get('singleAtRule')?c+="".concat(n,"{").concat(s,"}"):e+=s,r&&l.push(s)})),e&&(c+="".concat(n,"{").concat(e,"}"))})),s&&u&&h.remove&&h.remove(d)}return r?l.filter((function(t){return t})):c},o.prototype.buildFromRule=function(t,e,n){var o,i=this;void 0===n&&(n={});var r,s='',a=this.model,l=t.selectorsToString({skipAdd:1}),c=t.get('selectorsAdd'),u=t.get('singleAtRule');if(null===(o=t.get('selectors'))||void 0===o||o.forEach((function(t){var e=t.getFullName();(i.compCls.indexOf(e)>=0||i.ids.indexOf(e)>=0||n.keepUnusedStyles)&&(r=1)})),l&&r||c||u||!a){var h=t.getDeclaration({body:1});h&&(n.json?s=t:s+=h)}else e.push(t);return s},o.prototype.matchedRules=function(t,e){var n=this,o=t.getEl(),i=[];return e.forEach((function(t){try{t.selectorsToString().split(',').some((function(t){return null==o?void 0:o.matches(n.__cleanSelector(t))}))&&i.push(t)}catch(t){}})),t.components().forEach((function(t){i=i.concat(n.matchedRules(t,e))})),i=i.filter((function(t,e){return i.indexOf(t)===e})),i},o.prototype.getQueryLength=function(t){var e=/(-?\d*\.?\d+)\w{0,}/.exec(t);return e?parseFloat(e[1]):Fk},o.prototype.sortMediaObject=function(e){var n=this;void 0===e&&(e={});var o=[];return(0,t.each)(e,(function(t,e){return o.push({key:e,value:t})})),o.sort((function(t,e){var o=[t.key,e.key].every((function(t){return-1!==t.indexOf('min-width')})),i=o?t.key:e.key,r=o?e.key:t.key;return n.getQueryLength(i)-n.getQueryLength(r)}))},o.prototype.sortRules=function(t,e){var n=function(t){return t.get('mediaText')||''},o=[n(t),n(e)].every((function(t){return-1!==t.indexOf('min-width')})),i=n(o?t:e),r=n(o?e:t);return this.getQueryLength(i)-this.getQueryLength(r)},o.prototype.__cleanSelector=function(t){return t.split(' ').map((function(t){return t.split(':')[0]})).join(' ')},o}(u.Hn);const Hk=Gk;var Kk=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Jk=void 0&&(void 0).__assign||function(){return Jk=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Jk.apply(this,arguments)},tP=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},eP=((0,e.hasWin)()?window:{}).CSS,nP=function(n){function o(t,e){void 0===e&&(e={});var o=n.call(this,t)||this;return o.config=t||{},o.opt=e,o.em=e.em,o.ensureSelectors(null,null,{}),o.on('change',o.__onChange),o}return Kk(o,n),o.prototype.defaults=function(){return{selectors:[],selectorsAdd:'',style:{},mediaText:'',state:'',stylable:!0,atRuleType:'',singleAtRule:!1,important:!1,group:'',shallow:!1,_undo:!0}},o.prototype.__onChange=function(t,n){var o=this.em,i=this.changedAttributes();i&&!(0,e.isEmptyObj)(i)&&(null==o||o.changesUp(n))},o.prototype.clone=function(){var t=Jk({},this.opt),e=Jk({},this.attributes);return e.selectors=this.get('selectors').map((function(t){return t.clone()})),new this.constructor(e,t)},o.prototype.ensureSelectors=function(e,n,o){var i=this.em,r=null==i?void 0:i.get('SelectorManager'),s=[this,'change:selectors',this.ensureSelectors],a=this.getSelectors();if(this.stopListening.apply(this,s),a.models&&(a=tP([],a.models,!0)),a=(0,t.isString)(a)?[a]:a,Array.isArray(a)){var l=a.filter((function(t){return t})).map((function(t){return r?r.add(t):t}));a=new ao(l)}this.set('selectors',a,o),this.listenTo.apply(this,s)},o.prototype.getAtRule=function(){var t=this.get('atRuleType'),e=this.get('mediaText'),n=t?"@".concat(t):e?'@media':'';return n+(e&&n?" ".concat(e):'')},o.prototype.selectorsToString=function(t){void 0===t&&(t={});var e=[],n=this.get('state'),o=this.get('selectorsAdd'),i={escape:function(t){return eP&&eP.escape?eP.escape(t):t}},r=this.get('selectors').getFullString(0,i),s=n&&!t.skipState?":".concat(n):'';return r&&e.push("".concat(r).concat(s)),o&&!t.skipAdd&&e.push(o),e.join(', ')},o.prototype.getDeclaration=function(t){void 0===t&&(t={});var e='',n=this.attributes.important,o=this.selectorsToString(t),i=this.styleToString(Jk({important:n},t)),r=this.get('singleAtRule');return(o||r)&&(i||t.allowEmpty)&&(e=r?i:"".concat(o,"{").concat(i,"}")),e},o.prototype.getDevice=function(){var t=this.em,e=this.attributes,n=e.atRuleType,o=e.mediaText,i=(null==t?void 0:t.get('DeviceManager').getDevices())||[],r=i.filter((function(t){return''===t.getWidthMedia()}))[0];return'media'===n&&o?i.filter((function(t){return t.getWidthMedia()===((e=/(-?\d*\.?\d+)\w{0,}/.exec(o))?e[0]:'');var e}))[0]||null:r||null},o.prototype.getState=function(){var t=this.em,e=this.get('state');return((null==t?void 0:t.get('SelectorManager').getStates())||[]).filter((function(t){return t.getName()===e}))[0]||null},o.prototype.getComponent=function(){var t,e=this.getSelectors(),n=1==e.length&&e.at(0),o=n&&n.isId()&&n.get('name');return o&&(null===(t=this.em)||void 0===t?void 0:t.Components.getById(o))||null},o.prototype.toCSS=function(t){void 0===t&&(t={});var e='',n=this.getAtRule(),o=this.getDeclaration(t);return(o||t.allowEmpty)&&(e=o),n&&e&&(e="".concat(n,"{").concat(e,"}")),e},o.prototype.toJSON=function(){for(var e,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=u.Hn.prototype.toJSON.apply(this,n);if(null===(e=this.em)||void 0===e?void 0:e.getConfig().avoidDefaults){var r=this.defaults();(0,t.forEach)(r,(function(t,e){i[e]===t&&delete i[e]})),delete i.style.__p,(0,t.isEmpty)(i.selectors)&&delete i.selectors,(0,t.isEmpty)(i.style)&&delete i.style}return i},o.prototype.compare=function(e,n,o,i){var r;void 0===i&&(i={});var s=n||'',a=o||'',l=i.selectorsAdd||'',c=i.atRuleType||'';a&&!c&&(c='media');var u=((0,t.isArray)(e)||e.models?e.models||e:[e]).map((function(t){return t.getFullName()})),h=null===(r=this.get('selectors'))||void 0===r?void 0:r.map((function(t){return t.getFullName()})),p=u.slice().sort(),d=h.slice().sort();return!(u.length!==h.length||!p.every((function(t,e){return t===d[e]})))&&(this.get('state')===s&&this.get('mediaText')===a&&this.get('selectorsAdd')===l&&this.get('atRuleType')===c)},o}(Yn);const oP=nP;var iP=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),rP=function(t){function e(e,n){var o=t.call(this,e)||this;return o.editor=null==n?void 0:n.em,setTimeout((function(){o.on('remove',o.onRemove),o.on('add',o.onAdd)})),o}return iP(e,t),e.prototype.toJSON=function(t){return u.FE.prototype.toJSON.call(this,t).filter((function(t){return t.style&&!t.shallow}))},e.prototype.onAdd=function(t,e,n){t.ensureSelectors(t,e,n)},e.prototype.onRemove=function(t){var e=this.editor;e.stopListening(t),e.UndoManager.remove(t)},e.prototype.add=function(t,e){return void 0===e&&(e={}),'string'==typeof t&&(t=this.editor.get('Parser').parseCss(t)),e.em=this.editor,u.FE.prototype.add.apply(this,[t,e])},e}(u.FE);const sP=rP;rP.prototype.model=oP;var aP=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),lP=void 0&&(void 0).__assign||function(){return lP=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},lP.apply(this,arguments)},cP=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},uP=function(n){function o(t){var e=n.call(this,t,'CssComposer',null,{},Uk)||this;e.Selectors=ao,e.storageKey='styles';var o=e.config,i=o.pStylePrefix;return i&&(o.stylePrefix=i+o.stylePrefix),o.rules=e.em.config.style||o.rules||'',e.rules=new sP([],o),e}return aP(o,n),o.prototype.onLoad=function(){this.rules.add(this.config.rules,{silent:!0})},o.prototype.postLoad=function(){var t,e=null===(t=this.em)||void 0===t?void 0:t.get('UndoManager');e&&e.add(this.getAll())},o.prototype.store=function(){return this.getProjectData()},o.prototype.load=function(t){return this.loadProjectData(t,{all:this.rules})},o.prototype.add=function(t,e,n,o,i){void 0===o&&(o={}),void 0===i&&(i={});var r=e||'',s=n||'',a=lP({},o),l=this.get(t,r,s,a);return l&&l.config&&!l.config.singleAtRule||(a.state=r,a.mediaText=s,a.selectors=[],s&&!a.atRuleType&&(a.atRuleType='media'),(l=new oP(a,this.config)).get('selectors').add(t,i),this.rules.add(l,i)),l},o.prototype.get=function(e,n,o,i){var r=e;if((0,t.isString)(e)){var s=this.em.Selectors,a=e.split(',')[0].trim(),l=this.em.Parser.parserCss.checkNode({selectors:a})[0];r=s.get(l.selectors)}return this.rules.find((function(t){return t.compare(r,n,o,i)}))||null},o.prototype.getAll=function(){return this.rules},o.prototype.addCollection=function(n,o,i){void 0===o&&(o={}),void 0===i&&(i={});var r=this.em,s=[];(0,t.isString)(n)&&(n=r.Parser.parseCss(n));for(var a=n instanceof Array?n:[n],l=0,c=a.length;l<c;l++){var u=a[l]||{};if(u.selectors){var h=null==r?void 0:r.Selectors;h||console.warn('Selector Manager not found');for(var p=u.selectors,d=p instanceof Array?p:[p],f=[],g=0,m=d.length;g<m;g++){var v=h.add(d[g]);f.push(v)}var y=this.get(f,u.state,u.mediaText,u),_=this.add(f,u.state,u.mediaText,u,o),O=!y||!o.avoidUpdateStyle,b=u.style||{};if((0,e.isObject)(i)&&_.set(i,o),O){var w=o.extend?lP(lP({},_.get('style')),b):b;_.set('style',w,o)}s.push(_)}}return s},o.prototype.addRules=function(t){return this.addCollection(t)},o.prototype.setRule=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var o=n.atRuleType,i=n.atRuleParams,r=this.em.Parser.parserCss.checkNode({selectors:t,style:e})[0],s=r.state,a=r.selectorsAdd,l=this.em.Selectors.add(r.selectors),c=this.add(l,s,i,{selectorsAdd:a,atRule:o});return n.addStyles?c.addStyle(e,n):c.setStyle(e,n),c},o.prototype.getRule=function(t,e){void 0===e&&(e={});var n=this.em,o=n.Selectors,i=n.Parser.parserCss.checkNode({selectors:t})[0],r=o.get(i.selectors),s=i.state,a=i.selectorsAdd,l=e.atRuleType,c=e.atRuleParams;return r?this.get(r,s,c,{selectorsAdd:a,atRuleType:l}):void 0},o.prototype.getRules=function(e){var n=this.getAll();if(!e)return cP([],n.models,!0);var o={sort:!0},i=(0,t.isString)(e)?e.split(',').map((function(t){return t.trim()})):e;return n.filter((function(t){return i.indexOf(t.getSelectors().getFullString(null,o))>=0}))},o.prototype.setIdRule=function(e,n,o){void 0===n&&(n={}),void 0===o&&(o={});var i=o.addOpts,r=void 0===i?{}:i,s=o.mediaText,a=o.state||'',l=(0,t.isUndefined)(s)?this.em.getCurrentMedia():s,c=this.em.Selectors.add({name:e,type:oo.TYPE_ID},r),u=this.add(c,a,l,{},r);return u.setStyle(n,lP(lP({},o),r)),u},o.prototype.getIdRule=function(e,n){void 0===n&&(n={});var o=n.mediaText,i=n.state||'',r=(0,t.isUndefined)(o)?this.em.getCurrentMedia():o,s=this.em.Selectors.get(e,oo.TYPE_ID);return s&&this.get(s,i,r)},o.prototype.setClassRule=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var o=n.state||'',i=n.mediaText||this.em.getCurrentMedia(),r=this.em.Selectors.add({name:t,type:oo.TYPE_CLASS}),s=this.add(r,o,i);return s.setStyle(e,n),s},o.prototype.getClassRule=function(t,e){void 0===e&&(e={});var n=e.state||'',o=e.mediaText||this.em.getCurrentMedia(),i=this.em.Selectors.get(t,oo.TYPE_CLASS);return i&&this.get(i,n,o)},o.prototype.remove=function(e,n){var o=(0,t.isString)(e)?this.getRules(e):e,i=this.getAll().remove(o,n);return(0,t.isArray)(i)?i:[i]},o.prototype.clear=function(t){return void 0===t&&(t={}),this.getAll().reset([],t),this},o.prototype.getComponentRules=function(e,n){void 0===n&&(n={});var o=n.state,i=n.mediaText;n.current&&(o=this.em.get('state')||'',i=this.em.getCurrentMedia());var r=e.getId();return this.getAll().filter((function(e){return!(!(0,t.isUndefined)(o)&&e.get('state')!==o)&&(!(!(0,t.isUndefined)(i)&&e.get('mediaText')!==i)&&e.getSelectorsString()==="#".concat(r))}))},o.prototype.render=function(){var t;return null===(t=this.rulesView)||void 0===t||t.remove(),this.rulesView=new sn({collection:this.rules,config:this.config}),this.rulesView.render().el},o.prototype.checkId=function(e,n){void 0===n&&(n={});var o=n.idMap,i=void 0===o?{}:o,r=[];return Object.keys(i).length?((Array.isArray(e)?e:[e]).forEach((function(e){var n=e.selectors;if(n&&1==n.length){var o=n[0];if((0,t.isString)(o)){if('#'===o[0]){var s=o.substring(1),a=i[s];s&&a&&(n[0]="#".concat(a),r.push(e))}}else if(o.name&&o.type===oo.TYPE_ID){(a=i[o.name])&&(o.name=a,r.push(e))}}})),r):r},o.prototype.destroy=function(){var t;this.rules.reset(),this.rules.stopListening(),null===(t=this.rulesView)||void 0===t||t.remove()},o}(O);const hP=uP;const pP={appendTo:'',blocks:[],appendOnClick:!1,custom:!1};var dP=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const fP=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return dP(n,e),n.prototype.defaults=function(){return{label:'',content:'',media:'',category:'',activate:!1,select:void 0,resetId:!1,disable:!1,onClick:void 0,attributes:{}}},n.prototype.getId=function(){return this.id},n.prototype.getLabel=function(){return this.get('label')},n.prototype.getMedia=function(){return this.get('media')},n.prototype.getContent=function(){return this.get('content')},n.prototype.getCategoryLabel=function(){var e=this.get('category');return(0,t.isFunction)(null==e?void 0:e.get)?e.get('label'):(null==e?void 0:e.label)?null==e?void 0:e.label:e},n}(u.Hn);var gP=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return gP(e,t),e}(u.FE);const vP=mP;mP.prototype.model=fP;var yP=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const _P=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return yP(e,t),e.prototype.defaults=function(){return{id:'',label:'',open:!0,attributes:{}}},e}(u.Hn);var OP=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bP=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return OP(o,n),o.prototype.add=function(o,i){return((0,t.isArray)(o)?o:[o]).forEach((function(t){return t&&(t.id=(0,e.normalizeKey)("".concat(t.id)))})),n.prototype.add.call(this,o,i)},o.prototype.get=function(o){return n.prototype.get.call(this,(0,t.isString)(o)?(0,e.normalizeKey)(o):o)},o}(u.FE);const wP=bP;var xP;bP.prototype.model=_P,function(t){t["add"]="block:add",t["remove"]="block:remove",t["removeBefore"]="block:remove:before",t["update"]="block:update",t["dragStart"]="block:drag:start",t["drag"]="block:drag",t["dragEnd"]="block:drag:stop",t["custom"]="block:custom",t["all"]="block"}(xP||(xP={}));var SP=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),kP=function(n){function o(t,e){void 0===e&&(e={});var o=n.call(this,t)||this,i=o.model;return o.em=e.em,o.config=e,o.endDrag=o.endDrag.bind(o),o.ppfx=e.pStylePrefix||'',o.listenTo(i,'destroy remove',o.remove),o.listenTo(i,'change',o.render),o}return SP(o,n),o.prototype.events=function(){return{click:'handleClick',mousedown:'startDrag',dragstart:'handleDragStart',drag:'handleDrag',dragend:'handleDragEnd'}},o.prototype.__getModule=function(){return this.em.Blocks},o.prototype.handleClick=function(e){var n=this,o=n.config,i=n.model,r=n.em,s=i.get('onClick')||o.appendOnClick;if(r.trigger('block:click',i,e),s){if((0,t.isFunction)(s))return s(i,null==r?void 0:r.getEditor(),{event:e});var a,l,c=o.getSorter(),u=i.get('content'),h=r.getSelected();if(c.setDropContent(u),h)if(c.validTarget(h.getEl(),u).valid)a=h;else{var p=h.parent();p&&c.validTarget(p.getEl(),u).valid&&(a=p,l=p.components().indexOf(h)+1)}if(!a){var d=r.getWrapper();c.validTarget(d.getEl(),u).valid&&(a=d)}var f=a&&a.append(u,{at:l})[0];f&&r.setSelected(f,{scroll:1})}},o.prototype.startDrag=function(t){var e=this,n=e.config,o=e.em,i=e.model,r=i.get('disable');if(0===t.button&&n.getSorter&&!this.el.draggable&&!r){o.refreshCanvas();var s=n.getSorter();s.__currentBlock=i,s.setDragHelper(this.el,t),s.setDropContent(this.model.get('content')),s.startSort(this.el),(0,ue.on)(document,'mouseup',this.endDrag)}},o.prototype.handleDragStart=function(t){this.__getModule().__startDrag(this.model,t)},o.prototype.handleDrag=function(t){this.__getModule().__drag(t)},o.prototype.handleDragEnd=function(){this.__getModule().__endDrag()},o.prototype.endDrag=function(){(0,ue.S1)(document,'mouseup',this.endDrag);var t=this.config.getSorter();t.moved=0,t.endMove()},o.prototype.render=function(){var t,n=this,o=n.em,i=n.el,r=n.$el,s=n.ppfx,a=n.model,l=a.get('disable'),c=a.get('attributes')||{},u=c.class||'',h="".concat(s,"block"),p=o&&o.t("blockManager.labels.".concat(a.id))||a.get('label'),d=a.get('render'),f=a.get('media'),g=l?"".concat(h,"--disable"):"".concat(s,"four-color-h");r.attr(c),i.className="".concat(u," ").concat(h," ").concat(s,"one-bg ").concat(g).trim(),i.innerHTML="\n      ".concat(f?"<div class=\"".concat(h,"__media\">").concat(f,"</div>"):'',"\n      <div class=\"").concat(h,"-label\">").concat(p,"</div>\n    "),i.title=c.title||(null===(t=i.textContent)||void 0===t?void 0:t.trim()),i.setAttribute('draggable',"".concat(!(!(0,e.hasDnd)(o)||l)));var m=d&&d({el:i,model:a,className:h,prefix:s});return m&&(i.innerHTML=m),this},o}(u.G7);const PP=kP;var CP=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),TP=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},EP=function(t){function e(e,n){var o=t.call(this,e)||this;o.config=n;var i=n.pStylePrefix||'';return o.em=n.em,o.pfx=i,o.caretR='fa fa-caret-right',o.caretD='fa fa-caret-down',o.iconClass="".concat(i,"caret-icon"),o.activeClass="".concat(i,"open"),o.className="".concat(i,"block-category"),o.listenTo(o.model,'change:open',o.updateVisibility),o.model.view=o,o}return CP(e,t),e.prototype.events=function(){return{'click [data-title]':'toggle'}},e.prototype.template=function(t){var e=t.pfx,n=t.label;return i(AP||(AP=TP(["\n      <div class=\"","title\" data-title>\n        <i class=\"","caret-icon\"></i>\n        ","\n      </div>\n      <div class=\"","blocks-c\"></div>\n    "],["\n      <div class=\"","title\" data-title>\n        <i class=\"","caret-icon\"></i>\n        ","\n      </div>\n      <div class=\"","blocks-c\"></div>\n    "])),e,e,n,e)},e.prototype.attributes=function(){return this.model.get('attributes')||{}},e.prototype.updateVisibility=function(){this.model.get('open')?this.open():this.close()},e.prototype.open=function(){this.$el.addClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretD),this.getBlocksEl().style.display=''},e.prototype.close=function(){this.$el.removeClass(this.activeClass),this.getIconEl().className="".concat(this.iconClass," ").concat(this.caretR),this.getBlocksEl().style.display='none'},e.prototype.toggle=function(){var t=this.model;t.set('open',!t.get('open'))},e.prototype.getIconEl=function(){return this.iconEl||(this.iconEl=this.el.querySelector(".".concat(this.iconClass))),this.iconEl},e.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.pfx,"blocks-c"))),this.blocksEl},e.prototype.append=function(t){this.getBlocksEl().appendChild(t)},e.prototype.render=function(){var t=this,e=t.em,n=t.el,o=t.$el,i=t.model,r=t.pfx,s=e.t("blockManager.categories.".concat(i.id))||i.get('label');return n.innerHTML=this.template({pfx:r,label:s}),o.addClass(this.className),o.css({order:i.get('order')}),this.updateVisibility(),this},e}(u.G7);const QP=EP;var AP,$P=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),jP=void 0&&(void 0).__assign||function(){return jP=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},jP.apply(this,arguments)},RP=function(e){function n(n,o){var i=e.call(this,n)||this;i.renderedCategories=new Map,(0,t.bindAll)(i,'getSorter','onDrag','onDrop','onMove'),i.config=o||{},i.categories=n.categories||'';var r=i.config.pStylePrefix||'';i.ppfx=r,i.noCatClass="".concat(r,"blocks-no-cat"),i.blockContClass="".concat(r,"blocks-c"),i.catsClass="".concat(r,"block-categories");var s=i.collection;return i.listenTo(s,'add',i.addTo),i.listenTo(s,'reset',i.render),i.em=i.config.em,i.em&&(i.config.getSorter=i.getSorter),i}return $P(n,e),n.prototype.__getModule=function(){return this.em.Blocks},n.prototype.updateConfig=function(t){void 0===t&&(t={}),this.config=jP(jP({},this.config),t)},n.prototype.getSorter=function(){var t=this.em;if(t){if(!this.sorter){var e=t.Utils,n=t.Canvas;this.sorter=new e.Sorter({container:n.getBody(),placer:n.getPlacerEl(),containerSel:'*',itemSel:'*',pfx:this.ppfx,onStart:this.onDrag,onEndMove:this.onDrop,onMove:this.onMove,document:n.getFrameEl().contentDocument,direction:'a',wmargin:1,nested:1,em:t,canvasRelative:1})}return this.sorter}},n.prototype.onDrag=function(t){this.em.stopDefault(),this.__getModule().__startDrag(this.sorter.__currentBlock,t)},n.prototype.onMove=function(t){this.__getModule().__drag(t)},n.prototype.onDrop=function(t){this.em.runDefault(),this.__getModule().__endDrag({component:t}),delete this.sorter.__currentBlock},n.prototype.addTo=function(t){this.add(t)},n.prototype.add=function(e,n){var o=this.config,i=this.renderedCategories,r=new PP({model:e,attributes:e.get('attributes')},o).render().el,s=e.get('category');if(s&&this.categories&&!o.ignoreCategories){(0,t.isString)(s)?s={id:s,label:s}:(0,t.isObject)(s)&&!s.id&&(s.id=s.label);var a=this.categories.add(s),l=a.get('id'),c=this.getCategoriesEl(),u=i.get(l);return e.set('category',a,{silent:!0}),!u&&c&&(u=new QP({model:a},o).render(),i.set(l,u),c.appendChild(u.el)),void(u&&u.append(r))}n?n.appendChild(r):this.append(r)},n.prototype.getCategoriesEl=function(){return this.catsEl||(this.catsEl=this.el.querySelector(".".concat(this.catsClass))),this.catsEl},n.prototype.getBlocksEl=function(){return this.blocksEl||(this.blocksEl=this.el.querySelector(".".concat(this.noCatClass," .").concat(this.blockContClass))),this.blocksEl},n.prototype.append=function(t){var e=this.getBlocksEl();e&&e.appendChild(t)},n.prototype.render=function(){var t=this,e=this.ppfx,n=document.createDocumentFragment();delete this.catsEl,delete this.blocksEl,this.renderedCategories=new Map,this.el.innerHTML="\n      <div class=\"".concat(this.catsClass,"\"></div>\n      <div class=\"").concat(this.noCatClass,"\">\n        <div class=\"").concat(this.blockContClass,"\"></div>\n      </div>\n    "),this.collection.each((function(e){return t.add(e,n)})),this.append(n);var o="".concat(this.blockContClass,"s ").concat(e,"one-bg ").concat(e,"two-color");return this.$el.addClass(o),this.rendered=!0,this},n}(u.G7);const ZP=RP;var MP=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),VP=void 0&&(void 0).__assign||function(){return VP=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},VP.apply(this,arguments)},DP=function(e){function n(n){var o,i=e.call(this,n,'BlockManager',new vP((null===(o=n.config.blockManager)||void 0===o?void 0:o.blocks)||[]),xP,pP)||this;return i.events=xP,i.Block=fP,i.Blocks=vP,i.Category=_P,i.Categories=wP,i.storageKey='',i.blocks=i.all,i.blocksVisible=new vP(i.blocks.models),i.categories=new wP,i.blocks.on('add',(function(t){return i.blocksVisible.add(t)})),i.blocks.on('remove',(function(t){return i.blocksVisible.remove(t)})),i.blocks.on('reset',(function(t){return i.blocksVisible.reset(t.models)})),i.__onAllEvent=(0,t.debounce)((function(){return i.__trgCustom()}),0),i}return MP(n,e),n.prototype.__trgCustom=function(){this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var t=this,e=this.__getBehaviour();return{bm:this,blocks:this.getAll().models,container:e.container,dragStart:function(e,n){return t.startDrag(e,n)},drag:function(e){return t.__drag(e)},dragStop:function(e){return t.endDrag(e)}}},n.prototype.__startDrag=function(t,e){var n=this,o=n.em,i=n.events,r=n.blocks,s=t.getContent?t.getContent():t;this._dragBlock=t,o.set({dragResult:null,dragContent:s}),[o,r].map((function(n){return n.trigger(i.dragStart,t,e)}))},n.prototype.__drag=function(t){var e=this,n=e.em,o=e.events,i=e.blocks,r=this._dragBlock;[n,i].map((function(e){return e.trigger(o.drag,r,t)}))},n.prototype.__endDrag=function(e){void 0===e&&(e={});var n=this,o=n.em,i=n.events,r=n.blocks,s=this._dragBlock,a=e.component||o.get('dragResult');if(delete this._dragBlock,a&&s){var l='activeOnRender',c=a.get&&a.get(l),u=s.get('activate')||c,h=s.get('select'),p=(0,t.isArray)(a)?a[0]:a;(h||u&&!1!==h)&&o.setSelected(p),u&&(p.trigger('active'),c&&p.unset(l)),s.get('resetId')&&p.onAll((function(t){return t.resetId()}))}o.set({dragResult:null,dragContent:null}),s&&[o,r].map((function(t){return t.trigger(i.dragEnd,a,s)}))},n.prototype.__getFrameViews=function(){return this.em.Canvas.getFrames().map((function(t){return t.view})).filter(Boolean)},n.prototype.__behaviour=function(t){return void 0===t&&(t={}),this._bhv=VP(VP({},this._bhv||{}),t)},n.prototype.__getBehaviour=function(){return this._bhv||{}},n.prototype.startDrag=function(t,e){this.__startDrag(t,e),this.__getFrameViews().forEach((function(t){var e;return null===(e=t.droppable)||void 0===e?void 0:e.startCustom()}))},n.prototype.endDrag=function(t){this.__getFrameViews().forEach((function(e){var n;return null===(n=e.droppable)||void 0===n?void 0:n.endCustom(t)})),this.__endDrag()},n.prototype.postRender=function(){var t=this,e=t.categories,n=t.config,o=t.em,i=this.blocksVisible;this.blocksView=new ZP({collection:i,categories:e},VP(VP({},n),{em:o})),this.__appendTo(i.models),this.__trgCustom()},n.prototype.add=function(t,e,n){void 0===n&&(n={});var o=e||{};return o.id=t,this.blocks.add(o,n)},n.prototype.get=function(t){return this.blocks.get(t)},n.prototype.getAll=function(){return this.blocks},n.prototype.getAllVisible=function(){return this.blocksVisible},n.prototype.remove=function(t,e){return void 0===e&&(e={}),this.__remove(t,e)},n.prototype.getCategories=function(){return this.categories},n.prototype.getContainer=function(){var t;return null===(t=this.blocksView)||void 0===t?void 0:t.el},n.prototype.getDragBlock=function(){return this._dragBlock},n.prototype.render=function(t,e){void 0===e&&(e={});var n=this,o=n.categories,i=n.config,r=n.em,s=t||this.getAll().models;if(e.external){var a=new vP(s);return new ZP({collection:a,categories:o},VP(VP({em:r},i),e)).render().el}return this.blocksView&&(this.blocksView.updateConfig(e),this.blocksView.collection.reset(s),this.blocksView.rendered||(this.blocksView.render(),this.blocksView.rendered=!0)),this.getContainer()},n.prototype.destroy=function(){var t,e=[this.blocks,this.blocksVisible,this.categories];e.map((function(t){return t.stopListening()})),e.map((function(t){return t.reset()})),null===(t=this.blocksView)||void 0===t||t.remove()},n}(O);const IP=DP;const NP={stylePrefix:'clm-',appendTo:'',selectors:[],states:[{name:'hover'},{name:'active'},{name:'nth-of-type(2n)'}],iconAdd:'<svg viewBox="0 0 24 24"><path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path></svg>',iconSync:'<svg viewBox="0 0 24 24"><path d="M12 18c-3.31 0-6-2.69-6-6 0-1 .25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4m0-11V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8z"></path></svg>',iconTagOn:'<svg viewBox="0 0 24 24"><path d="M19 19H5V5h10V3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-8h-2m-11.09-.92L6.5 11.5 11 16 21 6l-1.41-1.42L11 13.17l-3.09-3.09z"></path></svg>',iconTagOff:'<svg viewBox="0 0 24 24"><path d="M19 3H5c-1.11 0-2 .89-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5a2 2 0 0 0-2-2m0 2v14H5V5h14z"></path></svg>',iconTagRemove:'<svg viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"></path></svg>',componentFirst:!1,custom:!1};var WP=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),XP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return WP(e,t),e.prototype.defaults=function(){return{name:'',label:''}},e.prototype.getName=function(){return this.get('name')},e.prototype.getLabel=function(){return this.get('label')||this.getName()},e}(u.Hn);const LP=XP;XP.prototype.idAttribute='name';var YP=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),zP=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},qP='contentEditable',UP=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this,o=e.config||{};return n.config=o,n.module=e.module,n.coll=e.coll||null,n.pfx=o.stylePrefix||'',n.ppfx=o.pStylePrefix||'',n.em=o.em,n.listenTo(n.model,'change:active',n.updateStatus),n}return YP(e,t),e.prototype.template=function(){var t=this,e=t.pfx,n=t.model,o=t.config,r=n.get('label')||'';return i(FP||(FP=zP(["\n      <span id=\"","checkbox\" class=\"","tag-status\" data-tag-status></span>\n      <span id=\"","tag-label\" data-tag-name>","</span>\n      <span id=\"","close\" class=\"","tag-close\" data-tag-remove> $"," </span>\n    "],["\n      <span id=\"","checkbox\" class=\"","tag-status\" data-tag-status></span>\n      <span id=\"","tag-label\" data-tag-name>","</span>\n      <span id=\"","close\" class=\"","tag-close\" data-tag-remove> $"," </span>\n    "])),e,e,e,r,e,e,o.iconTagRemove)},e.prototype.events=function(){return{'click [data-tag-remove]':'removeTag','click [data-tag-status]':'changeStatus','dblclick [data-tag-name]':'startEditTag','focusout [data-tag-name]':'endEditTag'}},e.prototype.getInputEl=function(){return this.inputEl||(this.inputEl=this.el.querySelector('[data-tag-name]')),this.inputEl},e.prototype.startEditTag=function(){var t=this.em,e=this.getInputEl();e[qP]='true',e.focus(),null==t||t.setEditing(!0)},e.prototype.endEditTag=function(){var t=this.model,e=this.em,n=this.getInputEl(),o=n.textContent||'',i=null==e?void 0:e.Selectors;n[qP]='false',null==e||e.setEditing(!1),i&&i.rename(t,o)!==t&&(n.innerText=t.getLabel())},e.prototype.changeStatus=function(){var t=this.model;t.set('active',!t.getActive())},e.prototype.removeTag=function(){this.module.removeSelected(this.model)},e.prototype.updateStatus=function(){var t=this,e=t.model,n=t.$el,o=t.config,i=o.iconTagOn,r=o.iconTagOff,s=n.find('[data-tag-status]');e.get('active')?(s.html(i),n.removeClass('opac50')):(s.html(r),n.addClass('opac50'))},e.prototype.render=function(){var t=this,e=t.pfx,n=t.ppfx,o=t.$el,i=t.model,r="".concat(e,"tag"),s=["".concat(r," ").concat(n,"three-bg")];return i.get('protected')&&s.push("".concat(r,"-protected")),o.html(this.template()),o.attr('class',s.join(' ')),this.updateStatus(),this},e}(u.G7);const BP=UP;var FP,GP=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),HP=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},KP=function(e){function n(n){void 0===n&&(n={});var o=e.call(this,n)||this;o.config=n.config||{},o.pfx=o.config.stylePrefix||'',o.ppfx=o.config.pStylePrefix||'',o.className=o.pfx+'tags',o.stateInputId=o.pfx+'states',o.stateInputC=o.pfx+'input-c',o.states=o.config.states||[];var i=o.config.em,r=o.collection;o.target=i;var s=i.Selectors;o.module=s,o.em=i,o.componentChanged=(0,t.debounce)(o.componentChanged.bind(o),0),o.checkSync=(0,t.debounce)(o.checkSync.bind(o),0);return o.listenTo(i,'component:toggled component:update:classes',o.componentChanged),o.listenTo(i,'styleManager:update',o.componentChanged),o.listenTo(i,'component:update:classes change:state',o.__handleStateChange),o.listenTo(i,'styleable:change change:device',o.checkSync),o.listenTo(r,'add',o.addNew),o.listenTo(r,'reset',o.renderClasses),o.listenTo(r,'remove',o.tagRemoved),o.listenTo(s.getAll(),s.events.state,(0,t.debounce)((function(){return o.renderStates()}),0)),o.delegateEvents(),o}return GP(n,e),n.prototype.template=function(t){var e=t.labelInfo,n=t.labelHead,o=t.iconSync,r=t.iconAdd,s=t.pfx,a=t.ppfx;return i(tC||(tC=HP([" <div id=\"","up\" class=\"","header\">\n        <div id=\"","label\" class=\"","header-label\">","</div>\n        <div id=\"","status-c\" class=\"","header-status\">\n          <span id=\"","input-c\" data-states-c>\n            <div class=\"","field ","select\">\n              <span id=\"","input-holder\">\n                <select id=\"","states\" data-states></select>\n              </span>\n              <div class=\"","sel-arrow\">\n                <div class=\"","d-s-arrow\"></div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div id=\"","tags-field\" class=\"","field\">\n        <div id=\"","tags-c\" data-selectors></div>\n        <input id=\"","new\" data-input />\n        <span id=\"","add-tag\" class=\"","tags-btn ","tags-btn__add\" data-add> $"," </span>\n        <span class=\"","tags-btn ","tags-btn__sync\" style=\"display: none\" data-sync-style> $"," </span>\n      </div>\n      <div class=\"","sels-info\">\n        <div class=\"","label-sel\">",":</div>\n        <div class=\"","sels\" data-selected></div>\n      </div>"],[" <div id=\"","up\" class=\"","header\">\n        <div id=\"","label\" class=\"","header-label\">","</div>\n        <div id=\"","status-c\" class=\"","header-status\">\n          <span id=\"","input-c\" data-states-c>\n            <div class=\"","field ","select\">\n              <span id=\"","input-holder\">\n                <select id=\"","states\" data-states></select>\n              </span>\n              <div class=\"","sel-arrow\">\n                <div class=\"","d-s-arrow\"></div>\n              </div>\n            </div>\n          </span>\n        </div>\n      </div>\n      <div id=\"","tags-field\" class=\"","field\">\n        <div id=\"","tags-c\" data-selectors></div>\n        <input id=\"","new\" data-input />\n        <span id=\"","add-tag\" class=\"","tags-btn ","tags-btn__add\" data-add> $"," </span>\n        <span class=\"","tags-btn ","tags-btn__sync\" style=\"display: none\" data-sync-style> $"," </span>\n      </div>\n      <div class=\"","sels-info\">\n        <div class=\"","label-sel\">",":</div>\n        <div class=\"","sels\" data-selected></div>\n      </div>"])),s,s,s,s,n,s,s,s,a,a,a,s,a,a,s,a,s,s,s,s,s,r,s,s,o,s,s,e,s)},n.prototype.events=function(){return{'change [data-states]':'stateChanged','click [data-add]':'startNewTag','focusout [data-input]':'endNewTag','keyup [data-input]':'onInputKeyUp','click [data-sync-style]':'syncStyle'}},n.prototype.syncStyle=function(){var t,e=this.em,n=this.getTarget(),o=e.Css,i=this.getCommonSelectors({opts:{noDisabled:1}}),r=e.get('state'),s=e.getCurrentMedia(),a=[],l=o.get(i,r,s)||o.add(i,r,s);this.getTargets().forEach((function(e){var n=o.getIdRule(e.getId(),{state:r,mediaText:s});t=n.getStyle(),n.setStyle({}),a.push(n)})),t&&l.addStyle(t),e.trigger('component:toggled'),e.trigger('component:sync-style',{component:n,selectors:i,mediaText:s,rule:l,ruleComponents:a,state:r})},n.prototype.tagRemoved=function(t){this.updateStateVis()},n.prototype.addNew=function(t){this.addToClasses(t)},n.prototype.startNewTag=function(){var t,e;null===(t=this.$addBtn)||void 0===t||t.css({display:'none'}),null===(e=this.$input)||void 0===e||e.show().focus()},n.prototype.endNewTag=function(){var t,e;null===(t=this.$addBtn)||void 0===t||t.css({display:''}),null===(e=this.$input)||void 0===e||e.hide().val('')},n.prototype.onInputKeyUp=function(t){var e;13===t.keyCode?(t.preventDefault(),this.addNewTag(null===(e=this.$input)||void 0===e?void 0:e.val())):27===t.keyCode&&this.endNewTag()},n.prototype.checkStates=function(){var t=this.em.getState(),e=this.getStates();e&&e.val(t)},n.prototype.componentChanged=function(t){var e=(void 0===t?{}:t).targets;this.updateSelection(e)},n.prototype.updateSelection=function(e){var n=e||this.getTargets(),o=[];return(n=(0,t.isArray)(n)?n:[n])&&n.length&&(o=this.getCommonSelectors({targets:n}),this.checkSync({validSelectors:o})),this.collection.reset(o),this.updateStateVis(n),this.module.__trgCustom(),o},n.prototype.getCommonSelectors=function(t){var e=void 0===t?{}:t,n=e.targets,o=e.opts,i=void 0===o?{}:o,r=n||this.getTargets();return this.module.__getCommonSelectors(r,i)},n.prototype._commonSelectors=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.module).__common.apply(t,e)},n.prototype.checkSync=function(){var e,n=this,o=n.$btnSyncEl,i=n.config,r=n.collection,s=this.getTarget();if(s&&i.componentFirst&&r.length){var a=s.getStyle();e=!(0,t.isEmpty)(a)}o&&o[e?'show':'hide']()},n.prototype.getTarget=function(){return this.target.getSelected()},n.prototype.getTargets=function(){return this.target.getSelectedAll()},n.prototype.updateStateVis=function(t){var e=this.em,n=e&&e.getConfig().avoidInlineStyle,o=this.collection.length||n?'':'none';this.getStatesC().css('display',o),this.updateSelector(t)},n.prototype.__handleStateChange=function(){this.updateSelector(this.getTargets())},n.prototype.updateSelector=function(e){var n=this,o=this.el.querySelector('[data-selected]'),i=[],r=e||this.getTargets();(r=(0,t.isArray)(r)?r:[r]).forEach((function(t){return i.push(n.__getName(t))})),o&&(o.innerHTML=i.join(', ')),this.checkStates()},n.prototype.__getName=function(e){var n,o=this,r=o.pfx,s=o.config,a=o.em,l=s.selectedName,c=s.componentFirst;if((0,t.isString)(e))n=i(eC||(eC=HP(["<span class=\"","sel-gen\">","</span>"],["<span class=\"","sel-gen\">","</span>"])),r,e);else{var u=null==e?void 0:e.getSelectors();if(!u)return'';var h=u.getStyleable(),p=a.get('state'),d=e.getId?i(nC||(nC=HP(["<span class=\"","sel-cmp\">","</span>\n            <span class=\"","sel-id\">#","</span>"],["<span class=\"","sel-cmp\">","</span>\n            <span class=\"","sel-id\">#","</span>"])),r,e.getName(),r,e.getId()):'';n=(n=this.collection.getFullString(h))?i(oC||(oC=HP(["<span class=\"","sel-rule\">","</span>"],["<span class=\"","sel-rule\">","</span>"])),r,n):e.get('selectorsAdd')||d,n=c&&d?d:n,n+=p?i(iC||(iC=HP(["<span class=\"","sel-state\">:","</span>"],["<span class=\"","sel-state\">:","</span>"])),r,p):'',n=l?l({result:n,state:p,target:e}):n}return n&&"<span class=\"".concat(r,"sel\">").concat(n,"</span>")},n.prototype.stateChanged=function(t){var e=this.em,n=t.target.value;e.set('state',n)},n.prototype.addNewTag=function(t){var e=t.trim();e&&(this.module.addSelected({label:e}),this.endNewTag())},n.prototype.addToClasses=function(t,e){var n=e,o=this.getClasses(),i=new BP({model:t,config:this.config,coll:this.collection,module:this.module}).render().el;return n?n.appendChild(i):o.append(i),i},n.prototype.renderClasses=function(){var t=this,e=document.createDocumentFragment(),n=this.getClasses();n.empty(),this.collection.each((function(n){return t.addToClasses(n,e)})),n.append(e)},n.prototype.getClasses=function(){return this.$el.find('[data-selectors]')},n.prototype.getStates=function(){if(!this.$states){var t=this.$el.find('[data-states]');this.$states=t[0]&&t}return this.$states},n.prototype.getStatesC=function(){return this.$statesC||(this.$statesC=this.$el.find('#'+this.stateInputC)),this.$statesC},n.prototype.renderStates=function(){var t=this.module,e=this.em,n=e.t('selectorManager.emptyState'),o=t.getStates().map((function(t){var n=e.t("selectorManager.states.".concat(t.id))||t.getLabel()||t.id;return"<option value=\"".concat(t.id,"\">").concat(n,"</option>")})).join(''),i=this.getStates();i&&i.html("<option value=\"\">".concat(n,"</option>").concat(o)),this.checkStates()},n.prototype.render=function(){var t=this,e=t.em,n=t.pfx,o=t.ppfx,i=t.config,r=t.$el,s=t.el,a=i.render,l={iconSync:i.iconSync,iconAdd:i.iconAdd,labelHead:e.t('selectorManager.label'),labelInfo:e.t('selectorManager.selected'),ppfx:o,pfx:n,el:s};r.html(this.template(l));var c=a&&a(l);return c&&c!==s&&r.empty().append(c),this.$input=r.find('[data-input]'),this.$addBtn=r.find('[data-add]'),this.$classes=r.find('#'+n+'tags-c'),this.$btnSyncEl=r.find('[data-sync-style]'),this.$input.hide(),this.renderStates(),this.renderClasses(),r.attr('class',"".concat(this.className," ").concat(o,"one-bg ").concat(o,"two-color")),this},n}(u.G7);const JP=KP;var tC,eC,nC,oC,iC,rC=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),sC=void 0&&(void 0).__assign||function(){return sC=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},sC.apply(this,arguments)},aC=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},lC=function(e){return(0,t.isString)(e)&&'#'==e[0]},cC=function(e){return(0,t.isString)(e)&&'.'==e[0]},uC='selector',hC="".concat(uC,":"),pC="".concat(hC,"add"),dC="".concat(hC,"update"),fC="".concat(hC,"remove"),gC="".concat(fC,":before"),mC="".concat(hC,"custom"),vC="".concat(hC,"state"),yC={all:uC,update:dC,add:pC,remove:fC,removeBefore:gC,state:vC,custom:mC},_C=function(n){function o(e){var o=n.call(this,e,'SelectorManager',new ao([]),yC,NP,{skipListen:!0})||this;o.Selector=oo,o.Selectors=ao,o.storageKey='',(0,t.bindAll)(o,'__updateSelectedByComponents');var i=o.config,r=i.pStylePrefix;r&&(i.stylePrefix=r+i.stylePrefix),o.all=new ao(i.selectors),o.selected=new ao([],{em:e,config:i}),o.states=new u.FE(i.states.map((function(t){return new LP(t)})),{model:LP}),o.model=new u.Hn({cFirst:i.componentFirst,_undo:!0}),o.__update=(0,t.debounce)((function(){return o.__trgCustom()}),0),o.__initListen({collections:[o.states,o.selected],propagate:[{entity:o.states,event:o.events.state}]}),e.on('change:state',(function(t,n){return e.trigger(vC,n)})),o.model.on('change:cFirst',(function(t,n){return e.trigger('selector:type',n)})),e.on('component:toggled component:update:classes',o.__updateSelectedByComponents);return o.model.listenTo(e,'component:toggled component:update:classes change:device styleManager:update selector:state selector:type style:target',(function(){return o.__update()})),o}return rC(o,n),o.prototype.__trgCustom=function(t){this.em.trigger(this.events.custom,this.__customData(t))},o.prototype.getAll=function(t){return void 0===t&&(t={}),this.all?t.array?aC([],this.all.models,!0):this.all:[]},o.prototype.__customData=function(t){return void 0===t&&(t={}),this.__ctn=this.__ctn||t.container,{states:this.getStates(),selected:this.getSelected(),container:this.__ctn}},o.prototype.postRender=function(){this.__appendTo(),this.__trgCustom()},o.prototype.select=function(t,n){void 0===n&&(n={});var o=Array.isArray(t)?t:[t],i=this.em.Styles.select(o,n);this.selected.reset(this.__getCommonSelectors(i));var r=this.selectorTags,s=i.filter((function(t){return t})).map((function(t){return(0,e.isComponent)(t)||(0,e.isRule)(t)&&!t.get('selectorsAdd')?t:t.getSelectorsString()}));return r&&r.componentChanged({targets:s}),this},o.prototype.addSelector=function(e,n,o){void 0===n&&(n={}),void 0===o&&(o={});var i=sC({},n);(0,t.isObject)(e)?i=e:i.name=e,lC(i.name)?(i.name=i.name.substr(1),i.type=oo.TYPE_ID):cC(i.name)&&(i.name=i.name.substr(1)),i.label&&!i.name&&(i.name=this.escapeName(i.label));var r=i.name,s=this.getConfig(),a=this.all,l=this.em,c=r?this.get(r,i.type):a.where(i)[0];if(!c){var u=i instanceof oo?i:new oo(i,sC(sC({},o),{config:s,em:l}));return a.add(u,o)}return c},o.prototype.getSelector=function(t,e){return void 0===e&&(e=oo.TYPE_CLASS),lC(t)?(t=t.substr(1),e=oo.TYPE_ID):cC(t)&&(t=t.substr(1)),this.all.where({name:t,type:e})[0]},o.prototype.add=function(e,n){var o=this;void 0===n&&(n={});var i=(0,t.isString)(e)?{}:n;return(0,t.isArray)(e)?e.map((function(t){return o.addSelector(t,n,i)})):this.addSelector(e,n,i)},o.prototype.addClass=function(e){var n=this,o=[];return(0,t.isString)(e)&&(e=e.trim().split(' ')),e.forEach((function(t){return o.push(n.addSelector(t))})),o},o.prototype.get=function(e,n){var o=this;if((0,t.isArray)(e)){var i=[];return e.map((function(t){return o.getSelector(t)})).filter(Boolean).forEach((function(t){return i.indexOf(t)<0&&i.push(t)})),i}return this.getSelector(e,n)},o.prototype.remove=function(t,e){return this.__remove(t,e)},o.prototype.rename=function(t,e,n){var o=this.escapeName(e);return this.get(o)||t.set({name:o,label:e},n)},o.prototype.setState=function(t){return this.em.setState(t),this},o.prototype.getState=function(){return this.em.getState()},o.prototype.getStates=function(){return aC([],this.states.models,!0)},o.prototype.setStates=function(t,e){return this.states.reset(t.map((function(t){return new LP(t)})),e)},o.prototype.getSelected=function(){return this.__getCommon()},o.prototype.getSelectedAll=function(){return aC([],this.selected.models,!0)},o.prototype.addSelected=function(t){var e=this.add(t);this.em.getSelectedAll().forEach((function(t){t.getSelectors().add(e)}))},o.prototype.removeSelected=function(t){this.em.getSelectedAll().forEach((function(e){!t.get('protected')&&e&&e.getSelectors().remove(t)}))},o.prototype.duplicateSelected=function(t,e){var n=this;void 0===e&&(e={});var o=this.em,i=this.getSelected();if(!(i.indexOf(t)<0)){var r=this.getState(),s=o.getCurrentMedia(),a=o.Css.get(i,r,s),l=null==a?void 0:a.getStyle();if(o.getSelectedAll().forEach((function(o){var i=o.getSelectors();if(i.includes(t)){var r=e.suffix||' copy',s=t.getLabel(),a=n.addSelector("".concat(s).concat(r)),l=i.indexOf(t);i.remove(t),i.add(a,{at:l})}})),l)o.Css.add(this.getSelected(),r,s).setStyle(l)}},o.prototype.getSelectedTargets=function(){return this.em.Styles.getSelectedAll()},o.prototype.setComponentFirst=function(t){this.getConfig().componentFirst=t,this.model.set({cFirst:t})},o.prototype.getComponentFirst=function(){return this.getConfig().componentFirst},o.prototype.escapeName=function(t){var e=this.getConfig().escapeName;return e?e(t):oo.escapeName(t)},o.prototype.render=function(t){var e=this.selectorTags,n=this.getConfig(),o=null==e?void 0:e.el;return this.selected.reset(t),this.selectorTags=new JP({el:o,collection:this.selected,module:this,config:n}),this.selectorTags.render().el},o.prototype.destroy=function(){var t=this.selectorTags;this.model.stopListening(),this.__update.cancel(),this.__destroy(),null==t||t.remove(),this.selectorTags=void 0},o.prototype.__getCommon=function(){return this.__getCommonSelectors(this.em.getSelectedAll())},o.prototype.__getCommonSelectors=function(t,e){void 0===e&&(e={});var n=t.map((function(t){return t.getSelectors&&t.getSelectors().getValid(e)})).filter(Boolean);return this.__common.apply(this,n)},o.prototype.__common=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.length?1===e.length?e[0]:2===e.length?e[0].filter((function(t){return e[1].indexOf(t)>=0})):e.slice(1).reduce((function(e,n){return t.__common(e,n)}),e[0]):[]},o.prototype.__updateSelectedByComponents=function(){this.selected.reset(this.__getCommon())},o}(O);const OC=_C;const bC={textTags:['br','b','i','u','a','ul','ol'],parserCss:void 0,parserHtml:void 0,optionsHtml:{htmlType:'text/html',allowScripts:!1,allowUnsafeAttr:!1,keepEmptyTextNodes:!1}};var wC,xC=5,SC=6,kC=7,PC=11,CC=12,TC=13,EC=14,QC=15,AC=((wC={})[4]='media',wC[xC]='font-face',wC[SC]='page',wC[kC]='keyframes',wC[PC]='counter-style',wC[CC]='supports',wC[TC]='document',wC[EC]='font-feature-values',wC[QC]='viewport',wC),$C=(0,t.keys)(AC),jC=[xC,SC,PC,QC],RC=$C.filter((function(t){return jC.indexOf(Number(t))<0})).map((function(t){return AC[t]})).concat(['container','layer']),ZC=jC.map((function(t){return AC[t]})),MC=function(t){void 0===t&&(t='');for(var e=[],n=[],o=t.split(','),i=0,r=o.length;i<r;i++){var s=o[i].trim();if(/^(\.{1}[\w\-]+)+(:{1,2}[\w\-()]+)?$/gi.test(s)||/^(#{1}[\w\-]+){1}(:{1,2}[\w\-()]+)?$/gi.test(s)){var a=s.split('.').filter(Boolean);n.push(a)}else e.push(s)}return{result:n,add:e}},VC=function(t){for(var e=t.style,n={},o=0,i=e.length;o<i;o++){var r=e[o],s=e.getPropertyValue(r),a=e.getPropertyPriority(r);n[r]="".concat(s).concat(a?" !".concat(a):'')}return n},DC=function(t){return(t.conditionText||t.media&&t.media.mediaText||t.name||t.selectorText||'').trim()},IC=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var o={},i=t.length,r=t[i-1],s=r?r.split(/:(.+)/):[],a=s[1],l=n.atRule,c=n.selectorsAdd,u=n.mediaText;return ZC.indexOf(l)>=0&&(o.singleAtRule=!0),l&&(o.atRuleType=l),c&&(o.selectorsAdd=c),u&&(o.mediaText=u),a&&(t[i-1]=s[0],o.state=a,s.splice(s.length-1,1)),o.selectors=t,o.style=e,o},NC=function(t){var e=t.cssText,n=void 0===e?'':e;return RC.find((function(t){return 0===n.indexOf("@".concat(t))}))},WC=function(t){for(var e=[],n=t.cssRules||[],o=0,i=n.length;o<i;o++){var r=n[o],s=r.type,a=!1,l='',c='',u=r.selectorText||r.keyText||'',h=jC.indexOf(s)>=0;if(h)a=!0,l=AC[s],c=DC(r);else if($C.indexOf("".concat(s))>=0||!s&&NC(r)){var p=WC(r),d=AC[s]||NC(r);c=DC(r);for(var f=0,g=p.length;f<g;f++){var m=p[f];c&&(m.mediaText=c),m.atRuleType=d}e=e.concat(p)}if(u||h){for(var v=VC(r),y=MC(u),_=y.add,O=y.result,b=void 0,w=0,x=O.length;w<x;w++){var S=IC(O[w],v,{atRule:AC[s]});e.push(S),b=S}if(_.length){var k=_.join(', ');if(b)b.selectorsAdd=k;else{S={selectors:[],selectorsAdd:k,style:v};a&&(S.singleAtRule=a),l&&(S.atRuleType=l),c&&(S.mediaText=c),e.push(S)}}}}return e};const XC=function(e,n){return void 0===n&&(n={}),{parse:function(t){var o=this,i=[],r=n.parserCss,s=null==e?void 0:e.Editor,a=r?r(t,s):function(t){var e=document.createElement('style');e.innerHTML=t,document.head.appendChild(e);var n=e.sheet;return document.head.removeChild(e),n?WC(n):[]}(t);return a.forEach((function(t){return i=i.concat(o.checkNode(t))})),null==e||e.trigger('parse:css',{input:t,output:i,nodes:a}),i},checkNode:function(e){var n=e.selectors,o=e.style,i=[e];if((0,t.isString)(n)){var r=[],s=e,a=MC(n),l=a.result,c=a.add.join(', '),u={atRule:s.atRule,mediaText:s.params};if(l.length?l.forEach((function(t){r.push(IC(t,o,u))})):r.push(IC([],o,u)),c)r[r.length-1].selectorsAdd=c;i=r}return i}}};var LC=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),YC=function(t){function e(e){var n=t.call(this,e,'Parser',bC)||this,o=n.config;return n.parserCss=XC(e,o),n.parserHtml=Dn(e,o),n}return LC(e,t),e.prototype.parseHtml=function(t,e){void 0===e&&(e={});var n=this.em,o=this.parserHtml;return o.compTypes=n.Components.getTypes()||{},o.parse(t,this.parserCss,e)},e.prototype.parseCss=function(t){return this.parserCss.parse(t)},e.prototype.destroy=function(){},e}(_);const zC=YC;const qC={id:'gjs-',type:'local',autosave:!0,autoload:!0,stepsBeforeSave:1,recovery:!1,onStore:function(t){return t},onLoad:function(t){return t},options:{local:{key:'gjsProject',checkLocal:!0},remote:{headers:{},urlStore:'',urlLoad:'',contentTypeJson:!0,fetchOptions:'',credentials:'include',onStore:function(t){return t},onLoad:function(t){return t}}}};var UC=void 0&&(void 0).__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o["throw"](t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},BC=void 0&&(void 0).__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};const FC=function(){function t(){}return t.prototype.store=function(t,e){return void 0===e&&(e={}),UC(this,void 0,void 0,(function(){return BC(this,(function(n){return this.hasLocal(e,!0)&&localStorage.setItem(e.key,JSON.stringify(t)),[2,t]}))}))},t.prototype.load=function(t){return void 0===t&&(t={}),UC(this,void 0,void 0,(function(){var e;return BC(this,(function(n){return e={},this.hasLocal(t,!0)&&(e=JSON.parse(localStorage.getItem(t.key)||'{}')),[2,e]}))}))},t.prototype.hasLocal=function(t,n){if(void 0===t&&(t={}),t.checkLocal&&(!(0,e.hasWin)()||!localStorage)){if(n)throw new Error('localStorage not available');return!1}return!0},t}();const GC=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){return e.reject(n)}))}))};const HC=function(t){return new this((function(e,n){if(!t||void 0===t.length)return n(new TypeError(cr(t)+' '+t+' is not iterable(cannot read property Symbol(Symbol.iterator))'));var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);var i=o.length;function r(t,n){if(n&&('object'===cr(n)||'function'==typeof n)){var s=n.then;if('function'==typeof s)return void s.call(n,(function(e){r(t,e)}),(function(n){o[t]={status:'rejected',reason:n},0==--i&&e(o)}))}o[t]={status:'fulfilled',value:n},0==--i&&e(o)}for(var s=0;s<o.length;s++)r(s,o[s])}))};function KC(t,e){this.name='AggregateError',this.errors=t,this.message=e||''}KC.prototype=Error.prototype;const JC=function(t){var e=this;return new e((function(n,o){if(!t||void 0===t.length)return o(new TypeError('Promise.any accepts an array'));var i=Array.prototype.slice.call(t);if(0===i.length)return o();for(var r=[],s=0;s<i.length;s++)try{e.resolve(i[s]).then(n).catch((function(t){r.push(t),r.length===i.length&&o(new KC(r,'All promises were rejected'))}))}catch(t){o(t)}}))};var tT=setTimeout;function eT(t){return Boolean(t&&void 0!==t.length)}function nT(){}function oT(t){if(!(this instanceof oT))throw new TypeError('Promises must be constructed via new');if('function'!=typeof t)throw new TypeError('not a function');this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],cT(t,this)}function iT(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,oT._immediateFn((function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var o;try{o=n(t._value)}catch(t){return void sT(e.promise,t)}rT(e.promise,o)}else(1===t._state?rT:sT)(e.promise,t._value)}))):t._deferreds.push(e)}function rT(t,e){try{if(e===t)throw new TypeError('A promise cannot be resolved with itself.');if(e&&('object'===cr(e)||'function'==typeof e)){var n=e.then;if(e instanceof oT)return t._state=3,t._value=e,void aT(t);if('function'==typeof n)return void cT((o=n,i=e,function(){o.apply(i,arguments)}),t)}t._state=1,t._value=e,aT(t)}catch(e){sT(t,e)}var o,i}function sT(t,e){t._state=2,t._value=e,aT(t)}function aT(t){2===t._state&&0===t._deferreds.length&&oT._immediateFn((function(){t._handled||oT._unhandledRejectionFn(t._value)}));for(var e=0,n=t._deferreds.length;e<n;e++)iT(t,t._deferreds[e]);t._deferreds=null}function lT(t,e,n){this.onFulfilled='function'==typeof t?t:null,this.onRejected='function'==typeof e?e:null,this.promise=n}function cT(t,e){var n=!1;try{t((function(t){n||(n=!0,rT(e,t))}),(function(t){n||(n=!0,sT(e,t))}))}catch(t){if(n)return;n=!0,sT(e,t)}}oT.prototype['catch']=function(t){return this.then(null,t)},oT.prototype.then=function(t,e){var n=new this.constructor(nT);return iT(this,new lT(t,e,n)),n},oT.prototype['finally']=GC,oT.all=function(t){return new oT((function(e,n){if(!eT(t))return n(new TypeError('Promise.all accepts an array'));var o=Array.prototype.slice.call(t);if(0===o.length)return e([]);var i=o.length;function r(t,s){try{if(s&&('object'===cr(s)||'function'==typeof s)){var a=s.then;if('function'==typeof a)return void a.call(s,(function(e){r(t,e)}),n)}o[t]=s,0==--i&&e(o)}catch(t){n(t)}}for(var s=0;s<o.length;s++)r(s,o[s])}))},oT.any=JC,oT.allSettled=HC,oT.resolve=function(t){return t&&'object'===cr(t)&&t.constructor===oT?t:new oT((function(e){e(t)}))},oT.reject=function(t){return new oT((function(e,n){n(t)}))},oT.race=function(t){return new oT((function(e,n){if(!eT(t))return n(new TypeError('Promise.race accepts an array'));for(var o=0,i=t.length;o<i;o++)oT.resolve(t[o]).then(e,n)}))},oT._immediateFn='function'==typeof setImmediate&&function(t){setImmediate(t)}||function(t){tT(t,0)},oT._unhandledRejectionFn=function(t){'undefined'!=typeof console&&console&&console.warn('Possible Unhandled Promise Rejection:',t)};const uT=oT;(0,e.hasWin)()&&(window.Promise=window.Promise||uT);const hT='function'==typeof fetch?fetch.bind():function(t,e){return new uT((function(n,o){var i=new XMLHttpRequest;for(var r in i.open(e.method||'get',t),i.withCredentials='include'==e.credentials,e.headers||{})i.setRequestHeader(r,e.headers[r]);i.onload=function(t){return n({status:i.status,statusText:i.statusText,text:function(){return uT.resolve(i.responseText)}})},i.onerror=o,i.upload&&e.onProgress&&(i.upload.onprogress=e.onProgress),e.body?i.send(e.body):i.send()}))};var pT=void 0&&(void 0).__assign||function(){return pT=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},pT.apply(this,arguments)},dT=void 0&&(void 0).__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o["throw"](t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},fT=void 0&&(void 0).__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},gT=function(){function e(){}return e.prototype.store=function(t,e){return void 0===e&&(e={}),dT(this,void 0,void 0,(function(){return fT(this,(function(n){switch(n.label){case 0:return[4,this.request(e.urlStore,this.__props(e,t),e)];case 1:return[2,n.sent()]}}))}))},e.prototype.load=function(t){return void 0===t&&(t={}),dT(this,void 0,void 0,(function(){return fT(this,(function(e){switch(e.label){case 0:return[4,this.request(t.urlLoad,this.__props(t),t)];case 1:return[2,e.sent()]}}))}))},e.prototype.request=function(e,n,o){return void 0===n&&(n={}),void 0===o&&(o={}),hT(e,n).then((function(t){var e=t.text();return 1==(t.status/200|0)?e:e.then(Promise.reject)})).then((function(e){var n=e&&(0,t.isString)(e);return o.contentTypeJson&&n?JSON.parse(e):e}))},e.prototype.__props=function(e,n){void 0===e&&(e={});var o,i=e.contentTypeJson,r=e.headers||{},s=e.fetchOptions||{},a='X-Requested-With',l='Content-Type';if((0,t.isUndefined)(r[a])&&(r[a]='XMLHttpRequest'),(0,t.isUndefined)(r[l])&&i&&(r[l]='application/json; charset=utf-8'),n)if(i)o=JSON.stringify(n);else for(var c in o=new FormData,n)o.append(c,n[c]);var u={method:o?'POST':'GET',credentials:e.credentials,headers:r,body:o};return pT(pT({},u),(0,t.isFunction)(s)?s(u):s)},e}();const mT=gT;var vT;!function(t){t["start"]="storage:start",t["startStore"]="storage:start:store",t["startLoad"]="storage:start:load",t["load"]="storage:load",t["store"]="storage:store",t["after"]="storage:after",t["afterStore"]="storage:after:store",t["afterLoad"]="storage:after:load",t["end"]="storage:end",t["endStore"]="storage:end:store",t["endLoad"]="storage:end:load",t["error"]="storage:error",t["errorStore"]="storage:error:store",t["errorLoad"]="storage:error:load"}(vT||(vT={}));const yT=vT;var _T=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),OT=void 0&&(void 0).__assign||function(){return OT=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},OT.apply(this,arguments)},bT=void 0&&(void 0).__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o["throw"](t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},wT=void 0&&(void 0).__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},xT='local',ST='remote',kT=function(e){function n(t){var n=e.call(this,t,'StorageManager',qC)||this;n.storages={},n.events=yT;var o=n.config;return o._disable&&(o.type=void 0),n.storages={},n.add(xT,new FC),n.add(ST,new mT),n.setCurrent(o.type),n}return _T(n,e),n.prototype.isAutosave=function(){return!!this.config.autosave},n.prototype.setAutosave=function(t){return this.config.autosave=!!t,this},n.prototype.getStepsBeforeSave=function(){return this.config.stepsBeforeSave},n.prototype.setStepsBeforeSave=function(t){return this.config.stepsBeforeSave=t,this},n.prototype.add=function(t,e){return this.storages[t]=e,this},n.prototype.get=function(t){return this.storages[t]},n.prototype.getStorages=function(){return this.storages},n.prototype.getCurrent=function(){return this.config.currentStorage},n.prototype.setCurrent=function(t){return this.getConfig().currentStorage=t,this},n.prototype.getCurrentStorage=function(){return this.get(this.getCurrent())},n.prototype.getStorageOptions=function(t){return this.getCurrentOptions(t)},n.prototype.store=function(t,e){return void 0===e&&(e={}),bT(this,void 0,void 0,(function(){var n,o,i,r,s;return wT(this,(function(a){switch(a.label){case 0:n=this.getCurrentStorage(),o=OT(OT({},this.getCurrentOptions()),e),i=this.getRecoveryStorage(),r=this.getCurrentOptions(xT),a.label=1;case 1:return a.trys.push([1,5,,9]),[4,this.__exec(n,o,t)];case 2:return a.sent(),i?[4,this.__exec(i,r,{})]:[3,4];case 3:a.sent(),a.label=4;case 4:return[3,9];case 5:return s=a.sent(),i?[4,this.__exec(i,r,t)]:[3,7];case 6:return a.sent(),[3,8];case 7:throw s;case 8:return[3,9];case 9:return[2,t]}}))}))},n.prototype.load=function(e){return void 0===e&&(e={}),bT(this,void 0,void 0,(function(){var n,o,i,r,s;return wT(this,(function(a){switch(a.label){case 0:return n=this.getCurrentStorage(),o=OT(OT({},this.getCurrentOptions()),e),(i=this.getRecoveryStorage())?[4,this.__exec(i,this.getCurrentOptions(xT))]:[3,5];case 1:if(s=a.sent(),(0,t.isEmpty)(s))return[3,5];a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.__askRecovery()];case 3:return a.sent(),r=s,[3,5];case 4:return a.sent(),[3,5];case 5:return r?[3,7]:[4,this.__exec(n,o)];case 6:r=a.sent(),a.label=7;case 7:return[2,r||{}]}}))}))},n.prototype.__askRecovery=function(){var e=this.em,n=this.getRecovery();return new Promise((function(o,i){(0,t.isFunction)(n)?n(o,i,null==e?void 0:e.getEditor()):confirm(null==e?void 0:e.t('storageManager.recover'))?o(null):i()}))},n.prototype.getRecovery=function(){return this.config.recovery},n.prototype.getRecoveryStorage=function(){return this.getRecovery()&&this.getCurrent()===ST&&this.get(xT)},n.prototype.__exec=function(t,e,n){var o;return bT(this,void 0,void 0,(function(){var i,r,s,a,l,c,u,h,p,d,f,g,m;return wT(this,(function(v){switch(v.label){case 0:if(i=n?'store':'load',r=this.getConfig(),s=r.onStore,a=r.onLoad,this.onStart(i,n),!t)return[2,n||{}];v.label=1;case 1:return v.trys.push([1,14,,15]),c=null===(o=this.em)||void 0===o?void 0:o.getEditor(),u=void 0,n?(p=s)?[4,s(n,c)]:[3,3]:[3,7];case 2:p=v.sent(),v.label=3;case 3:return h=p||n,(d=e.onStore)?[4,e.onStore(h,c)]:[3,5];case 4:d=v.sent(),v.label=5;case 5:return h=d||h,[4,t.store(h,e)];case 6:return u=v.sent(),l=n,[3,13];case 7:return[4,t.load(e)];case 8:return u=v.sent(),l=this.__clearKeys(u),(f=e.onLoad)?[4,e.onLoad(l,c)]:[3,10];case 9:f=v.sent(),v.label=10;case 10:return l=f||l,(g=a)?[4,a(l,c)]:[3,12];case 11:g=v.sent(),v.label=12;case 12:l=g||l,v.label=13;case 13:return this.onAfter(i,l,u),this.onEnd(i,l,u),[3,15];case 14:throw m=v.sent(),this.onError(i,m),m;case 15:return[2,l]}}))}))},n.prototype.__clearKeys=function(t){void 0===t&&(t={});var e=this.getConfig(),n=new RegExp("^".concat(e.id)),o={};for(var i in t){o[i.replace(n,'')]=t[i]}return o},n.prototype.getCurrentOptions=function(t){var e=this.getConfig(),n=t||this.getCurrent();return e.options[n]||{}},n.prototype.onStart=function(t,e){var n=this.em;if(n){var o='load'===t?yT.startLoad:yT.startStore;n.trigger(yT.start,t,e),n.trigger(o,e)}},n.prototype.onAfter=function(t,e,n){var o=this.em;if(o){var i='load'===t?yT.afterLoad:yT.afterStore;o.trigger(yT.after),o.trigger(i,e,n);var r='load'===t?yT.load:yT.store;o.trigger(r,e,n)}},n.prototype.onEnd=function(t,e,n){var o=this.em;if(o){var i='load'===t?yT.endLoad:yT.endStore;o.trigger(yT.end,t,e,n),o.trigger(i,e,n)}},n.prototype.onError=function(t,e){var n=this.em;if(n){var o='load'===t?yT.errorLoad:yT.errorStore;n.trigger(yT.error,e,t),n.trigger(o,e),this.onEnd(t,e)}},n.prototype.canAutoload=function(){return!!this.getCurrentStorage()&&!!this.config.autoload},n.prototype.destroy=function(){this.storages={}},n}(_);const PT=kT;const CT={stylePrefix:'trt-',appendTo:'',optionsTarget:[{value:!1},{value:'_blank'}],custom:!1};var TT=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ET='trait',QT="".concat(ET,":"),AT="".concat(QT,"custom"),$T=function(e){function n(n){var o=e.call(this,n,'TraitManager',CT)||this;o.types={},o.TraitsView=mo,o.events={all:ET,custom:AT};var i=new u.Hn;o.model=i;var r=(0,t.debounce)((function(){return o.__upSel()}),0);i.listenTo(n,'component:toggled',r);var s=(0,t.debounce)((function(){return o.__onUp()}),0);return i.listenTo(n,'trait:update',s),o}return TT(n,e),n.prototype.__upSel=function(){this.select(this.em.getSelected())},n.prototype.__onUp=function(){this.select(this.getSelected())},n.prototype.select=function(t){this.model.set({component:t}),this.render(),this.__trgCustom()},n.prototype.getSelected=function(){return this.model.get('component')},n.prototype.getCurrent=function(){var t;return(null===(t=this.getSelected())||void 0===t?void 0:t.traits)||[]},n.prototype.__trgCustom=function(t){void 0===t&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},n.prototype.postRender=function(){this.__appendTo()},n.prototype.getTraitsViewer=function(){return this.view},n.prototype.addType=function(t,e){var n=this.getType('text');this.types[t]=n.extend(e)},n.prototype.getType=function(t){return this.getTypes()[t]},n.prototype.getTypes=function(){return this.types},n.prototype.render=function(){var t=this.view,e=this.em,n=null==t?void 0:t.el,o=this.getCurrent();return console.log(o),this.view=new mo(e,{el:n,traits:o}).render(),this.view.el},n.prototype.destroy=function(){this.model.stopListening(),this.model.clear()},n}(_);const jT=$T;const RT={stylePrefix:'',appendTo:'',sortable:!0,hidable:!0,hideTextnode:!0,root:'',showWrapper:!0,showHover:!0,scrollCanvas:{behavior:'smooth',block:'nearest'},scrollLayers:{behavior:'auto',block:'nearest'},highlightHover:!0,custom:!1,onInit:function(){},onRender:function(){},extend:{}};var ZT=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),MT=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;n.items=[],n.opt=e;var o=e.config||{};n.config=o,n.parentView=e.parentView;var i=o.stylePrefix||'',r=o.pStylePrefix||'',s=n.collection;n.listenTo(s,'add',n.addTo),n.listenTo(s,'reset resetNavigator',n.render),n.listenTo(s,'remove',n.removeChildren),n.className="".concat(i,"layers");var a=o.em;if(o.sortable&&!n.opt.sorter){var l=a.Utils;n.opt.sorter=new l.Sorter({container:o.sortContainer||n.el,containerSel:".".concat(n.className),itemSel:".".concat(i,"layer"),ignoreViewChildren:1,avoidSelectOnEnd:1,nested:1,ppfx:r,pfx:i,em:a})}return n.$el.data('collection',s),e.parent&&n.$el.data('model',e.parent),n}return ZT(e,t),e.prototype.removeChildren=function(t){var e=t.viewLayer;e&&(e.remove(),delete t.viewLayer)},e.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},e.prototype.addToCollection=function(t,e,n){var o=this,i=o.parentView,r=o.opt,s=o.config,a=r.ItemView,l=r.opened,c=r.module,u=e||null,h=new a({ItemView:a,level:r.level,model:t,parentView:i,config:s,sorter:r.sorter,opened:l,module:c}),p=h.render().el;if(u)u.appendChild(p);else if(void 0!==n){var d='before';this.$el.children().length==n&&(n--,d='after'),n<0?this.$el.append(p):this.$el.children().eq(n)[d](p)}else this.$el.append(p);return this.items.push(h),p},e.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return u.G7.prototype.remove.apply(this,t),this.items.map((function(t){return t.remove()})),this},e.prototype.render=function(){var t=this,e=document.createDocumentFragment(),n=this.el;return n.innerHTML='',this.collection.each((function(n){return t.addToCollection(n,e)})),n.appendChild(e),n.className=this.className,this},e}(u.G7);const VT=MT;var DT=n(458);const IT={stylePrefix:'com-',defaults:{},strict:!0};var NT=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),WT=void 0&&(void 0).__assign||function(){return WT=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},WT.apply(this,arguments)},XT=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},LT=[['preview','Preview','preview'],['resize','Resize','resize'],['fullscreen','Fullscreen','fullscreen'],['copy','CopyComponent'],['paste','PasteComponent'],['canvas-move','CanvasMove'],['canvas-clear','CanvasClear'],['open-code','ExportTemplate','export-template'],['open-layers','OpenLayers','open-layers'],['open-styles','OpenStyleManager','open-sm'],['open-traits','OpenTraitManager','open-tm'],['open-blocks','OpenBlocks','open-blocks'],['open-assets','OpenAssets','open-assets'],['open-pages','OpenPages','open-pages'],['component-select','SelectComponent','select-comp'],['component-outline','SwitchVisibility','sw-visibility'],['component-offset','ShowOffset','show-offset'],['component-move','MoveComponent','move-comp'],['component-next','ComponentNext'],['component-prev','ComponentPrev'],['component-enter','ComponentEnter'],['component-exit','ComponentExit','select-parent'],['component-delete','ComponentDelete'],['component-style-clear','ComponentStyleClear'],['component-drag','ComponentDrag']],YT={preserveSelected:1},zT=function(t){return function(e){return t.trigger("".concat(cx,":start"),e)}},qT=function(t){return function(e){return t.trigger(cx,e)}},UT=function(t,e,n){return void 0===n&&(n={}),function(o,i,r){e.forEach((function(t){return t.set('status',t.get('selectable')?'selected':'')})),t.setSelected(e),e[0].emitUpdate(),t.trigger("".concat(cx,":end"),r),setTimeout((function(){return t.runDefault(YT)})),(n.altMode||r.cancelled)&&t.set('_cmpDrag',1)}},BT=function(e){function o(o){var i=e.call(this,o,'Commands',IT)||this;i.CommandAbstract=DT["default"],i.defaultCommands={},i.commands={},i.active={};var r=i.config,s=r.pStylePrefix,a=i.defaultCommands;for(var l in s&&(r.stylePrefix=s+r.stylePrefix),Object.keys(r.defaults).forEach((function(t){var e=r.defaults[t];e.id&&i.add(e.id,e)})),a['tlb-delete']={run:function(t){return t.runCommand('core:component-delete')}},a['tlb-clone']={run:function(t){t.runCommand('core:copy'),t.runCommand('core:paste',{action:'clone-component'})}},a['tlb-move']={run:function(e,n,o){var i;void 0===o&&(o={});var r=e.getModel(),s=o.event,a=o.target,l=(a?[a]:XT([],e.getSelectedAll(),!0)).map((function(t){var e,n;return(null===(n=null===(e=t.delegate)||void 0===e?void 0:e.move)||void 0===n?void 0:n.call(e,t))||t})).filter(Boolean),c=l[0],u='dragstart'===(null==s?void 0:s.type);if(!(null==c?void 0:c.get('draggable')))return r.logWarning('The element is not draggable');var h=c.get('dmode')||r.get('dmode'),p=function(){return r.stopDefault(YT)},d=(0,t.includes)(['absolute','translate'],h);l.forEach((function(t){return t.trigger('disable',{fromMove:!0})})),u?setTimeout(p,0):p();var f=zT(r),g=qT(r),m=UT(r,l,{altMode:d});if(d)e.runCommand('core:component-drag',{guidesInfo:1,mode:h,target:c,onStart:f,onDrag:g,onEnd:m,event:s});else{u&&s.dataTransfer.setDragImage(null===(i=c.view)||void 0===i?void 0:i.el,0,0);var v=e.Commands.get('move-comp');v.onStart=f,v.onDrag=g,v.onEndMoveFromModel=m,v.initSorterFromModels(l)}l.filter((function(t){return t.get('selectable')})).forEach((function(t){return t.set('status','freezed-selected')}))}},a['core:undo']=function(t){return t.UndoManager.undo()},a['core:redo']=function(t){return t.UndoManager.redo()},LT.forEach((function(t){var e=t[2],i=n(828)("./".concat(t[1])).default,r="core:".concat(t[0]);a[r]=i,e&&(a[e]=i,['run','stop'].forEach((function(t){o.on("".concat(t,":").concat(e),(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return o.trigger.apply(o,XT(["".concat(t,":").concat(r)],e,!1))}))})))})),r.model=o.Canvas,a)i.add(l,a[l]);return i}return NT(o,e),o.prototype.add=function(e,n){var o=(0,t.isFunction)(n)?{run:n}:n;return o.stop||(o.noStop=!0),delete o.initialize,o.id=e,this.commands[e]=DT["default"].extend(o),this},o.prototype.get=function(e){var n=this.commands[e];return(0,t.isFunction)(n)?(n=new n(this.config),this.commands[e]=n):n||this.em.logWarning("'".concat(e,"' command not found")),n},o.prototype.extend=function(t,e){void 0===e&&(e={});var n=this.get(t);if(n){var o=WT(WT({},n.constructor.prototype),e);this.add(t,o);var i=LT.filter((function(e){return"core:".concat(e[0])===t&&e[2]}))[0];i&&this.add(i[2],o)}return this},o.prototype.has=function(t){return!!this.commands[t]},o.prototype.getAll=function(){return this.commands},o.prototype.run=function(t,e){return void 0===e&&(e={}),this.runCommand(this.get(t),e)},o.prototype.stop=function(t,e){return void 0===e&&(e={}),this.stopCommand(this.get(t),e)},o.prototype.isActive=function(t){return this.getActive().hasOwnProperty(t)},o.prototype.getActive=function(){return this.active},o.prototype.runCommand=function(t,e){var n;if(void 0===e&&(e={}),t&&t.run){var o=this.em,i=this.config,r=t.id,s=o.Editor;this.isActive(r)&&!e.force&&i.strict||(n=s&&t.callRun(s,e),r&&t.stop&&!t.noStop&&!e.abort&&(this.active[r]=n))}return n},o.prototype.stopCommand=function(t,e){var n;if(void 0===e&&(e={}),t&&t.run){var o=this.em,i=this.config,r=t.id,s=o.Editor;(this.isActive(r)||e.force||!i.strict)&&(r&&delete this.active[r],n=t.callStop(s,e))}return n},o.prototype.create=function(t){return t.stop||(t.noStop=!0),new(DT["default"].extend(t))(this.config)},o.prototype.destroy=function(){this.defaultCommands={},this.commands={},this.active={}},o}(_);const FT=BT;var GT=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),HT='contentEditable',KT=function(n){function o(e){var o=n.call(this,e)||this;(0,t.bindAll)(o,'__render'),o.opt=e,o.module=e.module,o.config=e.config||{},o.sorter=e.sorter||'',o.parentView=e.parentView;var i=o,r=i.model,s=i.pfx,a=i.ppfx,l=r.get('type')||'default';return o.className="".concat(s,"layer ").concat(s,"layer__t-").concat(l," no-select ").concat(a,"two-color"),o.inputNameCls="".concat(a,"layer-name"),o.clsTitleC="".concat(s,"layer-title-c"),o.clsTitle="".concat(s,"layer-title"),o.clsCaret="".concat(s,"layer-caret"),o.clsCount="".concat(s,"layer-count"),o.clsMove="".concat(s,"layer-move"),o.clsChildren="".concat(s,"layer-children"),o.clsNoChild="".concat(s,"layer-no-chld"),o.clsEdit="".concat(o.inputNameCls,"--edit"),o.clsNoEdit="".concat(o.inputNameCls,"--no-edit"),o.initComponent(),o}return GT(o,n),o.prototype.events=function(){return{'mousedown [data-toggle-move]':'startSort','touchstart [data-toggle-move]':'startSort','click [data-toggle-visible]':'toggleVisibility','click [data-toggle-open]':'toggleOpening','click [data-toggle-select]':'handleSelect','mouseover [data-toggle-select]':'handleHover','mouseout [data-toggle-select]':'handleHoverOut','dblclick [data-name]':'handleEdit','keydown [data-name]':'handleEditKey','focusout [data-name]':'handleEditEnd'}},o.prototype.template=function(t){var e=this,n=e.pfx,o=e.ppfx,i=e.config,r=e.clsNoEdit,s=e.module,a=e.opt,l=e.em,c=i.hidable,u=s.getComponents(t).length,h=u?'':this.clsNoChild,p="".concat(this.clsTitle," ").concat(h),d="".concat(this.clsTitleC),f="".concat(this.inputNameCls," ").concat(r," ").concat(o,"no-app"),g=a.level||0,m="".concat(10*g,"px"),v=t.getName(),y=t.getIcon(),_="".concat(n,"layer"),O=(null==l?void 0:l.getConfig()).icons,b=O.move,w=O.eye,x=O.eyeOff,S=O.chevron;return"\n      <div class=\"".concat(n,"layer-item ").concat(o,"one-bg\" data-toggle-select>\n        <div class=\"").concat(n,"layer-item-left\">\n          ").concat(c?"<i class=\"".concat(n,"layer-vis\" data-toggle-visible>\n                <i class=\"").concat(n,"layer-vis-on\">").concat(w,"</i>\n                <i class=\"").concat(n,"layer-vis-off\">").concat(x,"</i>\n              </i>"):'',"\n          <div class=\"").concat(d,"\">\n            <div class=\"").concat(p,"\" style=\"padding-left: ").concat(m,"\">\n              <div class=\"").concat(n,"layer-title-inn\" title=\"").concat(v,"\">\n                <i class=\"").concat(this.clsCaret,"\" data-toggle-open>").concat(S,"</i>\n                  ").concat(y?"<span class=\"".concat(_,"__icon\">").concat(y,"</span>"):'',"\n                <span class=\"").concat(f,"\" data-name>").concat(v,"</span>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"").concat(n,"layer-item-right\">\n          ").concat(u?"<div class=\"".concat(this.clsCount,"\" data-count>").concat(u||'',"</div>"):'',"\n          <div class=\"").concat(this.clsMove,"\" data-toggle-move>").concat(b||'',"</div>\n        </div>\n      </div>\n      <div class=\"").concat(this.clsChildren,"\"></div>\n    ")},Object.defineProperty(o.prototype,"em",{get:function(){return this.module.em},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"ppfx",{get:function(){return this.em.getConfig().stylePrefix},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"pfx",{get:function(){return this.config.stylePrefix},enumerable:!1,configurable:!0}),o.prototype.initComponent=function(){var t=this,e=this.model,n=this.config.onInit,o=e.components();this.listenTo(o,'remove add reset',this.checkChildren),[['change:status',this.updateStatus],['change:open',this.updateOpening],['change:layerable',this.updateLayerable],['change:style:display',this.updateVisibility],['rerender:layer',this.render],['change:name change:custom-name',this.updateName]].forEach((function(n){return t.listenTo(e,n[0],n[1])})),this.$el.data('model',e),this.$el.data('collection',o),e.viewLayer=this,n.bind(this)({component:e,render:this.__render,listenTo:this.listenTo})},o.prototype.updateName=function(){this.getInputName().innerText=this.model.getName()},o.prototype.getVisibilityEl=function(){return this.eyeEl||(this.eyeEl=this.$el.children('[data-toggle-select]').find('[data-toggle-visible]')),this.eyeEl},o.prototype.updateVisibility=function(){var t=this,e=t.pfx,n=t.model,o=t.module,i="".concat(e,"layer-hidden"),r=!o.isVisible(n)?'addClass':'removeClass';this.$el[r](i),this.getVisibilityEl()[r]("".concat(e,"layer-off"))},o.prototype.toggleVisibility=function(t){null==t||t.stopImmediatePropagation();var e=this.module,n=this.model;e.setVisible(n,!e.isVisible(n))},o.prototype.handleEdit=function(t){null==t||t.stopPropagation();var e=this,n=e.em,o=e.$el,i=e.clsNoEdit,r=e.clsEdit,s=this.getInputName();s[HT]='true',s.focus(),document.execCommand('selectAll',!1),n.setEditing(!0),o.find(".".concat(this.inputNameCls)).removeClass(i).addClass(r)},o.prototype.handleEditKey=function(t){t.stopPropagation(),((0,ue.kl)(t)||(0,ue.r$)(t))&&this.handleEditEnd(t)},o.prototype.handleEditEnd=function(t){null==t||t.stopPropagation();var e=this,n=e.em,o=e.$el,i=e.clsNoEdit,r=e.clsEdit,s=this.getInputName(),a=s.textContent;s.scrollLeft=0,s[HT]='false',this.setName(a,{component:this.model,propName:'custom-name'}),n.setEditing(!1),o.find(".".concat(this.inputNameCls)).addClass(i).removeClass(r),this.updateName()},o.prototype.setName=function(t,e){var n=e.propName;this.model.set(n,t)},o.prototype.getInputName=function(){return this.inputName||(this.inputName=this.el.querySelector(".".concat(this.inputNameCls))),this.inputName},o.prototype.updateOpening=function(){var t=this,e=t.$el,n=t.model,o=t.pfx,i='open',r="".concat(o,"layer-open"),s=this.getCaret();this.module.isOpen(n)?(e.addClass(i),s.addClass(r)):(e.removeClass(i),s.removeClass(r))},o.prototype.toggleOpening=function(t){var e=this.model,n=this.module;null==t||t.stopImmediatePropagation(),e.get('components').length&&n.setOpen(e,!n.isOpen(e))},o.prototype.handleSelect=function(t){null==t||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{selected:!0},{event:t})},o.prototype.handleHover=function(t){null==t||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{hovered:!0})},o.prototype.handleHoverOut=function(t){null==t||t.stopPropagation();var e=this.module,n=this.model;e.setLayerData(n,{hovered:!1})},o.prototype.startSort=function(t){var e,n,o;t.stopPropagation();var i=this,r=i.em,s=i.sorter,a=i.model;if((!t.button||0===t.button)&&s){var l=(null===(n=null===(e=a.delegate)||void 0===e?void 0:e.move)||void 0===n?void 0:n.call(e,a))||a;s.onStart=zT(r),s.onMoveClb=qT(r),s.onEndMove=UT(r,[l]);var c=(null===(o=l.viewLayer)||void 0===o?void 0:o.el)||t.target;s.startSort(c)}},o.prototype.updateStatus=function(){HS.prototype.updateStatus.apply(this,[{avoidHover:!this.config.highlightHover,noExtHl:!0}])},o.prototype.checkChildren=function(){var t=this,e=t.model,n=t.clsNoChild,o=t.$el,i=t.module,r=i.getComponents(e).length,s=o.children(".".concat(this.clsTitleC)).children(".".concat(this.clsTitle)),a=this.cnt;a||(a=o.children('[data-count]').get(0),this.cnt=a),s[r?'removeClass':'addClass'](n),a&&(a.innerHTML=r||''),!r&&i.setOpen(e,!1)},o.prototype.getCaret=function(){return this.caret&&this.caret.length||(this.caret=this.$el.children(".".concat(this.clsTitleC)).find(".".concat(this.clsCaret))),this.caret},o.prototype.setRoot=function(n){var o;n=(0,t.isString)(n)?null===(o=this.em.getWrapper())||void 0===o?void 0:o.find(n)[0]:n;var i=(0,e.getModel)(n);i&&(this.stopListening(),this.model=i,this.initComponent(),this._rendered&&this.render())},o.prototype.updateLayerable=function(){(this.parentView||this).render()},o.prototype.__clearItems=function(){var t;null===(t=this.items)||void 0===t||t.remove()},o.prototype.remove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return u.G7.prototype.remove.apply(this,t),this.__clearItems(),this},o.prototype.render=function(){var t=this,e=t.model,n=t.config,o=t.pfx,i=t.ppfx,r=t.opt,s=t.sorter;this.__clearItems();var a=r.opened,l=r.module,c=r.ItemView,u=!l.__isLayerable(e),h=this.$el.empty(),p=r.level+1;delete this.inputName,this.items=new VT({ItemView:c,collection:e.get('components'),config:n,sorter:s,opened:a,parentView:this,parent:e,level:p,module:l});var d=this.items.render().$el;return n.showWrapper||1!==p?(h.html(this.template(e)),h.find(".".concat(this.clsChildren)).append(d)):h.append(d),e.get('draggable')&&n.sortable||h.children(".".concat(this.clsMove)).remove(),!l.isVisible(e)&&(this.className+=" ".concat(o,"hide")),u&&(this.className+=" ".concat(i,"hidden")),h.attr('class',this.className),this.updateStatus(),this.updateOpening(),this.updateVisibility(),this.__render(),this._rendered=!0,this},o.prototype.__render=function(){var t=this,e=t.model,n=t.config,o={component:e,el:t.el};n.onRender.bind(this)(o),this.em.trigger('layer:render',o)},o}(u.G7);const JT=KT;var tE=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),eE=void 0&&(void 0).__assign||function(){return eE=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},eE.apply(this,arguments)},nE='layer',oE="".concat(nE,":"),iE="".concat(oE,"root"),rE="".concat(oE,"component"),sE="".concat(oE,"custom"),aE={all:nE,root:iE,component:rE,custom:sE},lE={mediaText:''},cE=['open','status','locked','custom-name','components','classes'].map((function(t){return"component:update:".concat(t)})).join(' '),uE=function(n){function o(e){var o=n.call(this,e,'LayerManager',RT)||this;return o.events=aE,(0,t.bindAll)(o,'componentChanged','__onRootChange','__onComponent'),o.model=new w.Z(o,{opened:{}}),o.config.stylePrefix=o.config.pStylePrefix,o}return tE(o,n),o.prototype.onLoad=function(){var t=this,e=this,n=e.em,o=e.config,i=e.model;i.listenTo(n,'component:selected',this.componentChanged),i.on('change:root',this.__onRootChange),i.listenTo(n,cE,this.__onComponent),this.componentChanged(),i.listenToOnce(n,'load',(function(){t.setRoot(o.root),t.__appendTo()}))},o.prototype.setRoot=function(n){var o=this.em.getWrapper(),i=(0,e.isComponent)(n)?n:o;return n&&(0,t.isString)(n)&&(0,e.hasWin)()&&(i=o.find(n)[0]||o),this.model.set('root',i),i},o.prototype.getRoot=function(){return this.model.get('root')},o.prototype.getComponents=function(t){var e=this;return t.components().filter((function(t){return e.__isLayerable(t)}))},o.prototype.setOpen=function(t,e){t.set('open',e)},o.prototype.isOpen=function(t){return!!t.get('open')},o.prototype.setVisible=function(t,e){var n='__prev-display',o=t.getStyle(lE),i=o.display;if(e){var r=t.get(n);delete o.display,r&&(o.display=r,t.unset(n))}else i&&t.set(n,i),o.display='none';t.setStyle(o,lE),this.updateLayer(t),this.em.trigger('component:toggled')},o.prototype.isVisible=function(t){return void 0===(e=t.getStyle(lE))&&(e={}),!(0===(e.display||'').trim().indexOf('none'));var e},o.prototype.setLocked=function(t,e){t.set('locked',e)},o.prototype.isLocked=function(t){return!!t.get('locked')},o.prototype.setName=function(t,e){t.set('custom-name',e)},o.prototype.getName=function(t){return t.getName()},o.prototype.getLayerData=function(t){var e=t.get('status');return{name:t.getName(),open:this.isOpen(t),selected:'selected'===e,hovered:'hovered'===e,visible:this.isVisible(t),locked:this.isLocked(t),components:this.getComponents(t)}},o.prototype.setLayerData=function(t,n,o){var i;void 0===o&&(o={});var r=this.em,s=this.config,a=n.open,l=n.selected,c=n.hovered,u=n.visible,h=n.locked,p=n.name,d=eE({fromLayers:!0},o);if((0,e.isDef)(a)&&this.setOpen(t,a),(0,e.isDef)(l))if(l){r.setSelected(t,d);var f=s.scrollCanvas;f&&(null===(i=t.views)||void 0===i||i.forEach((function(t){return t.scrollIntoView(f)})))}else r.removeSelected(t,d);(0,e.isDef)(c)&&s.showHover&&(c?r.setHovered(t,d):r.setHovered(null,d)),(0,e.isDef)(u)&&u!==this.isVisible(t)&&this.setVisible(t,u),(0,e.isDef)(h)&&this.setLocked(t,h),(0,e.isDef)(p)&&this.setName(t,p)},o.prototype.componentChanged=function(t,e){var n;if(void 0===e&&(e={}),!e.fromLayers){var o=this.em,i=this.config.scrollLayers,r=this.model.get('opened'),s=o.getSelected(),a=null==s?void 0:s.parent();for(var l in r)r[l].set('open',!1),delete r[l];for(;a;)a.set('open',!0),r[a.cid]=a,a=a.parent();if(s&&i){var c=null===(n=s.viewLayer)||void 0===n?void 0:n.el;null==c||c.scrollIntoView(i)}}},o.prototype.getAll=function(){return this.view},o.prototype.render=function(){var t,e,n=this.config,o=this.model,i=JT.extend(n.extend);return this.view=new i({el:null===(t=this.view)||void 0===t?void 0:t.el,ItemView:i,level:0,config:n,opened:o.get('opened'),model:this.getRoot(),module:this}),null===(e=this.view)||void 0===e?void 0:e.render().el},o.prototype.destroy=function(){var t;null===(t=this.view)||void 0===t||t.remove()},o.prototype.__onRootChange=function(){var t,e=this.getRoot();null===(t=this.view)||void 0===t||t.setRoot(e),this.em.trigger(iE,e),this.__trgCustom()},o.prototype.__onComponent=function(t){this.updateLayer(t)},o.prototype.__isLayerable=function(t){var e=t.get('tagName');return(!this.config.hideTextnode||!t.is('textnode')&&'br'!==e)&&t.get('layerable')},o.prototype.__trgCustom=function(t){var e=this,n=e.__ctn,o=e.em,i=e.events;this.__ctn=n||(null==t?void 0:t.container),o.trigger(i.custom,{container:this.__ctn,root:this.getRoot()})},o.prototype.updateLayer=function(t,e){this.em.trigger(rE,t,e)},o}(_);const hE=uE;const pE={assets:[],noAssets:'',stylePrefix:'am-',upload:'',uploadName:'files',headers:{},params:{},credentials:'include',multiUpload:!0,autoAdd:!0,customFetch:void 0,uploadFile:void 0,embedAsBase64:!0,handleAdd:void 0,beforeUpload:void 0,showUrlInput:!0,custom:!1,dropzone:!1,openAssetsOnDrop:!0,dropzoneContent:''};var dE=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fE=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return dE(n,e),n.getDefaults=function(){return(0,t.result)(this.prototype,'defaults')},n.prototype.defaults=function(){return{type:'',src:''}},n.prototype.getType=function(){return this.get('type')},n.prototype.getSrc=function(){return this.get('src')},n.prototype.getFilename=function(){return this.get('src').split('/').pop().split('?').shift()},n.prototype.getExtension=function(){return this.getFilename().split('.').pop()},n}(u.Hn);const gE=fE;fE.prototype.idAttribute='src';var mE=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vE=void 0&&(void 0).__assign||function(){return vE=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},vE.apply(this,arguments)};const yE=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return mE(e,t),e.prototype.defaults=function(){return vE(vE({},gE.getDefaults()),{type:'image',unitDim:'px',height:0,width:0})},e}(gE);var _E=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),OE=function(e){function n(t){var n=e.call(this,t)||this;n.options=t,n.collection=t.collection;var o=t.config||{};n.config=o,n.pfx=o.stylePrefix||'',n.ppfx=o.pStylePrefix||'',n.em=o.em,n.className=n.pfx+'asset',n.listenTo(n.model,'destroy remove',n.remove),n.model.view=n;var i=n.init&&n.init.bind(n);return i&&i(t),n}return _E(n,e),n.prototype.__getBhv=function(){var t=this.em,e=null==t?void 0:t.Assets;return(null==e?void 0:e.__getBehaviour())||{}},n.prototype.template=function(t,e){var n=this.pfx;return"\n      <div class=\"".concat(n,"preview-cont\">\n        ").concat(this.getPreview(),"\n      </div>\n      <div class=\"").concat(n,"meta\">\n        ").concat(this.getInfo(),"\n      </div>\n      <div class=\"").concat(n,"close\" data-toggle=\"asset-remove\">\n        &Cross;\n      </div>\n    ")},n.prototype.updateTarget=function(e){e&&e.set&&(e.set('attributes',(0,t.clone)(e.get('attributes'))),e.set('src',this.model.get('src')))},n.prototype.getPreview=function(){return''},n.prototype.getInfo=function(){return''},n.prototype.render=function(){var t=this.el;return t.innerHTML=this.template(this,this.model),t.className=this.className,this},n}(u.G7);const bE=OE;var wE=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),xE=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},SE=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return wE(n,e),n.prototype.getPreview=function(){var t=this,e=t.pfx,n=t.ppfx,o=t.model.get('src');return i(PE||(PE=xE(["\n      <div class=\"","preview\" style=\"background-image: url('","');\"></div>\n      <div class=\"","preview-bg ","checker-bg\"></div>\n    "],["\n      <div class=\"","preview\" style=\"background-image: url('","');\"></div>\n      <div class=\"","preview-bg ","checker-bg\"></div>\n    "])),e,o,e,n)},n.prototype.getInfo=function(){var t=this.pfx,e=this.model,n=e.get('name'),o=e.get('width'),r=e.get('height'),s=e.get('unitDim'),a=o&&r?"".concat(o,"x").concat(r).concat(s):'';return n=n||e.getFilename(),i(CE||(CE=xE(["\n      <div class=\"","name\">","</div>\n      <div class=\"","dimensions\">","</div>\n    "],["\n      <div class=\"","name\">","</div>\n      <div class=\"","dimensions\">","</div>\n    "])),t,n,t,a)},n.prototype.init=function(t){var e=this.pfx;this.className+=" ".concat(e,"asset-image")},n.prototype.onClick=function(){var e=this.model,n=this.pfx,o=this.__getBhv().select,i=this.config.onClick,r=this.collection;r.trigger('deselectAll'),this.$el.addClass(n+'highlight'),(0,t.isFunction)(o)?o(e,!1):(0,t.isFunction)(i)?i(e):this.updateTarget(r.target)},n.prototype.onDblClick=function(){var e=this.em,n=this.model,o=this.__getBhv().select,i=this.config.onDblClick,r=this.collection,s=r.target,a=r.onSelect;(0,t.isFunction)(o)?o(n,!0):(0,t.isFunction)(i)?i(n):(this.updateTarget(s),null==e||e.Modal.close()),(0,t.isFunction)(a)&&a(n)},n.prototype.onRemove=function(t){t.stopImmediatePropagation(),this.model.collection.remove(this.model)},n}(bE);const kE=SE;var PE,CE;SE.prototype.events={'click [data-toggle=asset-remove]':'onRemove',click:'onClick',dblclick:'onDblClick'};var TE=void 0&&(void 0).__assign||function(){return TE=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},TE.apply(this,arguments)},EE={types:[],initialize:function(t,e){var n=this;void 0===e&&(e={});var o=e.em;this.em=o,this.opts=e,this.model=function(t,e){var i,r,s;if(void 0===t&&(t={}),void 0===e&&(e={}),t&&t.type){var a=n.getBaseType();i=(s=n.getType(t.type))?s.model:a.model,r=s?s.view:a.view}else{var l=n.recognizeType(t);i=(s=l.type).model,r=s.view,t=l.attributes}var c=new i(t,TE(TE({},e),{em:o}));return c.typeView=r,c};var i=this.init&&this.init.bind(this);i&&i()},recognizeType:function(t){for(var e=this.getTypes(),n=0;n<e.length;n++){var o=e[n],i=o.isType(t);if(i='boolean'==typeof i&&i?{type:o.id}:i)return{type:o,attributes:i}}return{type:this.getBaseType(),attributes:t}},getBaseType:function(){var t=this.getTypes();return t[t.length-1]},getTypes:function(){return this.types},getType:function(t){for(var e=this.getTypes(),n=0;n<e.length;n++){var o=e[n];if(o.id===t)return o}},addType:function(e,n){var o=this.getType(e),i=this.getBaseType(),r=o?o.model:i.model,s=o?o.view:i.view,a=n.model,l=n.view,c=n.isType;a=a instanceof u.Hn||(0,t.isFunction)(a)?a:r.extend(a||{}),l=l instanceof u.G7||(0,t.isFunction)(l)?l:s.extend(l||{}),!this.extendViewApi||n.model||n.view||(l=l.extend(n)),o?(o.model=a,o.view=l,o.isType=c||o.isType):(n.id=e,n.model=a,n.view=l,n.isType=c||function(t){if(t&&t.type==e)return!0},this.getTypes().unshift(n))}};const QE=EE;var AE=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return AE(e,t),e}(u.FE.extend(QE));const jE=$E;$E.prototype.types=[{id:'image',model:yE,view:kE,isType:function(t){return'string'==typeof t?{type:'image',src:t}:t}}];var RE=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ZE=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;n.options=e,n.config=e.config,n.pfx=n.config.stylePrefix||'',n.ppfx=n.config.pStylePrefix||'',n.em=n.config.em;var o=n.collection;return n.listenTo(o,'reset',n.renderAssets),n.listenTo(o,'add',n.addToAsset),n.listenTo(o,'remove',n.removedAsset),n.listenTo(o,'deselectAll',n.deselectAll),n}return RE(e,t),e.prototype.template=function(t){var e=t.pfx,n=t.ppfx,o=t.em,i='';return this.config.showUrlInput&&(i="\n          <form class=\"".concat(e,"add-asset\">\n            <div class=\"").concat(n,"field ").concat(e,"add-field\">\n              <input placeholder=\"").concat(null==o?void 0:o.t('assetManager.inputPlh'),"\"/>\n            </div>\n            <button class=\"").concat(n,"btn-prim\">").concat(null==o?void 0:o.t('assetManager.addButton'),"</button>\n            <div style=\"clear:both\"></div>\n          </form>\n      ")),"\n    <div class=\"".concat(e,"assets-cont\">\n      <div class=\"").concat(e,"assets-header\">\n        ").concat(i,"\n      </div>\n      <div class=\"").concat(e,"assets\" data-el=\"assets\"></div>\n      <div style=\"clear:both\"></div>\n    </div>\n    ")},e.prototype.handleSubmit=function(t){t.preventDefault();var e=this.getAddInput(),n=e&&e.value.trim(),o=this.config.handleAdd;if(n){e.value='';var i=this.getAssetsEl();i&&(i.scrollTop=0),o?o.bind(this)(n):this.options.globalCollection.add(n,{at:0})}},e.prototype.getAssetsEl=function(){return this.el.querySelector(".".concat(this.pfx,"assets"))},e.prototype.getAddInput=function(){return this.inputUrl&&this.inputUrl.value||(this.inputUrl=this.el.querySelector(".".concat(this.pfx,"add-asset input"))),this.inputUrl},e.prototype.removedAsset=function(t){this.collection.length||this.toggleNoAssets()},e.prototype.addToAsset=function(t){1==this.collection.length&&this.toggleNoAssets(!0),this.addAsset(t)},e.prototype.addAsset=function(t,e){void 0===e&&(e=null);var n=e,o=this.collection,i=this.config,r=new t.typeView({model:t,collection:o,config:i}).render().el;if(n)n.appendChild(r);else{var s=this.getAssetsEl();s&&s.insertBefore(r,s.firstChild)}return r},e.prototype.toggleNoAssets=function(t){void 0===t&&(t=!1);var e=this.$el.find(".".concat(this.pfx,"assets"));if(t)e.empty();else{var n=this.config.noAssets;n&&e.append(n)}},e.prototype.deselectAll=function(){var t=this.pfx;this.$el.find(".".concat(t,"highlight")).removeClass("".concat(t,"highlight"))},e.prototype.renderAssets=function(){var t=this,e=document.createDocumentFragment(),n=this.$el.find(".".concat(this.pfx,"assets"));n.empty(),this.toggleNoAssets(!!this.collection.length),this.collection.each((function(n){return t.addAsset(n,e)})),n.append(e)},e.prototype.render=function(){var t=this.options.fu.render().el;return this.$el.empty(),this.$el.append(t).append(this.template(this)),this.el.className="".concat(this.ppfx,"asset-manager"),this.renderAssets(),this},e}(u.G7);const ME=ZE;ZE.prototype.events={submit:'handleSubmit'};var VE=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),DE=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},IE=function(t){function e(n){void 0===n&&(n={});var o=t.call(this,n)||this;o.options=n;var i=n.config||{};o.module=n.module,o.config=i,o.em=o.config.em,o.pfx=i.stylePrefix||'',o.ppfx=i.pStylePrefix||'',o.target=o.options.globalCollection||{},o.uploadId=o.pfx+'uploadFile',o.disabled=void 0!==i.disableUpload?i.disableUpload:!i.upload&&!i.embedAsBase64,o.multiUpload=void 0===i.multiUpload||i.multiUpload;var r=i.uploadFile;return r?o.uploadFile=r.bind(o):!i.upload&&i.embedAsBase64&&(o.uploadFile=e.embedAsBase64),o.delegateEvents(),o}return VE(e,t),e.prototype.template=function(t){var e=t.pfx,n=t.title,o=t.uploadId,r=t.disabled,s=t.multiUpload;return i(WE||(WE=DE(["\n      <form>\n        <div id=\"","title\">","</div>\n        <input\n          data-input\n          type=\"file\"\n          id=\"","\"\n          name=\"file\"\n          accept=\"*/*\"\n          ","\n          ","\n        />\n        <div style=\"clear:both;\"></div>\n      </form>\n    "],["\n      <form>\n        <div id=\"","title\">","</div>\n        <input\n          data-input\n          type=\"file\"\n          id=\"","\"\n          name=\"file\"\n          accept=\"*/*\"\n          ","\n          ","\n        />\n        <div style=\"clear:both;\"></div>\n      </form>\n    "])),e,n,o,r?'disabled':'',s?'multiple':'')},e.prototype.events=function(){return{'change [data-input]':'uploadFile'}},e.prototype.onUploadStart=function(){var t=this.module;t&&t.__propEv('asset:upload:start')},e.prototype.onUploadEnd=function(t){var e=this.$el,n=this.module;n&&n.__propEv('asset:upload:end',t);var o=e.find('input');o&&o.val('')},e.prototype.onUploadError=function(t){var e=this.module;console.error(t),this.onUploadEnd(t),e&&e.__propEv('asset:upload:error',t)},e.prototype.onUploadResponse=function(t,e){var n,o=this,i=o.module,r=o.config,s=o.target;try{n='string'==typeof t?JSON.parse(t):t}catch(e){n=t}i&&i.__propEv('asset:upload:response',n),r.autoAdd&&s&&s.add(n.data,{at:0}),this.onUploadEnd(t),null==e||e(n)},e.prototype.uploadFile=function(t,e){var n=this,o=t.dataTransfer?t.dataTransfer.files:t.target.files,i=this.config,r=i.beforeUpload;if(!1!==(r&&r(o))){var s=new FormData,a=i.params,l=i.customFetch,c=i.fetchOptions;for(var u in a)s.append(u,a[u]);if(this.multiUpload)for(var h=0;h<o.length;h++)s.append("".concat(i.uploadName,"[]"),o[h]);else o.length&&s.append(i.uploadName,o[0]);var p=i.upload,d=i.headers,f='X-Requested-With';if(void 0===d[f]&&(d[f]='XMLHttpRequest'),p){this.onUploadStart();var g={method:'post',credentials:i.credentials||'include',headers:d,body:s},m=(null==c?void 0:c(g))||g;return(l?l(p,m):hT(p,m).then((function(t){return 1==(t.status/200|0)?t.text():t.text().then((function(t){return Promise.reject(t)}))}))).then((function(t){return n.onUploadResponse(t,e)})).catch((function(t){return n.onUploadError(t)}))}}},e.prototype.initDrop=function(){var t=this;if(!this.uploadForm){this.uploadForm=this.$el.find('form').get(0);var e=this.uploadForm;'draggable'in e&&(this.uploadForm.ondragover=function(){return e.className=t.pfx+'hover',!1},this.uploadForm.ondragleave=function(){return e.className='',!1},this.uploadForm.ondrop=function(n){e.className='',n.preventDefault(),t.uploadFile(n)})}},e.prototype.initDropzone=function(t){var e=this,n=0,o=this.config,i=t.model,r=t.el,s=i.Editor,a=i.Canvas.getBody(),l=this.ppfx,c="".concat(l,"dropzone-active"),u="".concat(l,"dropzone"),h=function(){r.className=r.className.replace(c,'').trim(),n=0},p=function(){return n||(r.className+=" ".concat(c),n=1),!1},d=function(){return h(),!1},f=function(t){if(h(),t.preventDefault(),t.stopPropagation(),e.uploadFile(t),o.openAssetsOnDrop&&s){var n=s.getSelected();s.runCommand('open-assets',{target:n,onSelect:function(){s.Modal.close(),s.AssetManager.setTarget(null)}})}return!1};t.$el.append("<div class=\"".concat(u,"\">").concat(o.dropzoneContent,"</div>")),h(),'draggable'in r&&[r,a].forEach((function(t){t.ondragover=p,t.ondragleave=d,t.ondrop=f}))},e.prototype.render=function(){var t=this,e=t.$el,n=t.pfx,o=t.em;return e.html(this.template({title:o&&o.t('assetManager.uploadTitle'),uploadId:this.uploadId,disabled:this.disabled,multiUpload:this.multiUpload,pfx:n})),this.initDrop(),e.attr('class',n+'file-uploader'),this},e.embedAsBase64=function(t,e){var n=this,o=t.dataTransfer?t.dataTransfer.files:t.target.files,i={data:[]};if(FileReader){for(var r=[],s=/^(.+)\/(.+)$/,a=function(t){var e=new Promise((function(e,n){var o=new FileReader;o.addEventListener('load',(function(i){var r,a=t.name,l=s.exec(t.type);if('image'===(r=l?l[1]:t.type)){var c={src:o.result,name:a,type:r,height:0,width:0},u=new Image;u.addEventListener('error',(function(t){n(t)})),u.addEventListener('load',(function(){c.height=u.height,c.width=u.width,e(c)})),u.src=c.src}else e(r?{src:o.result,name:a,type:r}:o.result)})),o.addEventListener('error',(function(t){n(t)})),o.addEventListener('abort',(function(t){n('Aborted')})),o.readAsDataURL(t)}));r.push(e)},l=0,c=o;l<c.length;l++){a(c[l])}return Promise.all(r).then((function(t){i.data=t,n.onUploadResponse(i,e)}),(function(t){n.onUploadError(t)}))}this.onUploadError(new Error('Unsupported platform, FileReader is not defined'))},e}(u.G7);const NE=IE;var WE,XE=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),LE=void 0&&(void 0).__assign||function(){return LE=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},LE.apply(this,arguments)},YE=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},zE='asset',qE="".concat(zE,":"),UE="".concat(qE,"select"),BE="".concat(qE,"update"),FE="".concat(qE,"add"),GE="".concat(qE,"remove"),HE="".concat(GE,":before"),KE="".concat(qE,"custom"),JE="".concat(qE,"open"),tQ="".concat(qE,"close"),eQ="".concat(qE,"upload"),nQ="".concat(eQ,":start"),oQ="".concat(eQ,":end"),iQ="".concat(eQ,":error"),rQ="".concat(eQ,":response"),sQ='open-assets',aQ={all:zE,select:UE,update:BE,add:FE,remove:GE,removeBefore:HE,custom:KE,open:JE,close:tQ,uploadStart:nQ,uploadEnd:oQ,uploadError:iQ,uploadResponse:rQ},lQ=function(e){function n(n){var o=e.call(this,n,'AssetManager',new jE([],n),aQ,pE)||this;o.storageKey='assets',o.Asset=gE,o.Assets=jE;var i=o,r=i.all,s=i.config;o.assetsVis=new jE([]);var a=s.pStylePrefix;return a&&(s.stylePrefix="".concat(a).concat(s.stylePrefix)),r.on('add',(function(t){return o.getAllVisible().add(t)})),r.on('remove',(function(t){return o.getAllVisible().remove(t)})),o.__onAllEvent=(0,t.debounce)((function(){return o.__trgCustom()}),0),o}return XE(n,e),n.prototype.__propEv=function(t){for(var e,n,o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];(e=this.em).trigger.apply(e,YE([t],o,!1)),(n=this.getAll()).trigger.apply(n,YE([t],o,!1))},n.prototype.__trgCustom=function(){var t=this.__getBehaviour(),e=this.getConfig().custom;(t.container||e.open)&&this.em.trigger(this.events.custom,this.__customData())},n.prototype.__customData=function(){var e=this,n=this.__getBehaviour();return{am:this,open:this.isOpen(),assets:this.getAll().models,types:n.types||[],container:n.container,close:function(){return e.close()},remove:function(t,n){return e.remove(t,n)},select:function(o,i){var r=e.add(o);(0,t.isFunction)(n.select)&&n.select(r,i)},options:n.options||{}}},n.prototype.open=function(t){void 0===t&&(t={}),this.em.Commands.run(sQ,LE({types:['image'],select:function(){}},t))},n.prototype.close=function(){this.em.Commands.stop(sQ)},n.prototype.isOpen=function(){var t=this.em.Commands;return!!(null==t?void 0:t.isActive(sQ))},n.prototype.add=function(t,e){return void 0===e&&(e={}),void 0===e.at&&(e.at=0),this.all.add(t,e)},n.prototype.get=function(t){return this.all.where({src:t})[0]||null},n.prototype.getAll=function(){return this.all},n.prototype.getAllVisible=function(){return this.assetsVis},n.prototype.remove=function(t,e){return this.__remove(t,e)},n.prototype.store=function(){return this.getProjectData()},n.prototype.load=function(t){return this.loadProjectData(t)},n.prototype.getContainer=function(){var t;return this.__getBehaviour().container||(null===(t=this.am)||void 0===t?void 0:t.el)},n.prototype.getAssetsEl=function(){var t;return null===(t=this.am)||void 0===t?void 0:t.el.querySelector('[data-el=assets]')},n.prototype.render=function(t){if(!this.getConfig().custom){var e=t||this.getAll().models;if(!this.am){var n=this.__viewParams();n.fu=this.FileUploader(),this.am=new ME(LE({},n)),this.am.render()}return this.assetsVis.reset(e),this.getContainer()}},n.prototype.__viewParams=function(){return{collection:this.assetsVis,globalCollection:this.all,config:this.config,module:this,fu:void 0}},n.prototype.addType=function(t,e){this.getAll().addType(t,e)},n.prototype.getType=function(t){return this.getAll().getType(t)},n.prototype.getTypes=function(){return this.getAll().getTypes()},n.prototype.AssetsView=function(){return this.am},n.prototype.FileUploader=function(){return this.fu||(this.fu=new NE(this.__viewParams())),this.fu},n.prototype.onLoad=function(){var t=this;this.getAll().reset(this.config.assets);var e=this.em,n=this.events;e.on("run:".concat(sQ),(function(){return t.__propEv(n.open)})),e.on("stop:".concat(sQ),(function(){return t.__propEv(n.close)}))},n.prototype.postRender=function(t){var e;this.config.dropzone&&(null===(e=this.fu)||void 0===e||e.initDropzone(t))},n.prototype.setTarget=function(t){this.assetsVis.target=t},n.prototype.onSelect=function(t){this.assetsVis.onSelect=t},n.prototype.onClick=function(t){this.config.onClick=t},n.prototype.onDblClick=function(t){this.config.onDblClick=t},n.prototype.__behaviour=function(t){return void 0===t&&(t={}),this._bhv=LE(LE({},this._bhv||{}),t)},n.prototype.__getBehaviour=function(t){return void 0===t&&(t={}),this._bhv||{}},n.prototype.destroy=function(){var t,e;this.all.stopListening(),this.all.reset(),this.assetsVis.stopListening(),this.assetsVis.reset(),null===(t=this.fu)||void 0===t||t.remove(),null===(e=this.am)||void 0===e||e.remove(),this._bhv={}},n}(O);const cQ=lQ;var uQ={placeholder:'eg. Text here'};const hQ={locale:'en',localeFallback:'en',detectLocale:!0,debug:!1,messages:{en:{assetManager:{addButton:'Add image',inputPlh:'http://path/to/the/image.jpg',modalTitle:'Select Image',uploadTitle:'Drop files here or click to upload'},blockManager:{labels:{},categories:{}},domComponents:{names:{'':'Box',wrapper:'Body',text:'Text',comment:'Comment',image:'Image',video:'Video',label:'Label',link:'Link',map:'Map',tfoot:'Table foot',tbody:'Table body',thead:'Table head',table:'Table',row:'Table row',cell:'Table cell'}},deviceManager:{device:'Device',devices:{desktop:'Desktop',tablet:'Tablet',mobileLandscape:'Mobile Landscape',mobilePortrait:'Mobile Portrait'}},panels:{buttons:{titles:{preview:'Preview',fullscreen:'Fullscreen','sw-visibility':'View components','export-template':'View code','open-sm':'Open Style Manager','open-tm':'Settings','open-layers':'Open Layer Manager','open-blocks':'Open Blocks'}}},selectorManager:{label:'Classes',selected:'Selected',emptyState:'- State -',states:{hover:'Hover',active:'Click','nth-of-type(2n)':'Even/Odd'}},styleManager:{empty:'Select an element before using Style Manager',layer:'Layer',fileButton:'Images',sectors:{general:'General',layout:'Layout',typography:'Typography',decorations:'Decorations',extra:'Extra',flex:'Flex',dimension:'Dimension'},properties:{'text-shadow-h':'X','text-shadow-v':'Y','text-shadow-blur':'Blur','text-shadow-color':'Color','box-shadow-h':'X','box-shadow-v':'Y','box-shadow-blur':'Blur','box-shadow-spread':'Spread','box-shadow-color':'Color','box-shadow-type':'Type','margin-top-sub':'Top','margin-right-sub':'Right','margin-bottom-sub':'Bottom','margin-left-sub':'Left','padding-top-sub':'Top','padding-right-sub':'Right','padding-bottom-sub':'Bottom','padding-left-sub':'Left','border-width-sub':'Width','border-style-sub':'Style','border-color-sub':'Color','border-top-left-radius-sub':'Top Left','border-top-right-radius-sub':'Top Right','border-bottom-right-radius-sub':'Bottom Right','border-bottom-left-radius-sub':'Bottom Left','transform-rotate-x':'Rotate X','transform-rotate-y':'Rotate Y','transform-rotate-z':'Rotate Z','transform-scale-x':'Scale X','transform-scale-y':'Scale Y','transform-scale-z':'Scale Z','transition-property-sub':'Property','transition-duration-sub':'Duration','transition-timing-function-sub':'Timing','background-image-sub':'Image','background-repeat-sub':'Repeat','background-position-sub':'Position','background-attachment-sub':'Attachment','background-size-sub':'Size'}},traitManager:{empty:'Select an element before using Trait Manager',label:'Component settings',traits:{labels:{},attributes:{id:uQ,alt:uQ,title:uQ,href:{placeholder:'eg. https://google.com'}},options:{target:{false:'This window',_blank:'New window'}}}},storageManager:{recover:'Do you want to recover unsaved changes?'}}},messagesAdd:void 0};var pQ=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),dQ=function(n){function o(t){var e=n.call(this,t,'I18n',hQ)||this,o=e.config.messagesAdd;return o&&e.addMessages(o),e.config.detectLocale&&(e.config.locale=e._localLang()),e}return pQ(o,n),o.prototype.setLocale=function(t){var e=this.em,n=this.config,o={value:t,valuePrev:n.locale};return e&&e.trigger('i18n:locale',o),n.locale=t,this},o.prototype.getLocale=function(){return this.config.locale},o.prototype.getMessages=function(t,e){void 0===e&&(e={});var n=this.config.messages;return t&&!n[t]&&this._debug("'".concat(t,"' i18n lang not found"),e),t?n[t]:n},o.prototype.setMessages=function(t){var e=this.em;return this.config.messages=t,e&&e.trigger('i18n:update',t),this},o.prototype.addMessages=function(t){var n=this.em,o=this.config.messages;return n&&n.trigger('i18n:add',t),this.setMessages((0,e.deepMerge)(o,t)),this},o.prototype.t=function(e,n){void 0===n&&(n={});var o=this.config,i=n.params||{},r=n.l||this.getLocale(),s=n.lFlb||o.localeFallback,a=this._getMsg(e,r,n);return a||(a=this._getMsg(e,s,n)),!a&&this._debug("'".concat(e,"' i18n key not found in '").concat(r,"' lang"),n),a=a&&(0,t.isString)(a)?this._addParams(a,i):a},o.prototype._localLang=function(){var t=(0,e.hasWin)()&&window.navigator||{},n=t.language||t.userLanguage;return n?n.split('-')[0]:'en'},o.prototype._addParams=function(t,e){var n=new RegExp('{([\\w\\d-]*)}','g');return t.replace(n,(function(t,n){return e[n]||''})).trim()},o.prototype._getMsg=function(e,n,o){void 0===o&&(o={});var i=this.getMessages(n,o);if(i){var r=i[e];return!r&&e.indexOf('.')>0&&(r=e.split('.').reduce((function(e,n){if(!(0,t.isUndefined)(e))return e[n]}),i)),r}},o.prototype._debug=function(t,e){void 0===e&&(e={});var n=this.em,o=this.config;(e.debug||o.debug)&&n&&n.logWarning(t)},o.prototype.destroy=function(){},o}(_);const fQ=dQ;var gQ=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),mQ=void 0&&(void 0).__assign||function(){return mQ=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},mQ.apply(this,arguments)},vQ=function(){},yQ={id:'sorter-target',type:We.q.Target},_Q=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return gQ(o,n),o.prototype.initialize=function(e){void 0===e&&(e={}),this.opt=e||{},(0,t.bindAll)(this,'startSort','onMove','endMove','rollback','updateOffset','moveDragHelper');var n=e||{};this.elT=0,this.elL=0,this.borderOffset=n.borderOffset||10;var o=n.container;this.el='string'==typeof o?document.querySelector(o):o,this.$el=(0,l["default"])(this.el),this.containerSel=n.containerSel||'div',this.itemSel=n.itemSel||'div',this.draggable=n.draggable||!0,this.nested=!!n.nested,this.pfx=n.pfx||'',this.ppfx=n.ppfx||'',this.freezeClass=n.freezeClass||this.pfx+'freezed',this.onStart=n.onStart||vQ,this.onEndMove=n.onEndMove,this.customTarget=n.customTarget,this.onEnd=n.onEnd,this.direction=n.direction||'v',this.onMoveClb=n.onMove,this.relative=n.relative||!1,this.ignoreViewChildren=!!n.ignoreViewChildren,this.plh=n.placer,this.wmargin=n.wmargin||0,this.offTop=n.offsetTop||0,this.offLeft=n.offsetLeft||0,this.document=n.document||document,this.em=n.em,this.canvasRelative=!!n.canvasRelative,this.selectOnEnd=!n.avoidSelectOnEnd,this.scale=n.scale,this.em&&this.em.on&&(this.em.on('change:canvasOffset',this.updateOffset),this.updateOffset())},o.prototype.getScale=function(){return(0,t.result)(this,'scale')||1},o.prototype.getContainerEl=function(t){if(t&&(this.el=t),!this.el){var e=this.opt.container;this.el='string'==typeof e?document.querySelector(e):e,this.$el=(0,l["default"])(this.el)}return this.el},o.prototype.getDocuments=function(t){var e=this.em,n=t?t.ownerDocument:null==e?void 0:e.Canvas.getBody().ownerDocument,o=[document];return n&&o.push(n),o},o.prototype.updateOffset=function(){var t,e=(null===(t=this.em)||void 0===t?void 0:t.get('canvasOffset'))||{};this.offTop=e.top,this.offLeft=e.left},o.prototype.setDropContent=function(t){delete this.dropModel,this.dropContent=t},o.prototype.updateTextViewCursorPosition=function(t){var e=this.em;if(e){var n=e.Canvas,o=n.getDocument(),i=null;if(o.caretRangeFromPoint){var r=(0,ue.VB)(t);i=o.caretRangeFromPoint(r.clientX,r.clientY)}else t.rangeParent&&(i=o.createRange()).setStart(t.rangeParent,t.rangeOffset);var s=n.getWindow().getSelection();n.getFrameEl().focus(),null==s||s.removeAllRanges(),i&&(null==s||s.addRange(i)),this.setContentEditable(this.activeTextModel,!0)}},o.prototype.setContentEditable=function(t,e){if(t){var n=t.getEl();n.contentEditable!=e&&(n.contentEditable=e)}},o.prototype.toggleSortCursor=function(t){var e=this.em,n=null==e?void 0:e.Canvas;n&&(t?n.startAutoscroll():n.stopAutoscroll())},o.prototype.setDragHelper=function(t,e){for(var n=e||'',o=t.cloneNode(!0),i=t.getBoundingClientRect(),r=getComputedStyle(t),s='',a=0;a<r.length;a++){var c=r[a];s+="".concat(c,":").concat(r.getPropertyValue(c),";")}(document.body.appendChild(o),o.className+=" ".concat(this.pfx,"bdrag"),o.setAttribute('style',s),this.dragHelper=o,o.style.width="".concat(i.width,"px"),o.style.height="".concat(i.height,"px"),n&&this.moveDragHelper(n),this.em)&&(0,l["default"])(this.em.Canvas.getBody().ownerDocument).off('mousemove',this.moveDragHelper).on('mousemove',this.moveDragHelper);(0,l["default"])(document).off('mousemove',this.moveDragHelper).on('mousemove',this.moveDragHelper)},o.prototype.moveDragHelper=function(t){var e=t.target.ownerDocument;if(this.dragHelper&&e){var n=t.pageY,o=t.pageX,i=0,r=0,s=(e.defaultView||e.parentWindow).frameElement,a=this.dragHelper.style;if(s){var l=s.getBoundingClientRect();i=l.top+document.documentElement.scrollTop,r=l.left+document.documentElement.scrollLeft,n=t.clientY,o=t.clientX}a.top=n+i+'px',a.left=o+r+'px'}},o.prototype.matches=function(t,n){return e.matches.call(t,n)},o.prototype.closest=function(t,e){if(t)for(var n=t.parentNode;n&&1===n.nodeType;){if(this.matches(n,e))return n;n=n.parentNode}},o.prototype.offset=function(t){var e=t.getBoundingClientRect();return{top:e.top+document.body.scrollTop,left:e.left+document.body.scrollLeft}},o.prototype.createPlaceholder=function(){var t=this.pfx,e=document.createElement('div'),n=document.createElement('div');return e.className=t+'placeholder',e.style.display='none',e.style.pointerEvents='none',n.className=t+'placeholder-int',e.appendChild(n),e},o.prototype.startSort=function(t,e){var n,o;void 0===e&&(e={});var i,r=this,s=r.em,a=r.itemSel,l=r.containerSel,c=r.plh,u=this.getContainerEl(e.container),h=this.getDocuments(t);delete this.dropModel,delete this.target,delete this.prevTarget,this.moved=!1,t&&!this.matches(t,"".concat(a,", ").concat(l))&&(t=this.closest(t,a)),this.sourceEl=t,c||(this.plh=this.createPlaceholder(),u.appendChild(this.plh)),t&&((null==(i=this.getSourceModel(t))?void 0:i.set)&&i.set('status','freezed'),this.srcModel=i),(0,ue.on)(u,'mousemove dragover',this.onMove),(0,ue.on)(h,'mouseup dragend touchend',this.endMove),(0,ue.on)(h,'keydown',this.rollback),this.onStart({sorter:this,target:i,parent:i&&(null===(n=i.parent)||void 0===n?void 0:n.call(i)),index:i&&(null===(o=i.index)||void 0===o?void 0:o.call(i))}),null==s||s.clearSelection(),this.toggleSortCursor(!0),null==s||s.trigger('sorter:drag:start',t,i)},o.prototype.getTargetModel=function(t){var e=t||this.target;return(0,l["default"])(e).data('model')},o.prototype.getSourceModel=function(t,e){var n=this,o=void 0===e?{}:e,i=o.target,r=o.avoidChildren,s=void 0===r?1:r,a=this.em,c=this.sourceEl,u=t||c,h=this.dropModel,p=this.dropContent,d=function(t){return t&&i&&t.opt&&t.opt.avoidChildren&&n.isTextableActive(t,i)};if(p&&a){if(d(h)&&(h=void 0),!h){var f=a.Components.getComponents(),g={avoidChildren:s,avoidStore:1,avoidUpdateStyle:1},m=f.add(p,mQ(mQ({},g),{temporary:!0}));if(h=(h=f.remove(m,g))instanceof Array?h[0]:h,this.dropModel=h,d(h))return this.getSourceModel(u,{target:i,avoidChildren:0})}return h}return u&&(0,l["default"])(u).data('model')},o.prototype.selectTargetModel=function(t,e){if(!(t instanceof u.FE||e&&e===t)){var n=this.targetModel;if(n&&n!==this.srcModel&&n.set('status',''),null==t?void 0:t.set){var o=this.em.Canvas;[We.q.Select,We.q.Hover,We.q.Spacing].forEach((function(t){return o.removeSpots({type:t})})),o.addSpot(mQ(mQ({},yQ),{component:t})),t.set('status','selected-parent'),this.targetModel=t}}},o.prototype.onMove=function(e){var n=e,o=this,i=o.em,r=o.onMoveClb,s=o.plh,a=o.customTarget;this.moved=!0;var c=s.style.display;c&&'none'!==c||(s.style.display='block');var u=this.offset(this.el);this.elT=this.wmargin?Math.abs(u.top):u.top,this.elL=this.wmargin?Math.abs(u.left):u.left;var h=e.pageY-this.elT+this.el.scrollTop,p=e.pageX-this.elL+this.el.scrollLeft;if(this.canvasRelative&&i){var d=i.Canvas.getMouseRelativeCanvas(e,{noScroll:1});p=d.x,h=d.y}this.rX=p,this.rY=h,this.eventMove=e;var f=this.getSourceModel(),g=a?a({sorter:this,event:e}):e.target,m=this.dimsFromTarget(g,p,h),v=this.target,y=v&&this.getTargetModel(v);if(this.selectTargetModel(y,f),y||(s.style.display='none'),v){this.lastDims=m;var _=this.findPosition(m,p,h);this.isTextableActive(f,y)?(this.activeTextModel=y,s.style.display='none',this.lastPos=_,this.updateTextViewCursorPosition(n)):(this.disableTextable(),delete this.activeTextModel,this.lastPos&&this.lastPos.index==_.index&&this.lastPos.method==_.method||(this.movePlaceholder(this.plh,m,_,this.prevTargetDim),this.$plh||(this.$plh=(0,l["default"])(this.plh)),this.canvasRelative||(this.offTop&&this.$plh.css('top','+='+this.offTop+'px'),this.offLeft&&this.$plh.css('left','+='+this.offLeft+'px')),this.lastPos=_)),(0,t.isFunction)(r)&&r({event:e,target:f,parent:y,index:_.index+('after'==_.method?1:0)}),i&&i.trigger('sorter:drag',{target:v,targetModel:y,sourceModel:f,dims:m,pos:_,x:p,y:h})}},o.prototype.isTextableActive=function(t,e){var n;return(null===(n=null==t?void 0:t.get)||void 0===n?void 0:n.call(t,'textable'))&&(null==e?void 0:e.isInstanceOf('text'))},o.prototype.disableTextable=function(){var t=this.activeTextModel;null==t||t.getView().disableEditing(),this.setContentEditable(t,!1)},o.prototype.isInFlow=function(t,e){if(!t)return!1;e=e||document.body;var n=t;return n.offsetHeight,!!this.styleInFlow(n,e)},o.prototype.styleInFlow=function(t,e){if(!(0,ue.BM)(t)){var n=t.style||{},o=(0,l["default"])(t),i=e&&(0,l["default"])(e);if(!n.overflow||'visible'===n.overflow){var r=o.css('float');if(!(r&&'none'!==r||i&&'flex'==i.css('display')&&'column'!==i.css('flex-direction'))){switch(n.position){case'static':case'relative':case'':break;default:return}switch(t.tagName){case'TR':case'TBODY':case'THEAD':case'TFOOT':return!0}switch(o.css('display')){case'block':case'list-item':case'table':case'flex':case'grid':return!0}}}}},o.prototype.validTarget=function(e,n){var o=this.getTargetModel(e),i=this.getSourceModel(n,{target:o}),r={valid:!0,src:n=i&&i.view&&i.view.el,srcModel:i,trg:e=o&&o.view&&o.view.el,trgModel:o,draggable:!1,droppable:!1,dragInfo:'',dropInfo:''};if(!n||!e)return r.valid=!1,r;var s=i.get('draggable');if((0,t.isFunction)(s)){var a=s(i,o);r.dragInfo=a,r.draggable=a,s=a}else s=s instanceof Array?s.join(', '):s,r.dragInfo=s,s=(0,t.isString)(s)?this.matches(e,s):s,r.draggable=s;var l=o.get('droppable');if((0,t.isFunction)(l)){a=l(i,o);r.droppable=a,r.dropInfo=a,l=a}else l=(l=l instanceof u.FE?1:l)instanceof Array?l.join(', '):l,r.dropInfo=l,l=(0,t.isString)(l)?this.matches(n,l):l,l=s&&this.isTextableActive(i,o)?1:l,r.droppable=l;return l&&s||(r.valid=!1),r},o.prototype.dimsFromTarget=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var o=this.em,i=[];if(!t)return i;if(this.matches(t,"".concat(this.itemSel,", ").concat(this.containerSel))||(t=this.closest(t,this.itemSel)),this.draggable instanceof Array&&(t=this.closest(t,this.draggable.join(','))),!t)return i;if(this.prevTarget&&this.prevTarget!=t&&delete this.prevTarget,!this.prevTarget){this.targetP=this.closest(t,this.containerSel);var r=this.validTarget(t);if(o&&o.trigger('sorter:drag:validation',r),!r.valid&&this.targetP)return this.dimsFromTarget(this.targetP,e,n);this.prevTarget=t,this.prevTargetDim=this.getDim(t),this.cacheDimsP=this.getChildrenDim(this.targetP),this.cacheDims=this.getChildrenDim(t)}if(this.prevTarget==t&&(i=this.cacheDims),this.target=this.prevTarget,this.nearBorders(this.prevTargetDim,e,n)||!this.nested&&!this.cacheDims.length){var s=this.targetP;s&&this.validTarget(s).valid&&(i=this.cacheDimsP,this.target=s)}return delete this.lastPos,i},o.prototype.getTargetFromEl=function(t){var e,n=t,o=this.targetPrev,i=this.em,r=this.containerSel,s=this.itemSel;if(this.matches(n,"".concat(s,", ").concat(r))||(n=this.closest(n,s)),this.draggable instanceof Array&&(n=this.closest(n,this.draggable.join(','))),o&&o!=n&&delete this.targetPrev,!this.targetPrev){e=this.closest(n,r);var a=this.validTarget(n);if(i&&i.trigger('sorter:drag:validation',a),!a.valid&&e)return this.getTargetFromEl(e);this.targetPrev=n}return this.nearElBorders(n)&&(e=this.closest(n,r))&&this.validTarget(e).valid&&(n=e),n},o.prototype.nearElBorders=function(t){var e=10,n=t.getBoundingClientRect(),o=t.ownerDocument.body,i=this.getCurrentPos(),r=i.x,s=i.y,a=n.top+o.scrollTop,l=n.left+o.scrollLeft,c=n.width,u=n.height;if(s<a+e||s>a+u-e||r<l+e||r>l+c-e)return 1},o.prototype.getCurrentPos=function(){var t=this.eventMove;return{x:(null==t?void 0:t.pageX)||0,y:(null==t?void 0:t.pageY)||0}},o.prototype.getDim=function(t){var e,n,o,i,r=this.em,s=this.canvasRelative,a=null==r?void 0:r.Canvas,l=a?a.getElementOffsets(t):{};if(s&&r){var c=a.getElementPos(t,{noScroll:1});e=c.top,n=c.left,o=c.height,i=c.width}else{var u=this.offset(t);e=this.relative?t.offsetTop:u.top-(this.wmargin?-1:1)*this.elT,n=this.relative?t.offsetLeft:u.left-(this.wmargin?-1:1)*this.elL,o=t.offsetHeight,i=t.offsetWidth}return{top:e,left:n,height:o,width:i,offsets:l}},o.prototype.getChildrenDim=function(n){var o=this,i=[];if(!n)return i;var r=this.getTargetModel(n);if(r&&r.view&&!this.ignoreViewChildren){var s=r.getCurrentView?r.getCurrentView():r.view;n=s.getChildrenContainer()}return(0,t.each)(n.children,(function(t,r){var s=t,a=(0,e.getModel)(s,l["default"]),c=a&&a.index?a.index():r;if((0,ue.BM)(s)||o.matches(s,o.itemSel)){var u,h=o.getDim(s),p=o.direction;u='v'==p||'h'!=p&&o.isInFlow(s,n),h.dir=u,h.el=s,h.indexEl=c,i.push(h)}})),i},o.prototype.nearBorders=function(t,e,n){var o=!1,i=this.borderOffset,r=e||0,s=n||0,a=t.top,l=t.left,c=t.height,u=t.width;return(a+i>s||s>a+c-i||l+i>r||r>l+u-i)&&(o=!0),o},o.prototype.findPosition=function(t,e,n){for(var o,i={index:0,indexEl:0,method:'before'},r=0,s=0,a=0,l=0,c=0,u=0,h=0,p=t.length;h<p;h++){var d=(o=t[h]).top,f=o.left,g=o.height,m=o.width;if(u=d+g,l=f+m/2,c=d+g/2,!(s&&f>s||a&&c>=a||r&&f+m<r))if(i.index=h,i.indexEl=o.indexEl,o.dir){if(n<c){i.method='before';break}i.method='after'}else n<u&&(a=u),e<l?(s=l,i.method='before'):(r=l,i.method='after')}return i},o.prototype.movePlaceholder=function(t,e,n,o){var i=0,r=0,s=0,a='',l='',c='px',u=5,h=n.method,p=e[n.index];if(t.classList.remove('vertical'),t.classList.add('horizontal'),p){var d=p.top,f=p.left,g=p.height,m=p.width;p.dir?(a=m+c,l='auto',r='before'==h?d-i:d+g-i,s=f):(a='auto',l=g-2*i+c,r=d+i,s='before'==h?f-i:f+m-i,t.classList.remove('horizontal'),t.classList.add('vertical'))}else{if(!this.nested)return void(t.style.display='none');if(o){var v=o.offsets||{},y=v.paddingTop||u,_=v.paddingLeft||u;r=o.top+y,s=o.left+_,a=parseInt("".concat(o.width))-2*_+c,l='auto'}}t.style.top=r+c,t.style.left=s+c,a&&(t.style.width=a),l&&(t.style.height=l)},o.prototype.parents=function(t){return t?[t].concat(this.parents(t.parent())):[]},o.prototype.sort=function(t,e){var n=t.parents.filter((function(t){return e.parents.includes(t)}))[0];if(!n)return e.model.index()-t.model.index();var o=t.parents[t.parents.indexOf(n)-1];return e.parents[e.parents.indexOf(n)-1].index()-o.index()},o.prototype.endMove=function(){var e,n,o=this,i=this.sourceEl,r=[],s=this.getDocuments(),a=this.getContainerEl(),l=this.onEndMove,c=this.onEnd,u=this.target,h=this.lastPos;if((0,ue.S1)(a,'mousemove dragover',this.onMove),(0,ue.S1)(s,'mouseup dragend touchend',this.endMove),(0,ue.S1)(s,'keydown',this.rollback),this.plh.style.display='none',i&&(n=this.getSourceModel()),this.moved&&u){var p=this.toMove,d=(0,t.isArray)(p)?p:p?[p]:[i],f=0;1===d.length?r.push(this.move(u,d[0],h)):d.map((function(t){return{model:t,parents:o.parents(t)}})).sort(this.sort).forEach((function(t){var e=t.model,n=e.index(),i=e.parent().getEl();r.push(o.move(u,e,mQ(mQ({},h),{indexEl:h.indexEl-f,index:h.index-f}))),i===u&&n<=h.index&&f++}))}this.plh&&(this.plh.style.display='none');var g=this.dragHelper;if(g&&(g.parentNode.removeChild(g),delete this.dragHelper),this.disableTextable(),this.selectTargetModel(),this.toggleSortCursor(),null===(e=this.em)||void 0===e||e.Canvas.removeSpots(yQ),delete this.toMove,delete this.eventMove,delete this.dropModel,(0,t.isFunction)(l)){var m={target:n,parent:n&&n.parent(),index:n&&n.index()};r.length?r.forEach((function(t){return l(t,o,m)})):l(null,this,mQ(mQ({},m),{cancelled:1}))}(0,t.isFunction)(c)&&c({sorter:this})},o.prototype.move=function(n,o,i){var r,s,a=this.em,c=this.dropContent,h=(0,e.getElement)(o),p=[],d='after'===i.method?i.indexEl+1:i.indexEl,f=this.validTarget(n,h),g=(0,l["default"])(n).data('collection'),m=f.trgModel,v=f.srcModel,y=f.draggable,_=m instanceof u.FE?1:f.droppable;if(g&&_&&y){var O={at:d,action:'move-component'},b=this.isTextableActive(v,m);if(c)r=(0,t.isFunction)(c)?c():c,O.avoidUpdateStyle=!0,O.action='add-component';else{var w=v.collection.indexOf(v),x=g===v.collection;(!x||!(w===d||w===d-1)||b)&&(r=v.collection.remove(v,{temporary:!0}),x&&d>w&&(O.at=d-1))}r&&(b?(delete O.at,s=m.getView().insertComponent(r,O)):s=g.add(r,O)),delete this.dropContent,delete this.prevTarget}else if(a){var S=f.dropInfo||(null==m?void 0:m.get('droppable')),k=f.dragInfo||(null==v?void 0:v.get('draggable'));!g&&p.push('Target collection not found'),!_&&S&&p.push("Target is not droppable, accepts [".concat(S,"]")),!y&&k&&p.push("Component not draggable, acceptable by [".concat(k,"]")),a.logWarning('Invalid target position',{errors:p,model:v,context:'sorter',target:m})}return null==a||a.trigger('sorter:drag:end',{targetCollection:g,modelToDrop:r,warns:p,validResult:f,dst:n,srcEl:h}),s},o.prototype.rollback=function(t){(0,ue.S1)(this.getDocuments(),'keydown',this.rollback),27==(t.which||t.keyCode)&&(this.moved=!1,this.endMove())},o}(u.G7);const OQ=_Q;var bQ=void 0&&(void 0).__assign||function(){return bQ=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},bQ.apply(this,arguments)},wQ=function(){function n(e){void 0===e&&(e={}),this.defOpts={ratioDefault:!1,onUpdateContainer:function(){},step:1,minDim:10,maxDim:1/0,unitHeight:'px',unitWidth:'px',keyHeight:'height',keyWidth:'width',currentUnit:!0,silentFrames:!1,avoidContainerUpdate:!1,keepAutoHeight:!1,keepAutoWidth:!1,autoHeight:!1,autoWidth:!1,tl:!0,tc:!0,tr:!0,cl:!0,cr:!0,bl:!0,bc:!0,br:!0},this.opts=bQ({},this.defOpts),this.setOptions(e),(0,t.bindAll)(this,'handleKeyDown','handleMouseDown','move','stop')}return n.prototype.getConfig=function(){return this.opts},n.prototype.setOptions=function(t,e){void 0===t&&(t={}),this.opts=bQ(bQ({},e?this.defOpts:this.opts),t),this.setup()},n.prototype.setup=function(){var t=this.opts,e=t.prefix||'',n=t.appendTo||document.body,o=this.container;for(o||((o=document.createElement('div')).className="".concat(e,"resizer-c"),n.appendChild(o),this.container=o);o.firstChild;)o.removeChild(o.firstChild);var i={};for(var r in['tl','tc','tr','cl','cr','bl','bc','br'].forEach((function(e){return i[e]=t[e]?function(t,e){void 0===e&&(e={});var n=e.prefix||'',o=document.createElement('i');return o.className=n+'resizer-h '+n+'resizer-h-'+t,o.setAttribute('data-'+n+'handler',t),o}(e,t):null})),i){var s=i[r];s&&o.appendChild(s)}this.handlers=i,this.mousePosFetcher=t.mousePosFetcher,this.updateTarget=t.updateTarget,this.posFetcher=t.posFetcher,this.onStart=t.onStart,this.onMove=t.onMove,this.onEnd=t.onEnd,this.onUpdateContainer=t.onUpdateContainer},n.prototype.toggleFrames=function(e){if(this.opts.silentFrames){var n=document.querySelectorAll('iframe');(0,t.each)(n,(function(t){return t.style.pointerEvents=e?'none':''}))}},n.prototype.isHandler=function(t){var e=this.handlers;for(var n in e)if(e[n]===t)return!0;return!1},n.prototype.getFocusedEl=function(){return this.el},n.prototype.getParentEl=function(){var t;return null===(t=this.el)||void 0===t?void 0:t.parentElement},n.prototype.getDocumentEl=function(){return[this.el.ownerDocument,document]},n.prototype.getElementPos=function(t,e){void 0===e&&(e={});var n=this.posFetcher;return n?n(t,e):function(t,e){var n=e||window,o=t.getBoundingClientRect();return{left:o.left+n.pageXOffset,top:o.top+n.pageYOffset,width:o.width,height:o.height}}(t)},n.prototype.focus=function(t){t&&t===this.el||(this.el=t,this.updateContainer({forceShow:!0}),(0,ue.on)(this.getDocumentEl(),'pointerdown',this.handleMouseDown))},n.prototype.blur=function(){this.container.style.display='none',this.el&&((0,ue.S1)(this.getDocumentEl(),'pointerdown',this.handleMouseDown),delete this.el)},n.prototype.start=function(e){var n=e;if(0===n.button){n.preventDefault(),n.stopPropagation();var o=this.el,i=this.getParentEl(),r=this.opts||{},s=this.mousePosFetcher,a='data-'+r.prefix+'handler',l=this.getElementPos(o,{avoidFrameZoom:!0,avoidFrameOffset:!0}),c=this.getElementPos(i),u=n.target;this.handlerAttr=u.getAttribute(a),this.clickedHandler=u,this.startDim={t:l.top,l:l.left,w:l.width,h:l.height},this.rectDim={t:l.top,l:l.left,w:l.width,h:l.height},this.startPos=s?s(n):{x:n.clientX,y:n.clientY},this.parentDim={t:c.top,l:c.left,w:c.width,h:c.height};var h=this.getDocumentEl();this.docs=h,(0,ue.on)(h,'pointermove',this.move),(0,ue.on)(h,'keydown',this.handleKeyDown),(0,ue.on)(h,'pointerup',this.stop),(0,t.isFunction)(this.onStart)&&this.onStart(n,{docs:h,config:r,el:o,resizer:this}),this.toggleFrames(!0),this.move(n)}},n.prototype.move=function(t){var e=t,n=this.onMove,o=this.mousePosFetcher,i=o?o(e):{x:e.clientX,y:e.clientY};this.currentPos=i,this.delta={x:i.x-this.startPos.x,y:i.y-this.startPos.y},this.keys={shift:e.shiftKey,ctrl:e.ctrlKey,alt:e.altKey},this.rectDim=this.calc(this),this.updateRect(!1),n&&n(e)},n.prototype.stop=function(e){var n=this.el,o=this.opts,i=this.docs||this.getDocumentEl();(0,ue.S1)(i,'pointermove',this.move),(0,ue.S1)(i,'keydown',this.handleKeyDown),(0,ue.S1)(i,'pointerup',this.stop),this.updateRect(!0),this.toggleFrames(),(0,t.isFunction)(this.onEnd)&&this.onEnd(e,{docs:i,config:o,el:n,resizer:this}),delete this.docs},n.prototype.updateRect=function(e){var n=this.el,o=this.opts,i=this.rectDim,r=this.updateTarget,s=this.getSelectedHandler(),a=o.unitHeight,l=o.unitWidth,c=o.keyWidth,u=o.keyHeight;if((0,t.isFunction)(r))r(n,i,{store:e,selectedHandler:s,resizer:this,config:o});else{var h=n.style;h[c]=i.w+l,h[u]=i.h+a}this.updateContainer()},n.prototype.updateContainer=function(t){var e;void 0===t&&(t={});var n=this,o=n.opts,i=n.container,r=n.el,s=i.style;!o.avoidContainerUpdate&&r&&t.forceShow&&(s.display='block'),null===(e=this.onUpdateContainer)||void 0===e||e.call(this,{el:i,resizer:this,opts:bQ(bQ({},o),t)})},n.prototype.getSelectedHandler=function(){var t=this.handlers;if(this.selectedHandler)for(var e in t)if(t[e]===this.selectedHandler)return e},n.prototype.handleKeyDown=function(t){27===t.keyCode&&(this.rectDim=this.startDim,this.stop(t))},n.prototype.handleMouseDown=function(t){var e=t.target;this.isHandler(e)?(this.selectedHandler=e,this.start(t)):e!==this.el&&(delete this.selectedHandler,this.blur())},n.prototype.calc=function(t){var n,o=this.opts||{},i=o.step,r=this.startDim,s=o.minDim,a=o.maxDim,l=t.delta.x,c=t.delta.y,u=this.parentDim.w,h=this.parentDim.h,p=this.opts.unitWidth,d=this.opts.unitHeight,f='%'===p?r.w/100*u:r.w,g='%'===d?r.h/100*h:r.h,m={t:r.t,l:r.l,w:f,h:g};if(t){var v=t.handlerAttr;~v.indexOf('r')&&(n='%'===p?(0,e.normalizeFloat)((f+l*i)/u*100,.01):(0,e.normalizeFloat)(f+l*i,i),n=Math.max(s,n),a&&(n=Math.min(a,n)),m.w=n),~v.indexOf('b')&&(n='%'===d?(0,e.normalizeFloat)((g+c*i)/h*100,.01):(0,e.normalizeFloat)(g+c*i,i),n=Math.max(s,n),a&&(n=Math.min(a,n)),m.h=n),~v.indexOf('l')&&(n='%'===p?(0,e.normalizeFloat)((f-l*i)/u*100,.01):(0,e.normalizeFloat)(f-l*i,i),n=Math.max(s,n),a&&(n=Math.min(a,n)),m.w=n),~v.indexOf('t')&&(n='%'===d?(0,e.normalizeFloat)((g-c*i)/h*100,.01):(0,e.normalizeFloat)(g-c*i,i),n=Math.max(s,n),a&&(n=Math.min(a,n)),m.h=n);var y=o.ratioDefault?!t.keys.shift:t.keys.shift;if(v.indexOf('c')<0&&y){var _=r.w/r.h;m.w/m.h>_?m.h=Math.round(m.w/_):m.w=Math.round(m.h*_)}for(var O in~v.indexOf('l')&&(m.l+=r.w-m.w),~v.indexOf('t')&&(m.t+=r.h-m.h),m){var b=O;m[b]=parseInt("".concat(m[b]),10)}return m}},n}();const xQ=wQ;var SQ=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),kQ=void 0&&(void 0).__assign||function(){return kQ=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},kQ.apply(this,arguments)};const PQ=function(t){function n(n){var o=t.call(this,n,'Utils')||this;return o.Sorter=OQ,o.Resizer=xQ,o.Dragger=gn.Z,o.helpers=kQ({},e),o}return SQ(n,t),n.prototype.destroy=function(){},n}(_);var CQ,TQ={},EQ={16:!1,18:!1,17:!1,91:!1},QQ='all',AQ={'⇧':16,shift:16,'⌥':18,alt:18,option:18,'⌃':17,ctrl:17,control:17,'⌘':91,command:91},$Q={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,home:36,end:35,pageup:33,pagedown:34,',':188,'.':190,'/':191,'`':192,'-':189,'=':187,';':186,"'":222,'[':219,']':221,'\\':220},jQ=function(t){return $Q[t]||t.toUpperCase().charCodeAt(0)},RQ=[];for(CQ=1;CQ<20;CQ++)$Q['f'+CQ]=111+CQ;function ZQ(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function MQ(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}var VQ={16:'shiftKey',18:'altKey',17:'ctrlKey',91:'metaKey'};function DQ(t){for(CQ in EQ)EQ[CQ]=t[VQ[CQ]]}function IQ(t){var e,n=t.keyCode,o=ZQ(RQ,n);if(o>=0&&RQ.splice(o,1),93!=n&&224!=n||(n=91),n in EQ)for(e in EQ[n]=!1,AQ)AQ[e]==n&&(WQ[e]=!1)}function NQ(){for(CQ in EQ)EQ[CQ]=!1;for(CQ in AQ)WQ[CQ]=!1}function WQ(t,e,n){var o,i;o=LQ(t),void 0===n&&(n=e,e='all');for(var r=0;r<o.length;r++)i=[],(t=o[r].split('+')).length>1&&(i=YQ(t),t=[t[t.length-1]]),t=t[0],(t=jQ(t))in TQ||(TQ[t]=[]),TQ[t].push({shortcut:o[r],scope:e,method:n,key:o[r],mods:i})}for(CQ in AQ)WQ[CQ]=!1;function XQ(){return QQ||'all'}function LQ(t){var e;return''==(e=(t=t.replace(/\s/g,'')).split(','))[e.length-1]&&(e[e.length-2]+=','),e}function YQ(t){for(var e=t.slice(0,t.length-1),n=0;n<e.length;n++)e[n]=AQ[e[n]];return e}function zQ(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent('on'+e,(function(){n(window.event)}))}WQ.setScope=function(t){QQ=t||'all'},WQ.getScope=XQ,WQ.deleteScope=function(t){var e,n,o;for(e in TQ)for(n=TQ[e],o=0;o<n.length;)n[o].scope===t?n.splice(o,1):o++},WQ.filter=function(t){var e=(t.target||t.srcElement).tagName;return!('INPUT'==e||'SELECT'==e||'TEXTAREA'==e)},WQ.isPressed=function(t){return'string'==typeof t&&(t=jQ(t)),-1!=ZQ(RQ,t)},WQ.getPressedKeyCodes=function(){return RQ.slice(0)},WQ.unbind=function(t,e){var n,o,i,r,s,a=[];for(n=LQ(t),r=0;r<n.length;r++){if((o=n[r].split('+')).length>1&&(a=YQ(o)),t=o[o.length-1],t=jQ(t),void 0===e&&(e=XQ()),!TQ[t])return;for(i=0;i<TQ[t].length;i++)(s=TQ[t][i]).scope===e&&MQ(s.mods,a)&&(TQ[t][i]={})}},WQ.handlers=TQ,WQ.init=function(t){zQ(t.document,'keydown',(function(t){!function(t){var e,n,o,i,r,s;if(e=t.keyCode,-1==ZQ(RQ,e)&&RQ.push(e),93!=e&&224!=e||(e=91),e in EQ)for(o in EQ[e]=!0,AQ)AQ[o]==e&&(WQ[o]=!0);else if(DQ(t),WQ.filter.call(this,t)&&e in TQ)for(s=XQ(),i=0;i<TQ[e].length;i++)if((n=TQ[e][i]).scope==s||'all'==n.scope){for(o in r=n.mods.length>0,EQ)(!EQ[o]&&ZQ(n.mods,+o)>-1||EQ[o]&&-1==ZQ(n.mods,+o))&&(r=!1);(0!=n.mods.length||EQ[16]||EQ[18]||EQ[17]||EQ[91])&&!r||!1===n.method(t,n)&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation&&t.stopPropagation(),t.cancelBubble&&(t.cancelBubble=!0))}}(t)})),zQ(t.document,'keyup',IQ),zQ(t,'focus',NQ)};const qQ=WQ;const UQ={defaults:{'core:undo':{keys:'⌘+z, ctrl+z',handler:'core:undo',opts:{prevent:!0}},'core:redo':{keys:'⌘+shift+z, ctrl+shift+z',handler:'core:redo',opts:{prevent:!0}},'core:copy':{keys:'⌘+c, ctrl+c',handler:'core:copy'},'core:paste':{keys:'⌘+v, ctrl+v',handler:'core:paste'},'core:component-next':{keys:'s',handler:'core:component-next'},'core:component-prev':{keys:'w',handler:'core:component-prev'},'core:component-enter':{keys:'d',handler:'core:component-enter'},'core:component-exit':{keys:'a',handler:'core:component-exit'},'core:component-delete':{keys:'backspace, delete',handler:'core:component-delete',opts:{prevent:!0}}}};var BQ=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),FQ=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};(0,e.hasWin)()&&qQ.init(window);var GQ=function(e){function n(t){var n=e.call(this,t,'Keymaps',UQ)||this;return n.keymaster=qQ,n.keymaps={},n}return BQ(n,e),n.prototype.onLoad=function(){var t=this.config.defaults;for(var e in t){var n=t[e];this.add(e,n.keys,n.handler,n.opts||{})}},n.prototype.add=function(e,n,o,i){void 0===i&&(i={});var r=this.em,s=r.Commands,a=r.getEditor(),l=r.Canvas,c={id:e,keys:n,handler:o};return this.keymaps[e]&&this.remove(e),this.keymaps[e]=c,qQ(n,(function(n,c){var u={event:n,h:c},h=(0,t.isString)(o)?s.get(o):o;if(!r.isEditing()&&!a.Canvas.isInputFocused()||i.force){i.prevent&&l.getCanvasView().preventDefault(n),(0,t.isFunction)(h)?h(a,0,u):s.runCommand(h,u);var p=[e,c.shortcut,n];r.trigger.apply(r,FQ(['keymap:emit'],p,!1)),r.trigger.apply(r,FQ(["keymap:emit:".concat(e)],p,!1))}}),void 0),r.trigger('keymap:add',c),c},n.prototype.get=function(t){return this.keymaps[t]},n.prototype.getAll=function(){return this.keymaps},n.prototype.remove=function(t){var e=this.em,n=this.get(t);if(n)return delete this.keymaps[t],n.keys.split(', ').forEach((function(t){qQ.unbind(t.trim())})),null==e||e.trigger('keymap:remove',n),n},n.prototype.removeAll=function(){var t=this;return Object.keys(this.keymaps).forEach((function(e){return t.remove(e)})),qQ.handlers={},this},n.prototype.destroy=function(){this.removeAll(),this.keymaps={}},n}(_);const HQ=GQ;const KQ={stylePrefix:'mdl-',title:'',content:'',backdrop:!0,custom:!1,extend:{}};var JQ=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const tA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return JQ(e,t),e.prototype.defaults=function(){return{title:'',content:'',attributes:{},open:!1}},e.prototype.open=function(){this.set('open',!0)},e.prototype.close=function(){this.set('open',!1)},e}(w.Z);var eA=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nA=void 0&&(void 0).__assign||function(){return nA=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},nA.apply(this,arguments)},oA=function(t){function e(e){var n=t.call(this,e)||this,o=n.model;return n.listenTo(o,'change:open',n.updateOpen),n.listenTo(o,'change:title',n.updateTitle),n.listenTo(o,'change:content',n.updateContent),n}return eA(e,t),e.prototype.template=function(t){var e=t.pfx,n=t.ppfx,o=t.content,i=t.title;return"<div class=\"".concat(e,"dialog ").concat(n,"one-bg ").concat(n,"two-color\">\n      <div class=\"").concat(e,"header\">\n        <div class=\"").concat(e,"title\">").concat(i,"</div>\n        <div class=\"").concat(e,"btn-close\" data-close-modal>&Cross;</div>\n      </div>\n      <div class=\"").concat(e,"content\">\n        <div id=\"").concat(e,"c\">").concat(o,"</div>\n        <div style=\"clear:both\"></div>\n      </div>\n    </div>\n    <div class=\"").concat(e,"collector\" style=\"display: none\"></div>")},e.prototype.events=function(){return{click:'onClick','click [data-close-modal]':'hide'}},e.prototype.onClick=function(t){this.config.backdrop&&t.target===this.el&&this.hide()},e.prototype.getCollector=function(){return this.$collector||(this.$collector=this.$el.find('.'+this.pfx+'collector')),this.$collector},e.prototype.getContent=function(){var t=this.pfx;return this.$content||(this.$content=this.$el.find(".".concat(t,"content #").concat(t,"c"))),this.$content},e.prototype.getTitle=function(t){return void 0===t&&(t={}),this.$title||(this.$title=this.$el.find('.'+this.pfx+'title')),t.$?this.$title:this.$title.get(0)},e.prototype.updateContent=function(){var t=this.getContent(),e=t.children(),n=this.getCollector(),o=this.model.get('content');e.length&&n.append(e),t.empty().append(o)},e.prototype.updateTitle=function(){var t=this.getTitle({$:!0});t&&t.empty().append(this.model.get('title'))},e.prototype.updateOpen=function(){this.el.style.display=this.model.get('open')?'':'none'},e.prototype.hide=function(){this.model.close()},e.prototype.show=function(){this.model.open()},e.prototype.updateAttr=function(t){var e=this,n=e.pfx,o=e.$el,i=e.el,r=[].slice.call(i.attributes).map((function(t){return t.name}));o.removeAttr(r.join(' ')),o.attr(nA(nA({},t||{}),{class:"".concat(n,"container ").concat(t&&t.class||'').trim()}))},e.prototype.render=function(){var t=this.$el,e=this.model.toJSON();return e.pfx=this.pfx,e.ppfx=this.ppfx,t.html(this.template(e)),this.updateAttr(),this.updateOpen(),this},e}(Fe);const iA=oA;var rA=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),sA=function(e){function n(n){var o=e.call(this,n,'Modal',KQ)||this;return o.model=new tA(o),o.model.on('change:open',(function(t,e){n.trigger("modal:".concat(e?'open':'close'))})),o.model.on('change',(0,t.debounce)((function(){var e=o._evData(),i=o.config.custom;(0,t.isFunction)(i)&&i(e),n.trigger('modal',e)}),0)),o}return rA(n,e),n.prototype._evData=function(){var e=this,n=this.getTitle(),o=this.getContent(),i=this.model.attributes;return{open:i.open,attributes:i.attributes,title:(0,t.isString)(n)?(0,ue.rw)(n):n,content:(0,t.isString)(o)?(0,ue.rw)(o):o.get?o.get(0):o,close:function(){e.close()}}},n.prototype.postRender=function(t){var e=t.model.config.el||t.el,n=this.render();n&&(null==e||e.appendChild(n))},n.prototype.open=function(t){void 0===t&&(t={});var e=t.attributes||{};return t.title&&this.setTitle(t.title),t.content&&this.setContent(t.content),this.model.set('attributes',e),this.model.open(),this.modal&&this.modal.updateAttr(e),this},n.prototype.close=function(){return this.model.close(),this},n.prototype.onceClose=function(t){return this.em.once('modal:close',t),this},n.prototype.onceOpen=function(t){return this.em.once('modal:open',t),this},n.prototype.isOpen=function(){return!!this.model.get('open')},n.prototype.setTitle=function(t){return this.model.set('title',t),this},n.prototype.getTitle=function(){return this.model.get('title')},n.prototype.setContent=function(t){return this.model.set('content',' '),this.model.set('content',t),this},n.prototype.getContent=function(){return this.model.get('content')},n.prototype.getContentEl=function(){var t;return null===(t=this.modal)||void 0===t?void 0:t.getContent().get(0)},n.prototype.getModel=function(){return this.model},n.prototype.render=function(){var t;if(!this.config.custom){var e=iA.extend(this.config.extend),n=this.modal&&this.modal.el;return this.modal=new e({el:n,model:this.model,config:this.config}),null===(t=this.modal)||void 0===t?void 0:t.render().el}},n.prototype.destroy=function(){var t;null===(t=this.modal)||void 0===t||t.remove()},n}(_);const aA=sA;var lA='sw-visibility',cA='export-template',uA='open-sm',hA='open-tm',pA='open-layers',dA='open-blocks',fA='open-pages',gA='fullscreen',mA='preview';const vA={stylePrefix:'pn-',defaults:[{id:'commands',buttons:[{}]},{id:'options',buttons:[{active:!0,id:lA,className:'fa fa-square-o',command:'core:component-outline',context:lA,attributes:{title:'View components'}},{id:mA,className:'fa fa-eye',command:mA,context:mA,attributes:{title:'Preview'}},{id:gA,className:'fa fa-arrows-alt',command:gA,context:gA,attributes:{title:'Fullscreen'}},{id:cA,className:'fa fa-code',command:cA,attributes:{title:'View code'}}]},{id:'views',buttons:[{id:uA,className:'fa fa-paint-brush',command:uA,active:!0,togglable:!1,attributes:{title:'Open Style Manager'}},{id:hA,className:'fa fa-cog',command:hA,togglable:!1,attributes:{title:'Settings'}},{id:pA,className:'fa fa-bars',command:pA,togglable:!1,attributes:{title:'Open Layer Manager'}},{id:dA,className:'fa fa-th-large',command:dA,togglable:!1,attributes:{title:'Open Blocks'}},{id:fA,className:'fa fa-th-large',command:fA,togglable:!1,attributes:{title:'Open Pages'}}]}]};var yA=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const _A=function(t){function e(e,n){var o=t.call(this,e,n)||this;return o.get('buttons').length&&o.set('buttons',new wA(o.module,o.get('buttons'))),o}return yA(e,t),e.prototype.defaults=function(){return{id:'',label:'',tagName:'span',className:'',command:'',context:'',buttons:[],attributes:{},options:{},active:!1,dragDrop:!1,togglable:!0,runDefaultCommand:!0,stopDefaultCommand:!1,disable:!1}},Object.defineProperty(e.prototype,"className",{get:function(){return this.get('className')},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"command",{get:function(){return this.get('command')},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this.get('active')},set:function(t){this.set('active',t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"togglable",{get:function(){return this.get('togglable')},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"runDefaultCommand",{get:function(){return this.get('runDefaultCommand')},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stopDefaultCommand",{get:function(){return this.get('stopDefaultCommand')},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disable",{get:function(){return this.get('disable')},enumerable:!1,configurable:!0}),e}(w.Z);var OA=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),bA=function(t){function e(e,n){return t.call(this,e,n,_A)||this}return OA(e,t),e.prototype.deactivateAllExceptOne=function(t,e){this.forEach((function(n,o){n!==t&&(n.set('active',!1),e&&n.get('buttons').length&&n.get('buttons').deactivateAllExceptOne(t,e))}))},e.prototype.deactivateAll=function(t,e){var n=t||'';this.forEach((function(t){t.get('context')==n&&t!==e&&t.set('active',!1,{fromCollection:!0})}))},e.prototype.disableAllButtons=function(t){var e=t||'';this.forEach((function(t,n){t.get('context')==e&&t.set('disable',!0)}))},e.prototype.disableAllButtonsExceptOne=function(t,e){this.forEach((function(n,o){n!==t&&(n.set('disable',!0),e&&n.get('buttons').length&&n.get('buttons').disableAllButtonsExceptOne(t,e))}))},e}(G);const wA=bA;bA.prototype.model=_A;var xA=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const SA=function(t){function e(e,n){var o=t.call(this,e,n)||this,i=o.get('buttons')||[];return o.buttons=new wA(e,i),o}return xA(e,t),e.prototype.defaults=function(){return{id:'',content:'',visible:!0,buttons:[],attributes:{}}},Object.defineProperty(e.prototype,"buttons",{get:function(){return this.get('buttons')},set:function(t){this.set('buttons',t)},enumerable:!1,configurable:!0}),e}(w.Z);var kA=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),PA=function(t){function e(e,n){return t.call(this,e,n,SA)||this}return kA(e,t),e}(G);const CA=PA;PA.prototype.model=SA;var TA=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),EA=void 0&&(void 0).__assign||function(){return EA=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},EA.apply(this,arguments)},QA=function(e){function n(n){var o=e.call(this,n)||this,i=o,r=i.model,s=i.em,a=i.pfx,l=i.ppfx,c=r.className,u=r.attributes,h=u.command,p=u.listen;if(o.id=a+r.get('id'),o.activeCls="".concat(a,"active ").concat(l,"four-color"),o.disableCls="".concat(l,"disabled"),o.btnsVisCls="".concat(a,"visible"),o.className=a+'btn'+(c?' '+c:''),o.listenTo(r,'change',o.render),o.listenTo(r,'change:active updateActive',o.updateActive),o.listenTo(r,'checkActive',o.checkActive),o.listenTo(r,'change:bntsVis',o.updateBtnsVis),o.listenTo(r,'change:attributes',o.updateAttributes),o.listenTo(r,'change:className',o.updateClassName),o.listenTo(r,'change:disable',o.updateDisable),s&&(0,t.isString)(h)&&p){var d={fromListen:!0};o.listenTo(s,"run:".concat(h),(function(){return r.set('active',!0,d)})),o.listenTo(s,"stop:".concat(h),(function(){return r.set('active',!1,d)}))}return s&&s.get&&(o.commands=s.get('Commands')),o}return TA(n,e),n.prototype.tagName=function(){return this.model.get('tagName')},n.prototype.events=function(){return{click:'clicked'}},n.prototype.updateClassName=function(){var t=this.model,e=this.pfx,n=t.className,o=t.get('attributes').class,i="".concat(o||''," ").concat(e,"btn ").concat(n||'');this.$el.attr('class',i.trim())},n.prototype.updateAttributes=function(){var t=this,e=t.em,n=t.model,o=t.$el,i=n.get('attributes')||{},r=e&&e.t&&e.t("panels.buttons.titles.".concat(n.id));o.attr(i),r&&o.attr({title:r}),this.updateClassName()},n.prototype.updateBtnsVis=function(){this.$buttons&&(this.model.get('bntsVis')?this.$buttons.addClass(this.btnsVisCls):this.$buttons.removeClass(this.btnsVisCls))},n.prototype.updateActive=function(e,n,o){var i;void 0===o&&(o={});var r=this,s=r.model,a=r.commands,l=r.$el,c=r.activeCls,u=o.fromCollection,h=o.fromListen,p=s.get('context'),d=s.get('options'),f=s.command,g={};f&&(a&&(0,t.isString)(f)?g=a.get(f)||{}:(0,t.isFunction)(f)?g=a.create({run:f}):null!==f&&(0,t.isObject)(f)&&(g=a.create(f)),s.active?(!u&&(null===(i=s.collection)||void 0===i||i.deactivateAll(p,s)),s.set('active',!0,{silent:!0}).trigger('checkActive'),!h&&a.runCommand(g,EA(EA({},d),{sender:s})),g.noStop&&s.set('active',!1)):(l.removeClass(c),!h&&a.stopCommand(g,EA(EA({},d),{sender:s,force:1}))))},n.prototype.updateDisable=function(){var t=this.disableCls,e=this.model.disable;this.$el[e?'addClass':'removeClass'](t)},n.prototype.checkActive=function(){var t=this,e=t.model,n=t.$el,o=t.activeCls;e.active?n.addClass(o):n.removeClass(o)},n.prototype.clicked=function(){var t=this.model;t.get('bntsVis')||t.disable||!t.command||this.toggleActive()},n.prototype.toggleActive=function(){var t=this.model,e=this.em,n=t.active,o=t.togglable;n&&!o||(t.active=!n,n?t.runDefaultCommand&&e.runDefault():t.stopDefaultCommand&&e.stopDefault())},n.prototype.render=function(){var t=this.model,e=t.get('label'),n=this.$el;return!t.get('el')&&n.empty(),this.updateAttributes(),e&&n.append(e),this.checkActive(),this.updateDisable(),this},n}(Fe);const AA=QA;var $A=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const jA=function(e){function n(t){var n=e.call(this,{collection:t})||this;return n.listenTo(n.collection,'add',n.addTo),n.listenTo(n.collection,'reset remove',n.render),n.className=n.pfx+'buttons',n}return $A(n,e),n.prototype.addTo=function(t){this.addToCollection(t)},n.prototype.addToCollection=function(t,e){var n=e||null,o=t.get('el'),i=new AA({el:o,model:t}).render().el;return n?n.appendChild(i):this.$el.append(i),i},n.prototype.render=function(){var e=this,n=document.createDocumentFragment();return this.$el.empty(),this.collection.each((function(t){return e.addToCollection(t,n)})),this.$el.append(n),this.$el.attr('class',(0,t.result)(this,'className')),this},n}(Fe);var RA=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),ZA=void 0&&(void 0).__assign||function(){return ZA=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},ZA.apply(this,arguments)},MA=function(t){function e(e){var n=t.call(this,{model:e,el:e.get('el')})||this;return n.className=n.pfx+'panel',n.id=n.pfx+e.get('id'),n.listenTo(e,'change:appendContent',n.appendContent),n.listenTo(e,'change:content',n.updateContent),n.listenTo(e,'change:visible',n.toggleVisible),e.view=n,n}return RA(e,t),e.prototype.appendContent=function(){this.$el.append(this.model.get('appendContent'))},e.prototype.updateContent=function(){this.$el.html(this.model.get('content'))},e.prototype.toggleVisible=function(){this.model.get('visible')?this.$el.removeClass("".concat(this.ppfx,"hidden")):this.$el.addClass("".concat(this.ppfx,"hidden"))},e.prototype.attributes=function(){return this.model.get('attributes')},e.prototype.initResize=function(){var t=this.em,e=null==t?void 0:t.Editor,n=this.model.get('resizable');if(e&&n){var o=!0===n?[!0,!0,!0,!0]:n,i=o.length,r=void 0,s=void 0,a=void 0,l=!1;if(2==i)r=(c=o)[0],a=c[0],s=c[1],l=c[1];else if(4==i){var c;r=(c=o)[0],s=c[1],a=c[2],l=c[3]}var u=new e.Utils.Resizer(ZA({tc:r,cr:s,bc:a,cl:l,tl:!1,tr:!1,bl:!1,br:!1,appendTo:this.el,silentFrames:!0,avoidContainerUpdate:!0,prefix:e.getConfig().stylePrefix,onEnd:function(){t&&t.trigger('change:canvasOffset')},posFetcher:function(t,e){var n=e.target,o=t.style,i=u.getConfig(),r=i.keyWidth,s=i.keyHeight,a=t.getBoundingClientRect(),l='container'==n,c=o[r],h=o[s];return{left:0,top:0,width:c&&!l?parseFloat(c):a.width,height:h&&!l?parseFloat(h):a.height}}},n&&'boolean'!=typeof n?n:{}));u.blur=function(){},u.focus(this.el)}},e.prototype.render=function(){var t=this.model.buttons,e=this.$el,n=this.ppfx,o="".concat(this.className," ").concat(this.id," ").concat(n,"one-bg ").concat(n,"two-color");if(e.addClass(o),this.toggleVisible(),t.length){var i=new jA(t);e.append(i.render().el)}return e.append(this.model.get('content')),this},e}(Fe);const VA=MA;var DA=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();const IA=function(t){function e(e){var n=t.call(this,{collection:e})||this;return n.listenTo(e,'add',n.addTo),n.listenTo(e,'reset',n.render),n.listenTo(e,'remove',n.onRemove),n.className=n.pfx+'panels',n}return DA(e,t),e.prototype.onRemove=function(t){var e=t.view;e&&e.remove()},e.prototype.addTo=function(t){this.addToCollection(t)},e.prototype.addToCollection=function(t,e){var n=e||null,o=t.get('el'),i=new VA(t),r=i.render().el,s=t.get('appendTo');if(o);else if(s){var a=document.querySelector(s);null==a||a.appendChild(r)}else n?n.appendChild(r):this.$el.append(r);return i.initResize(),r},e.prototype.render=function(){var t=this,e=this.$el,n=document.createDocumentFragment();return e.empty(),this.collection.each((function(e){return t.addToCollection(e,n)})),e.append(n),e.attr('class',this.className),this},e}(Fe);var NA=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),WA=function(t){function e(e){var n=t.call(this,e,'Panels',vA)||this;for(var o in n.panels=new CA(n,n.config.defaults),vA)o in n.config||(n.config[o]=vA[o]);return n}return NA(e,t),e.prototype.getPanels=function(){return this.panels},e.prototype.getPanelsEl=function(){var t;return null===(t=this.PanelsViewObj)||void 0===t?void 0:t.el},e.prototype.addPanel=function(t){return this.panels.add(t)},e.prototype.removePanel=function(t){return this.panels.remove(t)},e.prototype.getPanel=function(t){var e=this.panels.where({id:t});return e.length?e[0]:null},e.prototype.addButton=function(t,e){var n=this.getPanel(t);return n?n.buttons.add(e):null},e.prototype.removeButton=function(t,e){var n=this.getPanel(t);return n&&n.buttons.remove(e)},e.prototype.getButton=function(t,e){var n=this.getPanel(t);if(n){var o=n.buttons.where({id:e});return o.length?o[0]:null}return null},e.prototype.render=function(){var t;return null===(t=this.PanelsViewObj)||void 0===t||t.remove(),this.PanelsViewObj=new IA(this.panels),this.PanelsViewObj.render().el},e.prototype.active=function(){this.getPanels().each((function(t){t.buttons.each((function(t){t.get('active')&&t.trigger('updateActive')}))}))},e.prototype.disableButtons=function(){this.getPanels().each((function(t){t.buttons.each((function(t){t.get('disable')&&t.trigger('change:disable')}))}))},e.prototype.destroy=function(){this.panels.reset(),this.panels.stopListening(),this.PanelsViewObj&&this.PanelsViewObj.remove()},e}(_);const XA=WA;const LA={stylePrefix:'cm-',optsCodeViewer:{}};var YA=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),zA=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},qA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return YA(e,t),e.prototype.build=function(t,e){void 0===e&&(e={});var n=e.em,o=zA(e,["em"]);if(e.cleanId&&n){var i=n.Css.getAll().toJSON().map((function(t){var e=t.selectors,n=e&&1===e.length&&e.models[0];return n&&n.isId()&&n.get('name')})).filter(Boolean);o.attributes||(o.attributes=function(t,e){var n=e.id;return n&&'i'===n[0]&&!t.get('script')&&!t.get('attributes').id&&i.indexOf(n)<0&&delete e.id,e})}return t.toHTML(o)},e}(u.Hn);const UA=qA;var BA=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),FA=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return BA(n,e),n.prototype.build=function(e){var n=this,o=e.toJSON();return this.beforeEach(o),(0,t.each)(o,(function(t,e){var i=o[e];if(i instanceof u.Hn)o[e]=n.build(i);else if(i instanceof u.FE){var r=i;o[e]=[],r.length&&r.forEach((function(t,i){o[e][i]=n.build(t)}))}})),o},n.prototype.beforeEach=function(t){delete t.status},n}(u.Hn);const GA=FA;var HA=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();function KA(t){var e;return 0===((null===(e=t.toString().match(/\{([\s\S]*)\}/m))||void 0===e?void 0:e[1])||'').replace(/^\s*\/\/.*$/gm,'').trim().length}var JA=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return HA(n,e),n.prototype.mapModel=function(e){var n,o=this,i='',r=e.get('script-export')||e.get('script'),s=e.get('type'),a=e.get('components'),l=e.getId();if(r){var c=e.get('attributes');c=(0,t.extend)({},c,{id:l}),e.set('attributes',c,{silent:!0});var u=e.getScriptString(r),h=e.get('script-props');if(e.get('scriptUpdated')&&!h)this.mapJs[s+'-'+l]={ids:[l],code:u};else{var p=void 0,d=this.mapJs[s];if(h&&(p=e.__getScriptProps()),d)d.ids.push(l),p&&(d.props[l]=p);else{var f={ids:[l],code:u};p&&(f.props=((n={})[l]=p,n)),this.mapJs[s]=f}}}return a.forEach((function(t){i+=o.mapModel(t)})),i},n.prototype.build=function(t){this.mapJs={},this.mapModel(t);var e='';for(var n in this.mapJs){var o=this.mapJs[n];if(o.code)if(o.props){if(KA(o.code))continue;e+="\n          var props = ".concat(JSON.stringify(o.props),";\n          var ids = Object.keys(props).map(function(id) { return '#'+id }).join(',');\n          var els = document.querySelectorAll(ids);\n          for (var i = 0, len = els.length; i < len; i++) {\n            var el = els[i];\n            (").concat(o.code,".bind(el))(props[el.id]);\n          }")}else{var i='#'+o.ids.join(', #');e+="\n          var items = document.querySelectorAll('".concat(i,"');\n          for (var i = 0, len = items.length; i < len; i++) {\n            (function(){\n").concat(o.code,"\n}.bind(items[i]))();\n          }")}}return e},n}(u.Hn);const t$=JA;var e$=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),n$=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},o$=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return e$(e,t),e.prototype.template=function(t){var e=t.pfx,n=t.codeName,o=t.label;return i(r$||(r$=n$(["\n      <div class=\"","editor\" id=\"","","\">\n        <div id=\"","title\">","</div>\n        <div id=\"","code\"></div>\n      </div>\n    "],["\n      <div class=\"","editor\" id=\"","","\">\n        <div id=\"","title\">","</div>\n        <div id=\"","code\"></div>\n      </div>\n    "])),e,e,n,e,o,e)},e.prototype.initialize=function(t){this.config=t.config||{},this.pfx=this.config.stylePrefix},e.prototype.render=function(){var t,e,n=this,o=n.model,i=n.pfx,r=n.$el,s=o.toJSON(),a=o.get('input')||(null===(e=(t=o).getElement)||void 0===e?void 0:e.call(t));return s.pfx=i,r.html(this.template(s)),r.attr('class',"".concat(i,"editor-c")),r.find("#".concat(i,"code")).append(a),this},e}(u.G7);const i$=o$;var r$,s$=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),a$=void 0&&(void 0).__assign||function(){return a$=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},a$.apply(this,arguments)},l$='CodeMirror',c$=function(e){function n(t){var n=e.call(this,t,'CodeManager',LA)||this;n.EditorView=i$;var o=n.config,i=o.pStylePrefix;return i&&(o.stylePrefix=i+o.stylePrefix),n.generators={},n.viewers={},n.defGenerators={html:new UA,css:new Hk,json:new GA,js:new t$},n.defViewers={CodeMirror:new Gw},n.loadDefaultGenerators().loadDefaultViewers(),n}return s$(n,e),n.prototype.addGenerator=function(t,e){return this.generators[t]=e,this},n.prototype.getGenerator=function(t){return this.generators[t]},n.prototype.getGenerators=function(){return this.generators},n.prototype.addViewer=function(t,e){return this.viewers[t]=e,this},n.prototype.getViewer=function(t){return this.viewers[t]},n.prototype.getViewers=function(){return this.viewers},n.prototype.createViewer=function(e){void 0===e&&(e={});var n=(0,t.isUndefined)(e.type)?l$:e.type,o=this.getViewer(n)&&this.getViewer(n).clone(),i=document.createElement('div'),r=document.createElement('textarea');return i.appendChild(r),o.set(a$(a$({},this.config.optsCodeViewer),e)),o.init(r),o.setElement(i),o},n.prototype.updateViewer=function(t,e){t.setContent(e)},n.prototype.getCode=function(t,e,n){void 0===n&&(n={}),n.em=this.em;var o=this.getGenerator(e);return o?o.build(t,n):''},n.prototype.loadDefaultGenerators=function(){for(var t in this.defGenerators)this.addGenerator(t,this.defGenerators[t]);return this},n.prototype.loadDefaultViewers=function(){for(var t in this.defViewers)this.addViewer(t,this.defViewers[t]);return this},n.prototype.destroy=function(){},n}(_);const u$=c$;var h$=n(410),p$=n.n(h$);const d$={maximumStackLength:500,trackSelection:!0};var f$=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),g$=void 0&&(void 0).__assign||function(){return g$=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},g$.apply(this,arguments)},m$=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},v$=function(t){return t.avoidStore||t.noUndo},y$=function(t){return Object.keys(t.changedAttributes())},_$=function(e){function n(n){var o=e.call(this,n,'UndoManager',d$)||this;o.config._disable&&(o.config.maximumStackLength=0);var i=!0;return o.um=new(p$())(g$({track:!0,register:[]},o.config)),o.um.changeUndoType('change',{condition:function(e){var n=e.get('_undo');if(n){var o=e.get('_undoexc');if((0,t.isArray)(o)&&y$(e).some((function(t){return o.indexOf(t)>=0})))return!1;if((0,t.isBoolean)(n))return!0;if((0,t.isArray)(n)&&y$(e).some((function(t){return n.indexOf(t)>=0})))return!0}return!1},on:function(e,n,o){var r=this;!this.beforeCache&&(this.beforeCache=e.previousAttributes());var s=o||n||{};if(s.noUndo&&setTimeout((function(){r.beforeCache=null})),!v$(s)){var a=e.toJSON({fromUndo:i}),l={object:e,before:this.beforeCache,after:a};if(this.beforeCache=null,!(0,t.isEmpty)(a))return l}}}),o.um.changeUndoType('add',{on:function(t,e,n){if(void 0===n&&(n={}),!v$(n)&&o.isRegistered(e))return{object:e,before:void 0,after:t,options:g$(g$({},n),{fromUndo:i})}}}),o.um.changeUndoType('remove',{on:function(t,e,n){if(void 0===n&&(n={}),!v$(n)&&o.isRegistered(e))return{object:e,before:t,after:void 0,options:g$(g$({},n),{fromUndo:i})}}}),o.um.changeUndoType('reset',{undo:function(t,e){t.reset(e,{fromUndo:i})},redo:function(t,e,n){t.reset(n,{fromUndo:i})},on:function(t,e){if(void 0===e&&(e={}),!v$(e)&&o.isRegistered(t))return{object:t,before:e.previousModels,after:m$([],t.models,!0),options:g$(g$({},e),{fromUndo:i})}}}),o.um.on('undo redo',(function(){n.trigger('change:canvasOffset'),n.getSelectedAll().map((function(t){return t.trigger('rerender:layer')}))})),['undo','redo'].forEach((function(t){return o.um.on(t,(function(){return n.trigger(t)}))})),o}return f$(n,e),n.prototype.postLoad=function(){var t=this.config,e=this.em;t.trackSelection&&e&&this.add(e.get('selected'))},n.prototype.add=function(t){return this.um.register(t),this},n.prototype.remove=function(t){return this.um.unregister(t),this},n.prototype.removeAll=function(){return this.um.unregisterAll(),this},n.prototype.start=function(){return this.um.startTracking(),this},n.prototype.stop=function(){return this.um.stopTracking(),this},n.prototype.undo=function(t){void 0===t&&(t=!0);var e=this.em,n=this.um;return!e.isEditing()&&n.undo(t),this},n.prototype.undoAll=function(){return this.um.undoAll(),this},n.prototype.redo=function(t){void 0===t&&(t=!0);var e=this.em,n=this.um;return!e.isEditing()&&n.redo(t),this},n.prototype.redoAll=function(){return this.um.redoAll(),this},n.prototype.hasUndo=function(){return!!this.um.isAvailable('undo')},n.prototype.hasRedo=function(){return!!this.um.isAvailable('redo')},n.prototype.isRegistered=function(t){return!!this.getInstance().objectRegistry.isRegistered(t)},n.prototype.getStack=function(){return this.um.stack},n.prototype.getStackGroup=function(){var t=[],e=[];return this.getStack().forEach((function(n){var o=n.get('magicFusionIndex');e.indexOf(o)<0&&(e.push(o),t.push(n))})),t},n.prototype.skip=function(t){var e=!!this.um.isTracking();e&&this.stop(),t(),e&&this.start()},n.prototype.getGroupedStack=function(){var e={},n=this.getStack();return n.forEach((function(t,n){var o=t.get('magicFusionIndex'),i=function(t,e){var n=t.attributes,o=n.type,i=n.after,r=n.before,s=n.object,a=n.options;return{index:e,type:o,after:i,before:r,object:s,options:void 0===a?{}:a}}(t,n);e[o]?e[o].push(i):e[o]=[i]})),Object.keys(e).map((function(n){var o=e[n];return{index:o[o.length-1].index,actions:o,labels:(0,t.unique)(o.reduce((function(t,e){var n,o=null===(n=e.options)||void 0===n?void 0:n.action;return o&&t.push(o),t}),[]))}}))},n.prototype.goToGroup=function(e){var n=this;if(e){var o=this.getPointer(),i=e.index-o;(0,t.times)(Math.abs(i),(function(){n[i<0?'undo':'redo'](!1)}))}},n.prototype.getPointer=function(){return this.getStack().pointer},n.prototype.clear=function(){return this.um.clear(),this},n.prototype.getInstance=function(){return this.um},n.prototype.destroy=function(){this.clear().removeAll()},n}(_);const O$=_$;const b$={stylePrefix:'rte-',adjustToolbar:!0,actions:['bold','italic','underline','strikethrough','link','wrap'],custom:!1};var w$,x$=void 0&&(void 0).__assign||function(){return x$=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},x$.apply(this,arguments)};!function(t){t[t["ACTIVE"]=1]="ACTIVE",t[t["INACTIVE"]=0]="INACTIVE",t[t["DISABLED"]=-1]="DISABLED"}(w$||(w$={}));var S$='_rte',k$=1,P$=0,C$=-1,T$=function(t,e){void 0===e&&(e='A');var n=t.selection()||{},o=n.anchorNode,i=n.focusNode,r=null==o?void 0:o.parentNode,s=null==i?void 0:i.parentNode;return(null==r?void 0:r.nodeName)==e||(null==s?void 0:s.nodeName)==e},E$='data-selectme',Q$={bold:{name:'bold',icon:'<b>B</b>',attributes:{title:'Bold'},result:function(t){return t.exec('bold')}},italic:{name:'italic',icon:'<i>I</i>',attributes:{title:'Italic'},result:function(t){return t.exec('italic')}},underline:{name:'underline',icon:'<u>U</u>',attributes:{title:'Underline'},result:function(t){return t.exec('underline')}},strikethrough:{name:'strikethrough',icon:'<s>S</s>',attributes:{title:'Strike-through'},result:function(t){return t.exec('strikeThrough')}},link:{icon:"<svg viewBox=\"0 0 24 24\">\n          <path fill=\"currentColor\" d=\"M3.9,12C3.9,10.29 5.29,8.9 7,8.9H11V7H7A5,5 0 0,0 2,12A5,5 0 0,0 7,17H11V15.1H7C5.29,15.1 3.9,13.71 3.9,12M8,13H16V11H8V13M17,7H13V8.9H17C18.71,8.9 20.1,10.29 20.1,12C20.1,13.71 18.71,15.1 17,15.1H13V17H17A5,5 0 0,0 22,12A5,5 0 0,0 17,7Z\" />\n        </svg>",name:'link',attributes:{style:'font-size:1.4rem;padding:0 4px 2px;',title:'Link'},state:function(t){return t&&t.selection()&&T$(t)?k$:P$},result:function(t){T$(t)?t.exec('unlink'):t.insertHTML("<a href=\"\" ".concat(E$,">").concat(t.selection(),"</a>"),{select:!0})}},wrap:{name:'wrap',icon:"<svg viewBox=\"0 0 24 24\">\n            <path fill=\"currentColor\" d=\"M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z\" />\n        </svg>",attributes:{title:'Wrap for style'},state:function(t){return(null==t?void 0:t.selection())&&T$(t,'SPAN')?C$:P$},result:function(t){!T$(t,'SPAN')&&t.insertHTML("<span ".concat(E$,">").concat(t.selection(),"</span>"),{select:!0})}}},A$=function(){function n(e,n,o){void 0===o&&(o={});var i=this;if(this.em=e,this.settings=o,n[S$])return n[S$];n[S$]=this,this.setEl(n),this.updateActiveActions=this.updateActiveActions.bind(this),this.__onKeydown=this.__onKeydown.bind(this),this.__onPaste=this.__onPaste.bind(this);var r=(o.actions||[]).map((function(e){var n=e;return(0,t.isString)(e)?n=x$({},Q$[e]):Q$[e.name]&&(n=x$(x$({},Q$[e.name]),e)),n})),s=r.length?r:Object.keys(Q$).map((function(t){return Q$[t]}));o.classes=x$({actionbar:'actionbar',button:'action',active:'active',disabled:'disabled',inactive:'inactive'},o.classes);var a=o.classes,l=o.actionbar;if(this.actionbar=l,this.classes=a,this.actions=s,!l){if(!this.isCustom(o.module)){var c=o.actionbarContainer;(l=document.createElement('div')).className=a.actionbar,null==c||c.appendChild(l),this.actionbar=l}s.forEach((function(t){return i.addAction(t)}))}return o.styleWithCSS&&this.exec('styleWithCSS'),this}return n.prototype.isCustom=function(t){var e=t||this.em.RichTextEditor;return!(!(null==e?void 0:e.config.custom)&&!(null==e?void 0:e.customRte))},n.prototype.destroy=function(){},n.prototype.setEl=function(t){this.el=t,this.doc=t.ownerDocument},n.prototype.updateActiveActions=function(){var t=this,e=this.getActions();e.forEach((function(e){var n=e.update,o=e.btn,i=t.classes,r=i.active,s=i.inactive,a=i.disabled,l=e.state,c=e.name,u=t.doc,h=w$.INACTIVE;if(o&&(o.className=o.className.replace(r,'').trim(),o.className=o.className.replace(s,'').trim(),o.className=o.className.replace(a,'').trim()),l){var p=l(t,u);if(h=p,o)switch(p){case k$:o.className+=" ".concat(r);break;case P$:o.className+=" ".concat(s);break;case C$:o.className+=" ".concat(a)}}else u.queryCommandSupported(c)&&u.queryCommandState(c)&&(o&&(o.className+=" ".concat(r)),h=w$.ACTIVE);e.currentState=h,null==n||n(t,e)})),e.length&&this.em.RichTextEditor.__dbdTrgCustom()},n.prototype.enable=function(t){return this.enabled?this:this.__toggleEffects(!0,t)},n.prototype.disable=function(){return this.__toggleEffects(!1)},n.prototype.__toggleEffects=function(t,e){void 0===t&&(t=!1),void 0===e&&(e={});var n=t?ue.on:ue.S1,o=this.el,i=this.doc,r=this.actionbarEl();if(r&&(r.style.display=t?'':'none'),o.contentEditable="".concat(!!t),n(o,'mouseup keyup',this.updateActiveActions),n(i,'keydown',this.__onKeydown),n(i,'paste',this.__onPaste),this.enabled=t,t){var s=e.event;if(this.syncActions(),this.updateActiveActions(),s){var a=null;if(i.caretRangeFromPoint){var l=(0,ue.VB)(s);a=i.caretRangeFromPoint(l.clientX,l.clientY)}else s.rangeParent&&(a=i.createRange()).setStart(s.rangeParent,s.rangeOffset);var c=i.getSelection();null==c||c.removeAllRanges(),a&&(null==c||c.addRange(a))}o.focus()}return this},n.prototype.__onKeydown=function(t){var e=t,n=this.doc;'Enter'!==e.key||['insertOrderedList','insertUnorderedList'].some((function(t){return n.queryCommandState(t)}))||(n.execCommand('insertLineBreak'),e.preventDefault())},n.prototype.__onPaste=function(t){var e=t.clipboardData||window.clipboardData,n=e.getData('text'),o=e.getData('text/html');if(n&&!o){t.preventDefault();var i=n.replace(/(?:\r\n|\r|\n)/g,'<br/>');this.doc.execCommand('insertHTML',!1,i)}},n.prototype.syncActions=function(){var t=this;this.getActions().forEach((function(e){if(t.actionbar&&(!e.state||e.state&&e.state(t,t.doc)>=0)){var n=e.event||'click',o=e.btn;o&&(o["on".concat(n)]=function(){e.result(t,e),t.updateActiveActions()})}}))},n.prototype.addAction=function(t,e){void 0===e&&(e={});var n=e.sync,o=this.actionbarEl();if(o){var i=t.icon,r=t.attributes,s=void 0===r?{}:r,a=document.createElement('span');for(var l in a.className=this.classes.button,t.btn=a,s)a.setAttribute(l,s[l]);'string'==typeof i?a.innerHTML=i:a.appendChild(i),o.appendChild(a)}n&&(this.actions.push(t),this.syncActions())},n.prototype.getActions=function(){return this.actions},n.prototype.selection=function(){return this.doc.getSelection()},n.prototype.exec=function(t,e){this.doc.execCommand(t,!1,e)},n.prototype.actionbarEl=function(){return this.actionbar},n.prototype.insertHTML=function(n,o){var i=(void 0===o?{}:o).select,r=this,s=r.em,a=r.doc,l=r.el,c=a.getSelection();if(c&&c.rangeCount){var u=(0,e.getComponentModel)(l)||s.getSelected(),h=a.createElement('div'),p=c.getRangeAt(0);p.deleteContents(),(0,t.isString)(n)?h.innerHTML=n:n&&h.appendChild(n),Array.prototype.slice.call(h.childNodes).forEach((function(t){p.insertNode(t)})),c.removeAllRanges(),c.addRange(p),l.focus(),i&&u&&(u.once('rte:disable',(function(){var t=u.find("[".concat(E$,"]"))[0];t&&(s.setSelected(t),t.removeAttributes(E$))})),u.trigger('disable'))}},n}();const $$=A$;var j$=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),R$=void 0&&(void 0).__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o["throw"](t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},Z$=void 0&&(void 0).__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},M$=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},V$='change:canvasOffset frame:scroll component:update',D$={enable:'rte:enable',disable:'rte:disable',custom:'rte:custom'},I$=function(n){function o(e){var o=n.call(this,e,'RichTextEditor',b$)||this;o.events=D$;var i=o.config,r=i.pStylePrefix;r&&(i.stylePrefix=r+i.stylePrefix),o.pfx=i.stylePrefix,o.actions=i.actions||[];var s=new u.Hn;return o.model=s,s.on('change:currentView',o.__trgCustom,o),o.__dbdTrgCustom=(0,t.debounce)((function(){return o.__trgCustom()}),0),o}return j$(o,n),o.prototype.onLoad=function(){if((0,e.hasWin)()){var t=this.config,n=t.pStylePrefix,o=t.custom,i=(0,ue.ut)('div',{class:(0,ue.cx)("".concat(n,"rte-toolbar"),!o&&"".concat(n,"one-bg ").concat(n,"rte-toolbar-ui"))});this.toolbar=i,this.initRte((0,ue.ut)('div')),(0,ue.on)(i,'mousedown',(function(t){return t.stopPropagation()}))}},o.prototype.__trgCustom=function(){var t=this,e=t.model,n=t.em,o=t.events;n.trigger(o.custom,{enabled:!!e.get('currentView'),container:this.getToolbarEl(),actions:this.getAll()})},o.prototype.destroy=function(){var t,e,n;null===(t=this.globalRte)||void 0===t||t.destroy(),null===(n=null===(e=this.customRte)||void 0===e?void 0:e.destroy)||void 0===n||n.call(e),this.model.stopListening().clear({silent:!0}),this.__dbdTrgCustom.cancel(),(0,ue.L_)(this.toolbar)},o.prototype.postRender=function(t){var e=t.model.get('Canvas');this.toolbar.style.pointerEvents='all',this.hideToolbar(),e.getToolsEl().appendChild(this.toolbar)},o.prototype.initRte=function(t){var e=this.globalRte,n=this,o=n.em,i=n.pfx,r=n.actionbar,s=n.config,a=this.actions||M$([],s.actions,!0),l={actionbar:"".concat(i,"actionbar"),button:"".concat(i,"action"),active:"".concat(i,"active"),inactive:"".concat(i,"inactive"),disabled:"".concat(i,"disabled")};return e?(e.em=o,e.setEl(t)):(e=new $$(o,t,{classes:l,actions:a,actionbar:r,actionbarContainer:this.toolbar,module:this}),this.globalRte=e),e.actionbar&&(this.actionbar=e.actionbar),e.actions&&(this.actions=e.actions),e},o.prototype.add=function(t,e){var n;void 0===e&&(e={}),e.name=t,null===(n=this.globalRte)||void 0===n||n.addAction(e,{sync:!0})},o.prototype.get=function(t){var e,n;return null===(e=this.globalRte)||void 0===e||e.getActions().forEach((function(e){e.name==t&&(n=e)})),n},o.prototype.getAll=function(){var t;return(null===(t=this.globalRte)||void 0===t?void 0:t.getActions())||[]},o.prototype.remove=function(t){var e,n=this.getAll(),o=this.get(t);if(o){var i=o.btn,r=n.indexOf(o);null===(e=null==i?void 0:i.parentNode)||void 0===e||e.removeChild(i),n.splice(r,1)}return o},o.prototype.run=function(e){var n=this.globalRte,o=(0,t.isString)(e)?this.get(e):e;n&&o&&(o.result(n,o),n.updateActiveActions())},o.prototype.getToolbarEl=function(){return this.toolbar},o.prototype.updatePosition=function(){var n=this.em,o=this.toolbar,i='px',r=n.Canvas,s=o.style,a=r.getTargetToElementFixed(this.lastEl,o,{event:'rteToolbarPosUpdate',left:0});['top','left','bottom','right'].forEach((function(n){var o=a[n];(0,e.isDef)(o)&&(s[n]=(0,t.isString)(o)?o:(o||0)+i)}))},o.prototype.enable=function(t,e,n){return void 0===n&&(n={}),R$(this,void 0,void 0,(function(){var o,i,r,s,a;return Z$(this,(function(l){switch(l.label){case 0:return this.lastEl=t.el,i=(o=this).customRte,r=o.em,s=t.getChildrenContainer(),this.toolbar.style.display='',[4,i?i.enable(s,e):this.initRte(s).enable(n)];case 1:return a=l.sent(),r&&(setTimeout(this.updatePosition.bind(this),0),r.off(V$,this.updatePosition,this),r.on(V$,this.updatePosition,this),r.trigger('rte:enable',t,a)),this.model.set({currentView:t}),[2,a]}}))}))},o.prototype.getContent=function(e,n){return R$(this,void 0,void 0,(function(){var o;return Z$(this,(function(i){switch(i.label){case 0:return(o=this.customRte)&&n&&(0,t.isFunction)(o.getContent)?[4,o.getContent(e.el,n)]:[3,2];case 1:return[2,i.sent()];case 2:return[2,e.getChildrenContainer().innerHTML]}}))}))},o.prototype.hideToolbar=function(){var t=this.toolbar.style,e='-1000px';t.top=e,t.left=e,t.display='none'},o.prototype.disable=function(t,e,n){void 0===n&&(n={});var o=this.em,i=this.customRte,r=t.getChildrenContainer();i?i.disable(r,e):e&&e.disable(),this.hideToolbar(),o&&(o.off(V$,this.updatePosition,this),!n.fromMove&&o.trigger('rte:disable',t,e)),this.model.unset('currentView')},o}(_);const N$=I$,W$={sectors:[{name:'General',open:!1,properties:['display','float','position','top','right','left','bottom']},{name:'Flex',open:!1,properties:['flex-direction','flex-wrap','justify-content','align-items','align-content','order','flex-basis','flex-grow','flex-shrink','align-self']},{name:'Dimension',open:!1,properties:['width','height','max-width','min-height','margin','padding']},{name:'Typography',open:!1,properties:['font-family','font-size','font-weight','letter-spacing','color','line-height','text-align','text-shadow']},{name:'Decorations',open:!1,properties:['background-color','border-radius','border','box-shadow','background']},{name:'Extra',open:!1,properties:['opacity','transition','transform']}],appendTo:'',stylePrefix:'sm-',custom:!1,hideNotStylable:!0,highlightChanged:!0,highlightComputed:!0,showComputed:!0,clearProperties:!0,avoidComputed:['width','height']};var X$=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),L$=void 0&&(void 0).__assign||function(){return L$=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},L$.apply(this,arguments)},Y$=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},z$=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},q$=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return X$(o,n),o.getDefaults=function(){return(0,t.result)(this.prototype,'defaults')},o.prototype.defaults=function(){return{name:'',property:'',type:'',defaults:'',info:'',value:'',icon:'',functionName:'',status:'',visible:!0,fixedValues:['initial','inherit'],full:!1,important:!1,toRequire:!1,requires:void 0,requiresParent:null,parentTarget:null}},o.prototype.initialize=function(t,n){void 0===t&&(t={}),void 0===n&&(n={}),this.em=n.em;var i=this.getId()||'',r=this.get('name')||this.get('label')||'';!this.get('property')&&this.set('property',(r||i).replace(/ /g,'-'));var s=this.get('property');!this.get('id')&&this.set('id',s),!r&&this.set('name',(0,e.capitalize)(s).replace(/-/g,' ')),this.on('change',this.__upTargets),o.callInit(this,t,n)},o.prototype.__getParentProp=function(){var t,e;return null===(e=null===(t=this.collection)||void 0===t?void 0:t.opts)||void 0===e?void 0:e.parentProp},o.prototype.__upTargets=function(e,n){var o,i=this;void 0===n&&(n={});var r=this.em.Styles,s=this.getName(),a=n.__clear,l=a?'':this.__getFullValue(n),c=this.__getParentProp(),u=this.changedAttributes(),h=(0,t.keys)(u).reduce((function(t,e){return t[e]=i.previous(e),t}),{}),p=z$(z$([],(0,t.keys)(this.__getClearProps()),!0),['__p'],!1),d=(0,t.keys)(u),f=!n.__up&&!c&&(a||p.some((function(t){return d.indexOf(t)>=0}))),g=this.get('onChange'),m={property:this,from:h,to:u,value:l,opts:n};r.__trgEv(r.events.propertyUpdate,m),g&&g(m),f&&this.__upTargetsStyle(((o={})[s]=l,o),n)},o.prototype.__upTargetsStyle=function(t,e){var n,o=null===(n=this.em)||void 0===n?void 0:n.get('StyleManager');null==o||o.addStyleTargets(L$(L$({},t),{__p:!!e.avoidStore}),e)},o.prototype._up=function(t,e){void 0===e&&(e={}),e.noTarget&&(e.__up=!0);var n=e.partial,o=Y$(e,["partial"]);return t.__p=!(!o.avoidStore&&!n),this.set(t,L$(L$({},o),{avoidStore:t.__p}))},o.prototype.up=function(t,e){void 0===e&&(e={}),this.set(t,L$(L$({},e),{__up:!0}))},o.prototype.init=function(){},o.prototype.getId=function(){return this.get('id')},o.prototype.getType=function(){return this.get('type')},o.prototype.getName=function(){return this.get('property')},o.prototype.getLabel=function(t){var e;void 0===t&&(t={});var n=t.locale,o=void 0===n||n,i=this.getId(),r=this.get('name')||this.get('label');return o&&(null===(e=this.em)||void 0===e?void 0:e.t("styleManager.properties.".concat(i)))||r},o.prototype.getValue=function(t){void 0===t&&(t={});var e=t.noDefault,n=this.get('value');return this.hasValue()||e?n:this.getDefaultValue()},o.prototype.hasValue=function(e){void 0===e&&(e={});var n=e.noParent&&this.getParentTarget(),o=this.get('value');return!(0,t.isUndefined)(o)&&''!==o&&!n},o.prototype.hasValueParent=function(){return this.hasValue()&&!this.hasValue({noParent:!0})},o.prototype.getStyle=function(t){var n;void 0===t&&(t={});var o=this.getName();return(n={})[t.camelCase?(0,e.camelCase)(o):o]=this.__getFullValue(t),n},o.prototype.getDefaultValue=function(){var e=this.get('default');return"".concat((0,t.isUndefined)(e)?this.get('defaults'):e)},o.prototype.upValue=function(t,e){void 0===e&&(e={});var n=null===t||''===t?this.__getClearProps():this.__parseValue(t,e);return this._up(n,e)},o.prototype.isVisible=function(){return!!this.get('visible')},o.prototype.clear=function(t){return void 0===t&&(t={}),this._up(this.__getClearProps(),L$(L$({},t),{__clear:!0})),this},o.prototype.canClear=function(){var t=this.getParent();return t?t.__canClearProp(this):this.hasValue({noParent:!0})},o.prototype.getParent=function(){return this.__getParentProp()},o.prototype.isFull=function(){return!!this.get('full')},o.prototype.__parseValue=function(t,e){return this.parseValue(t,e)},o.prototype.__getClearProps=function(){return{value:''}},o.prototype.setValue=function(t,e,n){void 0===e&&(e=!0),void 0===n&&(n={});var o=this.parseValue(t),i=!e;!i&&this.set({value:void 0},{avoidStore:i,silent:!0}),this.set(o,L$({avoidStore:i},n))},o.prototype.setValueFromInput=function(t,e,n){void 0===n&&(n={}),this.setValue(t,e,L$(L$({},n),{fromInput:1}))},o.prototype.parseValue=function(e,n){void 0===n&&(n={});var o={value:e},i='!important',r=this.get('functionName')||'';if((0,t.isString)(e)&&-1!==e.indexOf(i)&&(o.value=e.replace(i,'').trim(),o.important=!0),!r&&!n.complete)return o;var s=[],a="".concat(o.value).trim(),l=a.indexOf('(')+1,c=r||a.substring(0,l-1);if(c&&(o.functionName=c),!r||0===a.indexOf("".concat(r,"("))){var u=a.lastIndexOf(')');s.push(l),u>=0&&s.push(u),o.value=String.prototype.substring.apply(a,s)}if(n.numeric){var h=parseFloat(o.value);o.unit=o.value.replace(h,''),o.value=h}return o},o.prototype.__getFullValue=function(t){var e=(void 0===t?{}:t).withDefault;return!this.hasValue()&&e?this.getDefaultValue():this.getFullValue()},o.prototype.getFullValue=function(e,n){void 0===n&&(n={});var o=this.get('functionName'),i=this.getDefaultValue(),r=(0,t.isUndefined)(e)?this.get('value'):e,s=!(0,t.isUndefined)(r)&&''!==r;if(r&&i&&r===i)return i;if(o&&s){var a='url'===o?"'".concat(r.replace(/'|"/g,''),"'"):r;r="".concat(o,"(").concat(a,")")}return s&&this.get('important')&&!n.skipImportant&&(r="".concat(r," !important")),r||''},o.prototype.__setParentTarget=function(t){this.up({parentTarget:t})},o.prototype.getParentTarget=function(){return this.get('parentTarget')||null},o.prototype.__parseFn=function(t){void 0===t&&(t='');var e=t.indexOf('(')+1,n=t.lastIndexOf(')');return{name:t.substring(0,e-1).trim(),value:String.prototype.substring.apply(t,[e,n>=0?n:void 0]).trim()}},o.prototype.__checkVisibility=function(n){var o=n.target,i=n.component,r=n.sectors,s=i||o;if(!s)return!1;var a=this.getId(),l=this.getName(),c=this.get('toRequire'),u=this.get('requires'),h=this.get('requiresParent'),p=s.get('unstylable'),d=s.get('stylable-require'),f=s.get('stylable');if((0,t.isArray)(f)&&(f=f.indexOf(l)>=0),(0,t.isArray)(p)&&(f=p.indexOf(l)<0),c&&(f=!o||d&&(d.indexOf(a)>=0||d.indexOf(l)>=0)),r&&u){var g=(0,t.keys)(u);r.forEach((function(e){e.getProperties().forEach((function(e){if((0,t.includes)(g,e.id)){var n=u[e.id];f=f&&(0,t.includes)(n,e.get('value'))}}))}))}if(h){var m=i&&i.parent(),v=m&&m.getEl();if(v){var y=(0,e.hasWin)()?window.getComputedStyle(v):{};(0,t.each)(h,(function(e,n){f=f&&y[n]&&(0,t.includes)(e,y[n])}))}else f=!1}return!!f},o}(u.Hn);const U$=q$;q$.callParentInit=function(t,e,n,o){void 0===o&&(o={}),t.prototype.initialize.apply(e,[n,L$(L$({},o),{skipInit:1})])},q$.callInit=function(t,e,n){void 0===n&&(n={}),!n.skipInit&&t.init(e,n)};var B$=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),F$=void 0&&(void 0).__assign||function(){return F$=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},F$.apply(this,arguments)},G$=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return B$(n,t),n.prototype.defaults=function(){return{values:{}}},n.prototype.initialize=function(){var t=this.collection;this.prop=null==t?void 0:t.prop},n.prototype.getId=function(){return this.cid},n.prototype.getIndex=function(){var t=this.collection;return t?t.indexOf(this):-1},n.prototype.getValues=function(t){void 0===t&&(t={});var n=this.get('values');return t.camelCase?Object.keys(n).reduce((function(t,o){return t[(0,e.camelCase)(o)]=n[o],t}),{}):n},n.prototype.getLabel=function(){var t;return null===(t=this.prop)||void 0===t?void 0:t.getLayerLabel(this)},n.prototype.isSelected=function(){var t;return(null===(t=this.prop)||void 0===t?void 0:t.getSelectedLayer())===this},n.prototype.select=function(){var t;return null===(t=this.prop)||void 0===t?void 0:t.selectLayer(this)},n.prototype.remove=function(){var t;return null===(t=this.prop)||void 0===t?void 0:t.removeLayer(this)},n.prototype.move=function(t){var e;return null===(e=this.prop)||void 0===e?void 0:e.moveLayer(this,t)},n.prototype.getStylePreview=function(t){var e;return void 0===t&&(t={}),null===(e=this.prop)||void 0===e?void 0:e.getStylePreview(this,t)},n.prototype.hasPreview=function(){var t;return!!(null===(t=this.prop)||void 0===t?void 0:t.get('preview'))},n.prototype.upValues=function(t){return void 0===t&&(t={}),this.set('values',F$(F$({},this.getValues()),t))},n}(u.Hn);const H$=G$;var K$=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),J$=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return K$(e,t),e.prototype.initialize=function(t,e){void 0===e&&(e={}),this.prop=e.prop},e}(u.FE);const tj=J$;J$.prototype.model=H$;var ej=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nj=void 0&&(void 0).__assign||function(){return nj=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},nj.apply(this,arguments)},oj=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},ij=function(t){return'integer'===t||'number'===t},rj=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return ej(o,n),o.prototype.defaults=function(){return nj(nj({},U$.getDefaults()),{detached:!1,properties:[],separator:' ',join:null,fromStyle:null,toStyle:null,full:!0})},o.prototype.initialize=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),U$.callParentInit(U$,this,t,e);var n=this.em,o=new ER(this.get('properties')||[],{em:n,parentProp:this});this.set('properties',o,{silent:!0}),this.listenTo(o,'change',this.__upProperties),U$.callInit(this,t,e)},Object.defineProperty(o.prototype,"properties",{get:function(){return this.get('properties')||[]},enumerable:!1,configurable:!0}),o.prototype.getProperties=function(){return oj([],this.get('properties').models,!0)},o.prototype.getProperty=function(t){return this.properties.filter((function(e){return e.getId()===t||e.getName()===t}))[0]},o.prototype.getPropertyAt=function(t){return this.get('properties').at(t)},o.prototype.isDetached=function(){return!!this.get('detached')},o.prototype.getValues=function(t){var e=(void 0===t?{}:t).byName;return this.getProperties().reduce((function(t,n){return t[e?n.getName():n.getId()]="".concat(n.__getFullValue()),t}),{})},o.prototype.getSeparator=function(){return this.getSplitSeparator()},o.prototype.getJoin=function(){return this.__getJoin()},o.prototype.getStyleFromProps=function(t){var n;void 0===t&&(t={});var o=this.getName(),i=this.__getJoin(),r=this.get('toStyle'),s=this.getValues(),a={};if(r)a=r(s,{join:i,name:o,property:this});else if(s=this.getValues({byName:!0}),this.isDetached())a=s;else{var l=this.getProperties().map((function(t){return t.__getFullValue({withDefault:1})})).filter(Boolean).join(i);(n={})[o]=l,a=n}return this.isDetached()?a[o]='':(a[o]=a[o]||'',a=nj(nj({},a),this.getProperties().reduce((function(t,e){return t[e.getName()]='',t}),{}))),t.camelCase?Object.keys(a).reduce((function(t,n){return t[(0,e.camelCase)(n)]=a[n],t}),{}):a},o.prototype.getSplitSeparator=function(){return new RegExp("".concat(this.get('separator'),"(?![^\\(]*\\))"))},o.prototype.__upProperties=function(t,e){if(void 0===e&&(e={}),!e.__up&&!e.__clearIn){var n=this.__getParentProp();if(n)return n.__upProperties(this,e);this.__upTargetsStyleProps(e,t)}},o.prototype.__upTargetsStyleProps=function(t,e){var n;void 0===t&&(t={});var o=this.getStyleFromProps();if(this.isDetached()&&e){var i=e.getName();(n={})[i]=o[i],o=n}this.__upTargetsStyle(o,t)},o.prototype._up=function(t,e){return void 0===e&&(e={}),this.__setProperties(this.__getSplitValue(t.value),e),U$.prototype._up.call(this,t,e),this},o.prototype.getStyle=function(t){return this.getStyleFromProps(t)},o.prototype.__getFullValue=function(t){if(void 0===t&&(t={}),this.isDetached()||t.__clear)return'';var e=this.getStyleFromProps()[this.getName()]||'';return Xn(e)},o.prototype.__getJoin=function(){var e=this.get('join');return(0,t.isString)(e)?e:this.get('separator')},o.prototype.__styleHasProps=function(e){void 0===e&&(e={});var n=this.getName(),o=this.getProperties().map((function(t){return t.getName()}));return oj([n],o,!0).some((function(n){return!(0,t.isUndefined)(e[n])&&''!==e[n]}))},o.prototype.__splitValue=function(t,e){return Xn(t).split(e).map((function(t){return t.trim()})).filter(Boolean)},o.prototype.__splitStyleName=function(t,e,n){return this.__splitValue(t[e]||'',n)},o.prototype.__getSplitValue=function(e,n){void 0===e&&(e='');var o=(void 0===n?{}:n).byName,i=this.getProperties(),r=4===i.length&&i.every((function(t){return ij(t.getType())})),s=this.__splitValue(e,this.getSplitSeparator()),a={};return i.forEach((function(e,n){var i=s[n],l=(0,t.isUndefined)(i)?'':i;if(r){var c=s.length;l=s[n]||s[n%c+(1!=c&&c%2?1:0)]||l}var u=o?e.getName():e.getId();a[u]=l||''})),a},o.prototype.__getPropsFromStyle=function(e,n){if(void 0===e&&(e={}),void 0===n&&(n={}),!this.__styleHasProps(e))return null;var o=n.byName,i=this.getName(),r=this.getProperties(),s=this.getSplitSeparator(),a=this.get('fromStyle'),l=a?a(e,{property:this,name:i,separator:s}):{};return a||(l=this.__getSplitValue(e[i]||'',{byName:o}),r.forEach((function(n){var i=e[n.getName()],r=o?n.getName():n.getId();(0,t.isUndefined)(i)||''===i||(l[r]=i)}))),l},o.prototype.__setProperties=function(e,n){void 0===e&&(e={}),void 0===n&&(n={}),this.getProperties().forEach((function(t){var o=e[t.getId()];t.__getFullValue()!==o&&t.upValue(o,n)}));var o=(0,t.keys)(e).map((function(t){return e[t]})).join(' ');this.set('value',o,{silent:!0})},o.prototype.clear=function(){var t=this;return this.getProperties().map((function(e){return e.clear({__clearIn:!t.isDetached()})})),U$.prototype.clear.call(this),this},o.prototype.hasValue=function(t){return this.getProperties().some((function(e){return e.hasValue(t)}))},o.prototype.getFullValue=function(){return this.__getFullValue()},o.prototype.__canClearProp=function(t){return this.isDetached()&&t.hasValue({noParent:!0})},o}(U$);const sj=rj;var aj=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),lj=void 0&&(void 0).__assign||function(){return lj=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},lj.apply(this,arguments)},cj=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},uj=/,(?![^\(]*\))/,hj=/\s(?![^(]*\))/,pj=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return aj(o,n),o.prototype.defaults=function(){return lj(lj({},sj.getDefaults()),{layers:[],layerSeparator:', ',layerJoin:'',prepend:0,preview:!1,layerLabel:null,selectedLayer:null})},o.prototype.initialize=function(t,e){void 0===t&&(t={}),void 0===e&&(e={}),sj.callParentInit(sj,this,t,e);var n=this.get('layers'),o=new tj(n,{prop:this});o.property=this,o.properties=this.get('properties'),this.set('layers',o,{silent:!0}),this.on('change:selectedLayer',this.__upSelected),this.listenTo(o,'add remove',this.__upLayers),sj.callInit(this,t,e)},o.prototype.getLayers=function(){return this.__getLayers().models},o.prototype.__getLayers=function(){return this.get('layers')},o.prototype.getLayer=function(t){return void 0===t&&(t=0),this.__getLayers().at(t)||void 0},o.prototype.getSelectedLayer=function(){var t=this.get('selectedLayer');return t&&t.getIndex()>=0?t:void 0},o.prototype.selectLayer=function(t){return this.set('selectedLayer',t,{__select:!0})},o.prototype.selectLayerAt=function(t){void 0===t&&(t=0);var e=this.getLayer(t);return e&&this.selectLayer(e)},o.prototype.moveLayer=function(e,n){void 0===n&&(n=0);var o=e?e.getIndex():-1;o>=0&&(0,t.isNumber)(n)&&n>=0&&n<this.getLayers().length&&o!==n&&(this.removeLayer(e),this.__getLayers().add(e,{at:n}))},o.prototype.addLayer=function(e,n){void 0===e&&(e={}),void 0===n&&(n={});var o={};return this.getProperties().forEach((function(n){var i=n.getId(),r=e[i];o[i]=(0,t.isUndefined)(r)?n.getDefaultValue():r})),this.__getLayers().push({values:o},n)},o.prototype.removeLayer=function(t){return this.__getLayers().remove(t)},o.prototype.removeLayerAt=function(t){void 0===t&&(t=0);var e=this.getLayer(t);return e?this.removeLayer(e):null},o.prototype.getLayerLabel=function(t){var e='';if(t){var n=this.get('layerLabel'),o=t.getValues(),i=t.getIndex();if(n)e=n(t,{index:i,values:o,property:this});else{var r=[];this.getProperties().map((function(t){r.push(o[t.getId()])})),e=r.filter(Boolean).join(' ')}}return e},o.prototype.getStyleFromLayer=function(n,o){var i;void 0===o&&(o={});var r,s=this.__getJoin(),a=this.__getJoinLayers(),l=this.get('toStyle'),c=this.getName(),u=n.getValues();if(l)r=l(u,{join:s,joinLayers:a,name:c,layer:n,property:this});else{var h=this.getProperties().map((function(e){var n=e.getName(),i=u[e.getId()],r=(0,t.isUndefined)(i)?e.getDefaultValue():i;if(o.number&&ij(e.getType())){var s=e.parseValue(i,o.number);r="".concat(s.value).concat(s.unit)}return{name:n,value:r}}));r=this.isDetached()?h.reduce((function(t,e){return t[e.name]=e.value,t}),{}):((i={})[this.getName()]=h.map((function(t){return t.value})).join(s),i)}return o.camelCase?Object.keys(r).reduce((function(t,n){return t[(0,e.camelCase)(n)]=r[n],t}),{}):r},o.prototype.getStylePreview=function(t,e){void 0===e&&(e={});var n={};return this.get('preview')&&(n=this.getStyleFromLayer(t,e)),n},o.prototype.getLayerSeparator=function(){var e=this.get('layerSeparator');return(0,t.isString)(e)?new RegExp("".concat(e,"(?![^\\(]*\\))")):e},o.prototype.__upProperties=function(t,e){var n;void 0===e&&(e={});var o=this.getSelectedLayer();o&&(o.upValues(((n={})[t.getId()]=t.__getFullValue(),n)),e.__up||this.__upTargetsStyleProps(e))},o.prototype.__upLayers=function(t,e,n){this.__upTargetsStyleProps(n||e)},o.prototype.__upTargets=function(t,e){if(void 0===e&&(e={}),!e.__select)return U$.prototype.__upTargets.call(this,t,e)},o.prototype.__upTargetsStyleProps=function(t){void 0===t&&(t={}),this.__upTargetsStyle(this.getStyleFromLayers(),t)},o.prototype.__upTargetsStyle=function(t,e){return U$.prototype.__upTargetsStyle.call(this,t,e)},o.prototype.__upSelected=function(t,e){var n=(void 0===t?{}:t).noEvent;void 0===e&&(e={});var o=this.em.Styles,i=this.getSelectedLayer(),r=null==i?void 0:i.getValues();r&&this.getProperties().forEach((function(t){var n,o=null!==(n=r[t.getId()])&&void 0!==n?n:'';t.__getFullValue()!==o&&t.upValue(o,lj(lj({},e),{__up:!0}))})),!n&&o.__trgEv(o.events.layerSelect,{property:this})},o.prototype._up=function(t,e){void 0===e&&(e={});var n=t.__layers,o=void 0===n?[]:n,i=cj(t,["__layers"]);return!this.isDetached()&&this.__setLayers(o),this.__upSelected({noEvent:!0},e),U$.prototype._up.call(this,i,e),this},o.prototype.__setLayers=function(t){void 0===t&&(t=[]);var e=this.__getLayers(),n=t.map((function(t){return{values:t}}));e.length===n.length?n.map((function(t,n){var o;return null===(o=e.at(n))||void 0===o?void 0:o.upValues(t.values)})):this.__getLayers().reset(n),this.__upSelected({noEvent:!0})},o.prototype.__parseValue=function(t){var e=this,n=this.parseValue(t);return n.__layers=t.split(uj).map((function(t){return t.trim()})).map((function(t){return e.__parseLayer(t)})).filter(Boolean),n},o.prototype.__parseLayer=function(e){var n=this.get('parseLayer'),o=e.split(hj),i=this.getProperties();return n?n({value:e,values:o}):i.reduce((function(e,n,i){var r=o[i];return e[n.getId()]=(0,t.isUndefined)(r)?n.getDefaultValue():r,e}),{})},o.prototype.__getLayersFromStyle=function(e){var n=this;if(void 0===e&&(e={}),!this.__styleHasProps(e))return null;var o=this.getName(),i=this.getProperties(),r=this.getLayerSeparator(),s=this.get('fromStyle'),a=s?s(e,{property:this,name:o,separatorLayers:r}):[];if(!s){var l=this.__splitStyleName(e,o,r).map((function(t){return t.split(n.getSplitSeparator())})).map((function(e){var n={};return i.forEach((function(o,i){var r=e[i];n[o.getId()]=(0,t.isUndefined)(r)?o.getDefaultValue():r})),n}));i.forEach((function(t){var o=t.getId();n.__splitStyleName(e,t.getName(),r).map((function(e){var n;return(n={})[o]=e||t.getDefaultValue(),n})).forEach((function(t,e){l[e]=l[e]?lj(lj({},l[e]),t):t}))})),a=l}return(0,t.isArray)(a)?a:[a]},o.prototype.getStyle=function(t){return void 0===t&&(t={}),this.getStyleFromLayers(t)},o.prototype.getStyleFromLayers=function(e){var n=this;void 0===e&&(e={});var o={},i=this.getName(),r=this.getLayers(),s=this.getProperties(),a=r.map((function(t){return n.getStyleFromLayer(t,e)}));if(a.forEach((function(e){(0,t.keys)(e).map((function(t){o[t]||(o[t]=[]),o[t].push(e[t])}))})),(0,t.keys)(o).map((function(t){o[t]=o[t].join(n.__getJoinLayers())})),this.isDetached())o[i]='',!r.length&&s.map((function(t){o[t.getName()]=''}));else{var l=s.reduce((function(t,e){return t[e.getName()]='',t}),{});o[i]=o[i]||'',o=lj(lj({},o),l)}return o},o.prototype.__getJoinLayers=function(){var e=this.get('layerJoin'),n=this.get('layerSeparator');return e||((0,t.isString)(n)?n:e)},o.prototype.__getFullValue=function(){if(this.get('detached'))return'';var t=this.getStyleFromLayers();return Xn(t[this.getName()])},o.prototype.hasValue=function(t){void 0===t&&(t={});var e=t.noParent&&this.getParentTarget();return this.getLayers().length>0&&!e},o.prototype.clear=function(t){return void 0===t&&(t={}),this.__getLayers().reset(),this.__upTargetsStyleProps(t),U$.prototype.clear.call(this),this},o.prototype.__canClearProp=function(){return!1},o}(sj);const dj=pj;var fj=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),gj=void 0&&(void 0).__assign||function(){return gj=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},gj.apply(this,arguments)},mj=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},vj=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},yj='data-clear-style',_j=function(n){function o(e){void 0===e&&(e={});var o=n.call(this,e)||this;(0,t.bindAll)(o,'__change','__updateStyle');var i=e.config||{},r=i.em;o.config=i,o.em=r,o.pfx=i.stylePrefix||'',o.ppfx=i.pStylePrefix||'',o.__destroyFn=o.destroy?o.destroy.bind(o):function(){};var s=o.model;s.view=o,o.onValueChange=(0,t.debounce)(o.onValueChange.bind(o),10),o.updateStatus=(0,t.debounce)(o.updateStatus.bind(o),0),o.listenTo(s,'destroy remove',o.remove),o.listenTo(s,'change:visible',o.updateVisibility),o.listenTo(s,'change:name change:className change:full',o.render),o.listenTo(s,'change:value',o.onValueChange),o.listenTo(s,'change:parentTarget',o.updateStatus),o.listenTo(r,'change:device',o.onValueChange);var a=o.init&&o.init.bind(o);return a&&a(),o}return fj(o,n),o.prototype.events=function(){var t;return(t={change:'inputValueChanged'})["click [".concat(yj,"]")]='clear',t},o.prototype.template=function(t){var e=this.pfx,n=this.ppfx;return"\n      <div class=\"".concat(e,"label\" data-sm-label></div>\n      <div class=\"").concat(n,"fields\" data-sm-fields></div>\n    ")},o.prototype.templateLabel=function(t){var e=this.pfx,n=this.em,o=t.parent,i=t.attributes,r=i.icon,s=void 0===r?'':r,a=i.info,l=void 0===a?'':a,c=null==n?void 0:n.getConfig().icons,u=(null==c?void 0:c.close)||'';return"\n      <span class=\"".concat(e,"icon ").concat(s,"\" title=\"").concat(l,"\">\n        ").concat(t.getLabel(),"\n      </span>\n      ").concat(o?'':"<div class=\"".concat(e,"clear\" style=\"display: none\" ").concat(yj,">").concat(u,"</div>"),"\n    ")},o.prototype.templateInput=function(t){return"\n      <div class=\"".concat(this.ppfx,"field\">\n        <input placeholder=\"").concat(t.getDefaultValue(),"\"/>\n      </div>\n    ")},o.prototype.remove=function(){var t=this;return u.G7.prototype.remove.apply(this,arguments),['em','input','$input','view'].forEach((function(e){return t[e]=null})),this.__destroyFn(this._getClbOpts()),this},o.prototype.updateStatus=function(){var t,e=this,n=e.model,o=e.pfx,i=e.ppfx,r=e.config,s="".concat(i,"four-color"),a="".concat(i,"color-warn"),l=this.$el.children(".".concat(o,"label")),c=this.getClearEl(),u=c?c.style:{};l.removeClass("".concat(s," ").concat(a)),u.display='none',n.hasValue({noParent:!0})&&r.highlightChanged?(l.addClass(s),r.clearProperties&&(u.display='')):n.hasValue()&&r.highlightComputed&&l.addClass(a),null===(t=this.parent)||void 0===t||t.updateStatus()},o.prototype.clear=function(t){t&&t.stopPropagation(),this.model.clear()},o.prototype.getClearEl=function(){return this.clearEl||(this.clearEl=this.el.querySelector("[".concat(yj,"]"))),this.clearEl},o.prototype.inputValueChanged=function(t){t&&t.stopPropagation(),this.emit||this.model.upValue(t.target.value)},o.prototype.onValueChange=function(t,e,n){void 0===n&&(n={}),this.setValue(this.model.getFullValue(void 0,{skipImportant:!0})),this.updateStatus()},o.prototype.setValue=function(e){var n=this.model,o=(0,t.isUndefined)(e)||''===e?n.getDefaultValue():e;if(this.update)return this.__update(o);this.__setValueInput(o)},o.prototype.__setValueInput=function(t){var e=this.getInputEl();e&&(e.value=t)},o.prototype.getInputEl=function(){return this.input||(this.input=this.el.querySelector('input')),this.input},o.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?'':'none'},o.prototype.clearCached=function(){delete this.clearEl,delete this.input,delete this.$input},o.prototype.__unset=function(){var t=this.unset&&this.unset.bind(this);t&&t(this._getClbOpts())},o.prototype.__update=function(t){var e=this.update&&this.update.bind(this);e&&e(gj(gj({},this._getClbOpts()),{value:t}))},o.prototype.__change=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.emit&&this.emit.bind(this);n&&n.apply(void 0,vj([this._getClbOpts()],t,!1))},o.prototype.__updateStyle=function(t,n){void 0===n&&(n={});var o=n.complete,i=n.partial,r=(mj(n,["complete","partial"]),this.model),s=!1!==o&&!0!==i;(0,e.isObject)(t)?r.__upTargetsStyle(t,{avoidStore:!s}):r.upValue(t,{partial:!s})},o.prototype._getClbOpts=function(){var t=this,e=t.model;return{el:t.el,createdEl:t.createdEl,property:e,props:e.attributes,change:this.__change,updateStyle:this.__updateStyle}},o.prototype.render=function(){this.clearCached();var t=this,e=t.pfx,n=t.model,o=t.el,i=t.$el,r=n.getName(),s=n.getType(),a=n.get('className')||'',l="".concat(e,"property"),c='number'===s?"".concat(e).concat(s," ").concat(e,"integer"):"".concat(e).concat(s);this.createdEl&&this.__destroyFn(this._getClbOpts()),i.empty().append(this.template(n)),i.find('[data-sm-label]').append(this.templateLabel(n));var u=this.create&&this.create.bind(this);this.createdEl=u&&u(this._getClbOpts()),i.find('[data-sm-fields]').append(this.createdEl||this.templateInput(n)),o.className="".concat(l," ").concat(c," ").concat(l,"__").concat(r," ").concat(a).trim(),o.className+=n.isFull()?" ".concat(l,"--full"):'';var h=this.onRender&&this.onRender.bind(this);return h&&h(),this.setValue(n.getValue()),this},o.prototype.onRender=function(){},o}(u.G7);const Oj=_j;var bj=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),wj=function(t){function e(e){var n=t.call(this,e)||this;n.config=e.config||{},n.pfx=n.config.stylePrefix||'',n.properties=[],n.parent=e.parent;var o=n.collection;return n.listenTo(o,'add',n.addTo),n.listenTo(o,'reset',n.render),n}return bj(e,t),e.prototype.addTo=function(t,e,n){this.add(t,null,n)},e.prototype.add=function(t,e,n){void 0===n&&(n={});var o=this.parent,i=this.config,r=e||this.el,s=new t.typeView({model:t,config:i});o&&(s.parent=o),s.render();var a=s.el;this.properties.push(s),(0,ue.$Q)(r,a,n.at)},e.prototype.remove=function(){return u.G7.prototype.remove.apply(this,arguments),this.clearItems(),this},e.prototype.clearItems=function(){this.properties.forEach((function(t){return t.remove()})),this.properties=[]},e.prototype.render=function(){var t=this,e=this.$el,n=this.pfx;this.clearItems();var o=document.createDocumentFragment();return this.collection.forEach((function(e){return t.add(e,o)})),e.empty(),e.append(o),e.attr('class',"".concat(n,"properties")),this},e}(u.G7);const xj=wj;var Sj=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),kj=void 0&&(void 0).__assign||function(){return kj=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},kj.apply(this,arguments)},Pj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Sj(e,t),e.prototype.templateInput=function(){var t=this.pfx;return"\n      <div class=\"".concat(t,"field ").concat(t,"composite\">\n        <span id=\"").concat(t,"input-holder\"></span>\n      </div>\n    ")},e.prototype.remove=function(){var t;return null===(t=this.props)||void 0===t||t.remove(),Oj.prototype.remove.apply(this,arguments),this},e.prototype.onValueChange=function(){},e.prototype.onRender=function(){var t=this.pfx,e=this.model,n=e.get('properties');if(n.length&&!this.props){var o=e.isDetached(),i=new xj({config:kj(kj({},this.config),{highlightComputed:o,highlightChanged:o}),collection:n,parent:this});i.render(),this.$el.find("#".concat(t,"input-holder")).append(i.el),this.props=i}},e.prototype.clearCached=function(){Oj.prototype.clearCached.apply(this,arguments),delete this.props},e}(Oj);const Cj=Pj;var Tj=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ej=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Tj(n,e),n.prototype.events=function(){return{click:'select','click [data-close-layer]':'removeItem','mousedown [data-move-layer]':'initSorter','touchstart [data-move-layer]':'initSorter'}},n.prototype.template=function(){var t=this,e=t.pfx,n=t.ppfx,o=t.em,i=null==o?void 0:o.getConfig().icons,r=(null==i?void 0:i.close)||'',s=(null==i?void 0:i.move)||'';return"\n      <div class=\"".concat(e,"label-wrp\">\n        <div id=\"").concat(e,"move\" class=\"").concat(n,"no-touch-actions\" data-move-layer>\n          ").concat(s,"\n        </div>\n        <div id=\"").concat(e,"label\" data-label></div>\n        <div id=\"").concat(e,"preview-box\" class=\"").concat(e,"layer-preview\" style=\"display: none\" data-preview-box>\n          <div id=\"").concat(e,"preview\" class=\"").concat(e,"layer-preview-cnt\" data-preview></div>\n        </div>\n        <div id=\"").concat(e,"close-layer\" class=\"").concat(e,"btn-close\" data-close-layer>\n          ").concat(r,"\n        </div>\n      </div>\n      <div id=\"").concat(e,"inputs\" data-properties></div>\n    ")},n.prototype.initialize=function(t){void 0===t&&(t={});var e=this.model,n=t.config||{};this.em=n.em,this.config=n,this.sorter=t.sorter,this.pfx=n.stylePrefix||'',this.ppfx=n.pStylePrefix||'',this.propertyView=t.propertyView;var o=this.propertyView.model;this.listenTo(e,'destroy remove',this.remove),this.listenTo(e,'change:values',this.updateLabel),this.listenTo(o,'change:selectedLayer',this.updateVisibility),e.view=this,e.set({droppable:0,draggable:1}),this.$el.data('model',e)},n.prototype.initSorter=function(){var t;null===(t=this.sorter)||void 0===t||t.startSort(this.el)},n.prototype.removeItem=function(t){t&&t.stopPropagation(),this.model.remove()},n.prototype.select=function(){this.model.select()},n.prototype.getPropertiesWrapper=function(){return this.propsWrapEl||(this.propsWrapEl=this.el.querySelector('[data-properties]')),this.propsWrapEl},n.prototype.getPreviewEl=function(){return this.previewEl||(this.previewEl=this.el.querySelector('[data-preview]')),this.previewEl},n.prototype.getLabelEl=function(){return this.labelEl||(this.labelEl=this.el.querySelector('[data-label]')),this.labelEl},n.prototype.updateLabel=function(){var e=this.model,n=e.getLabel();if(this.getLabelEl().innerHTML=n,e.hasPreview()){var o=this.getPreviewEl(),i=e.getStylePreview({number:{min:-3,max:3}}),r=(0,t.keys)(i).map((function(t){return"".concat(t,":").concat(i[t])})).join(';');o.setAttribute('style',r)}},n.prototype.updateVisibility=function(){var t,e=this,n=e.pfx,o=e.model,i=e.propertyView,r=this.getPropertiesWrapper(),s=o.isSelected();r.style.display=s?'':'none',this.$el[s?'addClass':'removeClass']("".concat(n,"active")),s&&r.appendChild(null===(t=i.props)||void 0===t?void 0:t.el)},n.prototype.render=function(){var t=this,e=t.el,n=t.pfx,o=t.model;return e.innerHTML=this.template(),e.className="".concat(n,"layer"),o.hasPreview()&&(e.querySelector('[data-preview-box]').style.display=''),this.updateLabel(),this.updateVisibility(),this},n}(u.G7);const Qj=Ej;var Aj=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),$j=function(t){function e(e){var n=t.call(this,e)||this,o=n.collection,i=e.config||{},r=i.em,s=i.stylePrefix||'',a=i.pStylePrefix||'';n.config=i,n.pfx=s,n.ppfx=a,n.propertyView=e.propertyView,n.className="".concat(s,"layers ").concat(a,"field"),n.listenTo(o,'add',n.addTo),n.listenTo(o,'reset',n.reset),n.items=[];var l=null==r?void 0:r.Utils;return n.sorter=l?new l.Sorter({container:n.el,ignoreViewChildren:1,containerSel:".".concat(s,"layers"),itemSel:".".concat(s,"layer"),pfx:i.pStylePrefix,em:r}):'',o.view=n,n.$el.data('model',o),n.$el.data('collection',o),n}return Aj(e,t),e.prototype.addTo=function(t){var e=this.collection.indexOf(t);this.addToCollection(t,null,e)},e.prototype.addToCollection=function(t,e,n){var o=e||null,i=this,r=i.propertyView,s=i.config,a=i.sorter,l=i.$el,c=new Qj({model:t,config:s,sorter:a,propertyView:r}),u=c.render().el;if(this.items.push(c),o)o.appendChild(u);else if(void 0!==n){var h='before';l.children().length===n&&(n--,h='after'),n<0?l.append(u):l.children().eq(n)[h](u)}else l.append(u);return u},e.prototype.reset=function(t,e){this.clearItems(),this.render()},e.prototype.remove=function(){return this.clearItems(),u.G7.prototype.remove.apply(this,arguments),this},e.prototype.clearItems=function(){this.items.forEach((function(t){return t.remove()})),this.items=[]},e.prototype.render=function(){var t=this,e=this.$el,n=this.sorter,o=document.createDocumentFragment();return e.empty(),this.collection.forEach((function(e){return t.addToCollection(e,o)})),e.append(o),e.attr('class',this.className),n&&(n.plh=null),this},e}(u.G7);const jj=$j;var Rj=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Zj=void 0&&(void 0).__assign||function(){return Zj=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Zj.apply(this,arguments)},Mj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Rj(e,t),e.prototype.events=function(){return Zj(Zj({},Cj.prototype.events()),{'click [data-add-layer]':'addLayer',change:''})},e.prototype.templateInput=function(){var t=this.pfx,e=this.em,n=null==e?void 0:e.getConfig().icons,o=(null==n?void 0:n.plus)||'+';return"\n      <div class=\"".concat(t,"field ").concat(t,"stack\">\n        <button type=\"button\" id=\"").concat(t,"add\" data-add-layer>\n          ").concat(o,"\n        </button>\n        <div data-layers-wrapper></div>\n      </div>\n    ")},e.prototype.init=function(){var t=this.model;this.listenTo(t.__getLayers(),'change reset',this.updateStatus)},e.prototype.addLayer=function(){this.model.addLayer({},{at:0})},e.prototype.setValue=function(){},e.prototype.remove=function(){var t;return null===(t=this.layersView)||void 0===t||t.remove(),Cj.prototype.remove.apply(this,arguments),this},e.prototype.clearCached=function(){Cj.prototype.clearCached.apply(this,arguments),delete this.layersView},e.prototype.onRender=function(){var t=this,e=t.model,n=t.el,o=t.config,i=e.get('properties');if(i.length&&!this.props){var r=new xj({config:Zj(Zj({},o),{highlightComputed:!1,highlightChanged:!1}),collection:i,parent:this});r.render();var s=new jj({collection:e.__getLayers(),config:o,propertyView:this});s.render(),n.querySelector('[data-layers-wrapper]').appendChild(s.el),this.props=r,this.layersView=s}},e}(Cj);const Vj=Mj;var Dj=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Ij=void 0&&(void 0).__assign||function(){return Ij=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Ij.apply(this,arguments)},Nj=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Dj(n,e),n.prototype.events=function(){return Ij(Ij({},Oj.prototype.events()),{'click [data-clear-asset]':'clear','click [data-open-assets]':'openAssetManager'})},n.prototype.templateInput=function(){var t,e=this.pfx,n=this.em,o=null===(t=this.em)||void 0===t?void 0:t.getConfig().icons,i=null==o?void 0:o.close;return"\n      <div class=\"".concat(e,"field ").concat(e,"file\">\n        <div id='").concat(e,"input-holder'>\n          <div class=\"").concat(e,"btn-c\">\n            <button class=\"").concat(e,"btn\" id=\"").concat(e,"images\" type=\"button\" data-open-assets>\n              ").concat(n.t('styleManager.fileButton'),"\n            </button>\n          </div>\n          <div style=\"clear:both;\"></div>\n        </div>\n        <div id=\"").concat(e,"preview-box\" class=\"").concat(e,"preview-file\" data-preview-box>\n          <div id=\"").concat(e,"preview-file\" class=\"").concat(e,"preview-file-cnt\" data-preview></div>\n          <div id=\"").concat(e,"close\" class=\"").concat(e,"preview-file-close\" data-clear-asset>").concat(i,"</div>\n        </div>\n      </div>\n    ")},n.prototype.__setValueInput=function(t){var e=this.model,n=this.el,o=e.getDefaultValue(),i=n.querySelector('[data-preview-box]'),r=n.querySelector('[data-preview]');i.style.display=t&&t!==o?'':'none',r.style.backgroundImage=t||e.getDefaultValue()},n.prototype.openAssetManager=function(){var e,n=this,o=null===(e=this.em)||void 0===e?void 0:e.Assets;null==o||o.open({select:function(e,i){var r=(0,t.isString)(e)?e:e.get('src');n.model.upValue(r,{partial:!i}),i&&o.close()},types:['image'],accept:'image/*'})},n}(Oj);const Wj=Nj;var Xj=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Lj=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Xj(e,t),e.prototype.templateInput=function(t){return''},e.prototype.init=function(){var t=this.model;this.listenTo(t,'change:unit',this.onValueChange),this.listenTo(t,'change:units',this.render)},e.prototype.setValue=function(t){},e.prototype.onRender=function(){var t=this,e=t.ppfx,n=t.model,o=t.el;if(!this.inputInst){var i=n.input;i.ppfx=e,i.render(),o.querySelector(".".concat(e,"fields")).appendChild(i.el),this.input=i.inputEl.get(0),this.inputInst=i}},e.prototype.clearCached=function(){Oj.prototype.clearCached.apply(this,arguments),this.inputInst=null},e}(Oj);const Yj=Lj;var zj=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qj=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this,o=e.ppfx||'';return n.opts=e,n.ppfx=o,n.em=e.target||{},!e.onChange&&n.listenTo(n.model,'change:value',n.handleModelChange),n}return zj(e,t),e.prototype.template=function(){return"<span class=\"".concat(this.holderClass(),"\"></span>")},e.prototype.inputClass=function(){return"".concat(this.ppfx,"field")},e.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},e.prototype.elementUpdated=function(){this.model.trigger('el:change')},e.prototype.setValue=function(t,e){var n=this.model,o=t||n.get('defaults'),i=this.getInputEl();i&&(i.value=o)},e.prototype.handleModelChange=function(t,e,n){this.setValue(e,n)},e.prototype.handleChange=function(t){t.stopPropagation();var e=this.getInputEl().value;this.__onInputChange(e),this.elementUpdated()},e.prototype.__onInputChange=function(t){this.model.set({value:t},{fromInput:1})},e.prototype.getInputEl=function(){if(!this.inputEl){var t=this.model,e=this.opts.type||'text',n=t.get('placeholder')||t.get('defaults')||t.get('default')||'';this.inputEl=(0,l["default"])("<input type=\"".concat(e,"\" placeholder=\"").concat(n,"\">"))}return this.inputEl.get(0)},e.prototype.render=function(){this.inputEl=null;var t=this.$el;return t.addClass(this.inputClass()),t.html(this.template()),t.find(".".concat(this.holderClass())).append(this.getInputEl()),this},e}(u.G7);const Uj=qj;qj.prototype.events={change:'handleChange'};var Bj=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),Fj=void 0&&(void 0).__assign||function(){return Fj=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},Fj.apply(this,arguments)};l["default"]&&ie(l["default"]);var Gj=function(t){var e='name'===t.getFormat()&&t.toName(),n=1==t.getAlpha()?t.toHexString():t.toRgbString();return e||n.replace(/ /g,'')},Hj=function(e){function n(){return null!==e&&e.apply(this,arguments)||this}return Bj(n,e),n.prototype.template=function(){var t=this.ppfx;return"\n      <div class=\"".concat(this.holderClass(),"\"></div>\n      <div class=\"").concat(t,"field-colorp\">\n        <div class=\"").concat(t,"field-colorp-c\" data-colorp-c>\n          <div class=\"").concat(t,"checker-bg\"></div>\n        </div>\n      </div>\n    ")},n.prototype.inputClass=function(){var t=this.ppfx;return"".concat(t,"field ").concat(t,"field-color")},n.prototype.holderClass=function(){return"".concat(this.ppfx,"input-holder")},n.prototype.remove=function(){return e.prototype.remove.call(this),this.colorEl.spectrum('destroy'),this},n.prototype.handleChange=function(e){e.stopPropagation();var n=e.target.value;(0,t.isUndefined)(n)||this.__onInputChange(n)},n.prototype.__onInputChange=function(t){var e=this.model,n=this.opts.onChange,o=t,i=this.getColorEl();if(i){i.spectrum('set',o);var r=i.spectrum('get'),s=o&&Gj(r);s&&(o=s)}n?n(o):e.set({value:o},{fromInput:1})},n.prototype.setValue=function(e,n){void 0===n&&(n={});var o=this.model,i=(0,t.isUndefined)(n.def)?o.get('defaults'):n.def,r=(0,t.isUndefined)(e)?(0,t.isUndefined)(i)?'':i:e,s=this.getInputEl(),a=this.getColorEl(),l='none'!=r?r:'';s.value=r,a.get(0).style.backgroundColor=l,(n.fromTarget||n.fromInput&&!n.avoidStore)&&(a.spectrum('set',l),this.noneColor='none'==r,this.movedColor=l)},n.prototype.getColorEl=function(){var t=this;if(!this.colorEl){var e=this,n=e.em,o=e.model,i=e.opts,r=this.ppfx,s=i.onChange,a=(0,l["default"])("<div class=\"".concat(this.ppfx,"field-color-picker\"></div>")),c=a.get(0).style,u=n&&n.config?n.config.el:'',h=n&&n.getConfig&&n.getConfig().colorPicker||{};this.movedColor='';var p,d=!1;this.$el.find('[data-colorp-c]').append(a);var f=function(t,e){void 0===e&&(e=!0),s?s(t,!e):(e&&o.setValueFromInput(0,!1),o.setValueFromInput(t,e))};a.spectrum(Fj(Fj(Fj({color:o.getValue()||!1,containerClassName:"".concat(r,"one-bg ").concat(r,"two-color"),appendTo:u||'body',maxSelectionSize:8,showPalette:!0,showAlpha:!0,chooseText:'Ok',cancelText:'⨯',palette:[]},h),o.get('colorPicker')||{}),{move:function(e){var n=Gj(e);t.movedColor=n,c.backgroundColor=n,f(n,!1)},change:function(e){d=!0;var n=Gj(e);c.backgroundColor=n,f(n),t.noneColor=!1},show:function(e){d=!1,t.movedColor='',p=s?o.getValue({noDefault:!0}):Gj(e)},hide:function(){d||!p&&!s||(t.noneColor&&(p=''),c.backgroundColor=p,a.spectrum('set',p),f(p,!1))}})),n&&n.on&&this.listenTo(n,'component:selected',(function(){t.movedColor&&f(t.movedColor),d=!0,t.movedColor='',a.spectrum('hide')})),this.colorEl=a}return this.colorEl},n.prototype.render=function(){return Uj.prototype.render.call(this),this.getColorEl(),this},n}(Uj);const Kj=Hj;var Jj=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),tR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Jj(e,t),e.prototype.setValue=function(t){var e;null===(e=this.inputInst)||void 0===e||e.setValue(t,{fromTarget:1,def:this.model.getDefaultValue()})},e.prototype.remove=function(){var t=this;Yj.prototype.remove.apply(this,arguments);var e=this.inputInst;return e&&e.remove&&e.remove(),['inputInst','$color'].forEach((function(e){return t[e]=null})),this},e.prototype.__handleChange=function(t,e){this.model.upValue(t,{partial:e})},e.prototype.onRender=function(){var t;if(!this.inputInst){this.__handleChange=this.__handleChange.bind(this);var e=this,n=e.ppfx,o=e.model,i=e.em,r=e.el,s=new Kj({target:i,model:o,ppfx:n,onChange:this.__handleChange}).render();r.querySelector(".".concat(n,"fields")).appendChild(s.el),this.input=null===(t=s.inputEl)||void 0===t?void 0:t.get(0),this.inputInst=s}},e}(Yj);const eR=tR;var nR=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),oR=void 0&&(void 0).__assign||function(){return oR=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},oR.apply(this,arguments)},iR=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},rR=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return nR(o,n),o.prototype.defaults=function(){return oR(oR({},U$.getDefaults()),{options:[],full:0})},o.prototype.getOptions=function(){var t=this.attributes,e=t.options,n=t.list;return(e&&e.length?e:n)||[]},o.prototype.getOption=function(t){var n=this,o=(0,e.isDef)(t)?t:this.getValue();return this.getOptions().filter((function(t){return n.getOptionId(t)===o}))[0]||null},o.prototype.setOptions=function(t){return void 0===t&&(t=[]),this.set('options',t),this},o.prototype.addOption=function(t){if(t){var e=this.getOptions();this.setOptions(iR(iR([],e,!0),[t],!1))}return this},o.prototype.getOptionId=function(t){return(0,e.isDef)(t.id)?t.id:t.value},o.prototype.getOptionLabel=function(e,n){var o;void 0===n&&(n={});var i=n.locale,r=void 0===i||i,s=((0,t.isString)(e)?this.getOption(e):e)||{},a=this.getOptionId(s),l=s.label||s.name||a,c=n.property||this.getId();return r&&(null===(o=this.em)||void 0===o?void 0:o.t("styleManager.options.".concat(c,".").concat(a)))||l},o.prototype.initialize=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];U$.prototype.initialize.apply(this,t),this.listenTo(this,'change:options',this.__onOptionChange)},o.prototype.__onOptionChange=function(){this.set('list',this.get('options'))},o}(U$);const sR=rR;var aR=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),lR=function(t){function e(e){var n=t.call(this,e)||this;return n.listenTo(n.model,'change:options',n.updateOptions),n}return aR(e,t),e.prototype.templateInput=function(){var t=this.pfx,e=this.ppfx;return"\n      <div class=\"".concat(e,"field ").concat(e,"select\">\n        <span id=\"").concat(t,"input-holder\"></span>\n        <div class=\"").concat(e,"sel-arrow\">\n          <div class=\"").concat(e,"d-s-arrow\"></div>\n        </div>\n      </div>\n    ")},e.prototype.updateOptions=function(){delete this.input,this.onRender()},e.prototype.onRender=function(){var t=this.pfx,e=this.model,n=e.getOptions();if(!this.input){var o=[];n.forEach((function(t){var n=e.getOptionId(t),i=e.getOptionLabel(n),r=t.style?t.style.replace(/"/g,'&quot;'):'',s=r?"style=\"".concat(r,"\""):'',a=n.replace(/"/g,'&quot;');o.push("<option value=\"".concat(a,"\" ").concat(s,">").concat(i,"</option>"))}));var i=this.el.querySelector("#".concat(t,"input-holder"));i.innerHTML="<select>".concat(o.join(''),"</select>"),this.input=i.firstChild}},e.prototype.__setValueInput=function(t){var e=this.model,n=this.getInputEl(),o=e.getOptions()[0],i=o?e.getOptionId(o):'';n&&(n.value=t||i)},e}(Oj);const cR=lR;var uR=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),hR=void 0&&(void 0).__assign||function(){return hR=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},hR.apply(this,arguments)};const pR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return uR(e,t),e.prototype.defaults=function(){return hR(hR({},sR.getDefaults()),{full:1})},e}(sR);var dR=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),fR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return dR(e,t),e.prototype.templateInput=function(){var t=this.ppfx;return"<div class=\"".concat(t,"field ").concat(t,"field-radio\"></div>")},e.prototype.onRender=function(){var t=this.pfx,e=this.ppfx,n=this.model,o="".concat(e,"radio-item-label"),i=n.getName(),r=n.getOptions(),s="".concat(t,"radio ").concat(t,"radio-").concat(i),a=n.cid;if(!this.input){var l=[];r.forEach((function(r){var c=r.className?"".concat(r.className," ").concat(t,"icon ").concat(o):'',u=n.getOptionId(r),h="".concat(i,"-").concat(u,"-").concat(a),p=c?'':n.getOptionLabel(u),d=r.title?"title=\"".concat(r.title,"\""):'',f=n.getValue()===u?'checked':'';l.push("\n          <div class=\"".concat(e,"radio-item\">\n            <input type=\"radio\" class=\"").concat(s,"\" id=\"").concat(h,"\" name=\"").concat(i,"-").concat(a,"\" value=\"").concat(u,"\" ").concat(f,"/>\n            <label class=\"").concat(c||o,"\" ").concat(d," for=\"").concat(h,"\">").concat(p,"</label>\n          </div>\n        "))}));var c=this.el.querySelector(".".concat(e,"field"));c.innerHTML="<div class=\"".concat(e,"radio-items\">").concat(l.join(''),"</div>"),this.input=c.firstChild}},e.prototype.__setValueInput=function(t){var e,n=this.model,o=t||n.getDefaultValue(),i=null===(e=this.getInputEl())||void 0===e?void 0:e.querySelector("[value=\"".concat(o,"\"]"));i&&(i.checked=!0)},e}(cR);const gR=fR;var mR=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),vR=function(e){function n(n){void 0===n&&(n={});var o=e.call(this,n)||this;return(0,t.bindAll)(o,'moveIncrement','upIncrement'),o.doc=document,o.listenTo(o.model,'change:unit',o.handleModelChange),o}return mR(n,e),n.prototype.template=function(){var t=this.ppfx;return"\n      <span class=\"".concat(t,"input-holder\"></span>\n      <span class=\"").concat(t,"field-units\"></span>\n      <div class=\"").concat(t,"field-arrows\" data-arrows>\n        <div class=\"").concat(t,"field-arrow-u\" data-arrow-up></div>\n        <div class=\"").concat(t,"field-arrow-d\" data-arrow-down></div>\n      </div>\n    ")},n.prototype.inputClass=function(){var t=this.ppfx;return this.opts.contClass||"".concat(t,"field ").concat(t,"field-integer")},n.prototype.setValue=function(t,e){var n=e||{},o=this.validateInputValue(t,{deepCheck:1}),i={value:o.value,unit:''};(o.unit||o.force)&&(i.unit=o.unit),this.model.set(i,n),n.silent&&this.handleModelChange()},n.prototype.handleChange=function(t){t.stopPropagation(),this.setValue(this.getInputEl().value),this.elementUpdated()},n.prototype.handleUnitChange=function(t){t.stopPropagation();var e=this.getUnitEl().value;this.model.set('unit',e),this.elementUpdated()},n.prototype.handleKeyDown=function(t){'ArrowUp'===t.key&&(t.preventDefault(),this.upArrowClick()),'ArrowDown'===t.key&&(t.preventDefault(),this.downArrowClick())},n.prototype.elementUpdated=function(){this.model.trigger('el:change')},n.prototype.handleModelChange=function(){var t=this.model;this.getInputEl().value=t.get('value');var e=this.getUnitEl();e&&(e.value=t.get('unit')||'')},n.prototype.getUnitEl=function(){if(!this.unitEl){var t=this.model,e=t.get('units')||[];if(e.length){var n=['<option value="" disabled hidden>-</option>'];e.forEach((function(e){var o=e==t.get('unit')?'selected':'';n.push("<option ".concat(o,">").concat(e,"</option>"))}));var o=document.createElement('div');o.innerHTML="<select class=\"".concat(this.ppfx,"input-unit\">").concat(n.join(''),"</select>"),this.unitEl=o.firstChild}}return this.unitEl},n.prototype.upArrowClick=function(){var t=this.model,e=t.get('step'),n=parseFloat(t.get('value'));this.setValue(this.normalizeValue(n+e)),this.elementUpdated()},n.prototype.downArrowClick=function(){var t=this.model,e=t.get('step'),n=parseFloat(t.get('value'));this.setValue(this.normalizeValue(n-e)),this.elementUpdated()},n.prototype.downIncrement=function(t){t.preventDefault(),this.moved=!1;var e=this.model.get('value')||0;e=this.normalizeValue(e),this.current={y:t.pageY,val:e},(0,ue.on)(this.doc,'mousemove',this.moveIncrement),(0,ue.on)(this.doc,'mouseup',this.upIncrement)},n.prototype.moveIncrement=function(t){this.moved=!0;var e=this.model,n=e.get('step'),o=this.current,i=this.normalizeValue(o.val+(o.y-t.pageY)*n),r=this.validateInputValue(i),s=r.value,a=r.unit;return this.prValue=s,e.set({value:s,unit:a},{avoidStore:1}),!1},n.prototype.upIncrement=function(){var t=this.model,e=t.get('step');if((0,ue.S1)(this.doc,'mouseup',this.upIncrement),(0,ue.S1)(this.doc,'mousemove',this.moveIncrement),this.prValue&&this.moved){var n=this.prValue-e;t.set('value',n,{avoidStore:1}).set('value',n+e),this.elementUpdated()}},n.prototype.normalizeValue=function(t,e){void 0===e&&(e=0);var n=this.model.get('step'),o=0;if(isNaN(t))return e;if(t=parseFloat(t),Math.floor(t)!==t){var i=n.toString().split('.')[1];o=i?i.length:0}return o?parseFloat(t.toFixed(o)):t},n.prototype.validateInputValue=function(e,n){void 0===n&&(n={});var o=0,i=n||{},r=this.model,s='',a=(0,t.isUndefined)(e)?s:e,l=n.units||r.get('units')||[],c=r.get('unit')||l.length&&l[0]||'',u=(0,t.isUndefined)(n.max)?r.get('max'):n.max,h=(0,t.isUndefined)(n.min)?r.get('min'):n.min,p=!!r.get('limitlessMax'),d=!!r.get('limitlessMin');if(i.deepCheck){var f=r.get('fixedValues')||[];if(''===a&&(c=''),a){var g=new RegExp('^'+f.join('|'),'g');if(f.length&&g.test(a))a=a.match(g)[0],c='',o=1;else{var m=a+'';a+='',a=parseFloat(a.replace(',','.')),a=isNaN(a)?s:a;var v=m.replace(a,'');(0,t.indexOf)(l,v)>=0&&(c=v)}}}return p||(0,t.isUndefined)(u)||''===u||(a=a>u?u:a),d||(0,t.isUndefined)(h)||''===h||(a=a<h?h:a),{force:o,value:a,unit:c}},n.prototype.render=function(){Uj.prototype.render.call(this),this.unitEl=null;var t=this.getUnitEl();return t&&this.$el.find(".".concat(this.ppfx,"field-units")).get(0).appendChild(t),this},n}(Uj);const yR=vR;vR.prototype.events={'change input':'handleChange','change select':'handleUnitChange','click [data-arrow-up]':'upArrowClick','click [data-arrow-down]':'downArrowClick','mousedown [data-arrows]':'downIncrement',keydown:'handleKeyDown'};var _R=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),OR=void 0&&(void 0).__assign||function(){return OR=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},OR.apply(this,arguments)},bR=function(n){function o(){return null!==n&&n.apply(this,arguments)||this}return _R(o,n),o.prototype.defaults=function(){return OR(OR({},U$.getDefaults()),{units:[],unit:'',min:'',max:'',step:1})},o.prototype.getUnits=function(){return this.get('units')||[]},o.prototype.getUnit=function(){return this.get('unit')},o.prototype.getMin=function(){return this.get('min')},o.prototype.getMax=function(){return this.get('max')},o.prototype.getStep=function(){return this.get('step')},o.prototype.upUnit=function(t,e){return void 0===e&&(e={}),this._up({unit:t},e)},o.prototype.initialize=function(t,n){void 0===t&&(t={}),void 0===n&&(n={}),U$.callParentInit(U$,this,t,n);var o=this.get('unit'),i=this.getUnits();this.input=(0,e.hasWin)()?new yR({model:this}):void 0,i.length&&!o&&this.set('unit',i[0],{silent:!0}),U$.callInit(this,t,n)},o.prototype.__getClearProps=function(){return OR(OR({},U$.prototype.__getClearProps()),{unit:''})},o.prototype.parseValue=function(t,e){void 0===e&&(e={});var n=U$.prototype.parseValue.apply(this,arguments),o=this.input.validateInputValue(n.value,OR({deepCheck:1},e)),i=o.value,r=o.unit;return n.value=i,n.unit=r,n},o.prototype.getFullValue=function(){var e=this.get('value'),n=this.get('unit'),o=(0,t.isUndefined)(e)?'':"".concat(e),i=!(0,t.isUndefined)(n)&&o?n:'',r="".concat(o).concat(i);return U$.prototype.getFullValue.apply(this,[r])},o}(U$);const wR=bR;var xR=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),SR=void 0&&(void 0).__assign||function(){return SR=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},SR.apply(this,arguments)};const kR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return xR(e,t),e.prototype.defaults=function(){return SR(SR({},wR.getDefaults()),{showInput:1})},e}(wR);var PR=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),CR=void 0&&(void 0).__assign||function(){return CR=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},CR.apply(this,arguments)};const TR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return PR(e,t),e.prototype.events=function(){return CR(CR({},Yj.prototype.events()),{'change [type=range]':'inputValueChanged','input [type=range]':'inputValueChangedSoft',change:''})},e.prototype.templateInput=function(t){var e=this.ppfx;return"\n      <div class=\"".concat(e,"field ").concat(e,"field-range\">\n        <input type=\"range\" min=\"").concat(t.get('min'),"\" max=\"").concat(t.get('max'),"\" step=\"").concat(t.get('step'),"\"/>\n      </div>\n    ")},e.prototype.getSliderEl=function(){return this.slider||(this.slider=this.el.querySelector('input[type=range]')),this.slider},e.prototype.inputValueChanged=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value)},e.prototype.inputValueChangedSoft=function(t){t.stopPropagation(),this.model.upValue(this.getSliderEl().value,{partial:!0})},e.prototype.setValue=function(t){var e=this.model,n=e.parseValue(t);this.getSliderEl().value=''===t?e.getDefaultValue():parseFloat(n.value),Yj.prototype.setValue.apply(this,arguments)},e.prototype.onRender=function(){Yj.prototype.onRender.apply(this,arguments),this.model.get('showInput')||(this.inputInst.el.style.display='none')},e.prototype.clearCached=function(){Yj.prototype.clearCached.apply(this,arguments),delete this.slider},e}(Yj);const ER=u.FE.extend(QE).extend({extendViewApi:1,init:function(){var t=this.opts,e=this.em,n=t.module||(null==e?void 0:e.get('StyleManager'));n&&(n.__listenAdd(this,n.events.propertyAdd),n.__listenRemove(this,n.events.propertyRemove))},types:[{id:'stack',model:dj,view:Vj,isType:function(t){if(t&&'stack'==t.type)return t}},{id:'composite',model:sj,view:Cj,isType:function(t){if(t&&'composite'==t.type)return t}},{id:'file',model:U$,view:Wj,isType:function(t){if(t&&'file'==t.type)return t}},{id:'color',model:U$,view:eR,isType:function(t){if(t&&'color'==t.type)return t}},{id:'select',model:sR,view:cR,isType:function(t){if(t&&'select'==t.type)return t}},{id:'radio',model:pR,view:gR,isType:function(t){if(t&&'radio'==t.type)return t}},{id:'slider',model:kR,view:TR,isType:function(t){if(t&&'slider'==t.type)return t}},{id:'integer',model:wR,view:Yj,isType:function(t){if(t&&'integer'==t.type)return t}},{id:'number',model:wR,view:Yj,isType:function(t){if(t&&'number'==t.type)return t}},{id:'base',model:U$,view:Oj,isType:function(t){return t.type='base',t}}]});var QR=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),AR=void 0&&(void 0).__assign||function(){return AR=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},AR.apply(this,arguments)},$R=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},jR=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},RR=function(e){function n(n,o){void 0===o&&(o={});var i=e.call(this,n)||this,r=o.em;i.em=r;var s=n||{},a=i.buildProperties(s.buildProps),l=i.get('name')||'',c=[];!i.get('id')&&i.set('id',l.replace(/ /g,'_').toLowerCase()),c=(c=a?i.extendProperties(a):i.get('properties').map((function(e){return(0,t.isString)(e)?i.buildProperties(e)[0]:e})).filter(Boolean)).map((function(t){return i.checkExtend(t)}));var u=new ER(c,{em:r});return u.sector=i,i.set('properties',u),i}return QR(n,e),n.prototype.defaults=function(){return{id:'',name:'',open:!0,visible:!0,extendBuilded:!0,properties:[]}},Object.defineProperty(n.prototype,"properties",{get:function(){return this.get('properties')},enumerable:!1,configurable:!0}),n.prototype.getId=function(){return this.get('id')},n.prototype.getName=function(){var t,e=this.getId();return(null===(t=this.em)||void 0===t?void 0:t.t("styleManager.sectors.".concat(e)))||this.get('name')},n.prototype.setName=function(t){return this.set('name',t)},n.prototype.isOpen=function(){return!!this.get('open')},n.prototype.setOpen=function(t){return this.set('open',t)},n.prototype.isVisible=function(){return!!this.get('visible')},n.prototype.getProperties=function(t){void 0===t&&(t={});var e=this.get('properties');return(e.models?jR([],e.models,!0):e).filter((function(e){var n=!0;(t.withValue&&(n=e.hasValue({noParent:!0})),t.withParentValue)&&(n=!e.hasValue({noParent:!0})&&e.hasValue());return n}))},n.prototype.getProperty=function(t){return this.getProperties().filter((function(e){return e.get('id')===t}))[0]||void 0},n.prototype.addProperty=function(t,e){return this.get('properties').add(this.checkExtend(t),e)},n.prototype.extendProperties=function(e,n,o){void 0===o&&(o=!1);for(var i=e.length,r=n||this.get('properties'),s=this.get('extendBuilded'),a=[],l=0,c=r.length;l<c;l++){for(var u=r[l],h=0,p=0;p<i;p++){var d=e[p];if(u.property!=d.property&&u.id!=d.property);else{var f=u.properties;f&&f.length&&(u.properties=this.extendProperties(d.properties||[],f,1)),e[p]=s?(0,t.extend)(d,u):u,a[p]=e[p],h=1}}h||(e.push(u),a.push(u))}return o?a.filter((function(t){return t})):e},n.prototype.checkExtend=function(e){var n=((0,t.isString)(e)?{extend:e}:e)||{},o=n.extend,i=$R(n,["extend"]);return o?AR(AR({},this.buildProperties([o])[0]||{}),i):e},n.prototype.buildProperties=function(t){var e,n=t||[];if(!n.length)return[];var o=null===(e=this.em)||void 0===e?void 0:e.get('StyleManager').builtIn;return null==o?void 0:o.build(n)},n}(u.Hn);const ZR=RR;var MR=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),VR=void 0&&(void 0).__assign||function(){return VR=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},VR.apply(this,arguments)};const DR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return MR(e,t),e.prototype.initialize=function(t,e){void 0===e&&(e={});var n=e.module,o=e.em;this.em=o,this.module=n,this.listenTo(this,'reset',this.onReset)},e.prototype.model=function(t,e){void 0===e&&(e={});var n=e.collection.em;return new ZR(t,VR(VR({},e),{em:n}))},e.prototype.onReset=function(t,e){void 0===e&&(e={}),(e.previousModels||[]).forEach((function(t){return t.get('properties').reset()}))},e}(u.FE);var IR=void 0&&(void 0).__assign||function(){return IR=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},IR.apply(this,arguments)},NR=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},WR=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},XR=function(t){return t.map((function(t){return{id:t}}))},LR=function(){function e(){this.props={},this.typeNumber='number',this.typeColor='color',this.typeRadio='radio',this.typeSelect='select',this.typeFile='file',this.typeSlider='slider',this.typeComposite='composite',this.typeStack='stack',this.unitsSize=['px','%','em','rem','vh','vw'],this.unitsSizeNoPerc=['px','em','rem','vh','vw'],this.unitsTime=['s','ms'],this.unitsAngle=['deg','rad','grad'],this.fixedValues=['initial','inherit','auto'];var t=', sans-serif',e=['flex-start','flex-end','center'],n=WR(WR([],e,!0),['baseline','stretch'],!1);this.optsBgSize=XR(['auto','cover','contain']),this.optsBgAttach=XR(['scroll','fixed','local']),this.optsBgRepeat=XR(['repeat','repeat-x','repeat-y','no-repeat']),this.optsWrap=XR(['nowrap','wrap','wrap-reverse']),this.optsOverflow=XR(['visible','hidden','scroll','auto']),this.optsDir=XR(['row','row-reverse','column','column-reverse']),this.opstDisplay=XR(['block','inline','inline-block','flex','none']),this.optsTransitFn=XR(['linear','ease','ease-in','ease-out','ease-in-out']),this.optsCursor=XR(['auto','pointer','copy','crosshair','grab','grabbing','help','move','text']),this.optsFloat=XR(['none','left','right']),this.optsPos=XR(['static','relative','absolute','fixed']),this.optsTextAlign=XR(['left','center','right','justify']),this.optsFlexAlign=XR(n),this.optsJustCont=XR(WR(WR([],e,!0),['space-between','space-around','space-evenly'],!1)),this.optsAlignCont=XR(WR(WR([],e,!0),['space-between','space-around','stretch'],!1)),this.optsAlignSelf=XR(WR(['auto'],n,!0)),this.optsTransitProp=XR(['all','width','height','background-color','transform','box-shadow','opacity']),this.optsBorderStyle=XR(['none','solid','dotted','dashed','double','groove','ridge','inset','outset']),this.optsBgPos=XR(['left top','left center','left bottom','right top','right center','right bottom','center top','center center','center bottom']),this.optsWeight=[{id:'100',label:'Thin'},{id:'200',label:'Extra-Light'},{id:'300',label:'Light'},{id:'400',label:'Normal'},{id:'500',label:'Medium'},{id:'600',label:'Semi-Bold'},{id:'700',label:'Bold'},{id:'800',label:'Extra-Bold'},{id:'900',label:'Ultra-Bold'}],this.optsShadowType=[{id:'',label:'Outside'},{id:'inset',label:'Inside'}],this.optsFonts=['Arial, Helvetica'+t,'Arial Black, Gadget'+t,'Brush Script MT'+t,'Comic Sans MS, cursive'+t,'Courier New, Courier, monospace','Georgia, serif','Helvetica'+t,'Impact, Charcoal'+t,'Lucida Sans Unicode, Lucida Grande'+t,'Tahoma, Geneva'+t,'Times New Roman, Times, serif','Trebuchet MS, Helvetica'+t,'Verdana, Geneva'+t].map((function(t){return{id:t,label:t.split(',')[0]}})),this.fixedFontSizes=['medium','xx-small','x-small','small','large','x-large','xx-large','smaller','larger','length','initial','inherit'],this.fixedLetSpace=['normal','initial','inherit'],this.requireFlex={display:['flex']},this.init()}return e.prototype.__sub=function(e){var n=this;return function(){return e.map((function(e){if((0,t.isString)(e))return n.get(e);var o=e.extend,i=NR(e,["extend"]);return IR(IR({},n.get(o)),i)}))}},e.prototype.init=function(){var t=this,e=this,n=e.fixedValues,o=e.requireFlex,i=e.typeNumber;this.props={};var r=[['text-shadow-h',{type:i,default:'0',units:this.unitsSizeNoPerc}],['top',{default:'auto',units:this.unitsSize,fixedValues:n},'text-shadow-h'],['right',{},'top'],['bottom',{},'top'],['left',{},'top'],['margin-top',{default:'0'},'top'],['margin-right',{},'margin-top'],['margin-bottom',{},'margin-top'],['margin-left',{},'margin-top'],['padding-top',{min:0},'margin-top'],['padding-right',{},'padding-top'],['padding-bottom',{},'padding-top'],['padding-left',{},'padding-top'],['width',{min:0},'top'],['min-width',{},'width'],['max-width',{},'width'],['height',{},'width'],['min-height',{},'width'],['max-height',{},'width'],['flex-basis',{requiresParent:o},'width'],['font-size',{default:'medium',fixedValues:this.fixedFontSizes},'width'],['letter-spacing',{default:'normal',fixedValues:this.fixedLetSpace},'top'],['line-height',{},'letter-spacing'],['text-shadow-v',{},'text-shadow-h'],['text-shadow-blur',{min:0},'text-shadow-h'],['border-radius-c',{property:'border-radius',fixedValues:void 0},'padding-top'],['border-top-left-radius',{},'border-radius-c'],['border-top-right-radius',{},'border-radius-c'],['border-bottom-left-radius',{},'border-radius-c'],['border-bottom-right-radius',{},'border-radius-c'],['border-width',{units:this.unitsSizeNoPerc},'border-radius-c'],['box-shadow-h',{},'text-shadow-h'],['box-shadow-v',{},'text-shadow-h'],['box-shadow-blur',{default:'5px'},'text-shadow-blur'],['box-shadow-spread',{},'text-shadow-h'],['transition-duration',{default:'2s',units:this.unitsTime},'border-radius-c'],['perspective',{},'border-radius-c'],['order',{type:i,default:'0',requiresParent:o}],['flex-grow',{},'order'],['flex-shrink',{default:'1'},'order'],['float',{type:this.typeRadio,default:'none',options:this.optsFloat}],['position',{default:'static',options:this.optsPos},'float'],['text-align',{default:'left',options:this.optsTextAlign},'float'],['color',{type:this.typeColor,default:'black',full:!0}],['text-shadow-color',{},'color'],['border-color',{},'color'],['box-shadow-color',{},'color'],['background-color',{default:'none'},'color'],['background-image',{type:this.typeFile,functionName:'url',default:'none',full:!0}],['opacity',{type:this.typeSlider,default:'1',min:0,max:1,step:.01,full:!0}],['display',{type:this.typeSelect,default:'block',options:this.opstDisplay}],['flex-direction',{default:'row',options:this.optsDir,requires:o},'display'],['flex-wrap',{default:'nowrap',options:this.optsWrap},'flex-direction'],['justify-content',{default:'flex-start',options:this.optsJustCont},'flex-wrap'],['align-items',{default:'stretch',options:this.optsFlexAlign},'flex-wrap'],['align-content',{options:this.optsAlignCont},'align-items'],['align-self',{default:'auto',options:this.optsAlignSelf,requiresParent:o},'display'],['font-family',{default:'Arial, Helvetica, sans-serif',options:this.optsFonts},'display'],['font-weight',{default:'400',options:this.optsWeight},'display'],['border-style',{default:'solid',options:this.optsBorderStyle},'display'],['box-shadow-type',{default:'',options:this.optsShadowType},'display'],['background-repeat',{default:'repeat',options:this.optsBgRepeat},'display'],['background-position',{default:'left top',options:this.optsBgPos},'display'],['background-attachment',{default:'scroll',options:this.optsBgAttach},'display'],['background-size',{default:'auto',options:this.optsBgSize},'display'],['transition-property',{default:'width',options:this.optsTransitProp},'display'],['transition-timing-function',{default:'ease',options:this.optsTransitFn},'display'],['cursor',{default:'auto',options:this.optsCursor},'display'],['overflow',{default:'visible',options:this.optsOverflow},'display'],['overflow-x',{},'overflow'],['overflow-y',{},'overflow'],['margin',{type:this.typeComposite,properties:this.__sub([{extend:'margin-top',id:'margin-top-sub'},{extend:'margin-right',id:'margin-right-sub'},{extend:'margin-bottom',id:'margin-bottom-sub'},{extend:'margin-left',id:'margin-left-sub'}])}],['padding',{properties:this.__sub([{extend:'padding-top',id:'padding-top-sub'},{extend:'padding-right',id:'padding-right-sub'},{extend:'padding-bottom',id:'padding-bottom-sub'},{extend:'padding-left',id:'padding-left-sub'}])},'margin'],['border',{properties:this.__sub([{extend:'border-width',id:'border-width-sub'},{extend:'border-style',id:'border-style-sub'},{extend:'border-color',id:'border-color-sub'}])},'margin'],['border-radius',{properties:this.__sub([{extend:'border-top-left-radius',id:'border-top-left-radius-sub'},{extend:'border-top-right-radius',id:'border-top-right-radius-sub'},{extend:'border-bottom-right-radius',id:'border-bottom-right-radius-sub'},{extend:'border-bottom-left-radius',id:'border-bottom-left-radius-sub'}])},'margin'],['transition',{type:this.typeStack,properties:this.__sub([{extend:'transition-property',id:'transition-property-sub'},{extend:'transition-duration',id:'transition-duration-sub'},{extend:'transition-timing-function',id:'transition-timing-function-sub'}])}],['box-shadow',{preview:!0,layerLabel:function(t,e){var n=e.values,o=n['box-shadow-h'],i=n['box-shadow-v'],r=n['box-shadow-blur'],s=n['box-shadow-spread'];return"".concat(o," ").concat(i," ").concat(r," ").concat(s)},properties:this.__sub(['box-shadow-h','box-shadow-v','box-shadow-blur','box-shadow-spread','box-shadow-color','box-shadow-type'])},'transition'],['text-shadow',{default:'none',layerLabel:function(t,e){var n=e.values,o=n['text-shadow-h'],i=n['text-shadow-v'],r=n['text-shadow-blur'];return"".concat(o," ").concat(i," ").concat(r)},properties:this.__sub(['text-shadow-h','text-shadow-v','text-shadow-blur','text-shadow-color'])},'box-shadow'],['background',{detached:!0,layerLabel:function(t,e){var n=e.values;return[n['background-repeat-sub']||'',n['background-position-sub']||'',n['background-attachment-sub']||'',n['background-size-sub']||''].join(' ')},properties:this.__sub([{extend:'background-image',id:'background-image-sub'},{extend:'background-repeat',id:'background-repeat-sub'},{extend:'background-position',id:'background-position-sub'},{extend:'background-attachment',id:'background-attachment-sub'},{extend:'background-size',id:'background-size-sub'}])},'box-shadow'],['transform',{type:'stack',layerSeparator:' ',fromStyle:function(t,e){var n=e.property,o=t[e.name]||'',i=n.getLayerSeparator();return o?o.split(i).map((function(t){var e=n.__parseFn(t);return{'transform-type':e.name,'transform-value':e.value}})):[]},toStyle:function(t,e){var n;return(n={})[e.name]="".concat(t['transform-type'],"(").concat(t['transform-value'],")"),n},properties:[{property:'transform-type',name:'Type',type:this.typeSelect,default:'rotateZ',full:!0,options:[{id:'scaleX',propValue:{units:[''],step:.01}},{id:'scaleY',propValue:{units:[''],step:.01}},{id:'scaleZ',propValue:{units:[''],step:.01}},{id:'rotateX',propValue:{units:this.unitsAngle,step:1}},{id:'rotateY',propValue:{units:this.unitsAngle,step:1}},{id:'rotateZ',propValue:{units:this.unitsAngle,step:1}},{id:'translateX',propValue:{units:this.unitsSize,step:1}},{id:'translateY',propValue:{units:this.unitsSize,step:1}}],onChange:function(t){var e=t.property;if(t.to.value){var n=e.getOption(),o=IR({},n.propValue||{}),i=e.getParent().getProperty('transform-value'),r=i.getUnit();(!r||(null==o?void 0:o.units.indexOf(r))<0)&&(o.unit=(null==o?void 0:o.units[0])||''),i.up(o)}}},{property:'transform-value',type:this.typeNumber,default:'0',full:!0}]}]];return r.forEach((function(e){var n=e[0],o=e[1],i=e[2];t.add(n,o||{},{from:i})})),this},e.prototype.add=function(e,n,o){void 0===n&&(n={}),void 0===o&&(o={});var i=o.from||'',r=this.props[i||e]||{},s=IR(IR(IR({},r),{property:e}),n);return s.properties&&(0,t.isFunction)(s.properties)&&(s.properties=s.properties()),this.props[e]=s,s},e.prototype.get=function(t){return this.props[t]},e.prototype.build=function(e){var n=this,o=[];return((0,t.isString)(e)?[e]:e).forEach((function(t){o.push(n.get(t)||{property:t})})),o},e}();const YR=LR;var zR=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),qR=void 0&&(void 0).__makeTemplateObject||function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},UR=function(t){function e(e){var n=t.call(this,e)||this,o=e.config||{},i=n.model,r=o.em;return n.config=o,n.em=r,n.pfx=o.stylePrefix||'',n.listenTo(i,'destroy remove',n.remove),n.listenTo(i,'change:open',n.updateOpen),n.listenTo(i,'change:visible',n.updateVisibility),n}return zR(e,t),e.prototype.template=function(t){var e,n=t.pfx,o=t.label,r=null===(e=this.em)||void 0===e?void 0:e.getConfig().icons,s=(null==r?void 0:r.caret)||'',a="".concat(n,"sector-");return i(FR||(FR=qR(["\n      <div class=\"","title\" data-sector-title>\n        <div class=\"","caret\">$","</div>\n        <div class=\"","label\">","</div>\n      </div>\n    "],["\n      <div class=\"","title\" data-sector-title>\n        <div class=\"","caret\">$","</div>\n        <div class=\"","label\">","</div>\n      </div>\n    "])),a,a,s,a,o)},e.prototype.events=function(){return{'click [data-sector-title]':'toggle'}},e.prototype.updateOpen=function(){var t=this,e=t.$el,n=t.model,o=t.pfx,i=n.isOpen();e[i?'addClass':'removeClass']("".concat(o,"open")),this.getPropertiesEl().style.display=i?'':'none'},e.prototype.updateVisibility=function(){this.el.style.display=this.model.isVisible()?'':'none'},e.prototype.getPropertiesEl=function(){var t=this.$el,e=this.pfx;return t.find(".".concat(e,"properties")).get(0)},e.prototype.toggle=function(){var t=this.model;t.setOpen(!t.get('open'))},e.prototype.renderProperties=function(){var t=this.model,e=this.config,n=t.get('properties');if(n){var o=new xj({collection:n,config:e});this.$el.append(o.render().el)}},e.prototype.render=function(){var t=this,e=t.pfx,n=t.model,o=t.$el,i=n.getId(),r=n.getName();return o.html(this.template({pfx:e,label:r})),this.renderProperties(),o.attr('class',"".concat(e,"sector ").concat(e,"sector__").concat(i," no-select")),this.updateOpen(),this},e}(u.G7);const BR=UR;var FR,GR=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),HR=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this,o=e.module,i=e.config,r=n.collection;return n.pfx=(null==i?void 0:i.stylePrefix)||'',n.ppfx=(null==i?void 0:i.pStylePrefix)||'',n.config=i,n.module=o,n.listenTo(r,'add',n.addTo),n.listenTo(r,'reset',n.render),n}return GR(e,t),e.prototype.remove=function(){var t=this;return u.G7.prototype.remove.apply(this,arguments),['config','module','em'].forEach((function(e){return t[e]={}})),this},e.prototype.addTo=function(t,e,n){void 0===n&&(n={}),this.addToCollection(t,null,n)},e.prototype.addToCollection=function(t,e,n){void 0===n&&(n={});var o=this.config,i=this.el,r=e||i,s=new BR({model:t,config:o}).render().el;return(0,ue.$Q)(r,s,n.at),s},e.prototype.render=function(){var t=this,e=this,n=e.$el,o=e.pfx,i=e.ppfx;n.empty();var r=document.createDocumentFragment();return this.collection.each((function(e){return t.addToCollection(e,r)})),n.append(r),n.addClass("".concat(o,"sectors ").concat(i,"one-bg ").concat(i,"two-color")),this},e}(u.G7);const KR=HR;var JR=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),tZ=void 0&&(void 0).__assign||function(){return tZ=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},tZ.apply(this,arguments)},eZ=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},nZ='style',oZ="".concat(nZ,":"),iZ="".concat(oZ,"sector"),rZ="".concat(iZ,":add"),sZ="".concat(iZ,":remove"),aZ="".concat(iZ,":update"),lZ="".concat(oZ,"property"),cZ="".concat(lZ,":add"),uZ="".concat(lZ,":remove"),hZ="".concat(lZ,":update"),pZ="".concat(oZ,"layer:select"),dZ="".concat(oZ,"target"),fZ="".concat(oZ,"custom"),gZ=function(t){return t||0===t},mZ={all:nZ,sectorAdd:rZ,sectorRemove:sZ,sectorUpdate:aZ,propertyAdd:cZ,propertyRemove:uZ,propertyUpdate:hZ,layerSelect:pZ,target:dZ,custom:fZ},vZ=function(n){function o(e){var o=n.call(this,e,'StyleManager',new DR([],{em:e}),mZ,W$)||this;o.Sector=ZR,o.storageKey='',(0,t.bindAll)(o,'__clearStateTarget');var i=o.config,r=i.pStylePrefix;r&&(i.stylePrefix=r+i.stylePrefix),o.builtIn=new YR,o.properties=new ER([],{em:e,module:o}),o.sectors=o.all;var s=new u.Hn({targets:[]});o.model=s;o.upAll=(0,t.debounce)((function(){return o.__upSel()}),0),s.listenTo(e,'component:toggled component:update:classes change:state change:device frame:resized selector:type',o.upAll),s.listenTo(e,'component:toggled',o.__clearStateTarget);var a=(0,t.debounce)((function(){o.__upProps(),o.__trgCustom()}),0);s.listenTo(e,'styleable:change undo redo',a);var l=(0,t.debounce)((function(){return o.__trgCustom()}),0);return s.listenTo(e,"".concat(pZ," ").concat(dZ),l),s.on('change:lastTarget',(function(){return e.trigger(dZ,o.getSelected())})),o}return JR(o,n),o.prototype.__upSel=function(){this.select(this.em.getSelectedAll())},o.prototype.__trgCustom=function(t){void 0===t&&(t={}),this.__ctn=this.__ctn||t.container,this.em.trigger(this.events.custom,{container:this.__ctn})},o.prototype.__trgEv=function(t){for(var e,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];(e=this.em).trigger.apply(e,eZ([t],n,!1))},o.prototype.__clearStateTarget=function(){var t=this,e=this.em,n=this.__getStateTarget();n&&(null==e||e.skip((function(){e.Css.remove(n),t.model.set({stateTarget:null})})))},o.prototype.onLoad=function(){this.sectors.add(this.config.sectors,{silent:!0})},o.prototype.postRender=function(){this.__appendTo()},o.prototype.addSector=function(t,e,n){void 0===n&&(n={});var o=this.getSector(t);return o||(e.id=t,o=this.sectors.add(e,n)),o},o.prototype.getSector=function(t,e){void 0===e&&(e={});var n=this.sectors.where({id:t})[0];return!n&&e.warn&&this._logNoSector(t),n||null},o.prototype.getSectors=function(t){void 0===t&&(t={});var e=this.sectors,n=e&&e.models?t.array?eZ([],e.models,!0):e:[];return t.visible?n.filter((function(t){return t.isVisible()})):n},o.prototype.removeSector=function(t){return this.getSectors().remove(this.getSector(t,{warn:!0}))},o.prototype.addProperty=function(t,e,n){void 0===n&&(n={});var o=this.getSector(t,{warn:!0}),i=null;return o&&(i=o.addProperty(e,n)),i},o.prototype.getProperty=function(t,e){var n,o=this.getSector(t,{warn:!0});return o&&(n=o.properties.filter((function(t){return t.get('property')===e||t.get('id')===e}))[0]),n},o.prototype.getProperties=function(t){var e,n=this.getSector(t,{warn:!0});return n&&(e=n.properties),e},o.prototype.removeProperty=function(t,e){var n=this.getProperties(t);return n?n.remove(this.getProperty(t,e)):null},o.prototype.select=function(n,o){var i=this;void 0===o&&(o={});var r=this.em,s=(0,t.isArray)(n)?n:[n],a=o.stylable,l=r.Css,c=[];s.filter(Boolean).forEach((function(e){var n=e;if((0,t.isString)(e)){var o=l.getRule(e)||l.setRule(e);!(0,t.isUndefined)(a)&&o.set({stylable:a}),n=o}c.push(n)}));var u=o.component||c.filter((function(t){return(0,e.isComponent)(t)})).reverse()[0];c=c.map((function(t){return i.getModelToStyle(t)}));var h=r.getState(),p=c.slice().reverse()[0],d=this.getParentRules(p,{state:h,component:u}),f=this.__getStateTarget();return r.skip((function(){var t;if(h&&(null===(t=null==p?void 0:p.getState)||void 0===t?void 0:t.call(p))){var e=p.getStyle();f?f.setStyle(e):f=l.getAll().add({selectors:'gjs-selected',style:e,shallow:!0,important:!0})}else f&&(l.remove(f),f=void 0)})),this.model.set({targets:c,lastTarget:p,lastTargetParents:d,stateTarget:f,component:u}),this.__upProps(o),c},o.prototype.getSelected=function(){return this.model.get('lastTarget')},o.prototype.getSelectedAll=function(){return this.model.get('targets')},o.prototype.getSelectedParents=function(){return this.model.get('lastTargetParents')||[]},o.prototype.__getStateTarget=function(){return this.model.get('stateTarget')},o.prototype.addStyleTargets=function(t,e){this.getSelectedAll().map((function(n){return n.addStyle(t,e)}));var n=this.getSelected();n&&this.__emitCmpStyleUpdate(t);var o=this.__getStateTarget();n&&(null==o||o.setStyle(n.getStyle(),e))},o.prototype.getBuiltIn=function(t){return this.builtIn.get(t)},o.prototype.getBuiltInAll=function(){return this.builtIn.props},o.prototype.addBuiltIn=function(t,e){return this.builtIn.add(t,e)},o.prototype.getModelToStyle=function(t,e){void 0===e&&(e={});var n=this.em,o=e.skipAdd;if(n&&(null==t?void 0:t.toHTML)){var i=n.getConfig(),r=n.UndoManager,s=n.Css,a=n.Selectors,l=a?a.getConfig():{},c=i.devicePreviewMode?'':n.get('state'),u=t.get('classes').getStyleable(),h=u.length,p=!l.componentFirst||e.useClasses,d={noCount:1},f={state:c,addOpts:d};r.skip((function(){var e;if(h&&p){var r=n.getCurrentMedia();(e=s.get(u,c,r))||o||(e=s.add(u,c,r,{},d))}else if(i.avoidInlineStyle){var a=t.getId();!(e=s.getIdRule(a,f))&&!o&&(e=s.setIdRule(a,{},f)),t.is('wrapper')&&e.set('wrapper',1,d)}e&&(t=e)}))}return t},o.prototype.getParentRules=function(e,n){var o=void 0===n?{}:n,i=o.state,r=o.component,s=this.em,a=[];if(s&&e){var l=r,c=s.Css,u=s.CodeManager.getGenerator('css'),h=e.toHTML?e:e.getComponent(),p={array:!0},d=[],f=[],g=[],m=function(t){return c.getRules().filter((function(e){return e.getSelectors().map((function(t){return t.getFullName()})).every((function(e){return t.indexOf(e)>=0}))}))};h?(d=c.getRules("#".concat(h.getId())),g=(f=l?m(l.getSelectors().getFullName(p)):[]).concat(d)):(d=l?c.getRules("#".concat(l.getId())):[],f=m(e.getSelectors().getFullName(p)),g=d.concat(f));var v=g.filter((function(e){return(0,t.isUndefined)(i)?1:e.get('state')===i})).sort(u.sortRules).reverse();a=v.slice(v.indexOf(e)+1)}return a},o.prototype.addType=function(t,e){this.properties.addType(t,e)},o.prototype.getType=function(t){return this.properties.getType(t)},o.prototype.getTypes=function(){return this.properties.getTypes()},o.prototype.createType=function(t,e){var n=void 0===e?{}:e,o=n.model,i=void 0===o?{}:o,r=n.view,s=void 0===r?{}:r,a=this.config,l=this.getType(t);if(l)return new l.view(tZ({model:new l.model(i),config:a},s))},o.prototype.render=function(){var t=this,e=t.config,n=t.em,o=t.SectView,i=o&&o.el;return this.SectView=new KR({el:i,em:n,config:e,module:this,collection:this.sectors}),this.SectView.render().el},o.prototype._logNoSector=function(t){var e=this.em;e&&e.logWarning("'".concat(t,"' sector not found"))},o.prototype.__emitCmpStyleUpdate=function(t,e){void 0===e&&(e={});var n=this.em;if(!t.__p){var o=this.getSelectedAll(),i=e.components||n.getSelectedAll(),r=Array.isArray(i)?i:[i],s=tZ({},t);delete s.__p,r.forEach((function(t){return!o.includes(t)&&t.__onStyleChange(s)}))}},o.prototype.__upProps=function(t){var e=this;void 0===t&&(t={});var n=this.getSelected();if(n){var o=this.sectors,i=this.model.get('component'),r=this.getSelectedParents(),s=n.getStyle(),a=r.map((function(t){return{target:t,style:t.getStyle()}}));o.map((function(n){n.getProperties().map((function(n){e.__upProp(n,s,a,t)}))})),o.forEach((function(t){var e=t.getProperties();e.forEach((function(t){var e=t.__checkVisibility({target:n,component:i,sectors:o});t.set('visible',e)}));var r=e.some((function(t){return t.isVisible()}));t.set('visible',r)}))}},o.prototype.__upProp=function(t,e,n,o){var i=this,r=t.getName(),s=e[r],a=gZ(s),l='stack'===t.getType(),c='composite'===t.getType(),u=tZ(tZ({},o),{__up:!0}),h=!c&&!l,p=l?t.__getLayersFromStyle(e):[],d=c?t.__getPropsFromStyle(e):{},f=a?s:null,g=null;if(l&&null===p||c&&null===d){var m=l?'__getLayersFromStyle':'__getPropsFromStyle';if(y=n.filter((function(e){return null!==t[m](e.style)}))[0]){f=y.style[r],g=y.target;var v=t[m](y.style);l?p=v:d=v}}else if(!a){var y;f=null,(y=n.filter((function(t){return gZ(t.style[r])}))[0])&&(f=y.style[r],g=y.target)}if(t.__setParentTarget(g),h&&t.__getFullValue()!==f&&t.upValue(f,u),l&&t.__setLayers(p||[]),c){var _=t.getProperties();if(t.isDetached()){var O=t.__getPropsFromStyle(e,{byName:!0})||{},b=n.map((function(e){return tZ(tZ({},e),{style:t.__getPropsFromStyle(e.style,{byName:!0})||{}})}));_.map((function(t){return i.__upProp(t,O,b,o)}))}else t.__setProperties(d||{},u),t.getProperties().map((function(t){return t.__setParentTarget(g)}))}},o.prototype.destroy=function(){var t;[this.properties,this.sectors].forEach((function(t){t.reset(),t.stopListening()})),null===(t=this.SectView)||void 0===t||t.remove(),this.model.stopListening(),this.upAll.cancel()},o}(O);const yZ=vZ;var _Z=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),OZ=void 0&&(void 0).__assign||function(){return OZ=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},OZ.apply(this,arguments)},bZ=void 0&&(void 0).__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o["throw"](t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},wZ=void 0&&(void 0).__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},xZ=void 0&&(void 0).__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(t);i<o.length;i++)e.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(t,o[i])&&(n[o[i]]=t[o[i]])}return n},SZ=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))};a().$=l["default"];var kZ=[PQ,fQ,HQ,O$,PT,U,zC,yZ,OC,aA,u$,XA,N$,jT,hE,An,FT,IP],PZ=[cQ,hP,Ve,qk];!function(e){var n=e.$;if(n&&n.prototype&&'jQuery'!==n.prototype.constructor.name){var o=n.fn;o.hide=function(){return this.css('display','none')},o.show=function(){return this.css('display','block')},o.focus=function(){var t=this.get(0);return t&&t.focus(),this},o.bind=function(t,e){return this.on(t,e)},o.unbind=function(e,n){if((0,t.isObject)(e)){for(var o in e)e.hasOwnProperty(o)&&this.off(o,e[o]);return this}return this.off(e,n)},o.click=function(t){return t?this.on('click',t):this.trigger('click')},o.change=function(t){return t?this.on('change',t):this.trigger('change')},o.keydown=function(t){return t?this.on('keydown',t):this.trigger('keydown')},o.delegate=function(t,e,n,o){return o||(o=n),this.on(e,t,(function(t){t.data=n,o(t)}))},o.scrollLeft=function(){var t=this.get(0),e=(t=9==t.nodeType?t.defaultView:t)instanceof Window?t:null;return e?e.pageXOffset:t.scrollLeft||0},o.scrollTop=function(){var t=this.get(0),e=(t=9==t.nodeType?t.defaultView:t)instanceof Window?t:null;return e?e.pageYOffset:t.scrollTop||0};var i=n.prototype.offset;o.offset=function(t){var e,n;return t&&(e=t.top,n=t.left),void 0!==e&&this.css('top',"".concat(e,"px")),void 0!==n&&this.css('left',"".concat(n,"px")),i.call(this)},n.map=function(t,e){for(var n=[],o=0;o<t.length;o++)n.push(e(t[o],o));return n};var r=Array.prototype.indexOf;n.inArray=function(t,e,n){return null==e?-1:r.call(e,t,n)},n.Event=function(t,e){if(!(this instanceof n.Event))return new n.Event(t,e);this.type=t,this.isDefaultPrevented=function(){return!1}}}}({$:l["default"]});var CZ={debug:console.log,info:console.info,warning:console.warn,error:console.error},TZ=function(n){function o(e){void 0===e&&(e={});var o=n.call(this)||this;o.__skip=!1,o.defaultRunning=!1,o.destroyed=!1,o._config=e;var i=o.config;o.set('Config',e),o.set('modules',[]),o.set('toLoad',[]),o.set('storables',[]),o.set('selected',new f),o.set('dmode',i.dragMode);var r=i.el,s=i.log,a=!0===s?(0,t.keys)(CZ):(0,t.isArray)(s)?s:[];return(0,t.bindAll)(o,'initBaseColorPicker'),r&&i.fromElement&&(i.components=r.innerHTML),o.attrsOrig=r?(0,t.toArray)(r.attributes).reduce((function(t,e){return t[e.nodeName]=e.nodeValue,t}),{}):'',i.components&&!i.pageManager&&(i.pageManager={pages:[{component:i.components}]}),kZ.forEach((function(t){return o.loadModule(t)})),PZ.forEach((function(t){return o.loadStorableModule(t)})),o.on('change:componentHovered',o.componentHovered,o),o.on('change:changesCount',o.updateChanges,o),o.on('change:readyLoad change:readyCanvas',o._checkReady,o),a.forEach((function(t){return o.listenLog(t)})),[{from:'change:selectedComponent',to:'component:toggled'}].forEach((function(t){var e=t.from,n=t.to;o.listenTo(o,e,(function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];o.trigger.apply(o,SZ([n],t,!1)),o.logWarning("The event '".concat(e,"' is deprecated, replace it with '").concat(n,"'"))}))})),o}return _Z(o,n),o.prototype.defaults=function(){return{editing:0,selected:0,clipboard:null,dmode:0,componentHovered:null,previousModel:null,changesCount:0,storables:[],modules:[],toLoad:[],opened:{},device:''}},Object.defineProperty(o.prototype,"storables",{get:function(){return this.get('storables')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"modules",{get:function(){return this.get('modules')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"toLoad",{get:function(){return this.get('toLoad')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"selected",{get:function(){return this.get('selected')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"shallow",{get:function(){return this.get('shallow')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"I18n",{get:function(){return this.get('I18n')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Utils",{get:function(){return this.get('Utils')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Commands",{get:function(){return this.get('Commands')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Keymaps",{get:function(){return this.get('Keymaps')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Modal",{get:function(){return this.get('Modal')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Panels",{get:function(){return this.get('Panels')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"CodeManager",{get:function(){return this.get('CodeManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"UndoManager",{get:function(){return this.get('UndoManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"RichTextEditor",{get:function(){return this.get('RichTextEditor')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Canvas",{get:function(){return this.get('Canvas')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Editor",{get:function(){return this.get('Editor')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Components",{get:function(){return this.get('DomComponents')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Css",{get:function(){return this.get('CssComposer')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Blocks",{get:function(){return this.get('BlockManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Selectors",{get:function(){return this.get('SelectorManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Storage",{get:function(){return this.get('StorageManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Traits",{get:function(){return this.get('TraitManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Parser",{get:function(){return this.get('Parser')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Layers",{get:function(){return this.get('LayerManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Assets",{get:function(){return this.get('AssetManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Devices",{get:function(){return this.get('DeviceManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Pages",{get:function(){return this.get('PageManager')},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"Styles",{get:function(){return this.get('StyleManager')},enumerable:!1,configurable:!0}),o.prototype._checkReady=function(){this.get('readyLoad')&&this.get('readyCanvas')&&!this.get('ready')&&this.set('ready',!0)},o.prototype.getContainer=function(){return this.config.el},o.prototype.listenLog=function(t){this.listenTo(this,"log:".concat(t),CZ[t])},Object.defineProperty(o.prototype,"config",{get:function(){return this._config},enumerable:!1,configurable:!0}),o.prototype.getConfig=function(e){var n=this.config;return(0,t.isUndefined)(e)?n:n[e]},o.prototype.loadOnStart=function(){var t=this,e=this.config,n=e.projectData,i=e.headless,r=this.Storage;this.toLoad.reverse().forEach((function(t){return t.onLoad()}));var s=function(){t.modules.forEach((function(e){return e.postLoad&&e.postLoad(t)})),t.set('readyLoad',1)};i?(n&&this.loadData(n),s()):this._storageTimeout=setTimeout((function(){return bZ(t,void 0,void 0,(function(){var t;return wZ(this,(function(e){switch(e.label){case 0:return n?(this.loadData(n),[3,5]):[3,1];case 1:if(!(null==r?void 0:r.canAutoload()))return[3,5];e.label=2;case 2:return e.trys.push([2,4,,5]),[4,this.load()];case 3:return e.sent(),[3,5];case 4:return t=e.sent(),this.logError(t),[3,5];case 5:return s(),[2]}}))}))}));var a=new o({noticeOnUnload:!1,storageManager:!1,undoManager:!1});a.Pages.onLoad(),a.Canvas.postLoad(),this.set('shallow',a)},o.prototype.updateChanges=function(t,e,n){var o=this,i=this.Storage,r=this.getDirtyCount();n.isClear||(this.updateItr&&clearTimeout(this.updateItr),this.updateItr=setTimeout((function(){return o.trigger('update')}))),this.config.noticeOnUnload&&(window.onbeforeunload=r?function(){return!0}:null),i.isAutosave()&&r>=i.getStepsBeforeSave()&&this.store().catch((function(t){return o.logError(t)}))},o.prototype.loadModule=function(t){var e=new t(this);return this.set(e.name,e),e.onLoad&&this.toLoad.push(e),this.modules.push(e),e},o.prototype.loadStorableModule=function(t){var e=this.loadModule(t);return this.storables.push(e),e},o.prototype.init=function(t,e){void 0===e&&(e={}),this.destroyed&&(this.initialize(e),this.destroyed=!1),this.set('Editor',t)},o.prototype.getEditor=function(){return this.get('Editor')},o.prototype.handleUpdates=function(t,e,n){var o=this;void 0===n&&(n={}),this.__skip||n.temporary||n.noCount||n.avoidStore||!this.get('ready')||(this.timedInterval&&clearTimeout(this.timedInterval),this.timedInterval=setTimeout((function(){var t=o.getDirtyCount()||0,e=(n.unset,xZ(n,["unset"]));o.set('changesCount',t+1,e)}),0))},o.prototype.changesUp=function(t){this.handleUpdates(0,0,t)},o.prototype.componentHovered=function(t,e,n){var o=this.previous('componentHovered');o&&this.trigger('component:unhovered',o,n),e&&this.trigger('component:hovered',e,n)},o.prototype.getSelected=function(){return this.selected.lastComponent()},o.prototype.getSelectedAll=function(){return this.selected.allComponents()},o.prototype.setSelected=function(e,n){var o=this;void 0===n&&(n={});var i=n.event,r=i&&(i.ctrlKey||i.metaKey),s=(i||{}).shiftKey,a=((0,t.isArray)(e)?e:[e]).map((function(t){var e,n;return(null===(n=null===(e=null==t?void 0:t.delegate)||void 0===e?void 0:e.select)||void 0===n?void 0:n.call(e,t))||t})).filter(Boolean),l=this.getSelectedAll(),c=this.getConfig().multipleSelection,u=(0,t.isArray)(e);u&&this.removeSelected(l.filter((function(e){return!(0,t.contains)(a,e)}))),a.forEach((function(e){if(e&&(o.trigger('component:select:before',e,n),!e.get('selectable')||n.abort)){if(!n.useValid)return;for(var i=e.parent();i&&!i.get('selectable');)i=i.parent();e=i}if(r&&c)return o.toggleSelected(e);if(s&&c){o.clearSelection(o.Canvas.getWindow());var a,h,p=e.collection,d=e.index();if(o.getSelectedAll().forEach((function(e){var n=e.collection,o=e.index();n===p&&(o<d?a=(0,t.isUndefined)(a)?o:Math.max(a,o):o>d&&(h=(0,t.isUndefined)(h)?o:Math.min(h,o)))})),!(0,t.isUndefined)(a))for(;a!==d;)o.addSelected(p.at(a)),a++;if(!(0,t.isUndefined)(h))for(;h!==d;)o.addSelected(p.at(h)),h--;return o.addSelected(e)}!u&&o.removeSelected(l.filter((function(t){return t!==e}))),o.addSelected(e,n)}))},o.prototype.addSelected=function(e,n){var o=this;void 0===n&&(n={}),((0,t.isArray)(e)?e:[e]).forEach((function(e){var i=o.selected;e&&e.get('selectable')&&!e.parents().some((function(t){return i.hasComponent(t)}))&&(n.forceChange&&o.removeSelected(e,n),i.allComponents().filter((function(n){return(0,t.contains)(n.parents(),e)})).forEach((function(t){return o.removeSelected(t,n)})),i.addComponent(e,n),o.trigger('component:select',e,n),o.Canvas.addSpot({type:We.q.Select,component:e}))}))},o.prototype.removeSelected=function(e,n){var o=this;void 0===n&&(n={}),this.selected.removeComponent(e,n),((0,t.isArray)(e)?e:[e]).forEach((function(t){return o.Canvas.removeSpots({type:We.q.Select,component:t})}))},o.prototype.toggleSelected=function(e,n){var o=this;void 0===n&&(n={}),((0,t.isArray)(e)?e:[e]).forEach((function(t){o.selected.hasComponent(t)?o.removeSelected(t,n):o.addSelected(t,n)}))},o.prototype.setHovered=function(t,e){var n=this;void 0===e&&(e={});var o=function(t,e){var o=n,i=o.config,r=o.Canvas,s=n.getHovered(),a=n.getSelectedAll(),l=We.q.Hover,c=We.q.Spacing;n.set('componentHovered',t||null,e),s&&(r.removeSpots({type:l,component:s}),r.removeSpots({type:c,component:s})),t&&(r.addSpot({type:l,component:t}),a.includes(t)&&!i.showOffsetsSelected||r.addSpot({type:c,component:t}))};if(!t)return o();var i='component:hover';if(e.forceChange&&o(),this.trigger("".concat(i,":before"),t,e),!t.get('hoverable')){if(!e.useValid||e.abort)return;for(var r=t.parent();r&&!r.get('hoverable');)r=r.parent();t=r}e.abort||(o(t,e),this.trigger(i,t,e))},o.prototype.getHovered=function(){return this.get('componentHovered')},o.prototype.setComponents=function(t,e){return void 0===e&&(e={}),this.Components.setComponents(t,e)},o.prototype.getComponents=function(){var t=this.Components,e=this.CodeManager;if(t&&e){var n=t.getComponents();return e.getCode(n,'json')}},o.prototype.setStyle=function(t,e){void 0===e&&(e={});var n=this.Css;return n.clear(e),n.getAll().add(t,e),this},o.prototype.addStyle=function(e,n){void 0===n&&(n={});var o=this.getStyle().add(e,n);return(0,t.isArray)(o)?o:[o]},o.prototype.getStyle=function(){return this.Css.getAll()},o.prototype.setState=function(t){return this.set('state',t),this},o.prototype.getState=function(){return this.get('state')||''},o.prototype.getHtml=function(t){void 0===t&&(t={});var e=this.config,n=e.optsHtml,o=e.jsInHtml?this.getJs(t):'',i=t.component||this.Components.getComponent(),r=i?this.CodeManager.getCode(i,'html',OZ(OZ({},n),t)):'';return r+=o?"<script>".concat(o,"<\/script>"):''},o.prototype.getCss=function(e){void 0===e&&(e={});var n=this.config,o=n.optsCss,i=e.avoidProtected,r=(0,t.isUndefined)(e.keepUnusedStyles)?n.keepUnusedStyles:e.keepUnusedStyles,s=this.Css,a=e.component||this.Components.getComponent(),l=i?'':n.protectedCss,c=a&&this.CodeManager.getCode(a,'css',OZ(OZ({cssc:s,keepUnusedStyles:r},o),e));return a?e.json?c:l+c:''},o.prototype.getJs=function(t){void 0===t&&(t={});var e=t.component||this.Components.getWrapper();return e?this.CodeManager.getCode(e,'js').trim():''},o.prototype.store=function(t){return bZ(this,void 0,void 0,(function(){var e;return wZ(this,(function(n){switch(n.label){case 0:return e=this.storeData(),[4,this.Storage.store(e,t)];case 1:return n.sent(),this.clearDirtyCount(),[2,e]}}))}))},o.prototype.load=function(t,n){return void 0===n&&(n={}),bZ(this,void 0,void 0,(function(){var o;return wZ(this,(function(i){switch(i.label){case 0:return[4,this.Storage.load(t)];case 1:return o=i.sent(),this.loadData(o),[4,(0,e.wait)()];case 2:return i.sent(),n.clear&&(this.UndoManager.clear(),this.clearDirtyCount()),[2,o]}}))}))},o.prototype.storeData=function(){var t={},e=this.getEditing();return e&&e.trigger('sync:content',{noCount:!0}),this.storables.forEach((function(e){t=OZ(OZ({},t),e.store(1))})),JSON.parse(JSON.stringify(t))},o.prototype.loadData=function(t){return void 0===t&&(t={}),(0,e.isEmptyObj)(t)||(this.storables.forEach((function(t){return t.clear()})),this.storables.forEach((function(e){return e.load(t)}))),t},o.prototype.getDeviceModel=function(){var t=this.get('device');return this.Devices.get(t)},o.prototype.runDefault=function(t){void 0===t&&(t={});var e=this.get('Commands').get(this.config.defaultCommand);e&&!this.defaultRunning&&(e.stop(this,this,t),e.run(this,this,t),this.defaultRunning=!0)},o.prototype.stopDefault=function(t){void 0===t&&(t={});var e=this.get('Commands').get(this.config.defaultCommand);e&&this.defaultRunning&&(e.stop(this,this,t),this.defaultRunning=!1)},o.prototype.refreshCanvas=function(t){void 0===t&&(t={}),this.set('canvasOffset',null),this.set('canvasOffset',this.Canvas.getOffset()),t.tools&&this.trigger('canvas:updateTools')},o.prototype.clearSelection=function(t){var e;null===(e=(t||window).getSelection())||void 0===e||e.removeAllRanges()},o.prototype.getCurrentMedia=function(){var t=this.config,e=this.getDeviceModel(),n=t.mediaCondition,o=t.devicePreviewMode,i=e&&e.get('widthMedia');return e&&i&&!o?"(".concat(n,": ").concat(i,")"):''},o.prototype.getWrapper=function(){return this.Components.getWrapper()},o.prototype.setCurrentFrame=function(t){return this.set('currentFrame',t)},o.prototype.getCurrentFrame=function(){return this.get('currentFrame')},o.prototype.getCurrentFrameModel=function(){var t;return null===(t=this.getCurrentFrame()||{})||void 0===t?void 0:t.model},o.prototype.getIcon=function(t){return(this.config.icons||{})[t]||''},o.prototype.getDirtyCount=function(){return this.get('changesCount')},o.prototype.clearDirtyCount=function(){return this.set({changesCount:0},{isClear:!0})},o.prototype.getZoomDecimal=function(){return this.Canvas.getZoomDecimal()},o.prototype.getZoomMultiplier=function(){return this.Canvas.getZoomMultiplier()},o.prototype.setDragMode=function(t){return this.set('dmode',t)},o.prototype.getDragMode=function(t){return(null==t?void 0:t.getDragMode())||this.get('dmode')||''},o.prototype.t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this.get('I18n');return null==n?void 0:n.t.apply(n,t)},o.prototype.inAbsoluteMode=function(t){return'absolute'===this.getDragMode(t)},o.prototype.destroyAll=function(){var t=this,n=this.config,o=this.view,i=this.getEditor(),r=(n.grapesjs||{}).editors,s=void 0===r?[]:r,a=this.get('shallow');this._storageTimeout&&clearTimeout(this._storageTimeout),null==a||a.destroyAll(),this.stopListening(),this.stopDefault(),this.modules.slice().reverse().forEach((function(t){return t.destroy()})),o&&o.remove(),this.clear({silent:!0}),this.destroyed=!0,['_config','view','_previousAttributes','_events','_listeners'].forEach((function(e){return t[e]={}})),s.splice(s.indexOf(i),1),(0,e.hasWin)()&&(0,l["default"])(n.el).empty().attr(this.attrsOrig)},o.prototype.getEditing=function(){var t=this.get('editing');return t&&t.model||void 0},o.prototype.setEditing=function(t){return this.set('editing',t),this},o.prototype.isEditing=function(){return!!this.get('editing')},o.prototype.log=function(t,e){void 0===e&&(e={});var n=e.ns,o=e.level,i=void 0===o?'debug':o;if(this.trigger('log',t,e),i&&this.trigger("log:".concat(i),t,e),n){var r="log-".concat(n);this.trigger(r,t,e),i&&this.trigger("".concat(r,":").concat(i),t,e)}},o.prototype.logInfo=function(t,e){this.log(t,OZ(OZ({},e),{level:'info'}))},o.prototype.logWarning=function(t,e){this.log(t,OZ(OZ({},e),{level:'warning'}))},o.prototype.logError=function(t,e){this.log(t,OZ(OZ({},e),{level:'error'}))},o.prototype.initBaseColorPicker=function(t,e){void 0===e&&(e={});var n=this.config,o=n.colorPicker,i=void 0===o?{}:o,r=n.el,s=n.stylePrefix;return(0,l["default"])(t).spectrum(OZ(OZ({containerClassName:"".concat(s,"one-bg ").concat(s,"two-color"),appendTo:r||'body',maxSelectionSize:8,showPalette:!0,palette:[],showAlpha:!0,chooseText:'Ok',cancelText:'⨯'},e),i))},o.prototype.skip=function(t){this.__skip=!0;var e=this.UndoManager;e?e.skip(t):t(),this.__skip=!1},o.prototype.data=function(e,n,o){var i='_gjs-data';if(e[i]||(e[i]={}),(0,t.isUndefined)(o))return e[i][n];e[i][n]=o},o}(u.Hn);const EZ=TZ;var QZ=void 0&&(void 0).__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),AZ=function(t){function n(e){var n=t.call(this,{model:e})||this,o=e.attributes,i=o.Panels,r=o.UndoManager;return e.view=n,e.once('change:ready',(function(){i.active(),i.disableButtons(),r.clear(),setTimeout((function(){e.trigger('load',e.get('Editor')),e.clearDirtyCount()}))})),n}return QZ(n,t),n.prototype.render=function(){var t=this,n=this.$el,o=this.model,i=o.attributes,r=i.Panels,s=i.Canvas,a=o.config,c=o.modules,u=a.stylePrefix,h=["".concat(u,"editor")];!a.customUI&&h.push("".concat(u,"one-bg ").concat(u,"two-color"));var p=(0,l["default"])(a.el||"body ".concat(a.container));a.cssIcons&&(0,e.appendStyles)(a.cssIcons,{unique:!0,prepand:!0}),n.empty(),a.width&&p.css('width',a.width),a.height&&p.css('height',a.height),n.append(s.render()),n.append(r.render());var d=o.get('shallow').get('Canvas').render();return d.style.display='none',n.append(d),n.attr('class',h.join(' ')),p.addClass("".concat(u,"editor-cont")).empty().append(n),c.forEach((function(e){return e.postRender&&e.postRender(t)})),this},n}(u.G7);const $Z=AZ;var jZ=void 0&&(void 0).__assign||function(){return jZ=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},jZ.apply(this,arguments)},RZ=void 0&&(void 0).__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function s(t){try{l(o.next(t))}catch(t){r(t)}}function a(t){try{l(o["throw"](t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((o=o.apply(t,e||[])).next())}))},ZZ=void 0&&(void 0).__generator||function(t,e){var n,o,i,r,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(n=1,o&&(i=2&a[0]?o["return"]:a[0]?o["throw"]||((i=o["return"])&&i.call(o),0):o.next)&&!(i=i.call(o,a[1])).done)return i;switch(o=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,o=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(t){a=[6,t],o=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},MZ=void 0&&(void 0).__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var o,i=0,r=e.length;i<r;i++)!o&&i in e||(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))},VZ=function(){function t(t,e){var n;void 0===t&&(t={}),void 0===e&&(e={}),this.html=i,this.config=jZ(jZ(jZ({},r),t),{pStylePrefix:null!==(n=t.stylePrefix)&&void 0!==n?n:r.stylePrefix}),this.em=new EZ(this.config),this.$=e.$,this.em.init(this),this.editor=this.em}return Object.defineProperty(t.prototype,"Config",{get:function(){return this.em.config},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"I18n",{get:function(){return this.em.I18n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Utils",{get:function(){return this.em.Utils},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Commands",{get:function(){return this.em.Commands},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Keymaps",{get:function(){return this.em.Keymaps},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Modal",{get:function(){return this.em.Modal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Panels",{get:function(){return this.em.Panels},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Canvas",{get:function(){return this.em.Canvas},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Parser",{get:function(){return this.em.Parser},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CodeManager",{get:function(){return this.em.CodeManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"UndoManager",{get:function(){return this.em.UndoManager},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"RichTextEditor",{get:function(){return this.em.RichTextEditor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Pages",{get:function(){return this.em.Pages},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Components",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"DomComponents",{get:function(){return this.em.Components},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Layers",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"LayerManager",{get:function(){return this.em.Layers},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Css",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"CssComposer",{get:function(){return this.em.Css},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Storage",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"StorageManager",{get:function(){return this.em.Storage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Assets",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"AssetManager",{get:function(){return this.em.Assets},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Blocks",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"BlockManager",{get:function(){return this.em.Blocks},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Traits",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"TraitManager",{get:function(){return this.em.Traits},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Selectors",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"SelectorManager",{get:function(){return this.em.Selectors},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Styles",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"StyleManager",{get:function(){return this.em.Styles},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Devices",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"DeviceManager",{get:function(){return this.em.Devices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"EditorModel",{get:function(){return this.em},enumerable:!1,configurable:!0}),t.prototype.getConfig=function(t){return this.em.getConfig(t)},t.prototype.getHtml=function(t){return this.em.getHtml(t)},t.prototype.getCss=function(t){return this.em.getCss(t)},t.prototype.getJs=function(t){return this.em.getJs(t)},t.prototype.getComponents=function(){return this.Components.getComponents()},t.prototype.getWrapper=function(){return this.Components.getWrapper()},t.prototype.setComponents=function(t,e){return void 0===e&&(e={}),this.em.setComponents(t,e),this},t.prototype.addComponents=function(t,e){return this.getWrapper().append(t,e)},t.prototype.getStyle=function(){return this.em.Css.getAll()},t.prototype.setStyle=function(t,e){return void 0===e&&(e={}),this.em.setStyle(t,e),this},t.prototype.addStyle=function(t,e){return void 0===e&&(e={}),this.em.addStyle(t,e)},t.prototype.getSelected=function(){return this.em.getSelected()},t.prototype.getSelectedAll=function(){return this.em.getSelectedAll()},t.prototype.getSelectedToStyle=function(){var t=this.em.getSelected();if(t)return this.StyleManager.getModelToStyle(t)},t.prototype.select=function(t,e){return this.em.setSelected(t,e),this},t.prototype.selectAdd=function(t){return this.em.addSelected(t),this},t.prototype.selectRemove=function(t){return this.em.removeSelected(t),this},t.prototype.selectToggle=function(t){return this.em.toggleSelected(t),this},t.prototype.getEditing=function(){return this.em.getEditing()},t.prototype.setDevice=function(t){return this.em.set('device',t),this},t.prototype.getDevice=function(){return this.em.get('device')},t.prototype.runCommand=function(t,e){return void 0===e&&(e={}),this.Commands.run(t,e)},t.prototype.stopCommand=function(t,e){return void 0===e&&(e={}),this.Commands.stop(t,e)},t.prototype.store=function(t){return RZ(this,void 0,void 0,(function(){return ZZ(this,(function(e){switch(e.label){case 0:return[4,this.em.store(t)];case 1:return[2,e.sent()]}}))}))},t.prototype.load=function(t,e){return void 0===e&&(e={}),RZ(this,void 0,void 0,(function(){return ZZ(this,(function(n){switch(n.label){case 0:return[4,this.em.load(t,e)];case 1:return[2,n.sent()]}}))}))},t.prototype.getProjectData=function(){return this.em.storeData()},t.prototype.loadProjectData=function(t){return this.em.loadData(t)},t.prototype.storeData=function(){return this.em.storeData()},t.prototype.loadData=function(t){return this.em.loadData(t)},t.prototype.getContainer=function(){return this.config.el},t.prototype.getDirtyCount=function(){return this.em.getDirtyCount()},t.prototype.clearDirtyCount=function(){return this.em.clearDirtyCount()},t.prototype.refresh=function(t){this.em.refreshCanvas(t)},t.prototype.setCustomRte=function(t){this.RichTextEditor.customRte=t},t.prototype.setCustomParserCss=function(t){return this.Parser.getConfig().parserCss=t,this},t.prototype.setDragMode=function(t){return this.em.setDragMode(t),this},t.prototype.log=function(t,e){return void 0===e&&(e={}),this.em.log(t,e),this},t.prototype.t=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return(t=this.em).t.apply(t,e)},t.prototype.on=function(t,e){return this.em.on(t,e),this},t.prototype.once=function(t,e){return this.em.once(t,e),this},t.prototype.off=function(t,e){return this.em.off(t,e),this},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return this.em.trigger.apply(this.em,MZ([t],e,!0)),this},t.prototype.destroy=function(){this.em&&(this.em.destroyAll(),this.editorView=void 0)},t.prototype.getEl=function(){var t;return null===(t=this.editorView)||void 0===t?void 0:t.el},t.prototype.getModel=function(){return this.em},t.prototype.render=function(){var t;return null===(t=this.editorView)||void 0===t||t.remove(),this.editorView=new $Z(this.em),this.editorView.render().el},t.prototype.onReady=function(t){this.em.get('ready')?t(this):this.em.on('load',t)},t}();const DZ=VZ;var IZ=function(n,o){return(0,t.isString)(n)?function(t,n){var o=n.get(t);if(!o){var i=(0,e.getGlobal)()[t];o=(null==i?void 0:i.default)||i}return o}(n,o):(null==n?void 0:n.default)||n},NZ=function(t,e){t.getModel().logWarning("Plugin ".concat(e," not found"),{context:'plugins',plugin:e})},WZ=function(){function t(){this.plugins={}}return t.prototype.add=function(t,e){var n=this.get(t);return n||(this.plugins[t]=e,e)},t.prototype.get=function(t){return this.plugins[t]},t.prototype.getAll=function(){return this.plugins},t}();const XZ=WZ;var LZ=void 0&&(void 0).__assign||function(){return LZ=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},LZ.apply(this,arguments)};!function(){if((0,e.hasWin)()&&function(){for(var t,e=window.navigator.userAgent,n=[['edge',/Edge\/([0-9\._]+)/],['ie',/MSIE\s(7\.0)/],['ie',/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],['ie',/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/]],o=0;o<n.length;o++){if(t=n[o][1].exec(e))break}return!!t}()){var t=DOMImplementation.prototype.createHTMLDocument;DOMImplementation.prototype.createHTMLDocument=function(e){return e||(e=''),t.apply(document.implementation,[e])}}}();var YZ=new XZ,zZ=[],qZ={$:l["default"],editors:zZ,plugins:YZ,usePlugin:function(t,e){var n=IZ(t,YZ);return function(o){n?n(o,e||{}):NZ(o,t)}},version:'0.21.13',init:function(e){void 0===e&&(e={});var n=e.headless,o=e.container;if(!o&&!n)throw new Error("'container' is required");var i=LZ(LZ({autorender:!0,plugins:[],pluginsOpts:{}},e),{grapesjs:this,el:n?void 0:(0,t.isElement)(o)?o:document.querySelector(o)}),r=new DZ(i,{$:l["default"]}),s=r.getModel();return i.plugins.forEach((function(t){var e=IZ(t,YZ),n=i.pluginsOpts[t]||{};e?e(r,n):NZ(r,t)})),s.loadOnStart(),i.autorender&&!n&&r.render(),zZ.push(r),r}};const UZ=qZ})(),o=o["default"]})()));
//# sourceMappingURL=grapes.min.js.map